import{S as M,i as I,s as w,e as h,c as d,a as y,d as u,b as f,f as m,k as b,t as P,n as g,g as T,H as v,M as q,U as J,l as L,a9 as S,aa as N,I as k,A as C,Z as W}from"../chunks/vendor-f9d72692.js";import{b as A}from"../chunks/paths-28a87002.js";import{e as F}from"../chunks/utils-836203e5.js";function D(r,a,t){const o=r.slice();return o[7]=a[t],o}function x(r){let a,t=r[2],o=[];for(let l=0;l<t.length;l+=1)o[l]=E(D(r,t,l));return{c(){a=h("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){a=d(l,"DIV",{class:!0});var n=y(a);for(let s=0;s<o.length;s+=1)o[s].l(n);n.forEach(u),this.h()},h(){f(a,"class","controls svelte-1ve7sum")},m(l,n){m(l,a,n);for(let s=0;s<o.length;s+=1)o[s].m(a,null)},p(l,n){if(n&6){t=l[2];let s;for(s=0;s<t.length;s+=1){const p=D(l,t,s);o[s]?o[s].p(p,n):(o[s]=E(p),o[s].c(),o[s].m(a,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=t.length}},d(l){l&&u(a),J(o,l)}}}function E(r){let a,t,o,l=F(r[7])+"",n,s,p,c;return{c(){a=h("label"),t=h("input"),o=b(),n=P(l),s=b(),this.h()},l(i){a=d(i,"LABEL",{class:!0});var e=y(a);t=d(e,"INPUT",{type:!0,name:!0}),o=g(e),n=T(e,l),s=g(e),e.forEach(u),this.h()},h(){f(t,"type","radio"),f(t,"name","plans"),t.__value=r[7],t.value=t.__value,r[6][0].push(t),f(a,"class","svelte-1ve7sum")},m(i,e){m(i,a,e),v(a,t),t.checked=t.__value===r[1],v(a,o),v(a,n),v(a,s),p||(c=q(t,"change",r[5]),p=!0)},p(i,e){e&2&&(t.checked=t.__value===i[1])},d(i){i&&u(a),r[6][0].splice(r[6][0].indexOf(t),1),p=!1,c()}}}function G(r){let a,t,o,l,n,s,p,c=r[0]&&x(r);return{c(){a=h("link"),t=h("script"),l=b(),n=h("div"),s=b(),c&&c.c(),p=L(),this.h()},l(i){const e=S('[data-svelte="svelte-1p75gtx"]',document.head);a=d(e,"LINK",{href:!0,rel:!0}),t=d(e,"SCRIPT",{src:!0});var _=y(t);_.forEach(u),e.forEach(u),l=g(i),n=d(i,"DIV",{id:!0,class:!0}),y(n).forEach(u),s=g(i),c&&c.l(i),p=L(),this.h()},h(){f(a,"href","https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css"),f(a,"rel","stylesheet"),N(t.src,o="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js")||f(t,"src",o),f(n,"id","map"),f(n,"class","svelte-1ve7sum")},m(i,e){v(document.head,a),v(document.head,t),m(i,l,e),m(i,n,e),m(i,s,e),c&&c.m(i,e),m(i,p,e)},p(i,[e]){i[0]?c?c.p(i,e):(c=x(i),c.c(),c.m(p.parentNode,p)):c&&(c.d(1),c=null)},i:k,o:k,d(i){u(a),u(t),i&&u(l),i&&u(n),i&&u(s),c&&c.d(i),i&&u(p)}}}async function z({fetch:r}){return{props:{topoData:await(await r(`${A}/plans.topojson`)).json()}}}function H(r,a,t){let{topoData:o}=a,l,n;const s=["assembly","assembly_letters","assembly_names","senate","senate_letters","senate_names"];C(()=>{mapboxgl.accessToken="pk.eyJ1IjoiaGFvaGFvbTEiLCJhIjoiY2tlenMwMDdhMDh5dDJxcWk1MXRpNWdrcSJ9.WJ50sc0kycv1demj-0tlMQ",t(4,l=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[-73.967,40.72],zoom:12})),l.on("load",async()=>{s.forEach(e=>{const _=W(o,o.objects[e]);l.addSource(e,{type:"geojson",data:_}),l.addLayer({id:e+"_fill",type:"fill",source:e,paint:{"fill-color":"#0080ff","fill-opacity":.1}}),l.addLayer({id:e+"_outline",type:"line",source:e,layout:{},paint:{"line-color":"#000","line-width":1}}),l.on("click",e+"_fill",j=>{new mapboxgl.Popup().setLngLat(j.lngLat).setHTML(j.features[0].properties[e]).addTo(l)})}),t(0,n=!0)})});let p=s[0];const c=[[]];function i(){p=this.__value,t(1,p)}return r.$$set=e=>{"topoData"in e&&t(3,o=e.topoData)},r.$$.update=()=>{r.$$.dirty&19&&n&&s.forEach(e=>{const _=e===p?"visible":"none";l.setLayoutProperty(`${e}_fill`,"visibility",_),l.setLayoutProperty(`${e}_outline`,"visibility",_),console.log(e,_)})},[n,p,s,o,l,i,c]}class B extends M{constructor(a){super();I(this,a,H,G,w,{topoData:3})}}export{B as default,z as load};

var Yt=Object.defineProperty,Kt=Object.defineProperties;var qt=Object.getOwnPropertyDescriptors;var Al=Object.getOwnPropertySymbols;var Jt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable;var Ol=(l,e,t)=>e in l?Yt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Ml=(l,e)=>{for(var t in e||(e={}))Jt.call(e,t)&&Ol(l,t,e[t]);if(Al)for(var t of Al(e))Qt.call(e,t)&&Ol(l,t,e[t]);return l},jl=(l,e)=>Kt(l,qt(e));import{S as cl,i as hl,s as ul,e as D,t as y,c as V,a as k,g as R,d as u,b as p,J as ue,f as U,H as c,h as ae,l as le,K as Te,L as Se,M as Ce,N as oe,O as Pl,P as _l,Q as Oe,R as He,T as Me,U as ze,V as De,x as $,r as Ne,u as re,w as ye,W as ll,k as L,n as I,X as Bl,Y as Xt,Z as Zt,I as Je,_ as $t,$ as xt,j as gl,m as dl,a0 as ml,o as vl,v as pl,a1 as es,A as ls,a2 as ts,a3 as ss,a4 as is,a5 as ns,a6 as Qe,a7 as Ll}from"../chunks/vendor-9292600a.js";import{b as Dl}from"../chunks/paths-28a87002.js";import{i as je,D as Il,p as ge,m as Xe,c as Ze,a as Nl,d as yl,u as as,r as Rl,b as bl,e as Ul,x as os,f as rs,g as fs,h as cs,j as hs,k as us}from"../chunks/utils-f9cad560.js";const Vl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},Tl=["44","99","ee"],$e=["asian","black","hispanic","white"],kl=["1990_earlier","1990_1999","2000_2009","2010_later"],wl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},El=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],xe=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],_s={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},el={Brooklyn:[35,670,600,520],Chinatown:[80,430,500,600],"All of NYC":[0,0,975,1420]},gs={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};function Hl(l,e,t){const s=l.slice();return s[49]=e[t],s}function zl(l,e,t){const s=l.slice();return s[52]=e[t].properties,s[53]=e[t].geometry.coordinates[0],s[54]=e[t].geometry.coordinates[1],s}function Fl(l,e,t){const s=l.slice();return s[57]=e[t].outline,s}function Gl(l,e,t){const s=l.slice();return s[49]=e[t],s[61]=t,s}function Wl(l){let e,t=l[35].label+"",s;return{c(){e=D("p"),s=y(t),this.h()},l(i){e=V(i,"P",{class:!0,style:!0});var a=k(e);s=R(a,t),a.forEach(u),this.h()},h(){p(e,"class","street-inspector svelte-1i7628d"),ue(e,"left",l[35].x+"px"),ue(e,"top","calc("+l[35].y+"px - 1em)")},m(i,a){U(i,e,a),c(e,s)},p(i,a){a[1]&16&&t!==(t=i[35].label+"")&&ae(s,t),a[1]&16&&ue(e,"left",i[35].x+"px"),a[1]&16&&ue(e,"top","calc("+i[35].y+"px - 1em)")},d(i){i&&u(e)}}}function Yl(l){let e,t,s,i,a;function n(){return l[39](l[61])}function o(){return l[40](l[49])}function f(){return l[41](l[49])}return{c(){e=Te("path"),this.h()},l(r){e=Se(r,"path",{d:!0,fill:!0,class:!0}),k(e).forEach(u),this.h()},h(){p(e,"d",t=l[5](l[49])),p(e,"fill",s=l[6](l[49],l[10],l[11],l[9])),p(e,"class","svelte-1i7628d"),Ce(e,"head",l[3][0]===je(l[49]))},m(r,h){U(r,e,h),i||(a=[oe(e,"click",n),oe(e,"contextmenu",Pl(o)),oe(e,"mousemove",Pl(f))],i=!0)},p(r,h){l=r,h[0]&48&&t!==(t=l[5](l[49]))&&p(e,"d",t),h[0]&3664&&s!==(s=l[6](l[49],l[10],l[11],l[9]))&&p(e,"fill",s),h[0]&24&&Ce(e,"head",l[3][0]===je(l[49]))},d(r){r&&u(e),i=!1,_l(a)}}}function Kl(l,e){let t,s,i=e[61]<e[28]&&Yl(e);return{key:l,first:null,c(){t=le(),i&&i.c(),s=le(),this.h()},l(a){t=le(),i&&i.l(a),s=le(),this.h()},h(){this.first=t},m(a,n){U(a,t,n),i&&i.m(a,n),U(a,s,n)},p(a,n){e=a,e[61]<e[28]?i?i.p(e,n):(i=Yl(e),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(a){a&&u(t),i&&i.d(a),a&&u(s)}}}function ql(l){let e,t;return{c(){e=Te("path"),this.h()},l(s){e=Se(s,"path",{class:!0,d:!0}),k(e).forEach(u),this.h()},h(){p(e,"class","mesh-bg svelte-1i7628d"),p(e,"d",t=l[12].includes(l[10])?l[18]:l[19])},m(s,i){U(s,e,i)},p(s,i){i[0]&791552&&t!==(t=s[12].includes(s[10])?s[18]:s[19])&&p(e,"d",t)},d(s){s&&u(e)}}}function Jl(l){let e,t,s,i,a=l[14],n=[];for(let o=0;o<a.length;o+=1)n[o]=Ql(Fl(l,a,o));return{c(){e=Te("g");for(let o=0;o<n.length;o+=1)n[o].c()},l(o){e=Se(o,"g",{});var f=k(e);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u)},m(o,f){U(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);i=!0},p(o,f){if(f[0]&16384){a=o[14];let r;for(r=0;r<a.length;r+=1){const h=Fl(o,a,r);n[r]?n[r].p(h,f):(n[r]=Ql(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},i(o){i||(Oe(()=>{s&&s.end(1),t=He(e,Me,{}),t.start()}),i=!0)},o(o){t&&t.invalidate(),s=ze(e,Me,{}),i=!1},d(o){o&&u(e),De(n,o),o&&s&&s.end()}}}function Ql(l){let e,t;return{c(){e=Te("path"),this.h()},l(s){e=Se(s,"path",{class:!0,d:!0}),k(e).forEach(u),this.h()},h(){p(e,"class","mesh-community svelte-1i7628d"),p(e,"d",t=l[57])},m(s,i){U(s,e,i)},p(s,i){i[0]&16384&&t!==(t=s[57])&&p(e,"d",t)},d(s){s&&u(e)}}}function Xl(l){let e,t,s,i,a,n;return{c(){e=Te("g"),t=Te("path"),this.h()},l(o){e=Se(o,"g",{});var f=k(e);t=Se(f,"path",{class:!0,d:!0}),k(t).forEach(u),f.forEach(u),this.h()},h(){p(t,"class","mesh-district svelte-1i7628d"),p(t,"d",s=l[37](l[16],l[24],l[23],l[29])),Ce(t,"showPluralities",l[9])},m(o,f){U(o,e,f),c(e,t),n=!0},p(o,f){(!n||f[0]&562102272&&s!==(s=o[37](o[16],o[24],o[23],o[29])))&&p(t,"d",s),f[0]&512&&Ce(t,"showPluralities",o[9])},i(o){n||(Oe(()=>{a&&a.end(1),i=He(e,Me,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=ze(e,Me,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function Zl(l){let e,t,s,i,a,n;return{c(){e=Te("g"),t=Te("path"),this.h()},l(o){e=Se(o,"g",{});var f=k(e);t=Se(f,"path",{class:!0,d:!0}),k(t).forEach(u),f.forEach(u),this.h()},h(){p(t,"class","mesh-district svelte-1i7628d"),p(t,"d",s=l[5](l[20](l[42],l[0])))},m(o,f){U(o,e,f),c(e,t),n=!0},p(o,f){(!n||f[0]&1114145&&s!==(s=o[5](o[20](o[42],o[0]))))&&p(t,"d",s)},i(o){n||(Oe(()=>{a&&a.end(1),i=He(e,Me,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=ze(e,Me,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function $l(l){let e,t,s,i,a,n=l[17],o=[];for(let h=0;h<n.length;h+=1)o[h]=et(zl(l,n,h));const f=h=>re(o[h],1,1,()=>{o[h]=null});let r=l[34]&&lt(l);return{c(){e=Te("g");for(let h=0;h<o.length;h+=1)o[h].c();t=le(),r&&r.c(),this.h()},l(h){e=Se(h,"g",{class:!0});var b=k(e);for(let w=0;w<o.length;w+=1)o[w].l(b);t=le(),r&&r.l(b),b.forEach(u),this.h()},h(){p(e,"class","labels svelte-1i7628d")},m(h,b){U(h,e,b);for(let w=0;w<o.length;w+=1)o[w].m(e,null);c(e,t),r&&r.m(e,null),a=!0},p(h,b){if(b[0]&6488064|b[1]&44){n=h[17];let w;for(w=0;w<n.length;w+=1){const m=zl(h,n,w);o[w]?(o[w].p(m,b),$(o[w],1)):(o[w]=et(m),o[w].c(),$(o[w],1),o[w].m(e,t))}for(Ne(),w=n.length;w<o.length;w+=1)f(w);ye()}h[34]?r?r.p(h,b):(r=lt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(h){if(!a){for(let b=0;b<n.length;b+=1)$(o[b]);Oe(()=>{i&&i.end(1),s=He(e,Me,{}),s.start()}),a=!0}},o(h){o=o.filter(Boolean);for(let b=0;b<o.length;b+=1)re(o[b]);s&&s.invalidate(),i=ze(e,Me,{}),a=!1},d(h){h&&u(e),De(o,h),r&&r.d(),h&&i&&i.end()}}}function xl(l){let e,t=l[52][l[16]]+"",s,i,a,n,o,f,r,h;function b(){return l[43](l[52])}function w(){return l[44](l[52])}return{c(){e=Te("text"),s=y(t),this.h()},l(m){e=Se(m,"text",{x:!0,y:!0,class:!0});var _=k(e);s=R(_,t),_.forEach(u),this.h()},h(){p(e,"x",i=l[53]),p(e,"y",a=l[54]),p(e,"class","svelte-1i7628d"),Ce(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},m(m,_){U(m,e,_),c(e,s),f=!0,r||(h=[oe(e,"click",b),oe(e,"mousemove",w),oe(e,"mouseout",l[45]),oe(e,"blur",void 0)],r=!0)},p(m,_){l=m,(!f||_[0]&196608)&&t!==(t=l[52][l[16]]+"")&&ae(s,t),(!f||_[0]&131072&&i!==(i=l[53]))&&p(e,"x",i),(!f||_[0]&131072&&a!==(a=l[54]))&&p(e,"y",a),_[0]&2293760&&Ce(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},i(m){f||(Oe(()=>{o&&o.end(1),n=He(e,Me,{}),n.start()}),f=!0)},o(m){n&&n.invalidate(),o=ze(e,Me,{}),f=!1},d(m){m&&u(e),m&&o&&o.end(),r=!1,_l(h)}}}function et(l){let e=l[16]in l[52]&&(!l[36]||l[36]&&l[33].includes(l[52][l[16]])),t,s,i=e&&xl(l);return{c(){i&&i.c(),t=le()},l(a){i&&i.l(a),t=le()},m(a,n){i&&i.m(a,n),U(a,t,n),s=!0},p(a,n){n[0]&196608|n[1]&36&&(e=a[16]in a[52]&&(!a[36]||a[36]&&a[33].includes(a[52][a[16]]))),e?i?(i.p(a,n),n[0]&196608|n[1]&36&&$(i,1)):(i=xl(a),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(Ne(),re(i,1,1,()=>{i=null}),ye())},i(a){s||($(i),s=!0)},o(a){re(i),s=!1},d(a){i&&i.d(a),a&&u(t)}}}function lt(l){let e,t;return{c(){e=Te("path"),this.h()},l(s){e=Se(s,"path",{class:!0,d:!0}),k(e).forEach(u),this.h()},h(){p(e,"class","mesh-onhover mesh-district svelte-1i7628d"),p(e,"d",t=l[0]&&l[5](ll(l[32],{type:l[0].type,geometries:l[0].geometries.filter(l[46])})))},m(s,i){U(s,e,i)},p(s,i){i[0]&65569|i[1]&10&&t!==(t=s[0]&&s[5](ll(s[32],{type:s[0].type,geometries:s[0].geometries.filter(s[46])})))&&p(e,"d",t)},d(s){s&&u(e)}}}function tt(l){let e,t,s,i=l[31],a=[];for(let n=0;n<i.length;n+=1)a[n]=st(Hl(l,i,n));return{c(){e=Te("g");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=Se(n,"g",{class:!0});var o=k(e);for(let f=0;f<a.length;f+=1)a[f].l(o);o.forEach(u),this.h()},h(){p(e,"class","streets svelte-1i7628d"),Ce(e,"showStreets",l[30])},m(n,o){U(n,e,o);for(let f=0;f<a.length;f+=1)a[f].m(e,null);t||(s=oe(e,"mousemove",l[48]),t=!0)},p(n,o){if(o[0]&1073741856|o[1]&129){i=n[31];let f;for(f=0;f<i.length;f+=1){const r=Hl(n,i,f);a[f]?a[f].p(r,o):(a[f]=st(r),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}o[0]&1073741824&&Ce(e,"showStreets",n[30])},d(n){n&&u(e),De(a,n),t=!1,s()}}}function st(l){let e,t,s,i;function a(...n){return l[47](l[49],...n)}return{c(){e=Te("path"),this.h()},l(n){e=Se(n,"path",{d:!0,class:!0}),k(e).forEach(u),this.h()},h(){p(e,"d",t=l[5](l[49])),p(e,"class","svelte-1i7628d")},m(n,o){U(n,e,o),s||(i=oe(e,"click",Pl(a)),s=!0)},p(n,o){l=n,o[0]&32|o[1]&1&&t!==(t=l[5](l[49]))&&p(e,"d",t)},d(n){n&&u(e),s=!1,i()}}}function ds(l){let e,t,s,i=[],a=new Map,n,o,f,r,h,b,w,m,_,g,T=l[35]&&Wl(l),E=l[4];const j=O=>je(O[49]);for(let O=0;O<E.length;O+=1){let C=Gl(l,E,O),X=j(C);a.set(X,i[O]=Kl(X,C))}let z=l[19]&&ql(l),F=l[13]&&Jl(l),A=l[15]&&!l[7]&&Xl(l),Y=l[7]&&Zl(l),J=(l[15]||l[7])&&$l(l),Z=l[31]&&tt(l);return{c(){T&&T.c(),e=L(),t=Te("svg"),s=Te("g");for(let O=0;O<i.length;O+=1)i[O].c();n=Te("g"),z&&z.c(),o=le(),F&&F.c(),f=le(),A&&A.c(),r=le(),Y&&Y.c(),h=le(),J&&J.c(),b=le(),Z&&Z.c(),this.h()},l(O){T&&T.l(O),e=I(O),t=Se(O,"svg",{viewBox:!0,style:!0,class:!0});var C=k(t);s=Se(C,"g",{class:!0});var X=k(s);for(let K=0;K<i.length;K+=1)i[K].l(X);X.forEach(u),n=Se(C,"g",{class:!0});var te=k(n);z&&z.l(te),o=le(),F&&F.l(te),f=le(),A&&A.l(te),r=le(),Y&&Y.l(te),h=le(),J&&J.l(te),b=le(),Z&&Z.l(te),te.forEach(u),C.forEach(u),this.h()},h(){p(s,"class","block-groups svelte-1i7628d"),p(n,"class","meshes svelte-1i7628d"),p(t,"viewBox",w=l[1].join(" ")),ue(t,"--font-size",(l[2]||.8)+"em"),p(t,"class","svelte-1i7628d")},m(O,C){T&&T.m(O,C),U(O,e,C),U(O,t,C),c(t,s);for(let X=0;X<i.length;X+=1)i[X].m(s,null);c(t,n),z&&z.m(n,null),c(n,o),F&&F.m(n,null),c(n,f),A&&A.m(n,null),c(n,r),Y&&Y.m(n,null),c(n,h),J&&J.m(n,null),c(n,b),Z&&Z.m(n,null),m=!0,_||(g=[oe(t,"mousedown",function(){Bl(l[25])&&l[25].apply(this,arguments)}),oe(t,"mouseup",function(){Bl(l[26])&&l[26].apply(this,arguments)})],_=!0)},p(O,C){l=O,l[35]?T?T.p(l,C):(T=Wl(l),T.c(),T.m(e.parentNode,e)):T&&(T.d(1),T=null),C[0]&402722808&&(E=l[4],i=Xt(i,C,j,1,l,E,a,s,Zt,Kl,null,Gl)),l[19]?z?z.p(l,C):(z=ql(l),z.c(),z.m(n,o)):z&&(z.d(1),z=null),l[13]?F?(F.p(l,C),C[0]&8192&&$(F,1)):(F=Jl(l),F.c(),$(F,1),F.m(n,f)):F&&(Ne(),re(F,1,1,()=>{F=null}),ye()),l[15]&&!l[7]?A?(A.p(l,C),C[0]&32896&&$(A,1)):(A=Xl(l),A.c(),$(A,1),A.m(n,r)):A&&(Ne(),re(A,1,1,()=>{A=null}),ye()),l[7]?Y?(Y.p(l,C),C[0]&128&&$(Y,1)):(Y=Zl(l),Y.c(),$(Y,1),Y.m(n,h)):Y&&(Ne(),re(Y,1,1,()=>{Y=null}),ye()),l[15]||l[7]?J?(J.p(l,C),C[0]&32896&&$(J,1)):(J=$l(l),J.c(),$(J,1),J.m(n,b)):J&&(Ne(),re(J,1,1,()=>{J=null}),ye()),l[31]?Z?Z.p(l,C):(Z=tt(l),Z.c(),Z.m(n,null)):Z&&(Z.d(1),Z=null),(!m||C[0]&2&&w!==(w=l[1].join(" ")))&&p(t,"viewBox",w),(!m||C[0]&4)&&ue(t,"--font-size",(l[2]||.8)+"em")},i(O){m||($(F),$(A),$(Y),$(J),m=!0)},o(O){re(F),re(A),re(Y),re(J),m=!1},d(O){T&&T.d(O),O&&u(e),O&&u(t);for(let C=0;C<i.length;C+=1)i[C].d();z&&z.d(),F&&F.d(),A&&A.d(),Y&&Y.d(),J&&J.d(),Z&&Z.d(),_=!1,_l(g)}}}function ms(l,e,t){let s,i,a,{viewBox:n,labelSize:o,draggedBgs:f,data:r,path:h,color:b,changingLines:w,neighbor:m,showPluralities:_,metric:g,period:T,tractVars:E,showComms:j,drawings:z,showPlans:F,plan:A,points:Y=[],tractMesh:J,bgMesh:Z,mesh:O,aggregates:C,obj:X,handleLabelClick:te,congressPlans:K,plans:de,startDrag:ve,endDrag:ne,handleMouseMove:fe,viewCutoff:pe,showOnlyFocusDistricts:_e,showStreets:x,streets:ce}=e;function ee(){if(!!a)return h(i?ll(a,{type:X.type,geometries:X.geometries.filter(v=>s.includes(v.properties[A]))}):ll(a,X,(v,he)=>Il(v)!==Il(he)))}let q,G;function M({pageX:v,pageY:he},{properties:{Label:Be}}){t(35,G={x:v,y:he,label:Be})}const B=v=>w&&A.includes("_")&&m(v),d=v=>console.log(v.properties),S=v=>fe(v),N=(v,he)=>v.properties[A]!==he.properties[A],W=v=>te(`${A},${v[A]}`),H=v=>t(34,q=v[A]),ke=()=>t(34,q=null),we=v=>q===v.properties[A],Ve=(v,he)=>x&&M(he,v),Ee=()=>t(35,G=null);return l.$$set=v=>{"viewBox"in v&&t(1,n=v.viewBox),"labelSize"in v&&t(2,o=v.labelSize),"draggedBgs"in v&&t(3,f=v.draggedBgs),"data"in v&&t(4,r=v.data),"path"in v&&t(5,h=v.path),"color"in v&&t(6,b=v.color),"changingLines"in v&&t(7,w=v.changingLines),"neighbor"in v&&t(8,m=v.neighbor),"showPluralities"in v&&t(9,_=v.showPluralities),"metric"in v&&t(10,g=v.metric),"period"in v&&t(11,T=v.period),"tractVars"in v&&t(12,E=v.tractVars),"showComms"in v&&t(13,j=v.showComms),"drawings"in v&&t(14,z=v.drawings),"showPlans"in v&&t(15,F=v.showPlans),"plan"in v&&t(16,A=v.plan),"points"in v&&t(17,Y=v.points),"tractMesh"in v&&t(18,J=v.tractMesh),"bgMesh"in v&&t(19,Z=v.bgMesh),"mesh"in v&&t(20,O=v.mesh),"aggregates"in v&&t(21,C=v.aggregates),"obj"in v&&t(0,X=v.obj),"handleLabelClick"in v&&t(22,te=v.handleLabelClick),"congressPlans"in v&&t(23,K=v.congressPlans),"plans"in v&&t(24,de=v.plans),"startDrag"in v&&t(25,ve=v.startDrag),"endDrag"in v&&t(26,ne=v.endDrag),"handleMouseMove"in v&&t(27,fe=v.handleMouseMove),"viewCutoff"in v&&t(28,pe=v.viewCutoff),"showOnlyFocusDistricts"in v&&t(29,_e=v.showOnlyFocusDistricts),"showStreets"in v&&t(30,x=v.showStreets),"streets"in v&&t(31,ce=v.streets)},l.$$.update=()=>{l.$$.dirty[0]&65536&&t(33,s=gs[A]),l.$$.dirty[0]&536870912|l.$$.dirty[1]&4&&t(36,i=_e&&s),l.$$.dirty[0]&25231360&&t(32,a=A.startsWith("congress")?K:de),l.$$.dirty[0]&65536|l.$$.dirty[1]&2&&t(0,X=a?a.objects[A]:void 0)},[X,n,o,f,r,h,b,w,m,_,g,T,E,j,z,F,A,Y,J,Z,O,C,te,K,de,ve,ne,fe,pe,_e,x,ce,a,s,q,G,i,ee,M,B,d,S,N,W,H,ke,we,Ve,Ee]}class vs extends cl{constructor(e){super();hl(this,e,ms,ds,ul,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,showComms:13,drawings:14,showPlans:15,plan:16,points:17,tractMesh:18,bgMesh:19,mesh:20,aggregates:21,obj:0,handleLabelClick:22,congressPlans:23,plans:24,startDrag:25,endDrag:26,handleMouseMove:27,viewCutoff:28,showOnlyFocusDistricts:29,showStreets:30,streets:31},null,[-1,-1])}}function it(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function nt(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function at(l,e,t){const s=l.slice();return s[16]=e[t],s}function ot(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function rt(l,e,t){const s=l.slice();return s[10]=e[t],s}function ft(l,e,t){const s=l.slice();return s[13]=e[t],s}function ps(l){let e,t,s=l[9],i=[];for(let o=0;o<s.length;o+=1)i[o]=ct(nt(l,s,o));let a=l[9],n=[];for(let o=0;o<a.length;o+=1)n[o]=ht(it(l,a,o));return{c(){e=D("div");for(let o=0;o<i.length;o+=1)i[o].c();t=L();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0,style:!0});var f=k(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=I(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){p(e,"class","color-legend svelte-lnhifj"),ue(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.5em)"),Ce(e,"pctasian",l[3].includes(l[4]))},m(o,f){U(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);c(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const h=nt(o,s,r);i[r]?i[r].p(h,f):(i[r]=ct(h),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&536){a=o[9];let r;for(r=0;r<a.length;r+=1){const h=it(o,a,r);n[r]?n[r].p(h,f):(n[r]=ht(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&24&&ue(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.5em)"),f&24&&Ce(e,"pctasian",o[3].includes(o[4]))},d(o){o&&u(e),De(i,o),De(n,o)}}}function bs(l){let e,t,s=l[8],i=[];for(let o=0;o<s.length;o+=1)i[o]=ut(ot(l,s,o));let a=l[8],n=[];for(let o=0;o<a.length;o+=1)n[o]=_t(at(l,a,o));return{c(){e=D("div");for(let o=0;o<i.length;o+=1)i[o].c();t=L();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var f=k(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=I(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){p(e,"class","color-legend plurality-legend svelte-lnhifj")},m(o,f){U(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);c(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const h=ot(o,s,r);i[r]?i[r].p(h,f):(i[r]=ut(h),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&256){a=o[8];let r;for(r=0;r<a.length;r+=1){const h=at(o,a,r);n[r]?n[r].p(h,f):(n[r]=_t(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},d(o){o&&u(e),De(i,o),De(n,o)}}}function ks(l){let e,t,s,i,a,n,o,f,r,h,b,w,m=l[0],_=[];for(let g=0;g<m.length;g+=1)_[g]=dt(rt(l,m,g));return{c(){e=D("div");for(let g=0;g<_.length;g+=1)_[g].c();t=L(),s=D("p"),i=D("span"),a=y("Weak plurality"),n=L(),o=D("p"),f=L(),r=D("p"),h=y("Majority"),b=L(),w=D("p"),this.h()},l(g){e=V(g,"DIV",{class:!0});var T=k(e);for(let F=0;F<_.length;F+=1)_[F].l(T);t=I(T),s=V(T,"P",{class:!0});var E=k(s);i=V(E,"SPAN",{});var j=k(i);a=R(j,"Weak plurality"),j.forEach(u),E.forEach(u),n=I(T),o=V(T,"P",{class:!0}),k(o).forEach(u),f=I(T),r=V(T,"P",{class:!0});var z=k(r);h=R(z,"Majority"),z.forEach(u),b=I(T),w=V(T,"P",{class:!0}),k(w).forEach(u),T.forEach(u),this.h()},h(){p(s,"class","col-head svelte-lnhifj"),p(o,"class","col-head svelte-lnhifj"),p(r,"class","col-head svelte-lnhifj"),p(w,"class","col-head svelte-lnhifj"),p(e,"class","legend svelte-lnhifj")},m(g,T){U(g,e,T);for(let E=0;E<_.length;E+=1)_[E].m(e,null);c(e,t),c(e,s),c(s,i),c(i,a),c(e,n),c(e,o),c(e,f),c(e,r),c(r,h),c(e,b),c(e,w)},p(g,T){if(T&7){m=g[0];let E;for(E=0;E<m.length;E+=1){const j=rt(g,m,E);_[E]?_[E].p(j,T):(_[E]=dt(j),_[E].c(),_[E].m(e,t))}for(;E<_.length;E+=1)_[E].d(1);_.length=m.length}},d(g){g&&u(e),De(_,g)}}}function ct(l){let e;return{c(){e=D("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),k(e).forEach(u),this.h()},h(){ue(e,"background-color",l[3].includes(l[4])?El[l[20]]:xe[l[20]])},m(t,s){U(t,e,s)},p(t,s){s&24&&ue(e,"background-color",t[3].includes(t[4])?El[t[20]]:xe[t[20]])},d(t){t&&u(e)}}}function ht(l){let e,t=(l[9][l[9].length-1]<1?ge(l[21],0):l[9][l[9].length-1]>1e3?Xe(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?" Asian":"")+"",s,i;return{c(){e=D("p"),s=y(t),i=L(),this.h()},l(a){e=V(a,"P",{class:!0});var n=k(e);s=R(n,t),i=I(n),n.forEach(u),this.h()},h(){p(e,"class","svelte-lnhifj")},m(a,n){U(a,e,n),c(e,s),c(e,i)},p(a,n){n&536&&t!==(t=(a[9][a[9].length-1]<1?ge(a[21],0):a[9][a[9].length-1]>1e3?Xe(a[21]):a[21])+(a[3].includes(a[4])&&a[20]===a[9].length-1?" Asian":"")+"")&&ae(s,t)},d(a){a&&u(e)}}}function ut(l){let e;return{c(){e=D("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),k(e).forEach(u),this.h()},h(){ue(e,"background-color",xe[l[20]])},m(t,s){U(t,e,s)},p:Je,d(t){t&&u(e)}}}function _t(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=D("p"),s=y(t),this.h()},l(i){e=V(i,"P",{class:!0});var a=k(e);s=R(a,t),a.forEach(u),this.h()},h(){p(e,"class","svelte-lnhifj")},m(i,a){U(i,e,a),c(e,s)},p(i,a){a&256&&t!==(t=i[16].replace("_","-")+"")&&ae(s,t)},d(i){i&&u(e)}}}function gt(l){let e;return{c(){e=D("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),k(e).forEach(u),this.h()},h(){ue(e,"background-color",l[2][l[10]]+l[13])},m(t,s){U(t,e,s)},p(t,s){s&7&&ue(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&u(e)}}}function dt(l){let e,t,s=Ze(l[10])+"",i,a=l[1],n=[];for(let o=0;o<a.length;o+=1)n[o]=gt(ft(l,a,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=L(),t=D("p"),i=y(s),this.h()},l(o){for(let r=0;r<n.length;r+=1)n[r].l(o);e=I(o),t=V(o,"P",{class:!0});var f=k(t);i=R(f,s),f.forEach(u),this.h()},h(){p(t,"class","row-label svelte-lnhifj")},m(o,f){for(let r=0;r<n.length;r+=1)n[r].m(o,f);U(o,e,f),U(o,t,f),c(t,i)},p(o,f){if(f&7){a=o[1];let r;for(r=0;r<a.length;r+=1){const h=ft(o,a,r);n[r]?n[r].p(h,f):(n[r]=gt(h),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&1&&s!==(s=Ze(o[10])+"")&&ae(i,s)},d(o){De(n,o),o&&u(e),o&&u(t)}}}function ws(l){let e,t,s;function i(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?ks:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?bs:ps)}let a=i(l,-1),n=a(l);return{c(){n.c(),s=le()},l(o){n.l(o),s=le()},m(o,f){n.m(o,f),U(o,s,f)},p(o,[f]){a===(a=i(o,f))&&n?n.p(o,f):(n.d(1),n=a(o),n&&(n.c(),n.m(s.parentNode,s)))},i:Je,o:Je,d(o){n.d(o),o&&u(s)}}}function Es(l,e,t){let{groups:s,levels:i,colors:a,dynamicVars:n,variable:o,metric:f,showPluralities:r,pluralityVars:h,periods:b,breaks:w}=e;return l.$$set=m=>{"groups"in m&&t(0,s=m.groups),"levels"in m&&t(1,i=m.levels),"colors"in m&&t(2,a=m.colors),"dynamicVars"in m&&t(3,n=m.dynamicVars),"variable"in m&&t(4,o=m.variable),"metric"in m&&t(5,f=m.metric),"showPluralities"in m&&t(6,r=m.showPluralities),"pluralityVars"in m&&t(7,h=m.pluralityVars),"periods"in m&&t(8,b=m.periods),"breaks"in m&&t(9,w=m.breaks)},[s,i,a,n,o,f,r,h,b,w]}class Ps extends cl{constructor(e){super();hl(this,e,Es,ws,ul,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function mt(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function vt(l,e,t){const s=l.slice();return s[18]=e[t],s}function pt(l,e,t){const s=l.slice();return s[12]=e[t],s}function Ds(l){let e,t=l[6],s=[];for(let i=0;i<t.length;i+=1)s[i]=kt(mt(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);U(i,e,a)},p(i,a){if(a&200){t=i[6];let n;for(n=0;n<t.length;n+=1){const o=mt(i,t,n);s[n]?s[n].p(o,a):(s[n]=kt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){De(s,i),i&&u(e)}}}function Vs(l){let e,t=l[0],s=[];for(let i=0;i<t.length;i+=1)s[i]=Pt(pt(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);U(i,e,a)},p(i,a){if(a&567){t=i[0];let n;for(n=0;n<t.length;n+=1){const o=pt(i,t,n);s[n]?s[n].p(o,a):(s[n]=Pt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){De(s,i),i&&u(e)}}}function bt(l){let e,t,s=Ze(l[18])+"",i,a,n,o=ge(l[9]["cvap19"+l[18]])+"",f,r,h,b=ge(l[9]["pop20"+l[18]])+"",w,m;return{c(){e=D("tr"),t=D("td"),i=y(s),a=L(),n=D("td"),f=y(o),r=L(),h=D("td"),w=y(b),m=L(),this.h()},l(_){e=V(_,"TR",{class:!0});var g=k(e);t=V(g,"TD",{class:!0});var T=k(t);i=R(T,s),T.forEach(u),a=I(g),n=V(g,"TD",{class:!0});var E=k(n);f=R(E,o),E.forEach(u),r=I(g),h=V(g,"TD",{class:!0});var j=k(h);w=R(j,b),j.forEach(u),m=I(g),g.forEach(u),this.h()},h(){p(t,"class","svelte-1avkicx"),p(n,"class","svelte-1avkicx"),p(h,"class","svelte-1avkicx"),p(e,"class","svelte-1avkicx")},m(_,g){U(_,e,g),c(e,t),c(t,i),c(e,a),c(e,n),c(n,f),c(e,r),c(e,h),c(h,w),c(e,m)},p(_,g){g&8&&s!==(s=Ze(_[18])+"")&&ae(i,s),g&72&&o!==(o=ge(_[9]["cvap19"+_[18]])+"")&&ae(f,o),g&72&&b!==(b=ge(_[9]["pop20"+_[18]])+"")&&ae(w,b)},d(_){_&&u(e)}}}function kt(l){let e,t,s,i=(l[15]||"COI"+(l[17]+1))+"",a,n,o,f,r,h,b,w,m,_,g,T,E,j,z,F,A,Y,J=Xe(l[9].income)+"",Z,O,C,X,te=ge(l[9].hhlang)+"",K,de,ve,ne,fe=ge(l[9].benefits)+"",pe,_e,x,ce;function ee(){return l[11](l[17])}let q=l[3],G=[];for(let M=0;M<q.length;M+=1)G[M]=bt(vt(l,q,M));return{c(){e=D("div"),t=D("p"),s=D("i"),a=y(i),n=L(),o=D("button"),f=y("\u{1F5D1}"),r=L(),h=D("table"),b=D("tr"),w=D("th"),m=L(),_=D("th"),g=y("CVAP"),T=L(),E=D("th"),j=y("Pop."),z=L();for(let M=0;M<G.length;M+=1)G[M].c();F=L(),A=D("p"),Y=y("Income: "),Z=y(J),O=L(),C=D("p"),X=y("Asian and LEP: "),K=y(te),de=L(),ve=D("p"),ne=y("Pct. gov't benefits: "),pe=y(fe),_e=L(),this.h()},l(M){e=V(M,"DIV",{});var B=k(e);t=V(B,"P",{class:!0});var d=k(t);s=V(d,"I",{});var S=k(s);a=R(S,i),S.forEach(u),n=I(d),o=V(d,"BUTTON",{});var N=k(o);f=R(N,"\u{1F5D1}"),N.forEach(u),d.forEach(u),r=I(B),h=V(B,"TABLE",{class:!0});var W=k(h);b=V(W,"TR",{class:!0});var H=k(b);w=V(H,"TH",{class:!0}),k(w).forEach(u),m=I(H),_=V(H,"TH",{class:!0});var ke=k(_);g=R(ke,"CVAP"),ke.forEach(u),T=I(H),E=V(H,"TH",{class:!0});var we=k(E);j=R(we,"Pop."),we.forEach(u),H.forEach(u),z=I(W);for(let he=0;he<G.length;he+=1)G[he].l(W);W.forEach(u),F=I(B),A=V(B,"P",{class:!0});var Ve=k(A);Y=R(Ve,"Income: "),Z=R(Ve,J),Ve.forEach(u),O=I(B),C=V(B,"P",{class:!0});var Ee=k(C);X=R(Ee,"Asian and LEP: "),K=R(Ee,te),Ee.forEach(u),de=I(B),ve=V(B,"P",{class:!0});var v=k(ve);ne=R(v,"Pct. gov't benefits: "),pe=R(v,fe),v.forEach(u),_e=I(B),B.forEach(u),this.h()},h(){p(t,"class","svelte-1avkicx"),p(w,"class","svelte-1avkicx"),p(_,"class","svelte-1avkicx"),p(E,"class","svelte-1avkicx"),p(b,"class","svelte-1avkicx"),p(h,"class","svelte-1avkicx"),p(A,"class","table-footer svelte-1avkicx"),p(C,"class","table-footer svelte-1avkicx"),p(ve,"class","table-footer svelte-1avkicx")},m(M,B){U(M,e,B),c(e,t),c(t,s),c(s,a),c(t,n),c(t,o),c(o,f),c(e,r),c(e,h),c(h,b),c(b,w),c(b,m),c(b,_),c(_,g),c(b,T),c(b,E),c(E,j),c(h,z);for(let d=0;d<G.length;d+=1)G[d].m(h,null);c(e,F),c(e,A),c(A,Y),c(A,Z),c(e,O),c(e,C),c(C,X),c(C,K),c(e,de),c(e,ve),c(ve,ne),c(ve,pe),c(e,_e),x||(ce=oe(o,"click",ee),x=!0)},p(M,B){if(l=M,B&64&&i!==(i=(l[15]||"COI"+(l[17]+1))+"")&&ae(a,i),B&72){q=l[3];let d;for(d=0;d<q.length;d+=1){const S=vt(l,q,d);G[d]?G[d].p(S,B):(G[d]=bt(S),G[d].c(),G[d].m(h,null))}for(;d<G.length;d+=1)G[d].d(1);G.length=q.length}B&64&&J!==(J=Xe(l[9].income)+"")&&ae(Z,J),B&64&&te!==(te=ge(l[9].hhlang)+"")&&ae(K,te),B&64&&fe!==(fe=ge(l[9].benefits)+"")&&ae(pe,fe)},d(M){M&&u(e),De(G,M),x=!1,ce()}}}function wt(l){let e,t,s,i=Nl(l[12])+"",a,n,o,f,r,h,b,w,m,_,g,T,E,j,z,F,A,Y=ge(l[9][l[12]].cvap10asian)+"",J,Z,O,C=ge(l[9][l[12]].pop10asian)+"",X,te,K,de,ve,ne,fe,pe=ge(l[9][l[12]].cvap19asian)+"",_e,x,ce,ee=ge(l[9][l[12]].pop20asian)+"",q,G,M,B,d,S,N,W=ge(l[9][l[12]].pct_increase)+"",H,ke,we,Ve=ge(l[9][l[12]].pct_increase_cvap)+"",Ee,v,he,Be,Ke;function Le(){return l[10](l[12])}let Pe=l[4]&&l[2]in l[5]&&Et(l);return{c(){e=D("div"),t=D("p"),s=D("i"),a=y(i),n=L(),o=D("table"),f=D("tr"),r=D("th"),h=L(),b=D("th"),w=y("CVAP"),m=L(),_=D("th"),g=y("Pop."),T=L(),E=D("tr"),j=D("td"),z=y("Asians in 2010"),F=L(),A=D("td"),J=y(Y),Z=L(),O=D("td"),X=y(C),te=L(),K=D("tr"),de=D("td"),ve=y("Asians now"),ne=L(),fe=D("td"),_e=y(pe),x=L(),ce=D("td"),q=y(ee),G=L(),M=D("tr"),B=D("td"),d=y("Asian increase"),S=L(),N=D("td"),H=y(W),ke=L(),we=D("td"),Ee=y(Ve),v=L(),Pe&&Pe.c(),he=L(),this.h()},l(Re){e=V(Re,"DIV",{class:!0});var be=k(e);t=V(be,"P",{class:!0});var tl=k(t);s=V(tl,"I",{});var sl=k(s);a=R(sl,i),sl.forEach(u),tl.forEach(u),n=I(be),o=V(be,"TABLE",{class:!0});var Ie=k(o);f=V(Ie,"TR",{class:!0});var Fe=k(f);r=V(Fe,"TH",{class:!0}),k(r).forEach(u),h=I(Fe),b=V(Fe,"TH",{class:!0});var il=k(b);w=R(il,"CVAP"),il.forEach(u),m=I(Fe),_=V(Fe,"TH",{class:!0});var nl=k(_);g=R(nl,"Pop."),nl.forEach(u),Fe.forEach(u),T=I(Ie),E=V(Ie,"TR",{class:!0});var Ge=k(E);j=V(Ge,"TD",{class:!0});var al=k(j);z=R(al,"Asians in 2010"),al.forEach(u),F=I(Ge),A=V(Ge,"TD",{class:!0});var ol=k(A);J=R(ol,Y),ol.forEach(u),Z=I(Ge),O=V(Ge,"TD",{class:!0});var rl=k(O);X=R(rl,C),rl.forEach(u),Ge.forEach(u),te=I(Ie),K=V(Ie,"TR",{class:!0});var We=k(K);de=V(We,"TD",{class:!0});var P=k(de);ve=R(P,"Asians now"),P.forEach(u),ne=I(We),fe=V(We,"TD",{class:!0});var ie=k(fe);_e=R(ie,pe),ie.forEach(u),x=I(We),ce=V(We,"TD",{class:!0});var Q=k(ce);q=R(Q,ee),Q.forEach(u),We.forEach(u),G=I(Ie),M=V(Ie,"TR",{class:!0});var se=k(M);B=V(se,"TD",{class:!0});var me=k(B);d=R(me,"Asian increase"),me.forEach(u),S=I(se),N=V(se,"TD",{class:!0});var Ue=k(N);H=R(Ue,W),Ue.forEach(u),ke=I(se),we=V(se,"TD",{class:!0});var Ye=k(we);Ee=R(Ye,Ve),Ye.forEach(u),se.forEach(u),Ie.forEach(u),v=I(be),Pe&&Pe.l(be),he=I(be),be.forEach(u),this.h()},h(){p(t,"class","svelte-1avkicx"),p(r,"class","svelte-1avkicx"),p(b,"class","svelte-1avkicx"),p(_,"class","svelte-1avkicx"),p(f,"class","svelte-1avkicx"),p(j,"class","svelte-1avkicx"),p(A,"class","svelte-1avkicx"),p(O,"class","svelte-1avkicx"),p(E,"class","svelte-1avkicx"),p(de,"class","svelte-1avkicx"),p(fe,"class","svelte-1avkicx"),p(ce,"class","svelte-1avkicx"),p(K,"class","svelte-1avkicx"),p(B,"class","svelte-1avkicx"),p(N,"class","svelte-1avkicx"),p(we,"class","svelte-1avkicx"),p(M,"class","svelte-1avkicx"),p(o,"class","svelte-1avkicx"),p(e,"class","district-aggregate svelte-1avkicx")},m(Re,be){U(Re,e,be),c(e,t),c(t,s),c(s,a),c(e,n),c(e,o),c(o,f),c(f,r),c(f,h),c(f,b),c(b,w),c(f,m),c(f,_),c(_,g),c(o,T),c(o,E),c(E,j),c(j,z),c(E,F),c(E,A),c(A,J),c(E,Z),c(E,O),c(O,X),c(o,te),c(o,K),c(K,de),c(de,ve),c(K,ne),c(K,fe),c(fe,_e),c(K,x),c(K,ce),c(ce,q),c(o,G),c(o,M),c(M,B),c(B,d),c(M,S),c(M,N),c(N,H),c(M,ke),c(M,we),c(we,Ee),c(e,v),Pe&&Pe.m(e,null),c(e,he),Be||(Ke=oe(t,"click",Le),Be=!0)},p(Re,be){l=Re,be&1&&i!==(i=Nl(l[12])+"")&&ae(a,i),be&513&&Y!==(Y=ge(l[9][l[12]].cvap10asian)+"")&&ae(J,Y),be&513&&C!==(C=ge(l[9][l[12]].pop10asian)+"")&&ae(X,C),be&513&&pe!==(pe=ge(l[9][l[12]].cvap19asian)+"")&&ae(_e,pe),be&513&&ee!==(ee=ge(l[9][l[12]].pop20asian)+"")&&ae(q,ee),be&513&&W!==(W=ge(l[9][l[12]].pct_increase)+"")&&ae(H,W),be&513&&Ve!==(Ve=ge(l[9][l[12]].pct_increase_cvap)+"")&&ae(Ee,Ve),l[4]&&l[2]in l[5]?Pe?Pe.p(l,be):(Pe=Et(l),Pe.c(),Pe.m(e,he)):Pe&&(Pe.d(1),Pe=null)},d(Re){Re&&u(e),Pe&&Pe.d(),Be=!1,Ke()}}}function Et(l){let e,t,s=Xe(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+yl(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",i;return{c(){e=D("p"),t=y("Income: "),i=y(s),this.h()},l(a){e=V(a,"P",{class:!0});var n=k(e);t=R(n,"Income: "),i=R(n,s),n.forEach(u),this.h()},h(){p(e,"class","table-footer svelte-1avkicx")},m(a,n){U(a,e,n),c(e,t),c(e,i)},p(a,n){n&565&&s!==(s=Xe(a[9][a[12]].income)+(a[4]&&a[2]in a[5]?"; "+yl(a[9][a[12]].pop20_total-a[5][a[2]]):"")+"")&&ae(i,s)},d(a){a&&u(e)}}}function Pt(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&wt(l);return{c(){s&&s.c(),t=le()},l(i){s&&s.l(i),t=le()},m(i,a){s&&s.m(i,a),U(i,t,a)},p(i,a){a&5&&(e=i[12].split(",")[0].split("_")[0]===i[2].split("_")[0]),e?s?s.p(i,a):(s=wt(i),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(i){s&&s.d(i),i&&u(t)}}}function Ts(l){let e;function t(a,n){if(a[8]==="districts")return Vs;if(a[8]==="community")return Ds}let s=t(l),i=s&&s(l);return{c(){i&&i.c(),e=le()},l(a){i&&i.l(a),e=le()},m(a,n){i&&i.m(a,n),U(a,e,n)},p(a,[n]){s===(s=t(a))&&i?i.p(a,n):(i&&i.d(1),i=s&&s(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Je,o:Je,d(a){i&&i.d(a),a&&u(e)}}}function Ss(l,e,t){let{aggregates:s,handleLabelClick:i,plan:a,stats:n,groups:o,changingLines:f,idealValues:r,drawings:h,delDrawing:b}=e,{type:w="districts"}=e;const m=g=>i(g),_=g=>b(g);return l.$$set=g=>{"aggregates"in g&&t(0,s=g.aggregates),"handleLabelClick"in g&&t(1,i=g.handleLabelClick),"plan"in g&&t(2,a=g.plan),"stats"in g&&t(9,n=g.stats),"groups"in g&&t(3,o=g.groups),"changingLines"in g&&t(4,f=g.changingLines),"idealValues"in g&&t(5,r=g.idealValues),"drawings"in g&&t(6,h=g.drawings),"delDrawing"in g&&t(7,b=g.delDrawing),"type"in g&&t(8,w=g.type)},[s,i,a,o,f,r,h,b,w,n,m,_]}class Dt extends cl{constructor(e){super();hl(this,e,Ss,Ts,ul,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}function Vt(l,e,t){const s=l.slice();return s[68]=e[t],s}function Tt(l,e,t){const s=l.slice();return s[71]=e[t],s}function St(l,e,t){const s=l.slice();return s[74]=e[t],s}function Ct(l,e,t){const s=l.slice();return s[77]=e[t],s}function At(l,e,t){const s=l.slice();return s[68]=e[t],s}function Ot(l,e,t){const s=l.slice();return s[68]=e[t],s}function Mt(l){let e,t=(wl[l[68]]||l[68])+"",s,i;return{c(){e=D("option"),s=y(t),this.h()},l(a){e=V(a,"OPTION",{});var n=k(e);s=R(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[68],e.value=e.__value},m(a,n){U(a,e,n),c(e,s)},p(a,n){n[0]&4&&t!==(t=(wl[a[68]]||a[68])+"")&&ae(s,t),n[0]&4&&i!==(i=a[68])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function jt(l){let e,t=(wl[l[68]]||l[68])+"",s,i;return{c(){e=D("option"),s=y(t),this.h()},l(a){e=V(a,"OPTION",{});var n=k(e);s=R(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[68],e.value=e.__value},m(a,n){U(a,e,n),c(e,s)},p(a,n){n[0]&8&&t!==(t=(wl[a[68]]||a[68])+"")&&ae(s,t),n[0]&8&&i!==(i=a[68])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function Bt(l){let e,t=l[2].includes(l[17]),s,i=l[2].includes(l[17]),a,n,o,f=t&&Lt(l),r=i&&Nt(l);return{c(){e=D("div"),f&&f.c(),s=L(),r&&r.c()},l(h){e=V(h,"DIV",{});var b=k(e);f&&f.l(b),s=I(b),r&&r.l(b),b.forEach(u)},m(h,b){U(h,e,b),f&&f.m(e,null),c(e,s),r&&r.m(e,null),o=!0},p(h,b){b[0]&131076&&(t=h[2].includes(h[17])),t?f?f.p(h,b):(f=Lt(h),f.c(),f.m(e,s)):f&&(f.d(1),f=null),b[0]&131076&&(i=h[2].includes(h[17])),i?r?r.p(h,b):(r=Nt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(h){o||(Oe(()=>{n&&n.end(1),a=He(e,Qe,{}),a.start()}),o=!0)},o(h){a&&a.invalidate(),n=ze(e,Qe,{}),o=!1},d(h){h&&u(e),f&&f.d(),r&&r.d(),h&&n&&n.end()}}}function Lt(l){let e,t=["past","present"],s=[];for(let i=0;i<2;i+=1)s[i]=It(Ct(l,t,i));return{c(){for(let i=0;i<2;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<2;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<2;n+=1)s[n].m(i,a);U(i,e,a)},p(i,a){if(a[0]&65536){t=["past","present"];let n;for(n=0;n<2;n+=1){const o=Ct(i,t,n);s[n]?s[n].p(o,a):(s[n]=It(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<2;n+=1)s[n].d(1)}},d(i){De(s,i),i&&u(e)}}}function It(l){let e,t,s,i=Ze(l[77])+"",a,n,o,f;return{c(){e=D("label"),t=D("input"),s=L(),a=y(i),n=L(),this.h()},l(r){e=V(r,"LABEL",{});var h=k(e);t=V(h,"INPUT",{type:!0,name:!0}),s=I(h),a=R(h,i),n=I(h),h.forEach(u),this.h()},h(){p(t,"type","radio"),p(t,"name","period"),t.__value=l[77],t.value=t.__value,l[53][0].push(t)},m(r,h){U(r,e,h),c(e,t),t.checked=t.__value===l[16],c(e,s),c(e,a),c(e,n),o||(f=oe(t,"change",l[52]),o=!0)},p(r,h){h[0]&65536&&(t.checked=t.__value===r[16])},d(r){r&&u(e),l[53][0].splice(l[53][0].indexOf(t),1),o=!1,f()}}}function Nt(l){let e,t,s=(l[18]?"pct. asian":"pluralities")+"",i,a,n;return{c(){e=D("button"),t=y("Show "),i=y(s),this.h()},l(o){e=V(o,"BUTTON",{class:!0});var f=k(e);t=R(f,"Show "),i=R(f,s),f.forEach(u),this.h()},h(){p(e,"class","plurality-toggle svelte-p7agis")},m(o,f){U(o,e,f),c(e,t),c(e,i),a||(n=oe(e,"click",l[54]),a=!0)},p(o,f){f[0]&262144&&s!==(s=(o[18]?"pct. asian":"pluralities")+"")&&ae(i,s)},d(o){o&&u(e),a=!1,n()}}}function yt(l){let e,t,s,i,a,n,o,f,r,h,b,w=["assembly","senate","congress"],m=[];for(let _=0;_<3;_+=1)m[_]=Ut(Tt(l,w,_));return n=new Dt({props:{aggregates:l[10],handleLabelClick:l[39],plan:l[11],stats:l[24],groups:$e,changingLines:l[32],idealValues:_s}}),{c(){e=D("div"),t=D("div"),s=D("select");for(let _=0;_<3;_+=1)m[_].c();i=D("optgroup"),a=L(),gl(n.$$.fragment),this.h()},l(_){e=V(_,"DIV",{class:!0});var g=k(e);t=V(g,"DIV",{class:!0});var T=k(t);s=V(T,"SELECT",{class:!0});var E=k(s);for(let j=0;j<3;j+=1)m[j].l(E);i=V(E,"OPTGROUP",{label:!0}),k(i).forEach(u),E.forEach(u),T.forEach(u),a=I(g),dl(n.$$.fragment,g),g.forEach(u),this.h()},h(){p(i,"label","Unity Map (not yet released)"),p(s,"class","svelte-p7agis"),l[11]===void 0&&Oe(()=>l[56].call(s)),p(t,"class","plan-selector svelte-p7agis"),p(e,"class","svelte-p7agis")},m(_,g){U(_,e,g),c(e,t),c(t,s);for(let T=0;T<3;T+=1)m[T].m(s,null);c(s,i),ml(s,l[11]),c(e,a),vl(n,e,null),r=!0,h||(b=oe(s,"change",l[56]),h=!0)},p(_,g){if(g&0){w=["assembly","senate","congress"];let E;for(E=0;E<3;E+=1){const j=Tt(_,w,E);m[E]?m[E].p(j,g):(m[E]=Ut(j),m[E].c(),m[E].m(s,i))}for(;E<3;E+=1)m[E].d(1)}g[0]&2048&&ml(s,_[11]);const T={};g[0]&1024&&(T.aggregates=_[10]),g[0]&2048&&(T.plan=_[11]),g[0]&16777216&&(T.stats=_[24]),n.$set(T)},i(_){r||($(n.$$.fragment,_),Oe(()=>{f&&f.end(1),o=He(e,Qe,{}),o.start()}),r=!0)},o(_){re(n.$$.fragment,_),o&&o.invalidate(),f=ze(e,Qe,{}),r=!1},d(_){_&&u(e),De(m,_),pl(n),_&&f&&f.end(),h=!1,b()}}}function Rt(l){let e,t=rs(l[71]+l[74])+"",s,i;return{c(){e=D("option"),s=y(t),this.h()},l(a){e=V(a,"OPTION",{});var n=k(e);s=R(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[71]+l[74],e.value=e.__value},m(a,n){U(a,e,n),c(e,s)},p:Je,d(a){a&&u(e)}}}function Ut(l){let e,t=["","_letters","_names"],s=[];for(let i=0;i<3;i+=1)s[i]=Rt(St(l,t,i));return{c(){e=D("optgroup");for(let i=0;i<3;i+=1)s[i].c();this.h()},l(i){e=V(i,"OPTGROUP",{label:!0});var a=k(e);for(let n=0;n<3;n+=1)s[n].l(a);a.forEach(u),this.h()},h(){p(e,"label",Ze(l[71]))},m(i,a){U(i,e,a);for(let n=0;n<3;n+=1)s[n].m(e,null)},p(i,a){if(a&0){t=["","_letters","_names"];let n;for(n=0;n<3;n+=1){const o=St(i,t,n);s[n]?s[n].p(o,a):(s[n]=Rt(o),s[n].c(),s[n].m(e,null))}for(;n<3;n+=1)s[n].d(1)}},d(i){i&&u(e),De(s,i)}}}function Ht(l){let e,t,s,i,a,n,o,f,r,h,b;return t=new Dt({props:{type:"community",drawings:l[9],delDrawing:l[37],groups:$e,stats:l[24]}}),{c(){e=D("div"),gl(t.$$.fragment),s=L(),i=D("button"),a=D("b"),n=y("[SAVE]"),this.h()},l(w){e=V(w,"DIV",{class:!0});var m=k(e);dl(t.$$.fragment,m),s=I(m),i=V(m,"BUTTON",{style:!0});var _=k(i);a=V(_,"B",{});var g=k(a);n=R(g,"[SAVE]"),g.forEach(u),_.forEach(u),m.forEach(u),this.h()},h(){ue(i,"font-size","13px"),p(e,"class","community svelte-p7agis")},m(w,m){U(w,e,m),vl(t,e,null),c(e,s),c(e,i),c(i,a),c(a,n),r=!0,h||(b=oe(i,"click",l[38]),h=!0)},p(w,m){const _={};m[0]&512&&(_.drawings=w[9]),m[0]&16777216&&(_.stats=w[24]),t.$set(_)},i(w){r||($(t.$$.fragment,w),Oe(()=>{f&&f.end(1),o=He(e,Qe,{}),o.start()}),r=!0)},o(w){re(t.$$.fragment,w),o&&o.invalidate(),f=ze(e,Qe,{}),r=!1},d(w){w&&u(e),pl(t),w&&f&&f.end(),h=!1,b()}}}function zt(l){let e,t,s,i,a,n,o,f,r,h,b,w,m=Object.keys(el),_=[];for(let g=0;g<m.length;g+=1)_[g]=Ft(Vt(l,m,g));return{c(){e=D("div"),t=D("h3"),s=y("Views"),i=L();for(let g=0;g<_.length;g+=1)_[g].c();a=L(),n=D("button"),o=y("See Streets"),this.h()},l(g){e=V(g,"DIV",{class:!0});var T=k(e);t=V(T,"H3",{class:!0});var E=k(t);s=R(E,"Views"),E.forEach(u),i=I(T);for(let z=0;z<_.length;z+=1)_[z].l(T);a=I(T),n=V(T,"BUTTON",{style:!0,class:!0});var j=k(n);o=R(j,"See Streets"),j.forEach(u),T.forEach(u),this.h()},h(){p(t,"class","svelte-p7agis"),ue(n,"margin-top","10px"),p(n,"class","svelte-p7agis"),Ce(n,"view-selected",l[7]),p(e,"class","views svelte-p7agis")},m(g,T){U(g,e,T),c(e,t),c(t,s),c(e,i);for(let E=0;E<_.length;E+=1)_[E].m(e,null);c(e,a),c(e,n),c(n,o),h=!0,b||(w=oe(n,"click",l[60]),b=!0)},p(g,T){if(T[0]&268451840){m=Object.keys(el);let E;for(E=0;E<m.length;E+=1){const j=Vt(g,m,E);_[E]?_[E].p(j,T):(_[E]=Ft(j),_[E].c(),_[E].m(e,a))}for(;E<_.length;E+=1)_[E].d(1);_.length=m.length}T[0]&128&&Ce(n,"view-selected",g[7])},i(g){h||(Oe(()=>{r&&r.end(1),f=He(e,Me,{}),f.start()}),h=!0)},o(g){f&&f.invalidate(),r=ze(e,Me,{}),h=!1},d(g){g&&u(e),De(_,g),g&&r&&r.end(),b=!1,w()}}}function Ft(l){let e,t=l[68]+"",s,i,a;function n(){return l[59](l[68])}return{c(){e=D("button"),s=y(t),this.h()},l(o){e=V(o,"BUTTON",{class:!0});var f=k(e);s=R(f,t),f.forEach(u),this.h()},h(){p(e,"class","svelte-p7agis"),Ce(e,"view-selected",l[14]===el[l[68]])},m(o,f){U(o,e,f),c(e,s),i||(a=oe(e,"click",n),i=!0)},p(o,f){l=o,f[0]&16384&&Ce(e,"view-selected",l[14]===el[l[68]])},d(o){o&&u(e),i=!1,a()}}}function Cs(l){let e,t,s,i,a,n,o,f,r,h,b,w,m,_=(l[20]?"\u2191":"\u2193")+"",g,T,E,j,z,F,A,Y=(l[6]?"\u2191":"\u2193")+"",J,Z,O,C,X,te,K,de,ve,ne,fe,pe,_e=l[2],x=[];for(let d=0;d<_e.length;d+=1)x[d]=Mt(Ot(l,_e,d));let ce=l[3],ee=[];for(let d=0;d<ce.length;d+=1)ee[d]=jt(At(l,ce,d));let q=l[21]&&Bt(l);f=new Ps({props:{groups:$e,levels:Tl,colors:Vl,dynamicVars:l[2],variable:l[17],metric:l[19],showPluralities:l[18],pluralityVars:l[5],periods:kl,breaks:l[31]}});let G=l[20]&&yt(l),M=l[6]&&Ht(l);K=new vs({props:{viewBox:l[14],labelSize:l[30],draggedBgs:l[8],data:l[1],path:bl,color:l[36],changingLines:l[32],neighbor:l[35],showPluralities:l[18],metric:l[19],period:l[16],tractVars:l[4],showComms:l[6],drawings:l[9],showPlans:l[20],plan:l[11],points:l[27],tractMesh:l[34],bgMesh:l[25],mesh:l[33],aggregates:l[10],obj:l[0],handleLabelClick:l[39],congressPlans:l[12],plans:l[26],startDrag:l[40],endDrag:l[41],handleMouseMove:l[42],viewCutoff:l[28],showOnlyFocusDistricts:l[22],showStreets:l[7],streets:l[13]}});let B=l[21]&&zt(l);return{c(){e=D("div"),t=D("div"),s=D("select"),i=D("optgroup");for(let d=0;d<x.length;d+=1)x[d].c();a=D("optgroup");for(let d=0;d<ee.length;d+=1)ee[d].c();n=L(),q&&q.c(),o=L(),gl(f.$$.fragment),r=L(),h=D("div"),b=D("h3"),w=D("button"),m=y("Plans "),g=y(_),T=L(),G&&G.c(),E=L(),j=D("div"),z=D("h3"),F=D("button"),A=y("Communities "),J=y(Y),Z=L(),O=D("button"),C=y("+"),X=L(),M&&M.c(),te=L(),gl(K.$$.fragment),de=L(),B&&B.c(),this.h()},l(d){e=V(d,"DIV",{class:!0,style:!0});var S=k(e);t=V(S,"DIV",{class:!0});var N=k(t);s=V(N,"SELECT",{style:!0,class:!0});var W=k(s);i=V(W,"OPTGROUP",{label:!0});var H=k(i);for(let Le=0;Le<x.length;Le+=1)x[Le].l(H);H.forEach(u),a=V(W,"OPTGROUP",{label:!0});var ke=k(a);for(let Le=0;Le<ee.length;Le+=1)ee[Le].l(ke);ke.forEach(u),W.forEach(u),n=I(N),q&&q.l(N),o=I(N),dl(f.$$.fragment,N),r=I(N),h=V(N,"DIV",{class:!0});var we=k(h);b=V(we,"H3",{class:!0});var Ve=k(b);w=V(Ve,"BUTTON",{});var Ee=k(w);m=R(Ee,"Plans "),g=R(Ee,_),Ee.forEach(u),Ve.forEach(u),T=I(we),G&&G.l(we),we.forEach(u),E=I(N),j=V(N,"DIV",{class:!0});var v=k(j);z=V(v,"H3",{class:!0});var he=k(z);F=V(he,"BUTTON",{});var Be=k(F);A=R(Be,"Communities "),J=R(Be,Y),Be.forEach(u),Z=I(he),O=V(he,"BUTTON",{});var Ke=k(O);C=R(Ke,"+"),Ke.forEach(u),he.forEach(u),X=I(v),M&&M.l(v),v.forEach(u),N.forEach(u),te=I(S),dl(K.$$.fragment,S),de=I(S),B&&B.l(S),S.forEach(u),this.h()},h(){p(i,"label","Redistricting data"),p(a,"label","American Community Survey data"),ue(s,"width",l[3].includes(l[17])?"auto":"calc(var(--control-width) - 20px)"),p(s,"class","svelte-p7agis"),l[17]===void 0&&Oe(()=>l[51].call(s)),p(b,"class","svelte-p7agis"),p(h,"class","stats svelte-p7agis"),p(z,"class","svelte-p7agis"),p(j,"class","stats svelte-p7agis"),p(t,"class","controls svelte-p7agis"),p(e,"class","container svelte-p7agis"),ue(e,"cursor",l[23]?"crosshair":"auto"),ue(e,"--container-font",l[29]+"px"),ue(e,"--control-width",270+(l[29]-16)*10+"px"),Oe(()=>l[61].call(e))},m(d,S){U(d,e,S),c(e,t),c(t,s),c(s,i);for(let N=0;N<x.length;N+=1)x[N].m(i,null);c(s,a);for(let N=0;N<ee.length;N+=1)ee[N].m(a,null);ml(s,l[17]),c(t,n),q&&q.m(t,null),c(t,o),vl(f,t,null),c(t,r),c(t,h),c(h,b),c(b,w),c(w,m),c(w,g),c(h,T),G&&G.m(h,null),c(t,E),c(t,j),c(j,z),c(z,F),c(F,A),c(F,J),c(z,Z),c(z,O),c(O,C),c(j,X),M&&M.m(j,null),c(e,te),vl(K,e,null),c(e,de),B&&B.m(e,null),ve=es(e,l[61].bind(e)),ne=!0,fe||(pe=[oe(window,"keydown",l[43]),oe(s,"change",l[51]),oe(w,"click",l[55]),oe(F,"click",l[57]),oe(O,"click",l[58])],fe=!0)},p(d,S){if(S[0]&4){_e=d[2];let H;for(H=0;H<_e.length;H+=1){const ke=Ot(d,_e,H);x[H]?x[H].p(ke,S):(x[H]=Mt(ke),x[H].c(),x[H].m(i,null))}for(;H<x.length;H+=1)x[H].d(1);x.length=_e.length}if(S[0]&8){ce=d[3];let H;for(H=0;H<ce.length;H+=1){const ke=At(d,ce,H);ee[H]?ee[H].p(ke,S):(ee[H]=jt(ke),ee[H].c(),ee[H].m(a,null))}for(;H<ee.length;H+=1)ee[H].d(1);ee.length=ce.length}(!ne||S[0]&131080)&&ue(s,"width",d[3].includes(d[17])?"auto":"calc(var(--control-width) - 20px)"),S[0]&131084&&ml(s,d[17]),d[21]?q?(q.p(d,S),S[0]&2097152&&$(q,1)):(q=Bt(d),q.c(),$(q,1),q.m(t,o)):q&&(Ne(),re(q,1,1,()=>{q=null}),ye());const N={};S[0]&4&&(N.dynamicVars=d[2]),S[0]&131072&&(N.variable=d[17]),S[0]&524288&&(N.metric=d[19]),S[0]&262144&&(N.showPluralities=d[18]),S[0]&32&&(N.pluralityVars=d[5]),S[1]&1&&(N.breaks=d[31]),f.$set(N),(!ne||S[0]&1048576)&&_!==(_=(d[20]?"\u2191":"\u2193")+"")&&ae(g,_),d[20]?G?(G.p(d,S),S[0]&1048576&&$(G,1)):(G=yt(d),G.c(),$(G,1),G.m(h,null)):G&&(Ne(),re(G,1,1,()=>{G=null}),ye()),(!ne||S[0]&64)&&Y!==(Y=(d[6]?"\u2191":"\u2193")+"")&&ae(J,Y),d[6]?M?(M.p(d,S),S[0]&64&&$(M,1)):(M=Ht(d),M.c(),$(M,1),M.m(j,null)):M&&(Ne(),re(M,1,1,()=>{M=null}),ye());const W={};S[0]&16384&&(W.viewBox=d[14]),S[0]&1073741824&&(W.labelSize=d[30]),S[0]&256&&(W.draggedBgs=d[8]),S[0]&2&&(W.data=d[1]),S[0]&262144&&(W.showPluralities=d[18]),S[0]&524288&&(W.metric=d[19]),S[0]&65536&&(W.period=d[16]),S[0]&16&&(W.tractVars=d[4]),S[0]&64&&(W.showComms=d[6]),S[0]&512&&(W.drawings=d[9]),S[0]&1048576&&(W.showPlans=d[20]),S[0]&2048&&(W.plan=d[11]),S[0]&134217728&&(W.points=d[27]),S[0]&33554432&&(W.bgMesh=d[25]),S[0]&1024&&(W.aggregates=d[10]),S[0]&1&&(W.obj=d[0]),S[0]&4096&&(W.congressPlans=d[12]),S[0]&67108864&&(W.plans=d[26]),S[0]&268435456&&(W.viewCutoff=d[28]),S[0]&4194304&&(W.showOnlyFocusDistricts=d[22]),S[0]&128&&(W.showStreets=d[7]),S[0]&8192&&(W.streets=d[13]),K.$set(W),d[21]?B?(B.p(d,S),S[0]&2097152&&$(B,1)):(B=zt(d),B.c(),$(B,1),B.m(e,null)):B&&(Ne(),re(B,1,1,()=>{B=null}),ye()),(!ne||S[0]&8388608)&&ue(e,"cursor",d[23]?"crosshair":"auto"),(!ne||S[0]&536870912)&&ue(e,"--container-font",d[29]+"px"),(!ne||S[0]&536870912)&&ue(e,"--control-width",270+(d[29]-16)*10+"px")},i(d){ne||($(q),$(f.$$.fragment,d),$(G),$(M),$(K.$$.fragment,d),$(B),ne=!0)},o(d){re(q),re(f.$$.fragment,d),re(G),re(M),re(K.$$.fragment,d),re(B),ne=!1},d(d){d&&u(e),De(x,d),De(ee,d),q&&q.d(),pl(f),G&&G.d(),M&&M.d(),pl(K),B&&B.d(),ve(),fe=!1,_l(pe)}}}async function Ls({fetch:l}){const e=await(await l(`${Dl}/output_census.topojson`)).json(),t=as(e.objects.census),s=$t(e,t).features.map(Rl),i=["pop","cvap"],a=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(h=>[...i,"GEOID","senate","assembly","congress"].every(b=>!h.includes(b))&&h===h.toLowerCase()).map(h=>h.split("_")[0]);return new Set([...o,...r])},[])],n=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:xt(t.geometries),dynamicVars:i,staticVars:a,idToIndex:n,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function As(l,e,t){let s,i,a,n,{topoData:o,obj:f,neighbors:r,data:h,dynamicVars:b,staticVars:w,tractVars:m,pluralityVars:_,idToIndex:g}=e,T=!0,E,j,z=!0,F=!1,A,Y,J,Z,O=[],C=[],X=[],te={},K="assembly",de,ve,ne,fe,pe,_e=2183,x=el.Brooklyn,ce=18,ee;const q=P=>ll(o,f,P),G=bl(q((P,ie)=>je(P).substring(0,11)!==je(ie).substring(0,11)));ls(async()=>{t(25,de=bl(Rl(q((ie,Q)=>je(ie)!==je(Q)))));const P=await Promise.all([fs(),cs()]);t(26,ve=P[0]),t(27,fe=P[1])});let M;const B=P=>h[P].properties[K];function d(P){const ie=B(P),Q=new Set(r[P].map(B).filter(se=>se!==ie));if(Q.size===1)t(0,f.geometries[P].properties[K]=M=Q.values().next().value,f);else if(Q.has(M))t(0,f.geometries[P].properties[K]=M,f);else return;t(0,f)}let S="present",N="pop";const W={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let H=!1;function ke({properties:P}){if(!P.ALAND)return"#fff";const ie=P[`${s}_total`];if(_.includes(s)){const Q=me=>P[`${s}_${me}`];if(Q(kl[0])===null)return"#eee";const se=[...kl].sort((me,Ue)=>Q(Ue)-Q(me));return xe[kl.indexOf(se[0])]}else if(w.includes(s)){if(!Ul(i(P)))return"#eee";if(ie<=10)return"#fff";for(let Q=1;Q<a.length;Q++)if(i(P)<a[Q])return xe[Q];return xe[a.length-1]}else{if(ie<=10)return"#fff";const Q=se=>P[`${s}_${se}`]/P[`${s}_total`];if(H){const se=$e.filter(Ye=>Q(Ye)>.5)[0];if(se!==void 0)return Vl[se]+Tl[ie<130?0:ie<200?1:2];const me=[...$e].sort((Ye,fl)=>Q(fl)-Q(Ye)),Ue=Q(me[0])-Q(me[1]);return Vl[me[0]]+Tl[Ue<.093?0:1]}else{const se=W[N];for(let me=1;me<se.length;me++)if(Q("asian")<se[me])return El[me-1];return El[se.length-1]}}}const we=async()=>t(12,ne=await hs()),Ve=async()=>t(13,pe=await us());function Ee(P){const ie=typeof P[0]=="string"?P.map(Ae=>h[g[Ae]].properties):P.map(Ae=>Ae.properties),Q=(Ae,qe)=>ie.reduce((Wt,Cl)=>Wt+(Cl[Ae]||0)*(qe&&Cl[qe]||1),0),se=Ae=>Q(Ae,"pop20_total")/Q("pop20_total"),me=(Ae,qe)=>Q(`${Ae}_${qe}`)/Q(`${Ae}_total`);let Ue=Q("pop10_asian"),Ye=Q("pop20_asian"),fl=Q("cvap10_asian"),Gt=Q("cvap19_asian");const Sl={income:se("income"),hhlang:me("hhlang","asian"),benefits:me("families","benefits"),pop20_total:Q("pop20_total"),pct_increase:(Ye-Ue)/Ue,pct_increase_cvap:(Gt-fl)/fl};return["pop20","cvap19","pop10","cvap10"].forEach(Ae=>$e.forEach(qe=>Sl[Ae+qe]=me(Ae,qe))),Sl}const v=P=>t(9,C=C.filter((ie,Q)=>Q!==P));async function he(){try{await fetch(`${Dl}/data.json`,{method:"POST",body:JSON.stringify(C)})}catch(P){console.error(P)}}async function Be(){try{const P=await fetch(`${Dl}/data.json`);t(9,C=(await P.json()).map(ie=>jl(Ml({},ie),{stats:Ee(ie.ids)})))}catch(P){console.error(P)}}function Ke(P){X.includes(P)?t(10,X=X.filter(ie=>ie!==P)):t(10,X=[...X,P])}const Le=()=>t(47,Y=!0),Pe=()=>t(47,Y=t(23,A=!1)),Re=P=>A&&Y&&(O.length===0?t(8,O=[je(P)]):O.push(je(P)));function be({key:P}){P==="="&&t(29,ce+=2),P==="-"&&t(29,ce-=2),P==="v"&&t(21,z=!z),P==="f"&&t(22,F=!F)}const tl=[[]];function sl(){N=Ll(this),t(17,N),t(3,w),t(2,b)}function Ie(){S=this.__value,t(16,S)}const Fe=()=>t(18,H=!H),il=()=>{t(20,T=!T),t(6,E=!1)};function nl(){K=Ll(this),t(11,K)}const Ge=()=>{t(6,E=!E),t(20,T=!1)},al=()=>t(23,A=!0),ol=P=>{t(14,x=el[P]),t(28,_e=6e3)},rl=()=>t(7,j=!j);function We(){ee=this.clientWidth,t(15,ee)}return l.$$set=P=>{"topoData"in P&&t(44,o=P.topoData),"obj"in P&&t(0,f=P.obj),"neighbors"in P&&t(45,r=P.neighbors),"data"in P&&t(1,h=P.data),"dynamicVars"in P&&t(2,b=P.dynamicVars),"staticVars"in P&&t(3,w=P.staticVars),"tractVars"in P&&t(4,m=P.tractVars),"pluralityVars"in P&&t(5,_=P.pluralityVars),"idToIndex"in P&&t(46,g=P.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&196616&&t(19,s=w.includes(N)?N:N+(S==="past"?10:N==="cvap"?19:20)),l.$$.dirty[0]&524288&&t(50,i={income:P=>P[s],hhlang:P=>P[`${s}_asian`]/P[`${s}_total`],graduates:P=>(P[`${s}_hs_grad`]+P[`${s}_ba_above`])/P[`${s}_total`],families:P=>P[`${s}_benefits`]/P[`${s}_total`],workers:P=>P[`${s}_publictransport`]/P[`${s}_total`]}[s]),l.$$.dirty[0]&917518|l.$$.dirty[1]&786432&&t(31,a=b.includes(N)&&!H?W[N]:W[s]||!w.includes(s)||s==="asiaentry"||t(49,W[s]=ts(h.map(P=>i(P.properties)).filter(Ul),6),W)),l.$$.dirty[0]&770|l.$$.dirty[1]&65536&&!Y&&O.length>0){if(O[0]===O[O.length-1]){const P=new Set(O),ie=ss(q((se,me)=>os(P.has(je(se)),P.has(je(me)))).coordinates.flat()),Q=h.filter(se=>is(ns(se.geometry.coordinates[0]),ie)).map(je);t(9,C=[...C,{outline:bl({type:"LineString",coordinates:ie}),ids:Q,stats:Ee(Q)}])}t(8,O=[])}if(l.$$.dirty[0]&6144&&K.startsWith("congress")&&ne===void 0&&we(),l.$$.dirty[0]&8320&&j&&pe===void 0&&Ve(),l.$$.dirty[0]&64|l.$$.dirty[1]&131072&&E&&!Z&&(Be(),t(48,Z=!0)),l.$$.dirty[0]&51200&&t(30,n=(K.endsWith("_names")?.9:1.1)/((ee-410)/x[2])),l.$$.dirty[0]&3073)for(let P=0;P<X.length;P++){const[ie,Q]=X[P].split(",");ie===K&&t(24,te[X[P]]=Ee(f.geometries.filter(({properties:se})=>Q===""+se[K])),te)}},[f,h,b,w,m,_,E,j,O,C,X,K,ne,pe,x,ee,S,N,H,s,T,z,F,A,te,de,ve,fe,_e,ce,n,a,J,q,G,d,ke,v,he,Ke,Le,Pe,Re,be,o,r,g,Y,Z,W,i,sl,Ie,tl,Fe,il,nl,Ge,al,ol,rl,We]}class Is extends cl{constructor(e){super();hl(this,e,As,Cs,ul,{topoData:44,obj:0,neighbors:45,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:46},null,[-1,-1,-1])}}export{Is as default,Ls as load};

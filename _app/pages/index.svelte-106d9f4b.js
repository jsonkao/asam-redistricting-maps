var it=Object.defineProperty,ot=Object.defineProperties;var rt=Object.getOwnPropertyDescriptors;var Qe=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var Ke=(t,e,s)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Je=(t,e)=>{for(var s in e||(e={}))ct.call(e,s)&&Ke(t,s,e[s]);if(Qe)for(var s of Qe(e))ft.call(e,s)&&Ke(t,s,e[s]);return t},Xe=(t,e)=>ot(t,rt(e));import{S as Ie,i as De,s as Ne,l as ne,g as M,K as _e,d as p,e as w,c as E,a as I,f as ie,L as ut,k as A,M as _t,m as S,b as N,J as h,N as Ze,O as ae,t as R,h as U,j as $,P as ce,F as Xl,G as Zl,H as $l,I as xl,q as J,Q as Le,R as qe,T as Me,o as se,U as ze,n as je,p as Re,V as ht,W as $e,X as pt,Y as dt,v as gt,Z as et,w as me,x as ve,y as be,B as ke,_ as Ve,$ as lt,a0 as mt,a1 as xe,a2 as Ge,a3 as vt}from"../chunks/vendor-80ca69e6.js";import{b as Ae}from"../chunks/paths-4b3c6e7e.js";const re=(t,e=1)=>Math.round(t*Math.pow(10,e+2))/Math.pow(10,e)+"%",Te=t=>"$"+Math.round(t/1e3)+"k",oe=t=>t.charAt(0).toUpperCase()+t.slice(1),el=t=>!isNaN(t)&&t!==null,ll=t=>`${Math.abs(t)} ${t<0?"below":"above"}`,tl=t=>{const[e,s]=t.split(","),l=e.split("_");return(l.length===1?"":`\u201C${l[1]==="latfor"?"LATFOR":oe(l[1])}\u201D `)+oe(l[0])+" "+s},tt=t=>{const e=t.split("_");return(e.length===1?"Current ":`\u201C${e[1]==="latfor"?"LATFOR":oe(e[1])}\u201D `)+oe(e[0])};function bt(t){const e=t.geometries,s=e[0].properties.fields;for(let l=0;l<e.length;l++){const a={};e[l].properties=e[l].properties.d.split(",");for(let n=0;n<s.length;n++){let i=e[l].properties[n];i===""?i=null:!isNaN(+i)&&s[n]!=="GEOID"&&(i=+i),a[s[n]]=i}e[l].properties=a}return t}function kt(t){if(!t.startsWith("#"))return t;let e=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16);return t.length>7?"rgba("+e+", "+s+", "+l+", "+parseInt(t.slice(7,9),16)/255+")":"rgb("+e+", "+s+", "+l+")"}function yt(t){const e=t.split(`
`),s=e.shift().split(",");return e.map(l=>l.split(",")).map(l=>s.reduce((a,n,i)=>(a[n]=l[i],(n.includes("vap")||n.includes("pop"))&&(a[n]=+a[n]),a),{}))}const He={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},We=["44","99","ee"],we=["asian","black","hispanic","white"],Se=["1990_earlier","1990_1999","2000_2009","2010_later"],Ue={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",vap:"Voting age population by race",pop:"Population by race"},Be=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],Ee=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],st={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},sl={"Queens, Western":[250,320,400,350],Queens:[200,290,775,600],Chinatown:[80,500,300,220],"Chinatown Wide":[80,430,500,600],Brooklyn:[20,670,600,520],"All of NYC":[20,0,975,1220]};"49 47 45 41 51 48".split(" ").map(t=>+t),"AU AW AS AT AV AY AO".split(" "),"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),"20 17 23 22 19".split(" ").map(t=>+t),"G AA Q AC".split(" "),"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ");if(typeof window=="undefined"){const[t,e,s,l]=sl[Object.keys(sl)[0]];console.log(`${t},${e},${t+s},${e+l}`)}function al(t,e,s){const l=t.slice();return l[21]=e[s],l[20]=s,l}function nl(t,e,s){const l=t.slice();return l[21]=e[s],l[20]=s,l}function il(t,e,s){const l=t.slice();return l[16]=e[s],l}function ol(t,e,s){const l=t.slice();return l[16]=e[s],l[20]=s,l}function rl(t,e,s){const l=t.slice();return l[10]=e[s],l}function cl(t,e,s){const l=t.slice();return l[13]=e[s],l}function Pt(t){let e,s,l=t[9],a=[];for(let o=0;o<l.length;o+=1)a[o]=fl(nl(t,l,o));let n=t[9],i=[];for(let o=0;o<n.length;o+=1)i[o]=ul(al(t,n,o));return{c(){e=w("div");for(let o=0;o<a.length;o+=1)a[o].c();s=A();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0,style:!0});var c=I(e);for(let r=0;r<a.length;r+=1)a[r].l(c);s=S(c);for(let r=0;r<i.length;r+=1)i[r].l(c);c.forEach(p),this.h()},h(){N(e,"class","color-legend svelte-660ibp"),ie(e,"grid-template-columns","repeat("+(t[3].includes(t[4])?5:6)+", 2.9em)"),Ze(e,"pctasian",t[3].includes(t[4]))},m(o,c){M(o,e,c);for(let r=0;r<a.length;r+=1)a[r].m(e,null);h(e,s);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,c){if(c&536){l=o[9];let r;for(r=0;r<l.length;r+=1){const u=nl(o,l,r);a[r]?a[r].p(u,c):(a[r]=fl(u),a[r].c(),a[r].m(e,s))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}if(c&536){n=o[9];let r;for(r=0;r<n.length;r+=1){const u=al(o,n,r);i[r]?i[r].p(u,c):(i[r]=ul(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}c&24&&ie(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.9em)"),c&24&&Ze(e,"pctasian",o[3].includes(o[4]))},d(o){o&&p(e),ae(a,o),ae(i,o)}}}function wt(t){let e,s,l=t[8],a=[];for(let o=0;o<l.length;o+=1)a[o]=_l(ol(t,l,o));let n=t[8],i=[];for(let o=0;o<n.length;o+=1)i[o]=hl(il(t,n,o));return{c(){e=w("div");for(let o=0;o<a.length;o+=1)a[o].c();s=A();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0});var c=I(e);for(let r=0;r<a.length;r+=1)a[r].l(c);s=S(c);for(let r=0;r<i.length;r+=1)i[r].l(c);c.forEach(p),this.h()},h(){N(e,"class","color-legend plurality-legend svelte-660ibp")},m(o,c){M(o,e,c);for(let r=0;r<a.length;r+=1)a[r].m(e,null);h(e,s);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,c){if(c&256){l=o[8];let r;for(r=0;r<l.length;r+=1){const u=ol(o,l,r);a[r]?a[r].p(u,c):(a[r]=_l(u),a[r].c(),a[r].m(e,s))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}if(c&256){n=o[8];let r;for(r=0;r<n.length;r+=1){const u=il(o,n,r);i[r]?i[r].p(u,c):(i[r]=hl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(o){o&&p(e),ae(a,o),ae(i,o)}}}function Et(t){let e,s,l,a,n,i,o,c,r,u,f,k,v=t[0],g=[];for(let y=0;y<v.length;y+=1)g[y]=dl(rl(t,v,y));return{c(){e=w("div");for(let y=0;y<g.length;y+=1)g[y].c();s=A(),l=w("p"),a=w("span"),n=R("Weak plurality"),i=A(),o=w("p"),c=A(),r=w("p"),u=R("Majority"),f=A(),k=w("p"),this.h()},l(y){e=E(y,"DIV",{class:!0});var T=I(e);for(let W=0;W<g.length;W+=1)g[W].l(T);s=S(T),l=E(T,"P",{class:!0});var d=I(l);a=E(d,"SPAN",{});var b=I(a);n=U(b,"Weak plurality"),b.forEach(p),d.forEach(p),i=S(T),o=E(T,"P",{class:!0}),I(o).forEach(p),c=S(T),r=E(T,"P",{class:!0});var C=I(r);u=U(C,"Majority"),C.forEach(p),f=S(T),k=E(T,"P",{class:!0}),I(k).forEach(p),T.forEach(p),this.h()},h(){N(l,"class","col-head svelte-660ibp"),N(o,"class","col-head svelte-660ibp"),N(r,"class","col-head svelte-660ibp"),N(k,"class","col-head svelte-660ibp"),N(e,"class","legend svelte-660ibp")},m(y,T){M(y,e,T);for(let d=0;d<g.length;d+=1)g[d].m(e,null);h(e,s),h(e,l),h(l,a),h(a,n),h(e,i),h(e,o),h(e,c),h(e,r),h(r,u),h(e,f),h(e,k)},p(y,T){if(T&7){v=y[0];let d;for(d=0;d<v.length;d+=1){const b=rl(y,v,d);g[d]?g[d].p(b,T):(g[d]=dl(b),g[d].c(),g[d].m(e,s))}for(;d<g.length;d+=1)g[d].d(1);g.length=v.length}},d(y){y&&p(e),ae(g,y)}}}function fl(t){let e;return{c(){e=w("div"),this.h()},l(s){e=E(s,"DIV",{style:!0}),I(e).forEach(p),this.h()},h(){ie(e,"background-color",t[3].includes(t[4])?Be[t[20]]:Ee[t[20]])},m(s,l){M(s,e,l)},p(s,l){l&24&&ie(e,"background-color",s[3].includes(s[4])?Be[s[20]]:Ee[s[20]])},d(s){s&&p(e)}}}function ul(t){let e,s,l=(t[9][t[9].length-1]<1?re(t[21],0):t[9][t[9].length-1]>1e3?Te(t[21]):t[21])+(t[3].includes(t[4])&&t[20]===t[9].length-1?"+ Asian":""),a;return{c(){e=w("p"),s=new ut,a=A(),this.h()},l(n){e=E(n,"P",{class:!0});var i=I(e);s=_t(i),a=S(i),i.forEach(p),this.h()},h(){s.a=a,N(e,"class","svelte-660ibp")},m(n,i){M(n,e,i),s.m(l,e),h(e,a)},p(n,i){i&536&&l!==(l=(n[9][n[9].length-1]<1?re(n[21],0):n[9][n[9].length-1]>1e3?Te(n[21]):n[21])+(n[3].includes(n[4])&&n[20]===n[9].length-1?"+ Asian":""))&&s.p(l)},d(n){n&&p(e)}}}function _l(t){let e;return{c(){e=w("div"),this.h()},l(s){e=E(s,"DIV",{style:!0}),I(e).forEach(p),this.h()},h(){ie(e,"background-color",Ee[t[20]])},m(s,l){M(s,e,l)},p:_e,d(s){s&&p(e)}}}function hl(t){let e,s=t[16].replace("_","-")+"",l;return{c(){e=w("p"),l=R(s),this.h()},l(a){e=E(a,"P",{class:!0});var n=I(e);l=U(n,s),n.forEach(p),this.h()},h(){N(e,"class","svelte-660ibp")},m(a,n){M(a,e,n),h(e,l)},p(a,n){n&256&&s!==(s=a[16].replace("_","-")+"")&&$(l,s)},d(a){a&&p(e)}}}function pl(t){let e;return{c(){e=w("div"),this.h()},l(s){e=E(s,"DIV",{style:!0}),I(e).forEach(p),this.h()},h(){ie(e,"background-color",t[2][t[10]]+t[13])},m(s,l){M(s,e,l)},p(s,l){l&7&&ie(e,"background-color",s[2][s[10]]+s[13])},d(s){s&&p(e)}}}function dl(t){let e,s,l=oe(t[10])+"",a,n=t[1],i=[];for(let o=0;o<n.length;o+=1)i[o]=pl(cl(t,n,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=A(),s=w("p"),a=R(l),this.h()},l(o){for(let r=0;r<i.length;r+=1)i[r].l(o);e=S(o),s=E(o,"P",{class:!0});var c=I(s);a=U(c,l),c.forEach(p),this.h()},h(){N(s,"class","row-label svelte-660ibp")},m(o,c){for(let r=0;r<i.length;r+=1)i[r].m(o,c);M(o,e,c),M(o,s,c),h(s,a)},p(o,c){if(c&7){n=o[1];let r;for(r=0;r<n.length;r+=1){const u=cl(o,n,r);i[r]?i[r].p(u,c):(i[r]=pl(u),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}c&1&&l!==(l=oe(o[10])+"")&&$(a,l)},d(o){ae(i,o),o&&p(e),o&&p(s)}}}function Vt(t){let e,s,l;function a(o,c){return c&88&&(e=null),c&160&&(s=null),e==null&&(e=!!(o[3].includes(o[4])&&o[6])),e?Et:(s==null&&(s=!!o[7].includes(o[5])),s?wt:Pt)}let n=a(t,-1),i=n(t);return{c(){i.c(),l=ne()},l(o){i.l(o),l=ne()},m(o,c){i.m(o,c),M(o,l,c)},p(o,[c]){n===(n=a(o,c))&&i?i.p(o,c):(i.d(1),i=n(o),i&&(i.c(),i.m(l.parentNode,l)))},i:_e,o:_e,d(o){i.d(o),o&&p(l)}}}function Tt(t,e,s){let{groups:l,levels:a,colors:n,dynamicVars:i,variable:o,metric:c,showPluralities:r,pluralityVars:u,periods:f,breaks:k}=e;return t.$$set=v=>{"groups"in v&&s(0,l=v.groups),"levels"in v&&s(1,a=v.levels),"colors"in v&&s(2,n=v.colors),"dynamicVars"in v&&s(3,i=v.dynamicVars),"variable"in v&&s(4,o=v.variable),"metric"in v&&s(5,c=v.metric),"showPluralities"in v&&s(6,r=v.showPluralities),"pluralityVars"in v&&s(7,u=v.pluralityVars),"periods"in v&&s(8,f=v.periods),"breaks"in v&&s(9,k=v.breaks)},[l,a,n,i,o,c,r,u,f,k]}class It extends Ie{constructor(e){super();De(this,e,Tt,Vt,Ne,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function gl(t,e,s){const l=t.slice();return l[20]=e[s].name,l[10]=e[s].stats,l[22]=s,l}function ml(t,e,s){const l=t.slice();return l[23]=e[s],l}function vl(t,e,s){const l=t.slice();return l[14]=e[s],l}function bl(t,e,s){const l=t.slice();return l[17]=e[s],l}function kl(t){let e;function s(n,i){if(n[9]==="districts")return Nt;if(n[9]==="community")return Dt}let l=s(t),a=l&&l(t);return{c(){a&&a.c(),e=ne()},l(n){a&&a.l(n),e=ne()},m(n,i){a&&a.m(n,i),M(n,e,i)},p(n,i){l===(l=s(n))&&a?a.p(n,i):(a&&a.d(1),a=l&&l(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){a&&a.d(n),n&&p(e)}}}function Dt(t){let e,s=t[7],l=[];for(let a=0;a<s.length;a+=1)l[a]=Pl(gl(t,s,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<l.length;i+=1)l[i].m(a,n);M(a,e,n)},p(a,n){if(n&392){s=a[7];let i;for(i=0;i<s.length;i+=1){const o=gl(a,s,i);l[i]?l[i].p(o,n):(l[i]=Pl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(a){ae(l,a),a&&p(e)}}}function Nt(t){let e,s=t[0],l=[];for(let a=0;a<s.length;a+=1)l[a]=Tl(vl(t,s,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<l.length;i+=1)l[i].m(a,n);M(a,e,n)},p(a,n){if(n&3199){s=a[0];let i;for(i=0;i<s.length;i+=1){const o=vl(a,s,i);l[i]?l[i].p(o,n):(l[i]=Tl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(a){ae(l,a),a&&p(e)}}}function yl(t){let e,s,l=oe(t[23])+"",a,n,i,o=re(t[10]["cvap19"+t[23]])+"",c,r,u,f=re(t[10]["pop20"+t[23]])+"",k,v;return{c(){e=w("tr"),s=w("td"),a=R(l),n=A(),i=w("td"),c=R(o),r=A(),u=w("td"),k=R(f),v=A(),this.h()},l(g){e=E(g,"TR",{class:!0});var y=I(e);s=E(y,"TD",{class:!0});var T=I(s);a=U(T,l),T.forEach(p),n=S(y),i=E(y,"TD",{class:!0});var d=I(i);c=U(d,o),d.forEach(p),r=S(y),u=E(y,"TD",{class:!0});var b=I(u);k=U(b,f),b.forEach(p),v=S(y),y.forEach(p),this.h()},h(){N(s,"class","svelte-16gulxs"),N(i,"class","svelte-16gulxs"),N(u,"class","svelte-16gulxs"),N(e,"class","svelte-16gulxs")},m(g,y){M(g,e,y),h(e,s),h(s,a),h(e,n),h(e,i),h(i,c),h(e,r),h(e,u),h(u,k),h(e,v)},p(g,y){y&8&&l!==(l=oe(g[23])+"")&&$(a,l),y&136&&o!==(o=re(g[10]["cvap19"+g[23]])+"")&&$(c,o),y&136&&f!==(f=re(g[10]["pop20"+g[23]])+"")&&$(k,f)},d(g){g&&p(e)}}}function Pl(t){let e,s,l,a=(t[20]||"COI"+(t[22]+1))+"",n,i,o,c,r,u,f,k,v,g,y,T,d,b,C,W,H,B,j=Te(t[10].income)+"",m,P,V,_,L=re(t[10].hhlang)+"",O,Y,X,Q,F=re(t[10].benefits)+"",Z,ye,Ce,Oe;function Fe(){return t[13](t[22])}let he=t[3],ee=[];for(let x=0;x<he.length;x+=1)ee[x]=yl(ml(t,he,x));return{c(){e=w("div"),s=w("p"),l=w("i"),n=R(a),i=A(),o=w("button"),c=R("\u{1F5D1}"),r=A(),u=w("table"),f=w("tr"),k=w("th"),v=A(),g=w("th"),y=R("CVAP"),T=A(),d=w("th"),b=R("Pop."),C=A();for(let x=0;x<ee.length;x+=1)ee[x].c();W=A(),H=w("p"),B=R("Income: "),m=R(j),P=A(),V=w("p"),_=R("Asian and LEP: "),O=R(L),Y=A(),X=w("p"),Q=R("Pct. gov't benefits: "),Z=R(F),ye=A(),this.h()},l(x){e=E(x,"DIV",{});var K=I(e);s=E(K,"P",{class:!0});var q=I(s);l=E(q,"I",{});var D=I(l);n=U(D,a),D.forEach(p),i=S(q),o=E(q,"BUTTON",{});var te=I(o);c=U(te,"\u{1F5D1}"),te.forEach(p),q.forEach(p),r=S(K),u=E(K,"TABLE",{class:!0});var G=I(u);f=E(G,"TR",{class:!0});var z=I(f);k=E(z,"TH",{class:!0}),I(k).forEach(p),v=S(z),g=E(z,"TH",{class:!0});var le=I(g);y=U(le,"CVAP"),le.forEach(p),T=S(z),d=E(z,"TH",{class:!0});var pe=I(d);b=U(pe,"Pop."),pe.forEach(p),z.forEach(p),C=S(G);for(let fe=0;fe<ee.length;fe+=1)ee[fe].l(G);G.forEach(p),W=S(K),H=E(K,"P",{class:!0});var ue=I(H);B=U(ue,"Income: "),m=U(ue,j),ue.forEach(p),P=S(K),V=E(K,"P",{class:!0});var de=I(V);_=U(de,"Asian and LEP: "),O=U(de,L),de.forEach(p),Y=S(K),X=E(K,"P",{class:!0});var Pe=I(X);Q=U(Pe,"Pct. gov't benefits: "),Z=U(Pe,F),Pe.forEach(p),ye=S(K),K.forEach(p),this.h()},h(){N(s,"class","svelte-16gulxs"),N(k,"class","svelte-16gulxs"),N(g,"class","svelte-16gulxs"),N(d,"class","svelte-16gulxs"),N(f,"class","svelte-16gulxs"),N(u,"class","svelte-16gulxs"),N(H,"class","table-footer svelte-16gulxs"),N(V,"class","table-footer svelte-16gulxs"),N(X,"class","table-footer svelte-16gulxs")},m(x,K){M(x,e,K),h(e,s),h(s,l),h(l,n),h(s,i),h(s,o),h(o,c),h(e,r),h(e,u),h(u,f),h(f,k),h(f,v),h(f,g),h(g,y),h(f,T),h(f,d),h(d,b),h(u,C);for(let q=0;q<ee.length;q+=1)ee[q].m(u,null);h(e,W),h(e,H),h(H,B),h(H,m),h(e,P),h(e,V),h(V,_),h(V,O),h(e,Y),h(e,X),h(X,Q),h(X,Z),h(e,ye),Ce||(Oe=ce(o,"click",Fe),Ce=!0)},p(x,K){if(t=x,K&128&&a!==(a=(t[20]||"COI"+(t[22]+1))+"")&&$(n,a),K&136){he=t[3];let q;for(q=0;q<he.length;q+=1){const D=ml(t,he,q);ee[q]?ee[q].p(D,K):(ee[q]=yl(D),ee[q].c(),ee[q].m(u,null))}for(;q<ee.length;q+=1)ee[q].d(1);ee.length=he.length}K&128&&j!==(j=Te(t[10].income)+"")&&$(m,j),K&128&&L!==(L=re(t[10].hhlang)+"")&&$(O,L),K&128&&F!==(F=re(t[10].benefits)+"")&&$(Z,F)},d(x){x&&p(e),ae(ee,x),Ce=!1,Oe()}}}function wl(t){let e,s,l,a=tl(t[14])+"",n,i,o,c,r,u,f,k=t[14].includes("_")?t[5]==="cvap"?"19":"20":"10",v,g,y,T,d,b,C,W;function H(){return t[12](t[14])}let B=t[3],j=[];for(let P=0;P<B.length;P+=1)j[P]=El(bl(t,B,P));let m=t[4]&&t[2]in t[6]&&Vl(t);return{c(){e=w("div"),s=w("p"),l=w("i"),n=R(a),i=A(),o=w("p"),c=A(),r=w("p"),u=R(t[11]),f=R(" (20"),v=R(k),g=R(")"),y=A(),T=w("div");for(let P=0;P<j.length;P+=1)j[P].c();d=A(),m&&m.c(),b=A(),this.h()},l(P){e=E(P,"DIV",{class:!0});var V=I(e);s=E(V,"P",{class:!0});var _=I(s);l=E(_,"I",{});var L=I(l);n=U(L,a),L.forEach(p),_.forEach(p),i=S(V),o=E(V,"P",{class:!0}),I(o).forEach(p),c=S(V),r=E(V,"P",{class:!0});var O=I(r);u=U(O,t[11]),f=U(O," (20"),v=U(O,k),g=U(O,")"),O.forEach(p),y=S(V),T=E(V,"DIV",{class:!0});var Y=I(T);for(let X=0;X<j.length;X+=1)j[X].l(Y);Y.forEach(p),d=S(V),m&&m.l(V),b=S(V),V.forEach(p),this.h()},h(){N(s,"class","svelte-16gulxs"),N(o,"class","svelte-16gulxs"),N(r,"class","chart-title svelte-16gulxs"),N(T,"class","chart svelte-16gulxs"),N(e,"class","district-aggregate svelte-16gulxs")},m(P,V){M(P,e,V),h(e,s),h(s,l),h(l,n),h(e,i),h(e,o),h(e,c),h(e,r),h(r,u),h(r,f),h(r,v),h(r,g),h(e,y),h(e,T);for(let _=0;_<j.length;_+=1)j[_].m(T,null);h(e,d),m&&m.m(e,null),h(e,b),C||(W=ce(s,"click",H),C=!0)},p(P,V){if(t=P,V&1&&a!==(a=tl(t[14])+"")&&$(n,a),V&2048&&$(u,t[11]),V&33&&k!==(k=t[14].includes("_")?t[5]==="cvap"?"19":"20":"10")&&$(v,k),V&1065){B=t[3];let _;for(_=0;_<B.length;_+=1){const L=bl(t,B,_);j[_]?j[_].p(L,V):(j[_]=El(L),j[_].c(),j[_].m(T,null))}for(;_<j.length;_+=1)j[_].d(1);j.length=B.length}t[4]&&t[2]in t[6]?m?m.p(t,V):(m=Vl(t),m.c(),m.m(e,b)):m&&(m.d(1),m=null)},d(P){P&&p(e),ae(j,P),m&&m.d(),C=!1,W()}}}function El(t){let e,s=oe(t[17])+"",l,a,n,i,o=re(t[10][t[14]][t[5]+(t[14].includes("_")?t[5]==="cvap"?"19":"20":"10")+t[17]],t[17]==="asian")+"",c,r,u;return{c(){e=w("p"),l=R(s),a=A(),n=w("div"),i=w("p"),c=R(o),r=A(),this.h()},l(f){e=E(f,"P",{class:!0});var k=I(e);l=U(k,s),k.forEach(p),a=S(f),n=E(f,"DIV",{class:!0,style:!0});var v=I(n);i=E(v,"P",{class:!0});var g=I(i);c=U(g,o),g.forEach(p),r=S(v),v.forEach(p),this.h()},h(){N(e,"class","bar-label svelte-16gulxs"),N(i,"class","svelte-16gulxs"),N(n,"class",u="bar bar-"+t[17]+" svelte-16gulxs"),ie(n,"width",re(t[10][t[14]][t[5]+(t[14].includes("_")?t[5]==="cvap"?"19":"20":"10")+t[17]]))},m(f,k){M(f,e,k),h(e,l),M(f,a,k),M(f,n,k),h(n,i),h(i,c),h(n,r)},p(f,k){k&8&&s!==(s=oe(f[17])+"")&&$(l,s),k&1065&&o!==(o=re(f[10][f[14]][f[5]+(f[14].includes("_")?f[5]==="cvap"?"19":"20":"10")+f[17]],f[17]==="asian")+"")&&$(c,o),k&8&&u!==(u="bar bar-"+f[17]+" svelte-16gulxs")&&N(n,"class",u),k&1065&&ie(n,"width",re(f[10][f[14]][f[5]+(f[14].includes("_")?f[5]==="cvap"?"19":"20":"10")+f[17]]))},d(f){f&&p(e),f&&p(a),f&&p(n)}}}function Vl(t){let e,s,l=Te(t[10][t[14]].income)+(t[4]&&t[2]in t[6]?"; "+ll(t[10][t[14]].pop20_total-t[6][t[2]]):""),a;return{c(){e=w("p"),s=R("Income: "),a=R(l),this.h()},l(n){e=E(n,"P",{class:!0});var i=I(e);s=U(i,"Income: "),a=U(i,l),i.forEach(p),this.h()},h(){N(e,"class","table-footer svelte-16gulxs")},m(n,i){M(n,e,i),h(e,s),h(e,a)},p(n,i){i&1109&&l!==(l=Te(n[10][n[14]].income)+(n[4]&&n[2]in n[6]?"; "+ll(n[10][n[14]].pop20_total-n[6][n[2]]):""))&&$(a,l)},d(n){n&&p(e)}}}function Tl(t){let e=t[14].split(",")[0]===t[2],s,l=e&&wl(t);return{c(){l&&l.c(),s=ne()},l(a){l&&l.l(a),s=ne()},m(a,n){l&&l.m(a,n),M(a,s,n)},p(a,n){n&5&&(e=a[14].split(",")[0]===a[2]),e?l?l.p(a,n):(l=wl(a),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&p(s)}}}function Lt(t){let e,s=t[5]!==null&&kl(t);return{c(){s&&s.c(),e=ne()},l(l){s&&s.l(l),e=ne()},m(l,a){s&&s.m(l,a),M(l,e,a)},p(l,[a]){l[5]!==null?s?s.p(l,a):(s=kl(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:_e,o:_e,d(l){s&&s.d(l),l&&p(e)}}}function Ct(t,e,s){let l,{aggregates:a,handleLabelClick:n,plan:i,stats:o,groups:c,changingLines:r,variable:u,idealValues:f}=e,{drawings:k=[]}=e,{delDrawing:v=void 0}=e,{type:g="districts"}=e;const y=d=>n(d),T=d=>v(d);return t.$$set=d=>{"aggregates"in d&&s(0,a=d.aggregates),"handleLabelClick"in d&&s(1,n=d.handleLabelClick),"plan"in d&&s(2,i=d.plan),"stats"in d&&s(10,o=d.stats),"groups"in d&&s(3,c=d.groups),"changingLines"in d&&s(4,r=d.changingLines),"variable"in d&&s(5,u=d.variable),"idealValues"in d&&s(6,f=d.idealValues),"drawings"in d&&s(7,k=d.drawings),"delDrawing"in d&&s(8,v=d.delDrawing),"type"in d&&s(9,g=d.type)},t.$$.update=()=>{t.$$.dirty&32&&s(11,l={vap:"Voting-age population",pop:"Population"}[u])},[a,n,i,c,r,u,f,k,v,g,o,l,y,T]}class at extends Ie{constructor(e){super();De(this,e,Ct,Lt,Ne,{aggregates:0,handleLabelClick:1,plan:2,stats:10,groups:3,changingLines:4,variable:5,idealValues:6,drawings:7,delDrawing:8,type:9})}}const Ot=t=>({}),Il=t=>({}),At=t=>({}),Dl=t=>({});function Nl(t){let e,s,l,a;const n=t[5].body,i=Xl(n,t,t[4],Il);return{c(){e=w("div"),i&&i.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var c=I(e);i&&i.l(c),c.forEach(p),this.h()},h(){N(e,"class","svelte-a3zm9u")},m(o,c){M(o,e,c),i&&i.m(e,null),a=!0},p(o,c){i&&i.p&&(!a||c&16)&&Zl(i,n,o,o[4],a?xl(n,o[4],c,Ot):$l(o[4]),Il)},i(o){a||(J(i,o),Le(()=>{l&&l.end(1),s=qe(e,Me,{}),s.start()}),a=!0)},o(o){se(i,o),s&&s.invalidate(),l=ze(e,Me,{}),a=!1},d(o){o&&p(e),i&&i.d(o),o&&l&&l.end()}}}function St(t){let e,s,l,a=(t[3][t[2]]||oe(t[2]))+"",n,i,o=t[0].includes(t[2])?"\u2191":"\u2193",c,r,u,f=t[0].includes(t[2]),k,v,g;const y=t[5].title,T=Xl(y,t,t[4],Dl);let d=f&&Nl(t);return{c(){e=w("div"),s=w("h3"),l=w("button"),n=R(a),i=A(),c=R(o),r=A(),T&&T.c(),u=A(),d&&d.c(),this.h()},l(b){e=E(b,"DIV",{class:!0});var C=I(e);s=E(C,"H3",{class:!0});var W=I(s);l=E(W,"BUTTON",{});var H=I(l);n=U(H,a),i=S(H),c=U(H,o),H.forEach(p),r=S(W),T&&T.l(W),W.forEach(p),u=S(C),d&&d.l(C),C.forEach(p),this.h()},h(){N(s,"class","svelte-a3zm9u"),N(e,"class","panel svelte-a3zm9u")},m(b,C){M(b,e,C),h(e,s),h(s,l),h(l,n),h(l,i),h(l,c),h(s,r),T&&T.m(s,null),h(e,u),d&&d.m(e,null),k=!0,v||(g=ce(l,"click",t[6]),v=!0)},p(b,[C]){(!k||C&4)&&a!==(a=(b[3][b[2]]||oe(b[2]))+"")&&$(n,a),(!k||C&5)&&o!==(o=b[0].includes(b[2])?"\u2191":"\u2193")&&$(c,o),T&&T.p&&(!k||C&16)&&Zl(T,y,b,b[4],k?xl(y,b[4],C,At):$l(b[4]),Dl),C&5&&(f=b[0].includes(b[2])),f?d?(d.p(b,C),C&5&&J(d,1)):(d=Nl(b),d.c(),J(d,1),d.m(e,null)):d&&(je(),se(d,1,1,()=>{d=null}),Re())},i(b){k||(J(T,b),J(d),k=!0)},o(b){se(T,b),se(d),k=!1},d(b){b&&p(e),T&&T.d(b),d&&d.d(),v=!1,g()}}}function Mt(t,e,s){let{$$slots:l={},$$scope:a}=e,{panels:n,togglePanel:i,panelName:o}=e;const c={plan:"Districts",plan2:"Compare a district",views:"Views"},r=()=>i(o);return t.$$set=u=>{"panels"in u&&s(0,n=u.panels),"togglePanel"in u&&s(1,i=u.togglePanel),"panelName"in u&&s(2,o=u.panelName),"$$scope"in u&&s(4,a=u.$$scope)},[n,i,o,c,a,l,r]}class Ll extends Ie{constructor(e){super();De(this,e,Mt,St,Ne,{panels:0,togglePanel:1,panelName:2})}}function Cl(t){let e,s,l,a,n,i,o,c,r,u,f;return{c(){e=w("div"),s=w("a"),l=R("Click here"),a=R(` to see a video tutorial of this website.
    `),n=w("button"),i=R("Close message."),this.h()},l(k){e=E(k,"DIV",{class:!0});var v=I(e);s=E(v,"A",{href:!0,target:!0});var g=I(s);l=U(g,"Click here"),g.forEach(p),a=U(v,` to see a video tutorial of this website.
    `),n=E(v,"BUTTON",{class:!0});var y=I(n);i=U(y,"Close message."),y.forEach(p),v.forEach(p),this.h()},h(){N(s,"href","https://youtu.be/dU5a4PRSF14"),N(s,"target","_blank"),N(n,"class","svelte-a8zkqf"),N(e,"class","modal svelte-a8zkqf")},m(k,v){M(k,e,v),h(e,s),h(s,l),h(e,a),h(e,n),h(n,i),r=!0,u||(f=ce(n,"click",function(){ht(t[1])&&t[1].apply(this,arguments)}),u=!0)},p(k,v){t=k},i(k){r||(Le(()=>{c&&c.end(1),o=qe(e,$e,{}),o.start()}),r=!0)},o(k){o&&o.invalidate(),c=ze(e,$e,{}),r=!1},d(k){k&&p(e),k&&c&&c.end(),u=!1,f()}}}function jt(t){let e,s,l=t[0]&&Cl(t);return{c(){l&&l.c(),e=ne()},l(a){l&&l.l(a),e=ne()},m(a,n){l&&l.m(a,n),M(a,e,n),s=!0},p(a,[n]){a[0]?l?(l.p(a,n),n&1&&J(l,1)):(l=Cl(a),l.c(),J(l,1),l.m(e.parentNode,e)):l&&(je(),se(l,1,1,()=>{l=null}),Re())},i(a){s||(J(l),s=!0)},o(a){se(l),s=!1},d(a){l&&l.d(a),a&&p(e)}}}function Rt(t,e,s){let{showModal:l,closeModal:a}=e;return t.$$set=n=>{"showModal"in n&&s(0,l=n.showModal),"closeModal"in n&&s(1,a=n.closeModal)},[l,a]}class Ut extends Ie{constructor(e){super();De(this,e,Rt,jt,Ne,{showModal:0,closeModal:1})}}function Bt(t){let e,s,l,a,n;return{c(){e=w("link"),s=w("script"),a=A(),n=w("div"),this.h()},l(i){const o=pt('[data-svelte="svelte-1p75gtx"]',document.head);e=E(o,"LINK",{href:!0,rel:!0}),s=E(o,"SCRIPT",{src:!0});var c=I(s);c.forEach(p),o.forEach(p),a=S(i),n=E(i,"DIV",{id:!0,class:!0}),I(n).forEach(p),this.h()},h(){N(e,"href","https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css"),N(e,"rel","stylesheet"),dt(s.src,l="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js")||N(s,"src",l),N(n,"id","map"),N(n,"class","svelte-1b204ev")},m(i,o){h(document.head,e),h(document.head,s),M(i,a,o),M(i,n,o)},p:_e,i:_e,o:_e,d(i){p(e),p(s),i&&p(a),i&&p(n)}}}function Ft(t,e,s){let{census:l,plansTopo:a,color:n,showPluralities:i,metric:o,period:c,panels:r,plan:u,plan2:f,points:k,isolate:v,pointing:g,opacity:y,handleLabelClick:T,togglePointing:d}=e,b,C;const W=["assembly","assembly_letters","assembly_names","assembly_unity","assembly_latfor","senate","senate_letters","senate_names","senate_unity","senate_latfor"];function H(){if(o===null)return"rgba(0, 0, 0, 0)";const m=["match",["get","GEOID"]];return l.features.forEach(P=>{m.push(P.properties.GEOID,kt(n(P)))}),m.push("rgba(0, 0, 0, 0)"),m}const B=["case",["boolean",["feature-state","pointing"],!1],2.5,1.2];gt(()=>{mapboxgl.accessToken="pk.eyJ1IjoianNvbmthbyIsImEiOiJjanNvM2U4bXQwN2I3NDRydXQ3Z2kwbWQwIn0.JWAoBlcpDJwkzG-O5_r0ZA",s(15,b=new mapboxgl.Map({container:"map",style:"mapbox://styles/jsonkao/cl1f4e52k000t15p9pvoqwiwl/draft",center:[-73.967,40.72],zoom:11})),b.on("load",async()=>{b.addSource("census",{type:"geojson",data:l}),b.addLayer({id:"census",type:"fill",source:"census",paint:{"fill-color":H()}},"parks");const m={};W.forEach(P=>{const V=et(a,a.objects[P]);m[P]={type:"FeatureCollection",features:V.features.map(_=>Xe(Je({},_),{id:_.properties[P]}))}}),W.forEach(P=>{b.addSource(P,{type:"geojson",data:m[P],promoteId:P}),b.addLayer({id:P+"_outline",type:"line",source:P,layout:{},paint:{"line-color":"#121212","line-width":B}},"road-label-small"),b.addLayer({id:P+"_fill",type:"fill",source:P,layout:{},paint:{"fill-color":"#000000","fill-opacity":0}}),b.addSource(P+"_labels",{type:"geojson",data:{type:"FeatureCollection",features:k.features.filter(V=>V.properties[P]).map(V=>({type:V.feature,id:V.properties[P],geometry:V.geometry,properties:V.properties}))}}),b.addLayer({id:P+"_labels",type:"symbol",source:P+"_labels",layout:{"text-justify":"auto","text-allow-overlap":!0,"text-variable-anchor":["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"text-radial-offset":1,"text-field":["format",["get",P],{"font-scale":1.2}]},paint:{"text-color":"#121212","text-halo-color":"#fff","text-halo-width":1.2}})}),s(16,C=!0),b.on("click",P=>{if(g){d();const V=b.queryRenderedFeatures(P.point).filter(_=>W.some(L=>L===_.source));s(17,j=V.map(_=>(b.setFeatureState({source:_.source,id:_.properties[_.source]},{pointing:!0}),T(`${_.source},${_.properties[_.source]}`,!0),{source:_.source,id:_.properties[_.source]})))}else b.queryRenderedFeatures(P.point).filter(_=>_.source.endsWith("_labels")).forEach(_=>{const L=_.source.replace("_labels","");b.setFeatureState({source:L,id:_.properties[L]},{pointing:!0}),T(`${L},${_.properties[L]}`)})})})});let j=[];return t.$$set=m=>{"census"in m&&s(0,l=m.census),"plansTopo"in m&&s(1,a=m.plansTopo),"color"in m&&s(2,n=m.color),"showPluralities"in m&&s(3,i=m.showPluralities),"metric"in m&&s(4,o=m.metric),"period"in m&&s(5,c=m.period),"panels"in m&&s(6,r=m.panels),"plan"in m&&s(7,u=m.plan),"plan2"in m&&s(8,f=m.plan2),"points"in m&&s(9,k=m.points),"isolate"in m&&s(10,v=m.isolate),"pointing"in m&&s(11,g=m.pointing),"opacity"in m&&s(12,y=m.opacity),"handleLabelClick"in m&&s(13,T=m.handleLabelClick),"togglePointing"in m&&s(14,d=m.togglePointing)},t.$$.update=()=>{if(t.$$.dirty&98752&&C&&W.forEach(m=>{const P=r.includes("plan2")&&m===f,V=r.includes("plan")&&m===u||P?"visible":"none";b.setLayoutProperty(`${m}_outline`,"visibility",V),b.setLayoutProperty(`${m}_fill`,"visibility",V),b.setLayoutProperty(`${m}_labels`,"visibility",V);const _="#121212";b.setPaintProperty(`${m}_outline`,"line-color",_),b.setPaintProperty(`${m}_labels`,"text-color",_)}),t.$$.dirty&239616&&C&&(b.getCanvas().style.cursor=g?"crosshair":"pointer",g&&j.length>0&&j.forEach(m=>{b.setFeatureState(m,{pointing:!1}),T(`${m.source},${m.id}`,!1,!0)})),t.$$.dirty&102848&&C)if(r.includes("plan2")){let m=V=>Math.max(0,Math.min(V,1));b.setPaintProperty(`${u}_outline`,"line-opacity",m(1-y)),b.setPaintProperty(`${f}_outline`,"line-opacity",m(y)),m=V=>Math.max(0,Math.min(V,1)),b.setPaintProperty(`${u}_labels`,"text-opacity",m(1-y)),b.setPaintProperty(`${f}_labels`,"text-opacity",m(y))}else b.setPaintProperty(`${u}_outline`,"line-opacity",1),b.setPaintProperty(`${f}_outline`,"line-opacity",1),b.setPaintProperty(`${u}_labels`,"text-opacity",1),b.setPaintProperty(`${f}_labels`,"text-opacity",1);if(t.$$.dirty&99776&&C){const m=[u];r.includes("plan2")&&m.push(f),m.forEach(P=>{b.setPaintProperty(`${P}_outline`,"line-width",v?["case",["boolean",["feature-state","pointing"],!1],2,0]:B)})}t.$$.dirty&98360&&C&&b.setPaintProperty("census","fill-color",H())},[l,a,n,i,o,c,r,u,f,k,v,g,y,T,d,b,C,j]}class Gt extends Ie{constructor(e){super();De(this,e,Ft,Bt,Ne,{census:0,plansTopo:1,color:2,showPluralities:3,metric:4,period:5,panels:6,plan:7,plan2:8,points:9,isolate:10,pointing:11,opacity:12,handleLabelClick:13,togglePointing:14})}}function Ol(t,e,s){const l=t.slice();return l[42]=e[s],l}function Al(t,e,s){const l=t.slice();return l[45]=e[s],l}function Sl(t,e,s){const l=t.slice();return l[42]=e[s],l}function Ml(t,e,s){const l=t.slice();return l[45]=e[s],l}function jl(t,e,s){const l=t.slice();return l[52]=e[s],l}function Rl(t,e,s){const l=t.slice();return l[55]=e[s],l}function Ul(t,e,s){const l=t.slice();return l[55]=e[s],l}function Bl(t){let e,s=(Ue[t[55]]||t[55])+"",l,a;return{c(){e=w("option"),l=R(s),this.h()},l(n){e=E(n,"OPTION",{});var i=I(e);l=U(i,s),i.forEach(p),this.h()},h(){e.__value=a=t[55],e.value=e.__value},m(n,i){M(n,e,i),h(e,l)},p(n,i){i[0]&4&&s!==(s=(Ue[n[55]]||n[55])+"")&&$(l,s),i[0]&4&&a!==(a=n[55])&&(e.__value=a,e.value=e.__value)},d(n){n&&p(e)}}}function Fl(t){let e,s=(Ue[t[55]]||t[55])+"",l,a;return{c(){e=w("option"),l=R(s),this.h()},l(n){e=E(n,"OPTION",{});var i=I(e);l=U(i,s),i.forEach(p),this.h()},h(){e.__value=a=t[55],e.value=e.__value},m(n,i){M(n,e,i),h(e,l)},p(n,i){i[0]&8&&s!==(s=(Ue[n[55]]||n[55])+"")&&$(l,s),i[0]&8&&a!==(a=n[55])&&(e.__value=a,e.value=e.__value)},d(n){n&&p(e)}}}function Gl(t){let e,s=t[2].includes(t[11]),l,a=t[2].includes(t[11]),n,i,o,c=s&&Hl(t),r=a&&ql(t);return{c(){e=w("div"),c&&c.c(),l=A(),r&&r.c()},l(u){e=E(u,"DIV",{});var f=I(e);c&&c.l(f),l=S(f),r&&r.l(f),f.forEach(p)},m(u,f){M(u,e,f),c&&c.m(e,null),h(e,l),r&&r.m(e,null),o=!0},p(u,f){f[0]&2052&&(s=u[2].includes(u[11])),s?c?c.p(u,f):(c=Hl(u),c.c(),c.m(e,l)):c&&(c.d(1),c=null),f[0]&2052&&(a=u[2].includes(u[11])),a?r?r.p(u,f):(r=ql(u),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(u){o||(Le(()=>{i&&i.end(1),n=qe(e,Me,{}),n.start()}),o=!0)},o(u){n&&n.invalidate(),i=ze(e,Me,{}),o=!1},d(u){u&&p(e),c&&c.d(),r&&r.d(),u&&i&&i.end()}}}function Hl(t){let e,s=["past","present"],l=[];for(let a=0;a<2;a+=1)l[a]=Wl(jl(t,s,a));return{c(){for(let a=0;a<2;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<2;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<2;i+=1)l[i].m(a,n);M(a,e,n)},p(a,n){if(n[0]&1024){s=["past","present"];let i;for(i=0;i<2;i+=1){const o=jl(a,s,i);l[i]?l[i].p(o,n):(l[i]=Wl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<2;i+=1)l[i].d(1)}},d(a){ae(l,a),a&&p(e)}}}function Wl(t){let e,s,l,a=oe(t[52])+"",n,i,o,c;return{c(){e=w("label"),s=w("input"),l=A(),n=R(a),i=A(),this.h()},l(r){e=E(r,"LABEL",{});var u=I(e);s=E(u,"INPUT",{type:!0,name:!0}),l=S(u),n=U(u,a),i=S(u),u.forEach(p),this.h()},h(){N(s,"type","radio"),N(s,"name","period"),s.__value=t[52],s.value=s.__value,t[35][0].push(s)},m(r,u){M(r,e,u),h(e,s),s.checked=s.__value===t[10],h(e,l),h(e,n),h(e,i),o||(c=ce(s,"change",t[34]),o=!0)},p(r,u){u[0]&1024&&(s.checked=s.__value===r[10])},d(r){r&&p(e),t[35][0].splice(t[35][0].indexOf(s),1),o=!1,c()}}}function ql(t){let e,s,l=t[7]?"pct. asian":"all races and ethniticies",a,n,i;return{c(){e=w("button"),s=R("Show "),a=R(l),this.h()},l(o){e=E(o,"BUTTON",{class:!0});var c=I(e);s=U(c,"Show "),a=U(c,l),c.forEach(p),this.h()},h(){N(e,"class","plurality-toggle svelte-18y91b1")},m(o,c){M(o,e,c),h(e,s),h(e,a),n||(i=ce(e,"click",t[36]),n=!0)},p(o,c){c[0]&128&&l!==(l=o[7]?"pct. asian":"all races and ethniticies")&&$(a,l)},d(o){o&&p(e),n=!1,i()}}}function zl(t){let e,s;return e=new It({props:{groups:we,levels:We,colors:He,dynamicVars:t[2],variable:t[11],metric:t[12],showPluralities:t[7],pluralityVars:t[4],periods:Se,breaks:t[21]}}),{c(){me(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,a){be(e,l,a),s=!0},p(l,a){const n={};a[0]&4&&(n.dynamicVars=l[2]),a[0]&2048&&(n.variable=l[11]),a[0]&4096&&(n.metric=l[12]),a[0]&128&&(n.showPluralities=l[7]),a[0]&16&&(n.pluralityVars=l[4]),a[0]&2097152&&(n.breaks=l[21]),e.$set(n)},i(l){s||(J(e.$$.fragment,l),s=!0)},o(l){se(e.$$.fragment,l),s=!1},d(l){ke(e,l)}}}function Yl(t){let e,s=tt(t[42]+t[45])+"",l,a,n;return{c(){e=w("option"),l=R(s),a=A(),this.h()},l(i){e=E(i,"OPTION",{});var o=I(e);l=U(o,s),a=S(o),o.forEach(p),this.h()},h(){e.__value=n=t[42]+t[45],e.value=e.__value},m(i,o){M(i,e,o),h(e,l),h(e,a)},p:_e,d(i){i&&p(e)}}}function Ql(t){let e,s,l=["","_letters","_names","_unity","_latfor"],a=[];for(let n=0;n<5;n+=1)a[n]=Yl(Ml(t,l,n));return{c(){e=w("optgroup");for(let n=0;n<5;n+=1)a[n].c();this.h()},l(n){e=E(n,"OPTGROUP",{label:!0});var i=I(e);for(let o=0;o<5;o+=1)a[o].l(i);i.forEach(p),this.h()},h(){N(e,"label",s=oe(t[42]))},m(n,i){M(n,e,i);for(let o=0;o<5;o+=1)a[o].m(e,null)},p(n,i){if(i&0){l=["","_letters","_names","_unity","_latfor"];let o;for(o=0;o<5;o+=1){const c=Ml(n,l,o);a[o]?a[o].p(c,i):(a[o]=Yl(c),a[o].c(),a[o].m(e,null))}for(;o<5;o+=1)a[o].d(1)}},d(n){n&&p(e),ae(a,n)}}}function Ht(t){let e,s,l,a,n,i,o,c,r=["assembly","senate"],u=[];for(let f=0;f<2;f+=1)u[f]=Ql(Sl(t,r,f));return n=new at({props:{aggregates:t[6],handleLabelClick:t[26],plan:t[8],stats:t[16],groups:we,changingLines:t[22],idealValues:st,variable:t[11]}}),{c(){e=w("div"),s=w("div"),l=w("select");for(let f=0;f<2;f+=1)u[f].c();a=A(),me(n.$$.fragment),this.h()},l(f){e=E(f,"DIV",{slot:!0});var k=I(e);s=E(k,"DIV",{class:!0});var v=I(s);l=E(v,"SELECT",{class:!0});var g=I(l);for(let y=0;y<2;y+=1)u[y].l(g);g.forEach(p),v.forEach(p),a=S(k),ve(n.$$.fragment,k),k.forEach(p),this.h()},h(){N(l,"class","svelte-18y91b1"),t[8]===void 0&&Le(()=>t[37].call(l)),N(s,"class","plan-selector svelte-18y91b1"),N(e,"slot","body")},m(f,k){M(f,e,k),h(e,s),h(s,l);for(let v=0;v<2;v+=1)u[v].m(l,null);Ve(l,t[8]),h(e,a),be(n,e,null),i=!0,o||(c=ce(l,"change",t[37]),o=!0)},p(f,k){if(k&0){r=["assembly","senate"];let g;for(g=0;g<2;g+=1){const y=Sl(f,r,g);u[g]?u[g].p(y,k):(u[g]=Ql(y),u[g].c(),u[g].m(l,null))}for(;g<2;g+=1)u[g].d(1)}k[0]&256&&Ve(l,f[8]);const v={};k[0]&64&&(v.aggregates=f[6]),k[0]&256&&(v.plan=f[8]),k[0]&65536&&(v.stats=f[16]),k[0]&2048&&(v.variable=f[11]),n.$set(v)},i(f){i||(J(n.$$.fragment,f),i=!0)},o(f){se(n.$$.fragment,f),i=!1},d(f){f&&p(e),ae(u,f),ke(n),o=!1,c()}}}function Kl(t){let e,s=tt(t[42]+t[45])+"",l,a,n;return{c(){e=w("option"),l=R(s),a=A(),this.h()},l(i){e=E(i,"OPTION",{});var o=I(e);l=U(o,s),a=S(o),o.forEach(p),this.h()},h(){e.__value=n=t[42]+t[45],e.value=e.__value},m(i,o){M(i,e,o),h(e,l),h(e,a)},p:_e,d(i){i&&p(e)}}}function Jl(t){let e,s,l=["","_letters","_names","_unity","_latfor"],a=[];for(let n=0;n<5;n+=1)a[n]=Kl(Al(t,l,n));return{c(){e=w("optgroup");for(let n=0;n<5;n+=1)a[n].c();this.h()},l(n){e=E(n,"OPTGROUP",{label:!0});var i=I(e);for(let o=0;o<5;o+=1)a[o].l(i);i.forEach(p),this.h()},h(){N(e,"label",s=oe(t[42]))},m(n,i){M(n,e,i);for(let o=0;o<5;o+=1)a[o].m(e,null)},p(n,i){if(i&0){l=["","_letters","_names","_unity","_latfor"];let o;for(o=0;o<5;o+=1){const c=Al(n,l,o);a[o]?a[o].p(c,i):(a[o]=Kl(c),a[o].c(),a[o].m(e,null))}for(;o<5;o+=1)a[o].d(1)}},d(n){n&&p(e),ae(a,n)}}}function Wt(t){let e,s,l,a,n,i,o,c,r,u,f,k=["assembly","senate"],v=[];for(let g=0;g<2;g+=1)v[g]=Jl(Ol(t,k,g));return c=new at({props:{aggregates:t[6],handleLabelClick:t[26],plan:t[9],stats:t[16],groups:we,changingLines:t[22],idealValues:st,variable:t[11]}}),{c(){e=w("div"),s=w("div"),l=w("input"),a=A(),n=w("div"),i=w("select");for(let g=0;g<2;g+=1)v[g].c();o=A(),me(c.$$.fragment),this.h()},l(g){e=E(g,"DIV",{slot:!0});var y=I(e);s=E(y,"DIV",{class:!0});var T=I(s);l=E(T,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),T.forEach(p),a=S(y),n=E(y,"DIV",{class:!0});var d=I(n);i=E(d,"SELECT",{class:!0});var b=I(i);for(let C=0;C<2;C+=1)v[C].l(b);b.forEach(p),d.forEach(p),o=S(y),ve(c.$$.fragment,y),y.forEach(p),this.h()},h(){N(l,"type","range"),N(l,"min","0"),N(l,"max","1.5"),N(l,"step","0.01"),N(l,"class","svelte-18y91b1"),N(s,"class","slider svelte-18y91b1"),N(i,"class","svelte-18y91b1"),t[9]===void 0&&Le(()=>t[39].call(i)),N(n,"class","plan-selector svelte-18y91b1"),N(e,"slot","body")},m(g,y){M(g,e,y),h(e,s),h(s,l),xe(l,t[19]),h(e,a),h(e,n),h(n,i);for(let T=0;T<2;T+=1)v[T].m(i,null);Ve(i,t[9]),h(e,o),be(c,e,null),r=!0,u||(f=[ce(l,"change",t[38]),ce(l,"input",t[38]),ce(i,"change",t[39])],u=!0)},p(g,y){if(y[0]&524288&&xe(l,g[19]),y&0){k=["assembly","senate"];let d;for(d=0;d<2;d+=1){const b=Ol(g,k,d);v[d]?v[d].p(b,y):(v[d]=Jl(b),v[d].c(),v[d].m(i,null))}for(;d<2;d+=1)v[d].d(1)}y[0]&512&&Ve(i,g[9]);const T={};y[0]&64&&(T.aggregates=g[6]),y[0]&512&&(T.plan=g[9]),y[0]&65536&&(T.stats=g[16]),y[0]&2048&&(T.variable=g[11]),c.$set(T)},i(g){r||(J(c.$$.fragment,g),r=!0)},o(g){se(c.$$.fragment,g),r=!1},d(g){g&&p(e),ae(v,g),ke(c),u=!1,lt(f)}}}function qt(t){let e,s,l,a,n,i,o,c,r,u,f,k,v,g,y,T,d,b,C,W;e=new Ut({props:{showModal:t[13],closeModal:t[23]}});let H=t[2],B=[];for(let _=0;_<H.length;_+=1)B[_]=Bl(Ul(t,H,_));let j=t[3],m=[];for(let _=0;_<j.length;_+=1)m[_]=Fl(Rl(t,j,_));let P=t[14]&&Gl(t),V=t[12]!==null&&zl(t);return v=new Ll({props:{panelName:"plan",panels:t[18],togglePanel:t[25],$$slots:{body:[Ht]},$$scope:{ctx:t}}}),y=new Ll({props:{panelName:"plan2",panels:t[18],togglePanel:t[25],$$slots:{body:[Wt]},$$scope:{ctx:t}}}),d=new Gt({props:{census:t[0],plansTopo:t[1],pointing:t[15],color:t[24],showPluralities:t[7],metric:t[12],opacity:t[19],period:t[10],panels:t[18],plan:t[8],plan2:t[9],points:t[5],togglePointing:t[27],handleLabelClick:t[26],isolate:t[17]}}),{c(){me(e.$$.fragment),s=A(),l=w("div"),a=w("div"),n=w("select"),i=w("option"),o=R("Select data"),c=w("optgroup");for(let _=0;_<B.length;_+=1)B[_].c();r=w("optgroup");for(let _=0;_<m.length;_+=1)m[_].c();u=A(),P&&P.c(),f=A(),V&&V.c(),k=A(),me(v.$$.fragment),g=A(),me(y.$$.fragment),T=A(),me(d.$$.fragment),this.h()},l(_){ve(e.$$.fragment,_),s=S(_),l=E(_,"DIV",{class:!0,style:!0});var L=I(l);a=E(L,"DIV",{class:!0});var O=I(a);n=E(O,"SELECT",{style:!0,class:!0});var Y=I(n);i=E(Y,"OPTION",{});var X=I(i);o=U(X,"Select data"),X.forEach(p),c=E(Y,"OPTGROUP",{label:!0});var Q=I(c);for(let Z=0;Z<B.length;Z+=1)B[Z].l(Q);Q.forEach(p),r=E(Y,"OPTGROUP",{label:!0});var F=I(r);for(let Z=0;Z<m.length;Z+=1)m[Z].l(F);F.forEach(p),Y.forEach(p),u=S(O),P&&P.l(O),f=S(O),V&&V.l(O),k=S(O),ve(v.$$.fragment,O),g=S(O),ve(y.$$.fragment,O),O.forEach(p),T=S(L),ve(d.$$.fragment,L),L.forEach(p),this.h()},h(){i.__value=null,i.value=i.__value,N(c,"label","Redistricting data"),N(r,"label","American Community Survey data"),ie(n,"width",t[3].includes(t[11])?"auto":"calc(var(--control-width) + 45px * 0)"),N(n,"class","svelte-18y91b1"),t[11]===void 0&&Le(()=>t[33].call(n)),N(a,"class","controls svelte-18y91b1"),N(l,"class","container svelte-18y91b1"),ie(l,"--container-font",t[20]+"px"),ie(l,"--control-width",270+(t[20]-16)*10+"px")},m(_,L){be(e,_,L),M(_,s,L),M(_,l,L),h(l,a),h(a,n),h(n,i),h(i,o),h(n,c);for(let O=0;O<B.length;O+=1)B[O].m(c,null);h(n,r);for(let O=0;O<m.length;O+=1)m[O].m(r,null);Ve(n,t[11]),h(a,u),P&&P.m(a,null),h(a,f),V&&V.m(a,null),h(a,k),be(v,a,null),h(a,g),be(y,a,null),h(l,T),be(d,l,null),b=!0,C||(W=[ce(window,"keydown",t[28]),ce(n,"change",t[33])],C=!0)},p(_,L){const O={};if(L[0]&8192&&(O.showModal=_[13]),e.$set(O),L[0]&4){H=_[2];let F;for(F=0;F<H.length;F+=1){const Z=Ul(_,H,F);B[F]?B[F].p(Z,L):(B[F]=Bl(Z),B[F].c(),B[F].m(c,null))}for(;F<B.length;F+=1)B[F].d(1);B.length=H.length}if(L[0]&8){j=_[3];let F;for(F=0;F<j.length;F+=1){const Z=Rl(_,j,F);m[F]?m[F].p(Z,L):(m[F]=Fl(Z),m[F].c(),m[F].m(r,null))}for(;F<m.length;F+=1)m[F].d(1);m.length=j.length}(!b||L[0]&2056)&&ie(n,"width",_[3].includes(_[11])?"auto":"calc(var(--control-width) + 45px * 0)"),L[0]&2060&&Ve(n,_[11]),_[14]?P?(P.p(_,L),L[0]&16384&&J(P,1)):(P=Gl(_),P.c(),J(P,1),P.m(a,f)):P&&(je(),se(P,1,1,()=>{P=null}),Re()),_[12]!==null?V?(V.p(_,L),L[0]&4096&&J(V,1)):(V=zl(_),V.c(),J(V,1),V.m(a,k)):V&&(je(),se(V,1,1,()=>{V=null}),Re());const Y={};L[0]&262144&&(Y.panels=_[18]),L[0]&67904|L[1]&536870912&&(Y.$$scope={dirty:L,ctx:_}),v.$set(Y);const X={};L[0]&262144&&(X.panels=_[18]),L[0]&592448|L[1]&536870912&&(X.$$scope={dirty:L,ctx:_}),y.$set(X);const Q={};L[0]&1&&(Q.census=_[0]),L[0]&2&&(Q.plansTopo=_[1]),L[0]&32768&&(Q.pointing=_[15]),L[0]&128&&(Q.showPluralities=_[7]),L[0]&4096&&(Q.metric=_[12]),L[0]&524288&&(Q.opacity=_[19]),L[0]&1024&&(Q.period=_[10]),L[0]&262144&&(Q.panels=_[18]),L[0]&256&&(Q.plan=_[8]),L[0]&512&&(Q.plan2=_[9]),L[0]&32&&(Q.points=_[5]),L[0]&131072&&(Q.isolate=_[17]),d.$set(Q),(!b||L[0]&1048576)&&ie(l,"--container-font",_[20]+"px"),(!b||L[0]&1048576)&&ie(l,"--control-width",270+(_[20]-16)*10+"px")},i(_){b||(J(e.$$.fragment,_),J(P),J(V),J(v.$$.fragment,_),J(y.$$.fragment,_),J(d.$$.fragment,_),b=!0)},o(_){se(e.$$.fragment,_),se(P),se(V),se(v.$$.fragment,_),se(y.$$.fragment,_),se(d.$$.fragment,_),b=!1},d(_){ke(e,_),_&&p(s),_&&p(l),ae(B,_),ae(m,_),P&&P.d(),V&&V.d(),ke(v),ke(y),ke(d),C=!1,lt(W)}}}async function Jt({fetch:t}){const e=yt(await(await t(`${Ae}/data.csv`)).text()),s=await(await t(`${Ae}/output_census_wgs84.topojson`)).json(),l=bt(s.objects.census),a=et(s,l),n=a.features,i=["pop","vap","cvap"],o=[...n.reduce((c,r)=>{const u=Object.keys(r.properties).filter(f=>[...i,"GEOID","senate","assembly"].every(k=>!f.includes(k))&&f===f.toLowerCase()).map(f=>f.split("_")[0]);return new Set([...c,...u])},[])];return{props:{censusData:e,data:n,dynamicVars:i,staticVars:o,pluralityVars:["asiaentry"],census:a,plansTopo:await(await t(`${Ae}/plans.topojson`)).json(),points:await(await t(`${Ae}/points.geojson`)).json()}}}function zt(t,e,s){let l,a,n,{censusData:i,census:o,plansTopo:c,data:r,dynamicVars:u,staticVars:f,pluralityVars:k,points:v}=e,g,y=!0,T,d,b=[],C={},W=!1,H=!0,B=["plan"],j="assembly_latfor",m="assembly",P=.75,V=18;const _=()=>s(13,g=!1);let L="present",O="vap";const Y={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6],vap:[0,.1,.2,.4,.6]};function X({properties:D}){if(l===null)return console.trace(),null;if(!D.ALAND)return"rgba(0, 0, 0, 0)";const te=D[`${l}_total`];if(k.includes(l)){const G=le=>D[`${l}_${le}`];if(G(Se[0])===null)return"rgba(0, 0, 0, 0)";const z=[...Se].sort((le,pe)=>G(pe)-G(le));return Ee[Se.indexOf(z[0])]}else if(f.includes(l)){if(!el(a(D))||te<=10)return"rgba(0, 0, 0, 0)";for(let G=1;G<n.length;G++)if(a(D)<n[G])return Ee[G];return Ee[n.length-1]}else{if(te<=10)return"rgba(0, 0, 0, 0)";const G=z=>D[`${l}_${z}`]/D[`${l}_total`];if(H){const z=we.filter(ue=>G(ue)>.5)[0];if(z!==void 0)return He[z]+We[te<130?0:te<200?1:2];const le=[...we].sort((ue,de)=>G(de)-G(ue)),pe=G(le[0])-G(le[1]);return He[le[0]]+We[pe<.093?0:1]}else{const z=Y[O];for(let le=1;le<z.length;le++)if(G("asian")<z[le])return Be[le-1];return Be[z.length-1]}}}function Q(D){const te=D,G=(fe,ge)=>te.reduce((nt,Ye)=>nt+(Ye[fe]||0)*(ge&&Ye[ge]||1),0),z=(fe,ge)=>G(`${fe}_${ge}`)/G(`${fe}_total`);let le=G("pop10_asian"),pe=G("pop20_asian"),ue=G("cvap10_asian"),de=G("cvap19_asian");const Pe={pop20_total:G("pop20_total"),pct_increase:(pe-le)/le,pct_increase_cvap:(de-ue)/ue};return["pop20","vap20","cvap19","pop10","vap10","cvap10"].forEach(fe=>we.forEach(ge=>Pe[fe+ge]=z(fe,ge))),Pe}const F=D=>s(18,B=B.includes(D)?B.filter(te=>te!==D):[...B,D]);function Z(D,te=!1,G=!1){b.includes(D)?te||s(6,b=b.filter(z=>z!==D)):G||s(6,b=[...b,D])}const ye=()=>s(15,d=!d);function Ce({key:D}){D===" "&&ye(),D==="i"&&s(17,W=!W),D==="="&&s(20,V+=2),D==="-"&&s(20,V-=2),D==="v"&&s(14,y=!y)}const Oe=[[]];function Fe(){O=Ge(this),s(11,O),s(3,f),s(2,u)}function he(){L=this.__value,s(10,L)}const ee=()=>s(7,H=!H);function x(){j=Ge(this),s(8,j)}function K(){P=vt(this.value),s(19,P)}function q(){m=Ge(this),s(9,m)}return t.$$set=D=>{"censusData"in D&&s(29,i=D.censusData),"census"in D&&s(0,o=D.census),"plansTopo"in D&&s(1,c=D.plansTopo),"data"in D&&s(30,r=D.data),"dynamicVars"in D&&s(2,u=D.dynamicVars),"staticVars"in D&&s(3,f=D.staticVars),"pluralityVars"in D&&s(4,k=D.pluralityVars),"points"in D&&s(5,v=D.points)},t.$$.update=()=>{if(t.$$.dirty[0]&3080&&s(12,l=f.includes(O)?O:O&&O+(L==="past"?10:O==="cvap"?19:20)),t.$$.dirty[0]&4096&&s(32,a={income:D=>D[l],hhlang:D=>D[`${l}_asian`]/D[`${l}_total`],graduates:D=>(D[`${l}_hs_grad`]+D[`${l}_ba_above`])/D[`${l}_total`],families:D=>D[`${l}_benefits`]/D[`${l}_total`],workers:D=>D[`${l}_publictransport`]/D[`${l}_total`]}[l]),t.$$.dirty[0]&1073748108|t.$$.dirty[1]&3&&s(21,n=u.includes(O)&&!H?Y[O]:Y[l]||!f.includes(l)||l==="asiaentry"||s(31,Y[l]=mt(r.map(D=>a(D.properties)).filter(el),6),Y)),t.$$.dirty[0]&536871744)for(let D=0;D<b.length;D++){const[te,G]=b[D].split(",");(te===j||te===m)&&s(16,C[b[D]]=Q(i.filter(z=>G===""+z[te])),C)}},[o,c,u,f,k,v,b,H,j,m,L,O,l,g,y,d,C,W,B,P,V,n,T,_,X,F,Z,ye,Ce,i,r,Y,a,Fe,he,Oe,ee,x,K,q]}class Xt extends Ie{constructor(e){super();De(this,e,zt,qt,Ne,{censusData:29,census:0,plansTopo:1,data:30,dynamicVars:2,staticVars:3,pluralityVars:4,points:5},null,[-1,-1])}}export{Xt as default,Jt as load};

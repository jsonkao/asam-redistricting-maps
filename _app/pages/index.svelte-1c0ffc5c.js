var Pt=Object.defineProperty,Dt=Object.defineProperties;var Mt=Object.getOwnPropertyDescriptors;var gl=Object.getOwnPropertySymbols;var Vt=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable;var dl=(t,e,l)=>e in t?Pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,vl=(t,e)=>{for(var l in e||(e={}))Vt.call(e,l)&&dl(t,l,e[l]);if(gl)for(var l of gl(e))Tt.call(e,l)&&dl(t,l,e[l]);return t},pl=(t,e)=>Dt(t,Mt(e));import{S as ml,i as bl,s as kl,J as Ve,K as Te,a as E,d as u,b as w,L as Ge,f as G,M as de,N as El,O as cl,P as Ae,Q as Fe,R as Ue,T as Je,U as ve,H as c,l as Be,t as z,g as y,h as ke,V as je,W as wl,X as jt,x as _e,r as Ke,u as Ie,w as Qe,Y as It,Z as Pl,_ as Ot,$ as hl,a0 as Bt,e as M,c as V,k as S,n as N,a1 as tl,I as sl,j as Ct,m as Lt,o as St,a2 as Nt,v as At,a3 as zt,a4 as yt,a5 as Ut,a6 as Ht,a7 as nl,a8 as Dl}from"../chunks/vendor-b1986be3.js";import{b as Ze}from"../chunks/paths-28a87002.js";import{i as Ce,u as Rt,D as ol,c as xe,p as Ml,a as De,m as Xe,d as Vl,b as Tl,x as qt,e as Wt}from"../chunks/utils-eca50613.js";const ul={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},al=["44","99","ee"],ze=["asian","black","hispanic","white"],He=["1990_earlier","1990_1999","2000_2009","2010_later"],il={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},rl=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],Ye=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],fl={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971};function jl(t,e,l){const s=t.slice();return s[33]=e[l].properties,s[34]=e[l].geometry.coordinates[0],s[35]=e[l].geometry.coordinates[1],s}function Il(t,e,l){const s=t.slice();return s[38]=e[l].outline,s}function Ol(t,e,l){const s=t.slice();return s[41]=e[l],s[43]=l,s}function Bl(t,e){let l,s,a,r,o;function n(){return e[28](e[43])}function f(){return e[29](e[41])}function i(){return e[30](e[41])}return{key:t,first:null,c(){l=Ve("path"),this.h()},l(_){l=Te(_,"path",{class:!0,d:!0,fill:!0}),E(l).forEach(u),this.h()},h(){w(l,"class","block-group svelte-1h46plc"),w(l,"d",s=e[4](e[41])),w(l,"fill",a=e[5](e[41],e[9],e[10],e[8])),Ge(l,"head",e[2][0]===Ce(e[41])),this.first=l},m(_,P){G(_,l,P),r||(o=[de(l,"click",n),de(l,"contextmenu",El(f)),de(l,"mousemove",El(i))],r=!0)},p(_,P){e=_,P[0]&24&&s!==(s=e[4](e[41]))&&w(l,"d",s),P[0]&1832&&a!==(a=e[5](e[41],e[9],e[10],e[8]))&&w(l,"fill",a),P[0]&12&&Ge(l,"head",e[2][0]===Ce(e[41]))},d(_){_&&u(l),r=!1,cl(o)}}}function Cl(t){let e,l,s,a,r=t[13],o=[];for(let n=0;n<r.length;n+=1)o[n]=Ll(Il(t,r,n));return{c(){e=Ve("g");for(let n=0;n<o.length;n+=1)o[n].c()},l(n){e=Te(n,"g",{});var f=E(e);for(let i=0;i<o.length;i+=1)o[i].l(f);f.forEach(u)},m(n,f){G(n,e,f);for(let i=0;i<o.length;i+=1)o[i].m(e,null);a=!0},p(n,f){if(f[0]&8192){r=n[13];let i;for(i=0;i<r.length;i+=1){const _=Il(n,r,i);o[i]?o[i].p(_,f):(o[i]=Ll(_),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i(n){a||(Ae(()=>{s&&s.end(1),l=Fe(e,Ue,{}),l.start()}),a=!0)},o(n){l&&l.invalidate(),s=Je(e,Ue,{}),a=!1},d(n){n&&u(e),ve(o,n),n&&s&&s.end()}}}function Ll(t){let e,l;return{c(){e=Ve("path"),this.h()},l(s){e=Te(s,"path",{class:!0,d:!0}),E(e).forEach(u),this.h()},h(){w(e,"class","mesh-community svelte-1h46plc"),w(e,"d",l=t[38])},m(s,a){G(s,e,a)},p(s,a){a[0]&8192&&l!==(l=s[38])&&w(e,"d",l)},d(s){s&&u(e)}}}function Sl(t){let e,l,s,a,r,o;return{c(){e=Ve("g"),l=Ve("path"),this.h()},l(n){e=Te(n,"g",{});var f=E(e);l=Te(f,"path",{class:!0,d:!0}),E(l).forEach(u),f.forEach(u),this.h()},h(){w(l,"class","mesh-district svelte-1h46plc"),w(l,"d",s=(t[15].startsWith("congress")?t[23]||{}:t[24])[t[15]]),Ge(l,"showPluralities",t[8])},m(n,f){G(n,e,f),c(e,l),o=!0},p(n,f){(!o||f[0]&25198592&&s!==(s=(n[15].startsWith("congress")?n[23]||{}:n[24])[n[15]]))&&w(l,"d",s),f[0]&256&&Ge(l,"showPluralities",n[8])},i(n){o||(Ae(()=>{r&&r.end(1),a=Fe(e,Ue,{}),a.start()}),o=!0)},o(n){a&&a.invalidate(),r=Je(e,Ue,{}),o=!1},d(n){n&&u(e),n&&r&&r.end()}}}function Nl(t){let e,l,s,a,r,o;return{c(){e=Ve("g"),l=Ve("path"),this.h()},l(n){e=Te(n,"g",{});var f=E(e);l=Te(f,"path",{class:!0,d:!0}),E(l).forEach(u),f.forEach(u),this.h()},h(){w(l,"class","mesh-district svelte-1h46plc"),w(l,"d",s=t[4](t[19](t[31],t[21])))},m(n,f){G(n,e,f),c(e,l),o=!0},p(n,f){(!o||f[0]&2654224&&s!==(s=n[4](n[19](n[31],n[21]))))&&w(l,"d",s)},i(n){o||(Ae(()=>{r&&r.end(1),a=Fe(e,Ue,{}),a.start()}),o=!0)},o(n){a&&a.invalidate(),r=Je(e,Ue,{}),o=!1},d(n){n&&u(e),n&&r&&r.end()}}}function Al(t){let e,l,s,a,r=t[16],o=[];for(let n=0;n<r.length;n+=1)o[n]=yl(jl(t,r,n));return{c(){e=Ve("g");for(let n=0;n<o.length;n+=1)o[n].c();this.h()},l(n){e=Te(n,"g",{class:!0});var f=E(e);for(let i=0;i<o.length;i+=1)o[i].l(f);f.forEach(u),this.h()},h(){w(e,"class","labels svelte-1h46plc")},m(n,f){G(n,e,f);for(let i=0;i<o.length;i+=1)o[i].m(e,null);a=!0},p(n,f){if(f[0]&5341184){r=n[16];let i;for(i=0;i<r.length;i+=1){const _=jl(n,r,i);o[i]?o[i].p(_,f):(o[i]=yl(_),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i(n){a||(Ae(()=>{s&&s.end(1),l=Fe(e,Ue,{}),l.start()}),a=!0)},o(n){l&&l.invalidate(),s=Je(e,Ue,{}),a=!1},d(n){n&&u(e),ve(o,n),n&&s&&s.end()}}}function zl(t){let e,l=t[33][t[15]]+"",s,a,r,o,n;function f(){return t[32](t[33])}return{c(){e=Ve("text"),s=z(l),this.h()},l(i){e=Te(i,"text",{x:!0,y:!0,class:!0});var _=E(e);s=y(_,l),_.forEach(u),this.h()},h(){w(e,"x",a=t[34]),w(e,"y",r=t[35]),w(e,"class","svelte-1h46plc"),Ge(e,"chosen",t[20].includes(`${t[15]},${t[33][t[15]]}`))},m(i,_){G(i,e,_),c(e,s),o||(n=de(e,"click",f),o=!0)},p(i,_){t=i,_[0]&98304&&l!==(l=t[33][t[15]]+"")&&ke(s,l),_[0]&65536&&a!==(a=t[34])&&w(e,"x",a),_[0]&65536&&r!==(r=t[35])&&w(e,"y",r),_[0]&1146880&&Ge(e,"chosen",t[20].includes(`${t[15]},${t[33][t[15]]}`))},d(i){i&&u(e),o=!1,n()}}}function yl(t){let e,l=t[15]in t[33]&&zl(t);return{c(){l&&l.c(),e=Be()},l(s){l&&l.l(s),e=Be()},m(s,a){l&&l.m(s,a),G(s,e,a)},p(s,a){s[15]in s[33]?l?l.p(s,a):(l=zl(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(s){l&&l.d(s),s&&u(e)}}}function Gt(t){let e,l,s=[],a=new Map,r,o,n,f,i,_,P,D,b,h,g=t[3];const p=A=>Ce(A[41]);for(let A=0;A<g.length;A+=1){let C=Ol(t,g,A),Q=p(C);a.set(Q,s[A]=Bl(Q,C))}let k=t[12]&&Cl(t),T=t[14]&&!t[6]&&Sl(t),I=t[6]&&Nl(t),B=(t[14]||t[6])&&Al(t);return{c(){e=Ve("svg"),l=Ve("g");for(let A=0;A<s.length;A+=1)s[A].c();r=Ve("g"),o=Ve("path"),k&&k.c(),f=Be(),T&&T.c(),i=Be(),I&&I.c(),_=Be(),B&&B.c(),this.h()},l(A){e=Te(A,"svg",{viewBox:!0,style:!0,class:!0});var C=E(e);l=Te(C,"g",{});var Q=E(l);for(let se=0;se<s.length;se+=1)s[se].l(Q);Q.forEach(u),r=Te(C,"g",{class:!0});var Y=E(r);o=Te(Y,"path",{class:!0,d:!0}),E(o).forEach(u),k&&k.l(Y),f=Be(),T&&T.l(Y),i=Be(),I&&I.l(Y),_=Be(),B&&B.l(Y),Y.forEach(u),C.forEach(u),this.h()},h(){w(o,"class","mesh-bg svelte-1h46plc"),w(o,"d",n=t[11].includes(t[9])?t[17]:t[18]),w(r,"class","meshes svelte-1h46plc"),w(e,"viewBox",P=t[0].join(" ")),je(e,"--font-size",(t[1]||11)+"px"),w(e,"class","svelte-1h46plc")},m(A,C){G(A,e,C),c(e,l);for(let Q=0;Q<s.length;Q+=1)s[Q].m(l,null);c(e,r),c(r,o),k&&k.m(r,null),c(r,f),T&&T.m(r,null),c(r,i),I&&I.m(r,null),c(r,_),B&&B.m(r,null),D=!0,b||(h=[de(e,"mousedown",function(){wl(t[25])&&t[25].apply(this,arguments)}),de(e,"mouseup",function(){wl(t[26])&&t[26].apply(this,arguments)})],b=!0)},p(A,C){t=A,C[0]&134219772&&(g=t[3],s=jt(s,C,p,1,t,g,a,l,It,Bl,null,Ol)),(!D||C[0]&395776&&n!==(n=t[11].includes(t[9])?t[17]:t[18]))&&w(o,"d",n),t[12]?k?(k.p(t,C),C[0]&4096&&_e(k,1)):(k=Cl(t),k.c(),_e(k,1),k.m(r,f)):k&&(Ke(),Ie(k,1,1,()=>{k=null}),Qe()),t[14]&&!t[6]?T?(T.p(t,C),C[0]&16448&&_e(T,1)):(T=Sl(t),T.c(),_e(T,1),T.m(r,i)):T&&(Ke(),Ie(T,1,1,()=>{T=null}),Qe()),t[6]?I?(I.p(t,C),C[0]&64&&_e(I,1)):(I=Nl(t),I.c(),_e(I,1),I.m(r,_)):I&&(Ke(),Ie(I,1,1,()=>{I=null}),Qe()),t[14]||t[6]?B?(B.p(t,C),C[0]&16448&&_e(B,1)):(B=Al(t),B.c(),_e(B,1),B.m(r,null)):B&&(Ke(),Ie(B,1,1,()=>{B=null}),Qe()),(!D||C[0]&1&&P!==(P=t[0].join(" ")))&&w(e,"viewBox",P),(!D||C[0]&2)&&je(e,"--font-size",(t[1]||11)+"px")},i(A){D||(_e(k),_e(T),_e(I),_e(B),D=!0)},o(A){Ie(k),Ie(T),Ie(I),Ie(B),D=!1},d(A){A&&u(e);for(let C=0;C<s.length;C+=1)s[C].d();k&&k.d(),T&&T.d(),I&&I.d(),B&&B.d(),b=!1,cl(h)}}}function Ft(t,e,l){let{viewBox:s,labelSize:a,draggedBgs:r,data:o,path:n,color:f,changingLines:i,neighbor:_,showPluralities:P,metric:D,period:b,tractVars:h,showComms:g,drawings:p,showPlans:k,plan:T,points:I,tractMesh:B,bgMesh:A,mesh:C,aggregates:Q,obj:Y,handleLabelClick:se,congressMeshes:W,plansMeshes:F,startDrag:H,endDrag:K,handleMouseMove:R}=e;const oe=m=>i&&_(m),ue=m=>console.log(m.properties),Z=m=>R(m),pe=(m,Ee)=>m.properties[T]!==Ee.properties[T],x=m=>se(`${T},${m[T]}`);return t.$$set=m=>{"viewBox"in m&&l(0,s=m.viewBox),"labelSize"in m&&l(1,a=m.labelSize),"draggedBgs"in m&&l(2,r=m.draggedBgs),"data"in m&&l(3,o=m.data),"path"in m&&l(4,n=m.path),"color"in m&&l(5,f=m.color),"changingLines"in m&&l(6,i=m.changingLines),"neighbor"in m&&l(7,_=m.neighbor),"showPluralities"in m&&l(8,P=m.showPluralities),"metric"in m&&l(9,D=m.metric),"period"in m&&l(10,b=m.period),"tractVars"in m&&l(11,h=m.tractVars),"showComms"in m&&l(12,g=m.showComms),"drawings"in m&&l(13,p=m.drawings),"showPlans"in m&&l(14,k=m.showPlans),"plan"in m&&l(15,T=m.plan),"points"in m&&l(16,I=m.points),"tractMesh"in m&&l(17,B=m.tractMesh),"bgMesh"in m&&l(18,A=m.bgMesh),"mesh"in m&&l(19,C=m.mesh),"aggregates"in m&&l(20,Q=m.aggregates),"obj"in m&&l(21,Y=m.obj),"handleLabelClick"in m&&l(22,se=m.handleLabelClick),"congressMeshes"in m&&l(23,W=m.congressMeshes),"plansMeshes"in m&&l(24,F=m.plansMeshes),"startDrag"in m&&l(25,H=m.startDrag),"endDrag"in m&&l(26,K=m.endDrag),"handleMouseMove"in m&&l(27,R=m.handleMouseMove)},[s,a,r,o,n,f,i,_,P,D,b,h,g,p,k,T,I,B,A,C,Q,Y,se,W,F,H,K,R,oe,ue,Z,pe,x]}class Jt extends ml{constructor(e){super();bl(this,e,Ft,Gt,kl,{viewBox:0,labelSize:1,draggedBgs:2,data:3,path:4,color:5,changingLines:6,neighbor:7,showPluralities:8,metric:9,period:10,tractVars:11,showComms:12,drawings:13,showPlans:14,plan:15,points:16,tractMesh:17,bgMesh:18,mesh:19,aggregates:20,obj:21,handleLabelClick:22,congressMeshes:23,plansMeshes:24,startDrag:25,endDrag:26,handleMouseMove:27},null,[-1,-1])}}function Ul(t,e,l){const s=t.slice();return s[64]=e[l],s}function Hl(t,e,l){const s=t.slice();return s[67]=e[l].name,s[26]=e[l].stats,s[69]=l,s}function Rl(t,e,l){const s=t.slice();return s[70]=e[l],s}function ql(t,e,l){const s=t.slice();return s[73]=e[l],s}function Wl(t,e,l){const s=t.slice();return s[70]=e[l],s}function Gl(t,e,l){const s=t.slice();return s[78]=e[l],s}function Fl(t,e,l){const s=t.slice();return s[81]=e[l],s}function Jl(t,e,l){const s=t.slice();return s[94]=e[l],s}function Kl(t,e,l){const s=t.slice();return s[94]=e[l],s[69]=l,s}function Ql(t,e,l){const s=t.slice();return s[90]=e[l],s}function Xl(t,e,l){const s=t.slice();return s[90]=e[l],s[69]=l,s}function Yl(t,e,l){const s=t.slice();return s[84]=e[l],s}function Zl(t,e,l){const s=t.slice();return s[87]=e[l],s}function xl(t,e,l){const s=t.slice();return s[90]=e[l],s}function $l(t,e,l){const s=t.slice();return s[64]=e[l],s}function et(t,e,l){const s=t.slice();return s[64]=e[l],s}function lt(t){let e,l=(il[t[64]]||t[64])+"",s,a;return{c(){e=M("option"),s=z(l),this.h()},l(r){e=V(r,"OPTION",{});var o=E(e);s=y(o,l),o.forEach(u),this.h()},h(){e.__value=a=t[64],e.value=e.__value},m(r,o){G(r,e,o),c(e,s)},p(r,o){o[0]&8&&l!==(l=(il[r[64]]||r[64])+"")&&ke(s,l),o[0]&8&&a!==(a=r[64])&&(e.__value=a,e.value=e.__value)},d(r){r&&u(e)}}}function tt(t){let e,l=(il[t[64]]||t[64])+"",s,a;return{c(){e=M("option"),s=z(l),this.h()},l(r){e=V(r,"OPTION",{});var o=E(e);s=y(o,l),o.forEach(u),this.h()},h(){e.__value=a=t[64],e.value=e.__value},m(r,o){G(r,e,o),c(e,s)},p(r,o){o[0]&16&&l!==(l=(il[r[64]]||r[64])+"")&&ke(s,l),o[0]&16&&a!==(a=r[64])&&(e.__value=a,e.value=e.__value)},d(r){r&&u(e)}}}function st(t){let e,l=["past","present"],s=[];for(let a=0;a<2;a+=1)s[a]=nt(xl(t,l,a));return{c(){for(let a=0;a<2;a+=1)s[a].c();e=Be()},l(a){for(let r=0;r<2;r+=1)s[r].l(a);e=Be()},m(a,r){for(let o=0;o<2;o+=1)s[o].m(a,r);G(a,e,r)},p(a,r){if(r[0]&512){l=["past","present"];let o;for(o=0;o<2;o+=1){const n=xl(a,l,o);s[o]?s[o].p(n,r):(s[o]=nt(n),s[o].c(),s[o].m(e.parentNode,e))}for(;o<2;o+=1)s[o].d(1)}},d(a){ve(s,a),a&&u(e)}}}function nt(t){let e,l,s,a=xe(t[90])+"",r,o,n,f;return{c(){e=M("label"),l=M("input"),s=S(),r=z(a),o=S(),this.h()},l(i){e=V(i,"LABEL",{});var _=E(e);l=V(_,"INPUT",{type:!0,name:!0}),s=N(_),r=y(_,a),o=N(_),_.forEach(u),this.h()},h(){w(l,"type","radio"),w(l,"name","period"),l.__value=t[90],l.value=l.__value,t[48][0].push(l)},m(i,_){G(i,e,_),c(e,l),l.checked=l.__value===t[9],c(e,s),c(e,r),c(e,o),n||(f=de(l,"change",t[47]),n=!0)},p(i,_){_[0]&512&&(l.checked=l.__value===i[9])},d(i){i&&u(e),t[48][0].splice(t[48][0].indexOf(l),1),n=!1,f()}}}function ot(t){let e,l,s=(t[11]?"pct. asian":"pluralities")+"",a,r,o;return{c(){e=M("button"),l=z("Show "),a=z(s),this.h()},l(n){e=V(n,"BUTTON",{class:!0});var f=E(e);l=y(f,"Show "),a=y(f,s),f.forEach(u),this.h()},h(){w(e,"class","plurality-toggle svelte-1fkuggv")},m(n,f){G(n,e,f),c(e,l),c(e,a),r||(o=de(e,"click",t[49]),r=!0)},p(n,f){f[0]&2048&&s!==(s=(n[11]?"pct. asian":"pluralities")+"")&&ke(a,s)},d(n){n&&u(e),r=!1,o()}}}function Kt(t){let e,l,s=t[25],a=[];for(let n=0;n<s.length;n+=1)a[n]=at(Kl(t,s,n));let r=t[25],o=[];for(let n=0;n<r.length;n+=1)o[n]=it(Jl(t,r,n));return{c(){e=M("div");for(let n=0;n<a.length;n+=1)a[n].c();l=S();for(let n=0;n<o.length;n+=1)o[n].c();this.h()},l(n){e=V(n,"DIV",{class:!0,style:!0});var f=E(e);for(let i=0;i<a.length;i+=1)a[i].l(f);l=N(f);for(let i=0;i<o.length;i+=1)o[i].l(f);f.forEach(u),this.h()},h(){w(e,"class","color-legend svelte-1fkuggv"),je(e,"grid-template-columns","repeat("+(t[3].includes(t[10])?5:6)+", 40px)")},m(n,f){G(n,e,f);for(let i=0;i<a.length;i+=1)a[i].m(e,null);c(e,l);for(let i=0;i<o.length;i+=1)o[i].m(e,null)},p(n,f){if(f[0]&33555464){s=n[25];let i;for(i=0;i<s.length;i+=1){const _=Kl(n,s,i);a[i]?a[i].p(_,f):(a[i]=at(_),a[i].c(),a[i].m(e,l))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}if(f[0]&33554432){r=n[25];let i;for(i=0;i<r.length;i+=1){const _=Jl(n,r,i);o[i]?o[i].p(_,f):(o[i]=it(_),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}f[0]&1032&&je(e,"grid-template-columns","repeat("+(n[3].includes(n[10])?5:6)+", 40px)")},d(n){n&&u(e),ve(a,n),ve(o,n)}}}function Qt(t){let e,l,s=He,a=[];for(let n=0;n<s.length;n+=1)a[n]=rt(Xl(t,s,n));let r=He,o=[];for(let n=0;n<r.length;n+=1)o[n]=ft(Ql(t,r,n));return{c(){e=M("div");for(let n=0;n<a.length;n+=1)a[n].c();l=S();for(let n=0;n<o.length;n+=1)o[n].c();this.h()},l(n){e=V(n,"DIV",{class:!0});var f=E(e);for(let i=0;i<a.length;i+=1)a[i].l(f);l=N(f);for(let i=0;i<o.length;i+=1)o[i].l(f);f.forEach(u),this.h()},h(){w(e,"class","color-legend plurality-legend svelte-1fkuggv")},m(n,f){G(n,e,f);for(let i=0;i<a.length;i+=1)a[i].m(e,null);c(e,l);for(let i=0;i<o.length;i+=1)o[i].m(e,null)},p(n,f){if(f&0){s=He;let i;for(i=0;i<s.length;i+=1){const _=Xl(n,s,i);a[i]?a[i].p(_,f):(a[i]=rt(_),a[i].c(),a[i].m(e,l))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}if(f&0){r=He;let i;for(i=0;i<r.length;i+=1){const _=Ql(n,r,i);o[i]?o[i].p(_,f):(o[i]=ft(_),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(n){n&&u(e),ve(a,n),ve(o,n)}}}function Xt(t){let e,l,s,a,r,o,n,f,i,_,P,D,b=ze,h=[];for(let g=0;g<b.length;g+=1)h[g]=ht(Yl(t,b,g));return{c(){e=M("div");for(let g=0;g<h.length;g+=1)h[g].c();l=S(),s=M("p"),a=M("span"),r=z("Weak plurality"),o=S(),n=M("p"),f=S(),i=M("p"),_=z("Majority"),P=S(),D=M("p"),this.h()},l(g){e=V(g,"DIV",{class:!0});var p=E(e);for(let B=0;B<h.length;B+=1)h[B].l(p);l=N(p),s=V(p,"P",{class:!0});var k=E(s);a=V(k,"SPAN",{});var T=E(a);r=y(T,"Weak plurality"),T.forEach(u),k.forEach(u),o=N(p),n=V(p,"P",{class:!0}),E(n).forEach(u),f=N(p),i=V(p,"P",{class:!0});var I=E(i);_=y(I,"Majority"),I.forEach(u),P=N(p),D=V(p,"P",{class:!0}),E(D).forEach(u),p.forEach(u),this.h()},h(){w(s,"class","col-head svelte-1fkuggv"),w(n,"class","col-head svelte-1fkuggv"),w(i,"class","col-head svelte-1fkuggv"),w(D,"class","col-head svelte-1fkuggv"),w(e,"class","legend svelte-1fkuggv")},m(g,p){G(g,e,p);for(let k=0;k<h.length;k+=1)h[k].m(e,null);c(e,l),c(e,s),c(s,a),c(a,r),c(e,o),c(e,n),c(e,f),c(e,i),c(i,_),c(e,P),c(e,D)},p(g,p){if(p&0){b=ze;let k;for(k=0;k<b.length;k+=1){const T=Yl(g,b,k);h[k]?h[k].p(T,p):(h[k]=ht(T),h[k].c(),h[k].m(e,l))}for(;k<h.length;k+=1)h[k].d(1);h.length=b.length}},d(g){g&&u(e),ve(h,g)}}}function at(t){let e;return{c(){e=M("div"),this.h()},l(l){e=V(l,"DIV",{style:!0}),E(e).forEach(u),this.h()},h(){je(e,"background-color",t[3].includes(t[10])?rl[t[69]]:Ye[t[69]])},m(l,s){G(l,e,s)},p(l,s){s[0]&1032&&je(e,"background-color",l[3].includes(l[10])?rl[l[69]]:Ye[l[69]])},d(l){l&&u(e)}}}function it(t){let e,l=(t[25][t[25].length-1]<1?De(t[94],0):t[25][t[25].length-1]>1e3?Xe(t[94]):t[94])+"",s,a;return{c(){e=M("p"),s=z(l),a=S(),this.h()},l(r){e=V(r,"P",{class:!0});var o=E(e);s=y(o,l),a=N(o),o.forEach(u),this.h()},h(){w(e,"class","svelte-1fkuggv")},m(r,o){G(r,e,o),c(e,s),c(e,a)},p(r,o){o[0]&33554432&&l!==(l=(r[25][r[25].length-1]<1?De(r[94],0):r[25][r[25].length-1]>1e3?Xe(r[94]):r[94])+"")&&ke(s,l)},d(r){r&&u(e)}}}function rt(t){let e;return{c(){e=M("div"),this.h()},l(l){e=V(l,"DIV",{style:!0}),E(e).forEach(u),this.h()},h(){je(e,"background-color",Ye[t[69]])},m(l,s){G(l,e,s)},p:sl,d(l){l&&u(e)}}}function ft(t){let e,l=t[90].replace("_","-")+"",s;return{c(){e=M("p"),s=z(l),this.h()},l(a){e=V(a,"P",{class:!0});var r=E(e);s=y(r,l),r.forEach(u),this.h()},h(){w(e,"class","svelte-1fkuggv")},m(a,r){G(a,e,r),c(e,s)},p:sl,d(a){a&&u(e)}}}function ct(t){let e;return{c(){e=M("div"),this.h()},l(l){e=V(l,"DIV",{style:!0}),E(e).forEach(u),this.h()},h(){je(e,"background-color",ul[t[84]]+t[87])},m(l,s){G(l,e,s)},p:sl,d(l){l&&u(e)}}}function ht(t){let e,l,s=xe(t[84])+"",a,r=al,o=[];for(let n=0;n<r.length;n+=1)o[n]=ct(Zl(t,r,n));return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=S(),l=M("p"),a=z(s),this.h()},l(n){for(let i=0;i<o.length;i+=1)o[i].l(n);e=N(n),l=V(n,"P",{class:!0});var f=E(l);a=y(f,s),f.forEach(u),this.h()},h(){w(l,"class","row-label svelte-1fkuggv")},m(n,f){for(let i=0;i<o.length;i+=1)o[i].m(n,f);G(n,e,f),G(n,l,f),c(l,a)},p(n,f){if(f&0){r=al;let i;for(i=0;i<r.length;i+=1){const _=Zl(n,r,i);o[i]?o[i].p(_,f):(o[i]=ct(_),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(n){ve(o,n),n&&u(e),n&&u(l)}}}function ut(t){let e,l,s,a,r,o,n,f,i,_=["assembly","senate","congress"],P=[];for(let h=0;h<3;h+=1)P[h]=gt(Gl(t,_,h));let D=t[19],b=[];for(let h=0;h<D.length;h+=1)b[h]=pt(ql(t,D,h));return{c(){e=M("div"),l=M("div"),s=M("select");for(let h=0;h<3;h+=1)P[h].c();a=S();for(let h=0;h<b.length;h+=1)b[h].c();this.h()},l(h){e=V(h,"DIV",{class:!0});var g=E(e);l=V(g,"DIV",{class:!0});var p=E(l);s=V(p,"SELECT",{class:!0});var k=E(s);for(let T=0;T<3;T+=1)P[T].l(k);k.forEach(u),p.forEach(u),a=N(g);for(let T=0;T<b.length;T+=1)b[T].l(g);g.forEach(u),this.h()},h(){w(s,"class","svelte-1fkuggv"),t[18]===void 0&&Ae(()=>t[52].call(s)),w(l,"class","plan-selector svelte-1fkuggv"),w(e,"class","svelte-1fkuggv")},m(h,g){G(h,e,g),c(e,l),c(l,s);for(let p=0;p<3;p+=1)P[p].m(s,null);tl(s,t[18]),c(e,a);for(let p=0;p<b.length;p+=1)b[p].m(e,null);n=!0,f||(i=de(s,"change",t[52]),f=!0)},p(h,g){if(g&0){_=["assembly","senate","congress"];let p;for(p=0;p<3;p+=1){const k=Gl(h,_,p);P[p]?P[p].p(k,g):(P[p]=gt(k),P[p].c(),P[p].m(s,null))}for(;p<3;p+=1)P[p].d(1)}if(g[0]&262144&&tl(s,h[18]),g[0]&76283904|g[1]&16){D=h[19];let p;for(p=0;p<D.length;p+=1){const k=ql(h,D,p);b[p]?b[p].p(k,g):(b[p]=pt(k),b[p].c(),b[p].m(e,null))}for(;p<b.length;p+=1)b[p].d(1);b.length=D.length}},i(h){n||(Ae(()=>{o&&o.end(1),r=Fe(e,nl,{}),r.start()}),n=!0)},o(h){r&&r.invalidate(),o=Je(e,nl,{}),n=!1},d(h){h&&u(e),ve(P,h),ve(b,h),h&&o&&o.end(),f=!1,i()}}}function _t(t){let e,l=Wt(t[78]+t[81])+"",s,a;return{c(){e=M("option"),s=z(l),this.h()},l(r){e=V(r,"OPTION",{});var o=E(e);s=y(o,l),o.forEach(u),this.h()},h(){e.__value=a=t[78]+t[81],e.value=e.__value},m(r,o){G(r,e,o),c(e,s)},p:sl,d(r){r&&u(e)}}}function gt(t){let e,l=["","_letters","_names"],s=[];for(let a=0;a<3;a+=1)s[a]=_t(Fl(t,l,a));return{c(){e=M("optgroup");for(let a=0;a<3;a+=1)s[a].c();this.h()},l(a){e=V(a,"OPTGROUP",{label:!0});var r=E(e);for(let o=0;o<3;o+=1)s[o].l(r);r.forEach(u),this.h()},h(){w(e,"label",xe(t[78]))},m(a,r){G(a,e,r);for(let o=0;o<3;o+=1)s[o].m(e,null)},p(a,r){if(r&0){l=["","_letters","_names"];let o;for(o=0;o<3;o+=1){const n=Fl(a,l,o);s[o]?s[o].p(n,r):(s[o]=_t(n),s[o].c(),s[o].m(e,null))}for(;o<3;o+=1)s[o].d(1)}},d(a){a&&u(e),ve(s,a)}}}function dt(t){let e,l,s,a=Ml(t[73])+"",r,o,n,f,i,_,P,D,b,h,g,p,k,T,I,B=Xe(t[26][t[73]].income)+(t[23]&&t[18]in fl?"; "+Vl(t[26][t[73]].pop20_total-fl[t[18]]):"")+"",A,C,Q,Y;function se(){return t[53](t[73])}let W=ze,F=[];for(let H=0;H<W.length;H+=1)F[H]=vt(Wl(t,W,H));return{c(){e=M("div"),l=M("p"),s=M("i"),r=z(a),o=S(),n=M("table"),f=M("tr"),i=M("th"),_=S(),P=M("th"),D=z("CVAP"),b=S(),h=M("th"),g=z("Pop."),p=S();for(let H=0;H<F.length;H+=1)F[H].c();k=S(),T=M("p"),I=z("Income: "),A=z(B),C=S(),this.h()},l(H){e=V(H,"DIV",{class:!0});var K=E(e);l=V(K,"P",{class:!0});var R=E(l);s=V(R,"I",{});var oe=E(s);r=y(oe,a),oe.forEach(u),R.forEach(u),o=N(K),n=V(K,"TABLE",{class:!0});var ue=E(n);f=V(ue,"TR",{class:!0});var Z=E(f);i=V(Z,"TH",{class:!0}),E(i).forEach(u),_=N(Z),P=V(Z,"TH",{class:!0});var pe=E(P);D=y(pe,"CVAP"),pe.forEach(u),b=N(Z),h=V(Z,"TH",{class:!0});var x=E(h);g=y(x,"Pop."),x.forEach(u),Z.forEach(u),p=N(ue);for(let Ee=0;Ee<F.length;Ee+=1)F[Ee].l(ue);ue.forEach(u),k=N(K),T=V(K,"P",{class:!0});var m=E(T);I=y(m,"Income: "),A=y(m,B),m.forEach(u),C=N(K),K.forEach(u),this.h()},h(){w(l,"class","svelte-1fkuggv"),w(i,"class","svelte-1fkuggv"),w(P,"class","svelte-1fkuggv"),w(h,"class","svelte-1fkuggv"),w(f,"class","svelte-1fkuggv"),w(n,"class","svelte-1fkuggv"),w(T,"class","table-footer svelte-1fkuggv"),w(e,"class","district-aggregate svelte-1fkuggv")},m(H,K){G(H,e,K),c(e,l),c(l,s),c(s,r),c(e,o),c(e,n),c(n,f),c(f,i),c(f,_),c(f,P),c(P,D),c(f,b),c(f,h),c(h,g),c(n,p);for(let R=0;R<F.length;R+=1)F[R].m(n,null);c(e,k),c(e,T),c(T,I),c(T,A),c(e,C),Q||(Y=de(l,"click",se),Q=!0)},p(H,K){if(t=H,K[0]&524288&&a!==(a=Ml(t[73])+"")&&ke(r,a),K[0]&67633152){W=ze;let R;for(R=0;R<W.length;R+=1){const oe=Wl(t,W,R);F[R]?F[R].p(oe,K):(F[R]=vt(oe),F[R].c(),F[R].m(n,null))}for(;R<F.length;R+=1)F[R].d(1);F.length=W.length}K[0]&76283904&&B!==(B=Xe(t[26][t[73]].income)+(t[23]&&t[18]in fl?"; "+Vl(t[26][t[73]].pop20_total-fl[t[18]]):"")+"")&&ke(A,B)},d(H){H&&u(e),ve(F,H),Q=!1,Y()}}}function vt(t){let e,l,s=xe(t[70])+"",a,r,o,n=De(t[26][t[73]]["cvap19"+t[70]])+"",f,i,_,P=De(t[26][t[73]]["pop20"+t[70]])+"",D,b;return{c(){e=M("tr"),l=M("td"),a=z(s),r=S(),o=M("td"),f=z(n),i=S(),_=M("td"),D=z(P),b=S(),this.h()},l(h){e=V(h,"TR",{class:!0});var g=E(e);l=V(g,"TD",{class:!0});var p=E(l);a=y(p,s),p.forEach(u),r=N(g),o=V(g,"TD",{class:!0});var k=E(o);f=y(k,n),k.forEach(u),i=N(g),_=V(g,"TD",{class:!0});var T=E(_);D=y(T,P),T.forEach(u),b=N(g),g.forEach(u),this.h()},h(){w(l,"class","svelte-1fkuggv"),w(o,"class","svelte-1fkuggv"),w(_,"class","svelte-1fkuggv"),w(e,"class","svelte-1fkuggv")},m(h,g){G(h,e,g),c(e,l),c(l,a),c(e,r),c(e,o),c(o,f),c(e,i),c(e,_),c(_,D),c(e,b)},p(h,g){g[0]&67633152&&n!==(n=De(h[26][h[73]]["cvap19"+h[70]])+"")&&ke(f,n),g[0]&67633152&&P!==(P=De(h[26][h[73]]["pop20"+h[70]])+"")&&ke(D,P)},d(h){h&&u(e)}}}function pt(t){let e=t[73].split(",")[0].split("_")[0]===t[18].split("_")[0],l,s=e&&dt(t);return{c(){s&&s.c(),l=Be()},l(a){s&&s.l(a),l=Be()},m(a,r){s&&s.m(a,r),G(a,l,r)},p(a,r){r[0]&786432&&(e=a[73].split(",")[0].split("_")[0]===a[18].split("_")[0]),e?s?s.p(a,r):(s=dt(a),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(a){s&&s.d(a),a&&u(l)}}}function mt(t){let e,l,s,a,r,o,n,f,i,_,P=t[14],D=[];for(let b=0;b<P.length;b+=1)D[b]=kt(Hl(t,P,b));return{c(){e=M("div");for(let b=0;b<D.length;b+=1)D[b].c();l=S(),s=M("button"),a=M("b"),r=z("[SAVE]"),this.h()},l(b){e=V(b,"DIV",{class:!0});var h=E(e);for(let k=0;k<D.length;k+=1)D[k].l(h);l=N(h),s=V(h,"BUTTON",{style:!0});var g=E(s);a=V(g,"B",{});var p=E(a);r=y(p,"[SAVE]"),p.forEach(u),g.forEach(u),h.forEach(u),this.h()},h(){je(s,"font-size","13px"),w(e,"class","community svelte-1fkuggv")},m(b,h){G(b,e,h);for(let g=0;g<D.length;g+=1)D[g].m(e,null);c(e,l),c(e,s),c(s,a),c(a,r),f=!0,i||(_=de(s,"click",t[33]),i=!0)},p(b,h){if(h[0]&16384|h[1]&2){P=b[14];let g;for(g=0;g<P.length;g+=1){const p=Hl(b,P,g);D[g]?D[g].p(p,h):(D[g]=kt(p),D[g].c(),D[g].m(e,l))}for(;g<D.length;g+=1)D[g].d(1);D.length=P.length}},i(b){f||(Ae(()=>{n&&n.end(1),o=Fe(e,nl,{}),o.start()}),f=!0)},o(b){o&&o.invalidate(),n=Je(e,nl,{}),f=!1},d(b){b&&u(e),ve(D,b),b&&n&&n.end(),i=!1,_()}}}function bt(t){let e,l,s=xe(t[70])+"",a,r,o,n=De(t[26]["cvap19"+t[70]])+"",f,i,_,P=De(t[26]["pop20"+t[70]])+"",D,b;return{c(){e=M("tr"),l=M("td"),a=z(s),r=S(),o=M("td"),f=z(n),i=S(),_=M("td"),D=z(P),b=S(),this.h()},l(h){e=V(h,"TR",{class:!0});var g=E(e);l=V(g,"TD",{class:!0});var p=E(l);a=y(p,s),p.forEach(u),r=N(g),o=V(g,"TD",{class:!0});var k=E(o);f=y(k,n),k.forEach(u),i=N(g),_=V(g,"TD",{class:!0});var T=E(_);D=y(T,P),T.forEach(u),b=N(g),g.forEach(u),this.h()},h(){w(l,"class","svelte-1fkuggv"),w(o,"class","svelte-1fkuggv"),w(_,"class","svelte-1fkuggv"),w(e,"class","svelte-1fkuggv")},m(h,g){G(h,e,g),c(e,l),c(l,a),c(e,r),c(e,o),c(o,f),c(e,i),c(e,_),c(_,D),c(e,b)},p(h,g){g[0]&16384&&n!==(n=De(h[26]["cvap19"+h[70]])+"")&&ke(f,n),g[0]&16384&&P!==(P=De(h[26]["pop20"+h[70]])+"")&&ke(D,P)},d(h){h&&u(e)}}}function kt(t){let e,l,s,a=(t[67]||"COI"+(t[69]+1))+"",r,o,n,f,i,_,P,D,b,h,g,p,k,T,I,B,A,C,Q=Xe(t[26].income)+"",Y,se,W,F,H=De(t[26].hhlang)+"",K,R,oe,ue,Z=De(t[26].benefits)+"",pe,x,m;function Ee(){return t[56](t[69])}let Oe=ze,ie=[];for(let ee=0;ee<Oe.length;ee+=1)ie[ee]=bt(Rl(t,Oe,ee));return{c(){e=M("div"),l=M("p"),s=M("i"),r=z(a),o=S(),n=M("button"),f=z("\u{1F5D1}"),i=S(),_=M("table"),P=M("tr"),D=M("th"),b=S(),h=M("th"),g=z("CVAP"),p=S(),k=M("th"),T=z("Pop."),I=S();for(let ee=0;ee<ie.length;ee+=1)ie[ee].c();B=S(),A=M("p"),C=z("Income: "),Y=z(Q),se=S(),W=M("p"),F=z("Asian and LEP: "),K=z(H),R=S(),oe=M("p"),ue=z("Pct. gov't benefits: "),pe=z(Z),this.h()},l(ee){e=V(ee,"DIV",{class:!0});var ae=E(e);l=V(ae,"P",{class:!0});var le=E(l);s=V(le,"I",{});var Pe=E(s);r=y(Pe,a),Pe.forEach(u),o=N(le),n=V(le,"BUTTON",{});var re=E(n);f=y(re,"\u{1F5D1}"),re.forEach(u),le.forEach(u),i=N(ae),_=V(ae,"TABLE",{class:!0});var we=E(_);P=V(we,"TR",{class:!0});var te=E(P);D=V(te,"TH",{class:!0}),E(D).forEach(u),b=N(te),h=V(te,"TH",{class:!0});var X=E(h);g=y(X,"CVAP"),X.forEach(u),p=N(te),k=V(te,"TH",{class:!0});var $=E(k);T=y($,"Pop."),$.forEach(u),te.forEach(u),I=N(we);for(let ne=0;ne<ie.length;ne+=1)ie[ne].l(we);we.forEach(u),B=N(ae),A=V(ae,"P",{class:!0});var Se=E(A);C=y(Se,"Income: "),Y=y(Se,Q),Se.forEach(u),se=N(ae),W=V(ae,"P",{class:!0});var Le=E(W);F=y(Le,"Asian and LEP: "),K=y(Le,H),Le.forEach(u),R=N(ae),oe=V(ae,"P",{class:!0});var me=E(oe);ue=y(me,"Pct. gov't benefits: "),pe=y(me,Z),me.forEach(u),ae.forEach(u),this.h()},h(){w(l,"class","svelte-1fkuggv"),w(D,"class","svelte-1fkuggv"),w(h,"class","svelte-1fkuggv"),w(k,"class","svelte-1fkuggv"),w(P,"class","svelte-1fkuggv"),w(_,"class","svelte-1fkuggv"),w(A,"class","table-footer svelte-1fkuggv"),w(W,"class","table-footer svelte-1fkuggv"),w(oe,"class","table-footer svelte-1fkuggv"),w(e,"class","svelte-1fkuggv")},m(ee,ae){G(ee,e,ae),c(e,l),c(l,s),c(s,r),c(l,o),c(l,n),c(n,f),c(e,i),c(e,_),c(_,P),c(P,D),c(P,b),c(P,h),c(h,g),c(P,p),c(P,k),c(k,T),c(_,I);for(let le=0;le<ie.length;le+=1)ie[le].m(_,null);c(e,B),c(e,A),c(A,C),c(A,Y),c(e,se),c(e,W),c(W,F),c(W,K),c(e,R),c(e,oe),c(oe,ue),c(oe,pe),x||(m=de(n,"click",Ee),x=!0)},p(ee,ae){if(t=ee,ae[0]&16384&&a!==(a=(t[67]||"COI"+(t[69]+1))+"")&&ke(r,a),ae[0]&16384){Oe=ze;let le;for(le=0;le<Oe.length;le+=1){const Pe=Rl(t,Oe,le);ie[le]?ie[le].p(Pe,ae):(ie[le]=bt(Pe),ie[le].c(),ie[le].m(_,null))}for(;le<ie.length;le+=1)ie[le].d(1);ie.length=Oe.length}ae[0]&16384&&Q!==(Q=Xe(t[26].income)+"")&&ke(Y,Q),ae[0]&16384&&H!==(H=De(t[26].hhlang)+"")&&ke(K,H),ae[0]&16384&&Z!==(Z=De(t[26].benefits)+"")&&ke(pe,Z)},d(ee){ee&&u(e),ve(ie,ee),x=!1,m()}}}function Et(t){let e,l=t[64]+"",s,a,r;function o(){return t[57](t[64])}return{c(){e=M("button"),s=z(l),this.h()},l(n){e=V(n,"BUTTON",{class:!0});var f=E(e);s=y(f,l),f.forEach(u),this.h()},h(){w(e,"class","svelte-1fkuggv")},m(n,f){G(n,e,f),c(e,s),a||(r=de(e,"click",o),a=!0)},p(n,f){t=n},d(n){n&&u(e),a=!1,r()}}}function Yt(t){let e,l,s,a,r,o,n=t[3].includes(t[10]),f,i=t[3].includes(t[10]),_,P,D,b,h,g,p,k,T,I,B=(t[23]?"Original":"Modify")+"",A,C,Q,Y,se,W,F,H,K,R,oe,ue,Z,pe,x,m,Ee,Oe,ie,ee,ae,le,Pe=t[3],re=[];for(let v=0;v<Pe.length;v+=1)re[v]=lt(et(t,Pe,v));let we=t[4],te=[];for(let v=0;v<we.length;v+=1)te[v]=tt($l(t,we,v));let X=n&&st(t),$=i&&ot(t);function Se(v,j){return(P==null||j[0]&3080)&&(P=!!(v[3].includes(v[10])&&v[11])),P?Xt:((D==null||j[0]&1048640)&&(D=!!v[6].includes(v[20])),D?Qt:Kt)}let Le=Se(t,[-1,-1,-1,-1]),me=Le(t),ne=t[21]&&ut(t),ce=t[12]&&mt(t);Z=new Jt({props:{viewBox:t[16],labelSize:t[24],draggedBgs:t[13],data:t[1],path:t[8],color:t[31],changingLines:t[23],neighbor:t[30],showPluralities:t[11],metric:t[20],period:t[9],tractVars:t[5],showComms:t[12],drawings:t[14],showPlans:t[21],plan:t[18],points:t[2],tractMesh:t[29],bgMesh:t[28],mesh:t[27],aggregates:t[19],obj:t[0],handleLabelClick:t[35],congressMeshes:t[15],plansMeshes:t[7],startDrag:t[36],endDrag:t[37],handleMouseMove:t[38]}});let ye=Object.keys(t[34]),ge=[];for(let v=0;v<ye.length;v+=1)ge[v]=Et(Ul(t,ye,v));return{c(){e=M("div"),l=M("div"),s=M("select"),a=M("optgroup");for(let v=0;v<re.length;v+=1)re[v].c();r=M("optgroup");for(let v=0;v<te.length;v+=1)te[v].c();o=S(),X&&X.c(),f=S(),$&&$.c(),_=S(),me.c(),b=S(),h=M("div"),g=M("h3"),p=M("button"),k=z("Plans \u2193"),T=S(),I=M("button"),A=z(B),C=S(),ne&&ne.c(),Q=S(),Y=M("div"),se=M("h3"),W=M("button"),F=z("Communities \u2193"),H=S(),K=M("button"),R=z("+"),oe=S(),ce&&ce.c(),ue=S(),Ct(Z.$$.fragment),pe=S(),x=M("div"),m=M("h3"),Ee=z("Views"),Oe=S();for(let v=0;v<ge.length;v+=1)ge[v].c();this.h()},l(v){e=V(v,"DIV",{class:!0,style:!0});var j=E(e);l=V(j,"DIV",{class:!0});var O=E(l);s=V(O,"SELECT",{style:!0,class:!0});var L=E(s);a=V(L,"OPTGROUP",{label:!0});var Me=E(a);for(let he=0;he<re.length;he+=1)re[he].l(Me);Me.forEach(u),r=V(L,"OPTGROUP",{label:!0});var $e=E(r);for(let he=0;he<te.length;he+=1)te[he].l($e);$e.forEach(u),L.forEach(u),o=N(O),X&&X.l(O),f=N(O),$&&$.l(O),_=N(O),me.l(O),b=N(O),h=V(O,"DIV",{class:!0});var Re=E(h);g=V(Re,"H3",{class:!0});var qe=E(g);p=V(qe,"BUTTON",{});var el=E(p);k=y(el,"Plans \u2193"),el.forEach(u),T=N(qe),I=V(qe,"BUTTON",{class:!0});var ll=E(I);A=y(ll,B),ll.forEach(u),qe.forEach(u),C=N(Re),ne&&ne.l(Re),Re.forEach(u),Q=N(O),Y=V(O,"DIV",{class:!0});var We=E(Y);se=V(We,"H3",{class:!0});var d=E(se);W=V(d,"BUTTON",{});var J=E(W);F=y(J,"Communities \u2193"),J.forEach(u),H=N(d),K=V(d,"BUTTON",{});var U=E(K);R=y(U,"+"),U.forEach(u),d.forEach(u),oe=N(We),ce&&ce.l(We),We.forEach(u),O.forEach(u),ue=N(j),Lt(Z.$$.fragment,j),pe=N(j),x=V(j,"DIV",{class:!0});var q=E(x);m=V(q,"H3",{class:!0});var fe=E(m);Ee=y(fe,"Views"),fe.forEach(u),Oe=N(q);for(let he=0;he<ge.length;he+=1)ge[he].l(q);q.forEach(u),j.forEach(u),this.h()},h(){w(a,"label","Redistricting data"),w(r,"label","American Community Survey data"),je(s,"width",t[4].includes(t[10])?"auto":"calc(var(--control-width) - 20px)"),w(s,"class","svelte-1fkuggv"),t[10]===void 0&&Ae(()=>t[46].call(s)),w(I,"class","subbutton svelte-1fkuggv"),w(g,"class","svelte-1fkuggv"),w(h,"class","stats svelte-1fkuggv"),w(se,"class","svelte-1fkuggv"),w(Y,"class","stats svelte-1fkuggv"),w(l,"class","controls svelte-1fkuggv"),w(m,"class","svelte-1fkuggv"),w(x,"class","views svelte-1fkuggv"),w(e,"class","container svelte-1fkuggv"),je(e,"cursor",t[22]?"crosshair":"auto"),Ae(()=>t[58].call(e))},m(v,j){G(v,e,j),c(e,l),c(l,s),c(s,a);for(let O=0;O<re.length;O+=1)re[O].m(a,null);c(s,r);for(let O=0;O<te.length;O+=1)te[O].m(r,null);tl(s,t[10]),c(l,o),X&&X.m(l,null),c(l,f),$&&$.m(l,null),c(l,_),me.m(l,null),c(l,b),c(l,h),c(h,g),c(g,p),c(p,k),c(g,T),c(g,I),c(I,A),c(h,C),ne&&ne.m(h,null),c(l,Q),c(l,Y),c(Y,se),c(se,W),c(W,F),c(se,H),c(se,K),c(K,R),c(Y,oe),ce&&ce.m(Y,null),c(e,ue),St(Z,e,null),c(e,pe),c(e,x),c(x,m),c(m,Ee),c(x,Oe);for(let O=0;O<ge.length;O+=1)ge[O].m(x,null);ie=Nt(e,t[58].bind(e)),ee=!0,ae||(le=[de(s,"change",t[46]),de(p,"click",t[50]),de(I,"click",t[51]),de(W,"click",t[54]),de(K,"click",t[55])],ae=!0)},p(v,j){if(j[0]&8){Pe=v[3];let L;for(L=0;L<Pe.length;L+=1){const Me=et(v,Pe,L);re[L]?re[L].p(Me,j):(re[L]=lt(Me),re[L].c(),re[L].m(a,null))}for(;L<re.length;L+=1)re[L].d(1);re.length=Pe.length}if(j[0]&16){we=v[4];let L;for(L=0;L<we.length;L+=1){const Me=$l(v,we,L);te[L]?te[L].p(Me,j):(te[L]=tt(Me),te[L].c(),te[L].m(r,null))}for(;L<te.length;L+=1)te[L].d(1);te.length=we.length}(!ee||j[0]&1040)&&je(s,"width",v[4].includes(v[10])?"auto":"calc(var(--control-width) - 20px)"),j[0]&1048&&tl(s,v[10]),j[0]&1032&&(n=v[3].includes(v[10])),n?X?X.p(v,j):(X=st(v),X.c(),X.m(l,f)):X&&(X.d(1),X=null),j[0]&1032&&(i=v[3].includes(v[10])),i?$?$.p(v,j):($=ot(v),$.c(),$.m(l,_)):$&&($.d(1),$=null),Le===(Le=Se(v,j))&&me?me.p(v,j):(me.d(1),me=Le(v),me&&(me.c(),me.m(l,b))),(!ee||j[0]&8388608)&&B!==(B=(v[23]?"Original":"Modify")+"")&&ke(A,B),v[21]?ne?(ne.p(v,j),j[0]&2097152&&_e(ne,1)):(ne=ut(v),ne.c(),_e(ne,1),ne.m(h,null)):ne&&(Ke(),Ie(ne,1,1,()=>{ne=null}),Qe()),v[12]?ce?(ce.p(v,j),j[0]&4096&&_e(ce,1)):(ce=mt(v),ce.c(),_e(ce,1),ce.m(Y,null)):ce&&(Ke(),Ie(ce,1,1,()=>{ce=null}),Qe());const O={};if(j[0]&65536&&(O.viewBox=v[16]),j[0]&16777216&&(O.labelSize=v[24]),j[0]&8192&&(O.draggedBgs=v[13]),j[0]&2&&(O.data=v[1]),j[0]&256&&(O.path=v[8]),j[0]&8388608&&(O.changingLines=v[23]),j[0]&2048&&(O.showPluralities=v[11]),j[0]&1048576&&(O.metric=v[20]),j[0]&512&&(O.period=v[9]),j[0]&32&&(O.tractVars=v[5]),j[0]&4096&&(O.showComms=v[12]),j[0]&16384&&(O.drawings=v[14]),j[0]&2097152&&(O.showPlans=v[21]),j[0]&262144&&(O.plan=v[18]),j[0]&4&&(O.points=v[2]),j[0]&524288&&(O.aggregates=v[19]),j[0]&1&&(O.obj=v[0]),j[0]&32768&&(O.congressMeshes=v[15]),j[0]&128&&(O.plansMeshes=v[7]),Z.$set(O),j[0]&65536|j[1]&8){ye=Object.keys(v[34]);let L;for(L=0;L<ye.length;L+=1){const Me=Ul(v,ye,L);ge[L]?ge[L].p(Me,j):(ge[L]=Et(Me),ge[L].c(),ge[L].m(x,null))}for(;L<ge.length;L+=1)ge[L].d(1);ge.length=ye.length}(!ee||j[0]&4194304)&&je(e,"cursor",v[22]?"crosshair":"auto")},i(v){ee||(_e(ne),_e(ce),_e(Z.$$.fragment,v),ee=!0)},o(v){Ie(ne),Ie(ce),Ie(Z.$$.fragment,v),ee=!1},d(v){v&&u(e),ve(re,v),ve(te,v),X&&X.d(),$&&$.d(),me.d(),ne&&ne.d(),ce&&ce.d(),At(Z),ve(ge,v),ie(),ae=!1,cl(le)}}}async function Zt(t){const l=await(await t(`${Ze}/points.topojson`)).json();return Pl(l,l.objects.layer).features}async function ss({fetch:t}){const l=await(await t(`${Ze}/output_no-congress.topojson`)).json(),s=Rt(l.objects.census),a=Pl(l,s).features,r=["cvap","pop"],o=[...a.reduce((_,P)=>{const D=Object.keys(P.properties).filter(b=>[...r,"GEOID","senate","assembly","congress"].every(h=>!b.includes(h))&&b===b.toLowerCase()).map(b=>b.split("_")[0]);return new Set([..._,...D])},[])],n=a.reduce((_,P,D)=>(_[P.properties.GEOID]=D,_),{}),f=Ot(),i={};return Object.keys(l.objects).forEach(_=>{_!=="census"&&(i[_]=f(hl(l,l.objects[_],(P,D)=>ol(P)!==ol(D))))}),{props:{topoData:l,obj:s,data:a,neighbors:Bt(s.geometries),dynamicVars:r,staticVars:o,idToIndex:n,points:await Zt(t),path:f,plansMeshes:i,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function xt(t,e,l){let s,a,r,o,{topoData:n,obj:f,neighbors:i,data:_,points:P,dynamicVars:D,staticVars:b,tractVars:h,pluralityVars:g,plansMeshes:p,path:k,idToIndex:T}=e;const I=d=>hl(n,f,d),B=k(I((d,J)=>Ce(d)!==Ce(J))),A=k(I((d,J)=>Ce(d).substring(0,11)!==Ce(J).substring(0,11))),C=d=>_[d].properties[X];let Q;function Y(d){const J=C(d),U=new Set(i[d].map(C).filter(q=>q!==J));if(U.size===1){const q=U.values().next().value;l(0,f.geometries[d].properties[X]=q,f),l(0,f),Q=q}else U.has(Q)&&(l(0,f.geometries[d].properties[X]=Q,f),l(0,f))}let se="present",W="pop";const F={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let H=!1;function K({properties:d}){if(d.ALAND===0)return"#fff";const J=d[`${s}_total`];if(g.includes(s)){const U=fe=>d[`${s}_${fe}`];if(U(He[0])===null)return"#eee";const q=[...He].sort((fe,he)=>U(he)-U(fe));return Ye[He.indexOf(q[0])]}else if(b.includes(s)){if(!d.ALAND)return"#fff";if(!Tl(a(d)))return"#eee";if(J<=10)return"#fff";for(let U=1;U<r.length;U++)if(a(d)<r[U])return Ye[U];return Ye[r.length-1]}else{if(J<=10)return"#fff";const U=q=>d[`${s}_${q}`]/d[`${s}_total`];if(H){const q=ze.filter(be=>U(be)>.5)[0];if(q!==void 0)return ul[q]+al[J<130?0:J<200?1:2];const fe=[...ze].sort((be,Ne)=>U(Ne)-U(be)),he=U(fe[0])-U(fe[1]);return ul[fe[0]]+al[he<.093?0:1]}else{const q=F[W];for(let fe=1;fe<q.length;fe++)if(U("asian")<q[fe])return rl[fe-1];return rl[q.length-1]}}}let R,oe,ue,Z,pe,x=[],m=[],Ee;async function Oe(){const J=await(await fetch(`${Ze}/output_congress.topojson`)).json();l(15,Ee=Object.keys(J.objects).reduce((U,q)=>(U[q]=k(hl(J,J.objects[q],(fe,he)=>ol(fe)!==ol(he))),U),{}))}function ie(d){let J;typeof d[0]=="string"?J=d.map(be=>_[T[be]].properties):J=d.map(be=>be.properties),console.log(J);const U=(be,Ne)=>J.reduce((wt,_l)=>wt+(_l[be]||0)*(Ne&&_l[Ne]||1),0),q=be=>U(be,"pop20_total")/U("pop20_total"),fe=(be,Ne)=>U(`${be}_${Ne}`)/U(`${be}_total`),he={income:q("income"),hhlang:fe("hhlang","asian"),benefits:fe("families","benefits"),pop20_total:U("pop20_total")};return["pop20","cvap19"].forEach(be=>ze.forEach(Ne=>he[be+Ne]=fe(be,Ne))),he}const ee=d=>l(14,m=m.filter((J,U)=>U!==d));async function ae(){try{await fetch(`${Ze}/data.json`,{method:"POST",body:JSON.stringify(m)})}catch(d){console.error(d)}}let le;async function Pe(){const d=await fetch(`${Ze}/data.json`);l(14,m=(await d.json()).map(J=>pl(vl({},J),{stats:ie(J.ids)})))}const re={Manhattan:[80,430,500,440],Brooklyn:[20,550,600,600],Full:[0,0,975,1420]};let we=re.Manhattan,te,X="assembly",$=[],Se={};function Le(d){$.includes(d)?l(19,$=$.filter(J=>J!==d)):l(19,$=[...$,d])}const me=()=>l(43,Z=!0),ne=()=>l(43,Z=l(22,ue=!1)),ce=d=>ue&&Z&&(x.length===0?l(13,x=[Ce(d)]):x.push(Ce(d))),ye=[[]];function ge(){W=Dl(this),l(10,W),l(4,b),l(3,D)}function v(){se=this.__value,l(9,se)}const j=()=>l(11,H=!H),O=()=>{l(21,R=!R),l(12,oe=!1)},L=()=>l(23,pe=!pe);function Me(){X=Dl(this),l(18,X)}const $e=d=>Le(d),Re=()=>{l(12,oe=!oe),l(21,R=!1)},qe=()=>l(22,ue=!0),el=d=>ee(d),ll=d=>l(16,we=re[d]);function We(){te=this.clientWidth,l(17,te)}return t.$$set=d=>{"topoData"in d&&l(39,n=d.topoData),"obj"in d&&l(0,f=d.obj),"neighbors"in d&&l(40,i=d.neighbors),"data"in d&&l(1,_=d.data),"points"in d&&l(2,P=d.points),"dynamicVars"in d&&l(3,D=d.dynamicVars),"staticVars"in d&&l(4,b=d.staticVars),"tractVars"in d&&l(5,h=d.tractVars),"pluralityVars"in d&&l(6,g=d.pluralityVars),"plansMeshes"in d&&l(7,p=d.plansMeshes),"path"in d&&l(8,k=d.path),"idToIndex"in d&&l(41,T=d.idToIndex)},t.$$.update=()=>{if(t.$$.dirty[0]&1552&&l(20,s=b.includes(W)?W:W+(se==="past"?10:W==="cvap"?19:20)),t.$$.dirty[0]&1048576&&l(45,a={income:d=>d[s],hhlang:d=>d[`${s}_asian`]/d[`${s}_total`],graduates:d=>(d[`${s}_hs_grad`]+d[`${s}_ba_above`])/d[`${s}_total`],families:d=>d[`${s}_benefits`]/d[`${s}_total`],workers:d=>d[`${s}_publictransport`]/d[`${s}_total`]}[s]),t.$$.dirty[0]&1051674|t.$$.dirty[1]&18432&&l(25,r=D.includes(W)&&!H?F[W]:F[s]||!b.includes(s)||s==="asiaentry"||l(42,F[s]=zt(_.map(d=>a(d.properties)).filter(Tl),6),F)),t.$$.dirty[0]&24834|t.$$.dirty[1]&4096&&!Z&&x.length>0){if(x[0]===x[x.length-1]){const d=new Set(x),J=yt(I((q,fe)=>qt(d.has(Ce(q)),d.has(Ce(fe)))).coordinates.flat()),U=_.map(q=>[Ut(Ht(q.geometry.coordinates[0]),J),Ce(q)]).filter(q=>q[0]).map(q=>q[1]);l(14,m=[...m,{outline:k({type:"LineString",coordinates:J}),ids:U,stats:ie(U)}])}l(13,x=[])}if(t.$$.dirty[0]&294912&&Ee===void 0&&X.startsWith("congress")&&Oe(),t.$$.dirty[0]&4096|t.$$.dirty[1]&8192&&oe&&!le&&(Pe(),l(44,le=!0)),t.$$.dirty[0]&458752&&l(24,o=(X.endsWith("_names")?13:16)/((te-410)/we[2])),t.$$.dirty[0]&786433)for(let d=0;d<$.length;d++){const[J,U]=$[d].split(",");J===X&&l(26,Se[$[d]]=ie(f.geometries.filter(({properties:q})=>U===""+q[X])),Se)}},[f,_,P,D,b,h,g,p,k,se,W,H,oe,x,m,Ee,we,te,X,$,s,R,ue,pe,o,r,Se,I,B,A,Y,K,ee,ae,re,Le,me,ne,ce,n,i,T,F,Z,le,a,ge,v,ye,j,O,L,Me,$e,Re,qe,el,ll,We]}class ns extends ml{constructor(e){super();bl(this,e,xt,Yt,kl,{topoData:39,obj:0,neighbors:40,data:1,points:2,dynamicVars:3,staticVars:4,tractVars:5,pluralityVars:6,plansMeshes:7,path:8,idToIndex:41},null,[-1,-1,-1,-1])}}export{ns as default,ss as load};

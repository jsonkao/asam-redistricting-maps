var Yt=Object.defineProperty,Kt=Object.defineProperties;var Qt=Object.getOwnPropertyDescriptors;var Al=Object.getOwnPropertySymbols;var qt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable;var Ol=(l,e,t)=>e in l?Yt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,jl=(l,e)=>{for(var t in e||(e={}))qt.call(e,t)&&Ol(l,t,e[t]);if(Al)for(var t of Al(e))Jt.call(e,t)&&Ol(l,t,e[t]);return l},Ml=(l,e)=>Kt(l,Qt(e));import{S as cl,i as hl,s as ul,e as P,t as j,c as D,a as b,g as M,d as u,b as p,J as de,f as L,H as c,h as ce,l as ie,K as Ce,L as Ae,M as Oe,N as he,O as Pl,P as _l,Q as Le,R as We,T as Ne,U as Ye,V as Ve,x as ee,r as Re,u as ue,w as He,W as nl,k as I,n as B,X as Il,Y as Xt,Z as Zt,I as $e,_ as $t,$ as xt,j as dl,m as gl,a0 as vl,o as ml,v as pl,a1 as es,A as ls,a2 as ts,a3 as ss,a4 as is,a5 as ns,a6 as xe,a7 as Bl}from"../chunks/vendor-9292600a.js";import{b as Dl}from"../chunks/paths-28a87002.js";import{i as ye,D as Ll,p as me,m as el,c as ll,a as Nl,d as yl,u as as,r as Ul,b as bl,e as Rl,x as os,f as rs,g as fs,h as cs,j as hs,k as us}from"../chunks/utils-f9cad560.js";const Vl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},Tl=["44","99","ee"],tl=["asian","black","hispanic","white"],kl=["1990_earlier","1990_1999","2000_2009","2010_later"],wl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},El=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],sl=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],_s={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},il={Brooklyn:[35,670,600,520],Chinatown:[80,430,500,600],"All of NYC":[0,0,975,1420]},ds={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};function Hl(l,e,t){const s=l.slice();return s[49]=e[t],s}function zl(l,e,t){const s=l.slice();return s[52]=e[t].properties,s[53]=e[t].geometry.coordinates[0],s[54]=e[t].geometry.coordinates[1],s}function Fl(l,e,t){const s=l.slice();return s[57]=e[t].outline,s}function Gl(l,e,t){const s=l.slice();return s[49]=e[t],s[61]=t,s}function Wl(l){let e,t=l[35].label+"",s;return{c(){e=P("p"),s=j(t),this.h()},l(i){e=D(i,"P",{class:!0,style:!0});var a=b(e);s=M(a,t),a.forEach(u),this.h()},h(){p(e,"class","street-inspector svelte-1i7628d"),de(e,"left",l[35].x+"px"),de(e,"top","calc("+l[35].y+"px - 1em)")},m(i,a){L(i,e,a),c(e,s)},p(i,a){a[1]&16&&t!==(t=i[35].label+"")&&ce(s,t),a[1]&16&&de(e,"left",i[35].x+"px"),a[1]&16&&de(e,"top","calc("+i[35].y+"px - 1em)")},d(i){i&&u(e)}}}function Yl(l){let e,t,s,i,a;function n(){return l[39](l[61])}function o(){return l[40](l[49])}function f(){return l[41](l[49])}return{c(){e=Ce("path"),this.h()},l(r){e=Ae(r,"path",{d:!0,fill:!0,class:!0}),b(e).forEach(u),this.h()},h(){p(e,"d",t=l[5](l[49])),p(e,"fill",s=l[6](l[49],l[10],l[11],l[9])),p(e,"class","svelte-1i7628d"),Oe(e,"head",l[3][0]===ye(l[49]))},m(r,h){L(r,e,h),i||(a=[he(e,"click",n),he(e,"contextmenu",Pl(o)),he(e,"mousemove",Pl(f))],i=!0)},p(r,h){l=r,h[0]&48&&t!==(t=l[5](l[49]))&&p(e,"d",t),h[0]&3664&&s!==(s=l[6](l[49],l[10],l[11],l[9]))&&p(e,"fill",s),h[0]&24&&Oe(e,"head",l[3][0]===ye(l[49]))},d(r){r&&u(e),i=!1,_l(a)}}}function Kl(l,e){let t,s,i=e[61]<e[28]&&Yl(e);return{key:l,first:null,c(){t=ie(),i&&i.c(),s=ie(),this.h()},l(a){t=ie(),i&&i.l(a),s=ie(),this.h()},h(){this.first=t},m(a,n){L(a,t,n),i&&i.m(a,n),L(a,s,n)},p(a,n){e=a,e[61]<e[28]?i?i.p(e,n):(i=Yl(e),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(a){a&&u(t),i&&i.d(a),a&&u(s)}}}function Ql(l){let e,t;return{c(){e=Ce("path"),this.h()},l(s){e=Ae(s,"path",{class:!0,d:!0}),b(e).forEach(u),this.h()},h(){p(e,"class","mesh-bg svelte-1i7628d"),p(e,"d",t=l[12].includes(l[10])?l[18]:l[19])},m(s,i){L(s,e,i)},p(s,i){i[0]&791552&&t!==(t=s[12].includes(s[10])?s[18]:s[19])&&p(e,"d",t)},d(s){s&&u(e)}}}function ql(l){let e,t,s,i,a=l[14],n=[];for(let o=0;o<a.length;o+=1)n[o]=Jl(Fl(l,a,o));return{c(){e=Ce("g");for(let o=0;o<n.length;o+=1)n[o].c()},l(o){e=Ae(o,"g",{});var f=b(e);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u)},m(o,f){L(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);i=!0},p(o,f){if(f[0]&16384){a=o[14];let r;for(r=0;r<a.length;r+=1){const h=Fl(o,a,r);n[r]?n[r].p(h,f):(n[r]=Jl(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},i(o){i||(Le(()=>{s&&s.end(1),t=We(e,Ne,{}),t.start()}),i=!0)},o(o){t&&t.invalidate(),s=Ye(e,Ne,{}),i=!1},d(o){o&&u(e),Ve(n,o),o&&s&&s.end()}}}function Jl(l){let e,t;return{c(){e=Ce("path"),this.h()},l(s){e=Ae(s,"path",{class:!0,d:!0}),b(e).forEach(u),this.h()},h(){p(e,"class","mesh-community svelte-1i7628d"),p(e,"d",t=l[57])},m(s,i){L(s,e,i)},p(s,i){i[0]&16384&&t!==(t=s[57])&&p(e,"d",t)},d(s){s&&u(e)}}}function Xl(l){let e,t,s,i,a,n;return{c(){e=Ce("g"),t=Ce("path"),this.h()},l(o){e=Ae(o,"g",{});var f=b(e);t=Ae(f,"path",{class:!0,d:!0}),b(t).forEach(u),f.forEach(u),this.h()},h(){p(t,"class","mesh-district svelte-1i7628d"),p(t,"d",s=l[37](l[16],l[24],l[23],l[29])),Oe(t,"showPluralities",l[9])},m(o,f){L(o,e,f),c(e,t),n=!0},p(o,f){(!n||f[0]&562102272&&s!==(s=o[37](o[16],o[24],o[23],o[29])))&&p(t,"d",s),f[0]&512&&Oe(t,"showPluralities",o[9])},i(o){n||(Le(()=>{a&&a.end(1),i=We(e,Ne,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=Ye(e,Ne,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function Zl(l){let e,t,s,i,a,n;return{c(){e=Ce("g"),t=Ce("path"),this.h()},l(o){e=Ae(o,"g",{});var f=b(e);t=Ae(f,"path",{class:!0,d:!0}),b(t).forEach(u),f.forEach(u),this.h()},h(){p(t,"class","mesh-district svelte-1i7628d"),p(t,"d",s=l[5](l[20](l[42],l[0])))},m(o,f){L(o,e,f),c(e,t),n=!0},p(o,f){(!n||f[0]&1114145&&s!==(s=o[5](o[20](o[42],o[0]))))&&p(t,"d",s)},i(o){n||(Le(()=>{a&&a.end(1),i=We(e,Ne,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=Ye(e,Ne,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function $l(l){let e,t,s,i,a,n=l[17],o=[];for(let h=0;h<n.length;h+=1)o[h]=et(zl(l,n,h));const f=h=>ue(o[h],1,1,()=>{o[h]=null});let r=l[34]&&lt(l);return{c(){e=Ce("g");for(let h=0;h<o.length;h+=1)o[h].c();t=ie(),r&&r.c(),this.h()},l(h){e=Ae(h,"g",{class:!0});var k=b(e);for(let m=0;m<o.length;m+=1)o[m].l(k);t=ie(),r&&r.l(k),k.forEach(u),this.h()},h(){p(e,"class","labels svelte-1i7628d")},m(h,k){L(h,e,k);for(let m=0;m<o.length;m+=1)o[m].m(e,null);c(e,t),r&&r.m(e,null),a=!0},p(h,k){if(k[0]&6488064|k[1]&44){n=h[17];let m;for(m=0;m<n.length;m+=1){const d=zl(h,n,m);o[m]?(o[m].p(d,k),ee(o[m],1)):(o[m]=et(d),o[m].c(),ee(o[m],1),o[m].m(e,t))}for(Re(),m=n.length;m<o.length;m+=1)f(m);He()}h[34]?r?r.p(h,k):(r=lt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(h){if(!a){for(let k=0;k<n.length;k+=1)ee(o[k]);Le(()=>{i&&i.end(1),s=We(e,Ne,{}),s.start()}),a=!0}},o(h){o=o.filter(Boolean);for(let k=0;k<o.length;k+=1)ue(o[k]);s&&s.invalidate(),i=Ye(e,Ne,{}),a=!1},d(h){h&&u(e),Ve(o,h),r&&r.d(),h&&i&&i.end()}}}function xl(l){let e,t=l[52][l[16]]+"",s,i,a,n,o,f,r,h;function k(){return l[43](l[52])}function m(){return l[44](l[52])}return{c(){e=Ce("text"),s=j(t),this.h()},l(d){e=Ae(d,"text",{x:!0,y:!0,class:!0});var v=b(e);s=M(v,t),v.forEach(u),this.h()},h(){p(e,"x",i=l[53]),p(e,"y",a=l[54]),p(e,"class","svelte-1i7628d"),Oe(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},m(d,v){L(d,e,v),c(e,s),f=!0,r||(h=[he(e,"click",k),he(e,"mousemove",m),he(e,"mouseout",l[45]),he(e,"blur",void 0)],r=!0)},p(d,v){l=d,(!f||v[0]&196608)&&t!==(t=l[52][l[16]]+"")&&ce(s,t),(!f||v[0]&131072&&i!==(i=l[53]))&&p(e,"x",i),(!f||v[0]&131072&&a!==(a=l[54]))&&p(e,"y",a),v[0]&2293760&&Oe(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},i(d){f||(Le(()=>{o&&o.end(1),n=We(e,Ne,{}),n.start()}),f=!0)},o(d){n&&n.invalidate(),o=Ye(e,Ne,{}),f=!1},d(d){d&&u(e),d&&o&&o.end(),r=!1,_l(h)}}}function et(l){let e=l[16]in l[52]&&(!l[36]||l[36]&&l[33].includes(l[52][l[16]])),t,s,i=e&&xl(l);return{c(){i&&i.c(),t=ie()},l(a){i&&i.l(a),t=ie()},m(a,n){i&&i.m(a,n),L(a,t,n),s=!0},p(a,n){n[0]&196608|n[1]&36&&(e=a[16]in a[52]&&(!a[36]||a[36]&&a[33].includes(a[52][a[16]]))),e?i?(i.p(a,n),n[0]&196608|n[1]&36&&ee(i,1)):(i=xl(a),i.c(),ee(i,1),i.m(t.parentNode,t)):i&&(Re(),ue(i,1,1,()=>{i=null}),He())},i(a){s||(ee(i),s=!0)},o(a){ue(i),s=!1},d(a){i&&i.d(a),a&&u(t)}}}function lt(l){let e,t;return{c(){e=Ce("path"),this.h()},l(s){e=Ae(s,"path",{class:!0,d:!0}),b(e).forEach(u),this.h()},h(){p(e,"class","mesh-onhover mesh-district svelte-1i7628d"),p(e,"d",t=l[0]&&l[5](nl(l[32],{type:l[0].type,geometries:l[0].geometries.filter(l[46])})))},m(s,i){L(s,e,i)},p(s,i){i[0]&65569|i[1]&10&&t!==(t=s[0]&&s[5](nl(s[32],{type:s[0].type,geometries:s[0].geometries.filter(s[46])})))&&p(e,"d",t)},d(s){s&&u(e)}}}function tt(l){let e,t,s,i=l[31],a=[];for(let n=0;n<i.length;n+=1)a[n]=st(Hl(l,i,n));return{c(){e=Ce("g");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=Ae(n,"g",{class:!0});var o=b(e);for(let f=0;f<a.length;f+=1)a[f].l(o);o.forEach(u),this.h()},h(){p(e,"class","streets svelte-1i7628d"),Oe(e,"showStreets",l[30])},m(n,o){L(n,e,o);for(let f=0;f<a.length;f+=1)a[f].m(e,null);t||(s=he(e,"mousemove",l[48]),t=!0)},p(n,o){if(o[0]&1073741856|o[1]&129){i=n[31];let f;for(f=0;f<i.length;f+=1){const r=Hl(n,i,f);a[f]?a[f].p(r,o):(a[f]=st(r),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}o[0]&1073741824&&Oe(e,"showStreets",n[30])},d(n){n&&u(e),Ve(a,n),t=!1,s()}}}function st(l){let e,t,s,i;function a(...n){return l[47](l[49],...n)}return{c(){e=Ce("path"),this.h()},l(n){e=Ae(n,"path",{d:!0,class:!0}),b(e).forEach(u),this.h()},h(){p(e,"d",t=l[5](l[49])),p(e,"class","svelte-1i7628d")},m(n,o){L(n,e,o),s||(i=he(e,"click",Pl(a)),s=!0)},p(n,o){l=n,o[0]&32|o[1]&1&&t!==(t=l[5](l[49]))&&p(e,"d",t)},d(n){n&&u(e),s=!1,i()}}}function gs(l){let e,t,s,i=[],a=new Map,n,o,f,r,h,k,m,d,v,g,T=l[35]&&Wl(l),V=l[4];const U=O=>ye(O[49]);for(let O=0;O<V.length;O+=1){let C=Gl(l,V,O),Q=U(C);a.set(Q,i[O]=Kl(Q,C))}let N=l[19]&&Ql(l),y=l[13]&&ql(l),A=l[15]&&!l[7]&&Xl(l),z=l[7]&&Zl(l),G=(l[15]||l[7])&&$l(l),Z=l[31]&&tt(l);return{c(){T&&T.c(),e=I(),t=Ce("svg"),s=Ce("g");for(let O=0;O<i.length;O+=1)i[O].c();n=Ce("g"),N&&N.c(),o=ie(),y&&y.c(),f=ie(),A&&A.c(),r=ie(),z&&z.c(),h=ie(),G&&G.c(),k=ie(),Z&&Z.c(),this.h()},l(O){T&&T.l(O),e=B(O),t=Ae(O,"svg",{viewBox:!0,style:!0,class:!0});var C=b(t);s=Ae(C,"g",{class:!0});var Q=b(s);for(let F=0;F<i.length;F+=1)i[F].l(Q);Q.forEach(u),n=Ae(C,"g",{class:!0});var ne=b(n);N&&N.l(ne),o=ie(),y&&y.l(ne),f=ie(),A&&A.l(ne),r=ie(),z&&z.l(ne),h=ie(),G&&G.l(ne),k=ie(),Z&&Z.l(ne),ne.forEach(u),C.forEach(u),this.h()},h(){p(s,"class","block-groups svelte-1i7628d"),p(n,"class","meshes svelte-1i7628d"),p(t,"viewBox",m=l[1].join(" ")),de(t,"--font-size",(l[2]||.8)+"em"),p(t,"class","svelte-1i7628d")},m(O,C){T&&T.m(O,C),L(O,e,C),L(O,t,C),c(t,s);for(let Q=0;Q<i.length;Q+=1)i[Q].m(s,null);c(t,n),N&&N.m(n,null),c(n,o),y&&y.m(n,null),c(n,f),A&&A.m(n,null),c(n,r),z&&z.m(n,null),c(n,h),G&&G.m(n,null),c(n,k),Z&&Z.m(n,null),d=!0,v||(g=[he(t,"mousedown",function(){Il(l[25])&&l[25].apply(this,arguments)}),he(t,"mouseup",function(){Il(l[26])&&l[26].apply(this,arguments)})],v=!0)},p(O,C){l=O,l[35]?T?T.p(l,C):(T=Wl(l),T.c(),T.m(e.parentNode,e)):T&&(T.d(1),T=null),C[0]&402722808&&(V=l[4],i=Xt(i,C,U,1,l,V,a,s,Zt,Kl,null,Gl)),l[19]?N?N.p(l,C):(N=Ql(l),N.c(),N.m(n,o)):N&&(N.d(1),N=null),l[13]?y?(y.p(l,C),C[0]&8192&&ee(y,1)):(y=ql(l),y.c(),ee(y,1),y.m(n,f)):y&&(Re(),ue(y,1,1,()=>{y=null}),He()),l[15]&&!l[7]?A?(A.p(l,C),C[0]&32896&&ee(A,1)):(A=Xl(l),A.c(),ee(A,1),A.m(n,r)):A&&(Re(),ue(A,1,1,()=>{A=null}),He()),l[7]?z?(z.p(l,C),C[0]&128&&ee(z,1)):(z=Zl(l),z.c(),ee(z,1),z.m(n,h)):z&&(Re(),ue(z,1,1,()=>{z=null}),He()),l[15]||l[7]?G?(G.p(l,C),C[0]&32896&&ee(G,1)):(G=$l(l),G.c(),ee(G,1),G.m(n,k)):G&&(Re(),ue(G,1,1,()=>{G=null}),He()),l[31]?Z?Z.p(l,C):(Z=tt(l),Z.c(),Z.m(n,null)):Z&&(Z.d(1),Z=null),(!d||C[0]&2&&m!==(m=l[1].join(" ")))&&p(t,"viewBox",m),(!d||C[0]&4)&&de(t,"--font-size",(l[2]||.8)+"em")},i(O){d||(ee(y),ee(A),ee(z),ee(G),d=!0)},o(O){ue(y),ue(A),ue(z),ue(G),d=!1},d(O){T&&T.d(O),O&&u(e),O&&u(t);for(let C=0;C<i.length;C+=1)i[C].d();N&&N.d(),y&&y.d(),A&&A.d(),z&&z.d(),G&&G.d(),Z&&Z.d(),v=!1,_l(g)}}}function vs(l,e,t){let s,i,a,{viewBox:n,labelSize:o,draggedBgs:f,data:r,path:h,color:k,changingLines:m,neighbor:d,showPluralities:v,metric:g,period:T,tractVars:V,showComms:U,drawings:N,showPlans:y,plan:A,points:z=[],tractMesh:G,bgMesh:Z,mesh:O,aggregates:C,obj:Q,handleLabelClick:ne,congressPlans:F,plans:pe,startDrag:ge,endDrag:be,handleMouseMove:ae,viewCutoff:ke,showOnlyFocusDistricts:ve,showStreets:De,streets:Pe}=e;function Te(){if(!!a)return h(i?nl(a,{type:Q.type,geometries:Q.geometries.filter(_=>s.includes(_.properties[A]))}):nl(a,Q,(_,H)=>Ll(_)!==Ll(H)))}let le,se;function X({pageX:_,pageY:H},{properties:{Label:$}}){t(35,se={x:_,y:H,label:$})}const q=_=>m&&A.includes("_")&&d(_),R=_=>console.log(_.properties),_e=_=>ae(_),J=(_,H)=>_.properties[A]!==H.properties[A],Y=_=>ne(`${A},${_[A]}`),K=_=>t(34,le=_[A]),te=()=>t(34,le=null),x=_=>le===_.properties[A],w=(_,H)=>De&&X(H,_),S=()=>t(35,se=null);return l.$$set=_=>{"viewBox"in _&&t(1,n=_.viewBox),"labelSize"in _&&t(2,o=_.labelSize),"draggedBgs"in _&&t(3,f=_.draggedBgs),"data"in _&&t(4,r=_.data),"path"in _&&t(5,h=_.path),"color"in _&&t(6,k=_.color),"changingLines"in _&&t(7,m=_.changingLines),"neighbor"in _&&t(8,d=_.neighbor),"showPluralities"in _&&t(9,v=_.showPluralities),"metric"in _&&t(10,g=_.metric),"period"in _&&t(11,T=_.period),"tractVars"in _&&t(12,V=_.tractVars),"showComms"in _&&t(13,U=_.showComms),"drawings"in _&&t(14,N=_.drawings),"showPlans"in _&&t(15,y=_.showPlans),"plan"in _&&t(16,A=_.plan),"points"in _&&t(17,z=_.points),"tractMesh"in _&&t(18,G=_.tractMesh),"bgMesh"in _&&t(19,Z=_.bgMesh),"mesh"in _&&t(20,O=_.mesh),"aggregates"in _&&t(21,C=_.aggregates),"obj"in _&&t(0,Q=_.obj),"handleLabelClick"in _&&t(22,ne=_.handleLabelClick),"congressPlans"in _&&t(23,F=_.congressPlans),"plans"in _&&t(24,pe=_.plans),"startDrag"in _&&t(25,ge=_.startDrag),"endDrag"in _&&t(26,be=_.endDrag),"handleMouseMove"in _&&t(27,ae=_.handleMouseMove),"viewCutoff"in _&&t(28,ke=_.viewCutoff),"showOnlyFocusDistricts"in _&&t(29,ve=_.showOnlyFocusDistricts),"showStreets"in _&&t(30,De=_.showStreets),"streets"in _&&t(31,Pe=_.streets)},l.$$.update=()=>{l.$$.dirty[0]&65536&&t(33,s=ds[A]),l.$$.dirty[0]&536870912|l.$$.dirty[1]&4&&t(36,i=ve&&s),l.$$.dirty[0]&25231360&&t(32,a=A.startsWith("congress")?F:pe),l.$$.dirty[0]&65536|l.$$.dirty[1]&2&&t(0,Q=a?a.objects[A]:void 0)},[Q,n,o,f,r,h,k,m,d,v,g,T,V,U,N,y,A,z,G,Z,O,C,ne,F,pe,ge,be,ae,ke,ve,De,Pe,a,s,le,se,i,Te,X,q,R,_e,J,Y,K,te,x,w,S]}class ms extends cl{constructor(e){super();hl(this,e,vs,gs,ul,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,showComms:13,drawings:14,showPlans:15,plan:16,points:17,tractMesh:18,bgMesh:19,mesh:20,aggregates:21,obj:0,handleLabelClick:22,congressPlans:23,plans:24,startDrag:25,endDrag:26,handleMouseMove:27,viewCutoff:28,showOnlyFocusDistricts:29,showStreets:30,streets:31},null,[-1,-1])}}function it(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function nt(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function at(l,e,t){const s=l.slice();return s[16]=e[t],s}function ot(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function rt(l,e,t){const s=l.slice();return s[10]=e[t],s}function ft(l,e,t){const s=l.slice();return s[13]=e[t],s}function ps(l){let e,t,s=l[9],i=[];for(let o=0;o<s.length;o+=1)i[o]=ct(nt(l,s,o));let a=l[9],n=[];for(let o=0;o<a.length;o+=1)n[o]=ht(it(l,a,o));return{c(){e=P("div");for(let o=0;o<i.length;o+=1)i[o].c();t=I();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0});var f=b(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=B(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){p(e,"class","color-legend svelte-lnhifj"),de(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.5em)"),Oe(e,"pctasian",l[3].includes(l[4]))},m(o,f){L(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);c(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const h=nt(o,s,r);i[r]?i[r].p(h,f):(i[r]=ct(h),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&536){a=o[9];let r;for(r=0;r<a.length;r+=1){const h=it(o,a,r);n[r]?n[r].p(h,f):(n[r]=ht(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&24&&de(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.5em)"),f&24&&Oe(e,"pctasian",o[3].includes(o[4]))},d(o){o&&u(e),Ve(i,o),Ve(n,o)}}}function bs(l){let e,t,s=l[8],i=[];for(let o=0;o<s.length;o+=1)i[o]=ut(ot(l,s,o));let a=l[8],n=[];for(let o=0;o<a.length;o+=1)n[o]=_t(at(l,a,o));return{c(){e=P("div");for(let o=0;o<i.length;o+=1)i[o].c();t=I();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0});var f=b(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=B(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){p(e,"class","color-legend plurality-legend svelte-lnhifj")},m(o,f){L(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);c(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const h=ot(o,s,r);i[r]?i[r].p(h,f):(i[r]=ut(h),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&256){a=o[8];let r;for(r=0;r<a.length;r+=1){const h=at(o,a,r);n[r]?n[r].p(h,f):(n[r]=_t(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},d(o){o&&u(e),Ve(i,o),Ve(n,o)}}}function ks(l){let e,t,s,i,a,n,o,f,r,h,k,m,d=l[0],v=[];for(let g=0;g<d.length;g+=1)v[g]=gt(rt(l,d,g));return{c(){e=P("div");for(let g=0;g<v.length;g+=1)v[g].c();t=I(),s=P("p"),i=P("span"),a=j("Weak plurality"),n=I(),o=P("p"),f=I(),r=P("p"),h=j("Majority"),k=I(),m=P("p"),this.h()},l(g){e=D(g,"DIV",{class:!0});var T=b(e);for(let y=0;y<v.length;y+=1)v[y].l(T);t=B(T),s=D(T,"P",{class:!0});var V=b(s);i=D(V,"SPAN",{});var U=b(i);a=M(U,"Weak plurality"),U.forEach(u),V.forEach(u),n=B(T),o=D(T,"P",{class:!0}),b(o).forEach(u),f=B(T),r=D(T,"P",{class:!0});var N=b(r);h=M(N,"Majority"),N.forEach(u),k=B(T),m=D(T,"P",{class:!0}),b(m).forEach(u),T.forEach(u),this.h()},h(){p(s,"class","col-head svelte-lnhifj"),p(o,"class","col-head svelte-lnhifj"),p(r,"class","col-head svelte-lnhifj"),p(m,"class","col-head svelte-lnhifj"),p(e,"class","legend svelte-lnhifj")},m(g,T){L(g,e,T);for(let V=0;V<v.length;V+=1)v[V].m(e,null);c(e,t),c(e,s),c(s,i),c(i,a),c(e,n),c(e,o),c(e,f),c(e,r),c(r,h),c(e,k),c(e,m)},p(g,T){if(T&7){d=g[0];let V;for(V=0;V<d.length;V+=1){const U=rt(g,d,V);v[V]?v[V].p(U,T):(v[V]=gt(U),v[V].c(),v[V].m(e,t))}for(;V<v.length;V+=1)v[V].d(1);v.length=d.length}},d(g){g&&u(e),Ve(v,g)}}}function ct(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(u),this.h()},h(){de(e,"background-color",l[3].includes(l[4])?El[l[20]]:sl[l[20]])},m(t,s){L(t,e,s)},p(t,s){s&24&&de(e,"background-color",t[3].includes(t[4])?El[t[20]]:sl[t[20]])},d(t){t&&u(e)}}}function ht(l){let e,t=(l[9][l[9].length-1]<1?me(l[21],0):l[9][l[9].length-1]>1e3?el(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?" Asian":"")+"",s,i;return{c(){e=P("p"),s=j(t),i=I(),this.h()},l(a){e=D(a,"P",{class:!0});var n=b(e);s=M(n,t),i=B(n),n.forEach(u),this.h()},h(){p(e,"class","svelte-lnhifj")},m(a,n){L(a,e,n),c(e,s),c(e,i)},p(a,n){n&536&&t!==(t=(a[9][a[9].length-1]<1?me(a[21],0):a[9][a[9].length-1]>1e3?el(a[21]):a[21])+(a[3].includes(a[4])&&a[20]===a[9].length-1?" Asian":"")+"")&&ce(s,t)},d(a){a&&u(e)}}}function ut(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(u),this.h()},h(){de(e,"background-color",sl[l[20]])},m(t,s){L(t,e,s)},p:$e,d(t){t&&u(e)}}}function _t(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=P("p"),s=j(t),this.h()},l(i){e=D(i,"P",{class:!0});var a=b(e);s=M(a,t),a.forEach(u),this.h()},h(){p(e,"class","svelte-lnhifj")},m(i,a){L(i,e,a),c(e,s)},p(i,a){a&256&&t!==(t=i[16].replace("_","-")+"")&&ce(s,t)},d(i){i&&u(e)}}}function dt(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(u),this.h()},h(){de(e,"background-color",l[2][l[10]]+l[13])},m(t,s){L(t,e,s)},p(t,s){s&7&&de(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&u(e)}}}function gt(l){let e,t,s=ll(l[10])+"",i,a=l[1],n=[];for(let o=0;o<a.length;o+=1)n[o]=dt(ft(l,a,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=I(),t=P("p"),i=j(s),this.h()},l(o){for(let r=0;r<n.length;r+=1)n[r].l(o);e=B(o),t=D(o,"P",{class:!0});var f=b(t);i=M(f,s),f.forEach(u),this.h()},h(){p(t,"class","row-label svelte-lnhifj")},m(o,f){for(let r=0;r<n.length;r+=1)n[r].m(o,f);L(o,e,f),L(o,t,f),c(t,i)},p(o,f){if(f&7){a=o[1];let r;for(r=0;r<a.length;r+=1){const h=ft(o,a,r);n[r]?n[r].p(h,f):(n[r]=dt(h),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&1&&s!==(s=ll(o[10])+"")&&ce(i,s)},d(o){Ve(n,o),o&&u(e),o&&u(t)}}}function ws(l){let e,t,s;function i(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?ks:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?bs:ps)}let a=i(l,-1),n=a(l);return{c(){n.c(),s=ie()},l(o){n.l(o),s=ie()},m(o,f){n.m(o,f),L(o,s,f)},p(o,[f]){a===(a=i(o,f))&&n?n.p(o,f):(n.d(1),n=a(o),n&&(n.c(),n.m(s.parentNode,s)))},i:$e,o:$e,d(o){n.d(o),o&&u(s)}}}function Es(l,e,t){let{groups:s,levels:i,colors:a,dynamicVars:n,variable:o,metric:f,showPluralities:r,pluralityVars:h,periods:k,breaks:m}=e;return l.$$set=d=>{"groups"in d&&t(0,s=d.groups),"levels"in d&&t(1,i=d.levels),"colors"in d&&t(2,a=d.colors),"dynamicVars"in d&&t(3,n=d.dynamicVars),"variable"in d&&t(4,o=d.variable),"metric"in d&&t(5,f=d.metric),"showPluralities"in d&&t(6,r=d.showPluralities),"pluralityVars"in d&&t(7,h=d.pluralityVars),"periods"in d&&t(8,k=d.periods),"breaks"in d&&t(9,m=d.breaks)},[s,i,a,n,o,f,r,h,k,m]}class Ps extends cl{constructor(e){super();hl(this,e,Es,ws,ul,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function vt(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function mt(l,e,t){const s=l.slice();return s[18]=e[t],s}function pt(l,e,t){const s=l.slice();return s[12]=e[t],s}function Ds(l){let e,t=l[6],s=[];for(let i=0;i<t.length;i+=1)s[i]=kt(vt(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=ie()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=ie()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);L(i,e,a)},p(i,a){if(a&200){t=i[6];let n;for(n=0;n<t.length;n+=1){const o=vt(i,t,n);s[n]?s[n].p(o,a):(s[n]=kt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){Ve(s,i),i&&u(e)}}}function Vs(l){let e,t=l[0],s=[];for(let i=0;i<t.length;i+=1)s[i]=Pt(pt(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=ie()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=ie()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);L(i,e,a)},p(i,a){if(a&567){t=i[0];let n;for(n=0;n<t.length;n+=1){const o=pt(i,t,n);s[n]?s[n].p(o,a):(s[n]=Pt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){Ve(s,i),i&&u(e)}}}function bt(l){let e,t,s=ll(l[18])+"",i,a,n,o=me(l[9]["cvap19"+l[18]])+"",f,r,h,k=me(l[9]["pop20"+l[18]])+"",m,d;return{c(){e=P("tr"),t=P("td"),i=j(s),a=I(),n=P("td"),f=j(o),r=I(),h=P("td"),m=j(k),d=I(),this.h()},l(v){e=D(v,"TR",{class:!0});var g=b(e);t=D(g,"TD",{class:!0});var T=b(t);i=M(T,s),T.forEach(u),a=B(g),n=D(g,"TD",{class:!0});var V=b(n);f=M(V,o),V.forEach(u),r=B(g),h=D(g,"TD",{class:!0});var U=b(h);m=M(U,k),U.forEach(u),d=B(g),g.forEach(u),this.h()},h(){p(t,"class","svelte-1avkicx"),p(n,"class","svelte-1avkicx"),p(h,"class","svelte-1avkicx"),p(e,"class","svelte-1avkicx")},m(v,g){L(v,e,g),c(e,t),c(t,i),c(e,a),c(e,n),c(n,f),c(e,r),c(e,h),c(h,m),c(e,d)},p(v,g){g&8&&s!==(s=ll(v[18])+"")&&ce(i,s),g&72&&o!==(o=me(v[9]["cvap19"+v[18]])+"")&&ce(f,o),g&72&&k!==(k=me(v[9]["pop20"+v[18]])+"")&&ce(m,k)},d(v){v&&u(e)}}}function kt(l){let e,t,s,i=(l[15]||"COI"+(l[17]+1))+"",a,n,o,f,r,h,k,m,d,v,g,T,V,U,N,y,A,z,G=el(l[9].income)+"",Z,O,C,Q,ne=me(l[9].hhlang)+"",F,pe,ge,be,ae=me(l[9].benefits)+"",ke,ve,De,Pe;function Te(){return l[11](l[17])}let le=l[3],se=[];for(let X=0;X<le.length;X+=1)se[X]=bt(mt(l,le,X));return{c(){e=P("div"),t=P("p"),s=P("i"),a=j(i),n=I(),o=P("button"),f=j("\u{1F5D1}"),r=I(),h=P("table"),k=P("tr"),m=P("th"),d=I(),v=P("th"),g=j("CVAP"),T=I(),V=P("th"),U=j("Pop."),N=I();for(let X=0;X<se.length;X+=1)se[X].c();y=I(),A=P("p"),z=j("Income: "),Z=j(G),O=I(),C=P("p"),Q=j("Asian and LEP: "),F=j(ne),pe=I(),ge=P("p"),be=j("Pct. gov't benefits: "),ke=j(ae),ve=I(),this.h()},l(X){e=D(X,"DIV",{});var q=b(e);t=D(q,"P",{class:!0});var R=b(t);s=D(R,"I",{});var _e=b(s);a=M(_e,i),_e.forEach(u),n=B(R),o=D(R,"BUTTON",{});var J=b(o);f=M(J,"\u{1F5D1}"),J.forEach(u),R.forEach(u),r=B(q),h=D(q,"TABLE",{class:!0});var Y=b(h);k=D(Y,"TR",{class:!0});var K=b(k);m=D(K,"TH",{class:!0}),b(m).forEach(u),d=B(K),v=D(K,"TH",{class:!0});var te=b(v);g=M(te,"CVAP"),te.forEach(u),T=B(K),V=D(K,"TH",{class:!0});var x=b(V);U=M(x,"Pop."),x.forEach(u),K.forEach(u),N=B(Y);for(let H=0;H<se.length;H+=1)se[H].l(Y);Y.forEach(u),y=B(q),A=D(q,"P",{class:!0});var w=b(A);z=M(w,"Income: "),Z=M(w,G),w.forEach(u),O=B(q),C=D(q,"P",{class:!0});var S=b(C);Q=M(S,"Asian and LEP: "),F=M(S,ne),S.forEach(u),pe=B(q),ge=D(q,"P",{class:!0});var _=b(ge);be=M(_,"Pct. gov't benefits: "),ke=M(_,ae),_.forEach(u),ve=B(q),q.forEach(u),this.h()},h(){p(t,"class","svelte-1avkicx"),p(m,"class","svelte-1avkicx"),p(v,"class","svelte-1avkicx"),p(V,"class","svelte-1avkicx"),p(k,"class","svelte-1avkicx"),p(h,"class","svelte-1avkicx"),p(A,"class","table-footer svelte-1avkicx"),p(C,"class","table-footer svelte-1avkicx"),p(ge,"class","table-footer svelte-1avkicx")},m(X,q){L(X,e,q),c(e,t),c(t,s),c(s,a),c(t,n),c(t,o),c(o,f),c(e,r),c(e,h),c(h,k),c(k,m),c(k,d),c(k,v),c(v,g),c(k,T),c(k,V),c(V,U),c(h,N);for(let R=0;R<se.length;R+=1)se[R].m(h,null);c(e,y),c(e,A),c(A,z),c(A,Z),c(e,O),c(e,C),c(C,Q),c(C,F),c(e,pe),c(e,ge),c(ge,be),c(ge,ke),c(e,ve),De||(Pe=he(o,"click",Te),De=!0)},p(X,q){if(l=X,q&64&&i!==(i=(l[15]||"COI"+(l[17]+1))+"")&&ce(a,i),q&72){le=l[3];let R;for(R=0;R<le.length;R+=1){const _e=mt(l,le,R);se[R]?se[R].p(_e,q):(se[R]=bt(_e),se[R].c(),se[R].m(h,null))}for(;R<se.length;R+=1)se[R].d(1);se.length=le.length}q&64&&G!==(G=el(l[9].income)+"")&&ce(Z,G),q&64&&ne!==(ne=me(l[9].hhlang)+"")&&ce(F,ne),q&64&&ae!==(ae=me(l[9].benefits)+"")&&ce(ke,ae)},d(X){X&&u(e),Ve(se,X),De=!1,Pe()}}}function wt(l){let e,t,s,i=Nl(l[12])+"",a,n,o,f,r,h,k,m,d,v,g,T,V,U,N,y,A,z=me(l[9][l[12]].cvap10asian)+"",G,Z,O,C=me(l[9][l[12]].pop10asian)+"",Q,ne,F,pe,ge,be,ae,ke=me(l[9][l[12]].cvap19asian)+"",ve,De,Pe,Te=me(l[9][l[12]].pop20asian)+"",le,se,X,q,R,_e,J,Y=me(l[9][l[12]].pct_increase)+"",K,te,x,w=me(l[9][l[12]].pct_increase_cvap)+"",S,_,H,$,je;function Ke(){return l[10](l[12])}let we=l[4]&&l[2]in l[5]&&Et(l);return{c(){e=P("div"),t=P("p"),s=P("i"),a=j(i),n=I(),o=P("table"),f=P("tr"),r=P("th"),h=I(),k=P("th"),m=j("CVAP"),d=I(),v=P("th"),g=j("Pop."),T=I(),V=P("tr"),U=P("td"),N=j("Asians in 2010"),y=I(),A=P("td"),G=j(z),Z=I(),O=P("td"),Q=j(C),ne=I(),F=P("tr"),pe=P("td"),ge=j("Asians now"),be=I(),ae=P("td"),ve=j(ke),De=I(),Pe=P("td"),le=j(Te),se=I(),X=P("tr"),q=P("td"),R=j("Asian increase"),_e=I(),J=P("td"),K=j(Y),te=I(),x=P("td"),S=j(w),_=I(),we&&we.c(),H=I(),this.h()},l(Me){e=D(Me,"DIV",{class:!0});var fe=b(e);t=D(fe,"P",{class:!0});var ze=b(t);s=D(ze,"I",{});var Qe=b(s);a=M(Qe,i),Qe.forEach(u),ze.forEach(u),n=B(fe),o=D(fe,"TABLE",{class:!0});var Ie=b(o);f=D(Ie,"TR",{class:!0});var Ue=b(f);r=D(Ue,"TH",{class:!0}),b(r).forEach(u),h=B(Ue),k=D(Ue,"TH",{class:!0});var Fe=b(k);m=M(Fe,"CVAP"),Fe.forEach(u),d=B(Ue),v=D(Ue,"TH",{class:!0});var Xe=b(v);g=M(Xe,"Pop."),Xe.forEach(u),Ue.forEach(u),T=B(Ie),V=D(Ie,"TR",{class:!0});var Se=b(V);U=D(Se,"TD",{class:!0});var al=b(U);N=M(al,"Asians in 2010"),al.forEach(u),y=B(Se),A=D(Se,"TD",{class:!0});var ol=b(A);G=M(ol,z),ol.forEach(u),Z=B(Se),O=D(Se,"TD",{class:!0});var rl=b(O);Q=M(rl,C),rl.forEach(u),Se.forEach(u),ne=B(Ie),F=D(Ie,"TR",{class:!0});var qe=b(F);pe=D(qe,"TD",{class:!0});var E=b(pe);ge=M(E,"Asians now"),E.forEach(u),be=B(qe),ae=D(qe,"TD",{class:!0});var re=b(ae);ve=M(re,ke),re.forEach(u),De=B(qe),Pe=D(qe,"TD",{class:!0});var W=b(Pe);le=M(W,Te),W.forEach(u),qe.forEach(u),se=B(Ie),X=D(Ie,"TR",{class:!0});var oe=b(X);q=D(oe,"TD",{class:!0});var Ee=b(q);R=M(Ee,"Asian increase"),Ee.forEach(u),_e=B(oe),J=D(oe,"TD",{class:!0});var Ge=b(J);K=M(Ge,Y),Ge.forEach(u),te=B(oe),x=D(oe,"TD",{class:!0});var Je=b(x);S=M(Je,w),Je.forEach(u),oe.forEach(u),Ie.forEach(u),_=B(fe),we&&we.l(fe),H=B(fe),fe.forEach(u),this.h()},h(){p(t,"class","svelte-1avkicx"),p(r,"class","svelte-1avkicx"),p(k,"class","svelte-1avkicx"),p(v,"class","svelte-1avkicx"),p(f,"class","svelte-1avkicx"),p(U,"class","svelte-1avkicx"),p(A,"class","svelte-1avkicx"),p(O,"class","svelte-1avkicx"),p(V,"class","svelte-1avkicx"),p(pe,"class","svelte-1avkicx"),p(ae,"class","svelte-1avkicx"),p(Pe,"class","svelte-1avkicx"),p(F,"class","svelte-1avkicx"),p(q,"class","svelte-1avkicx"),p(J,"class","svelte-1avkicx"),p(x,"class","svelte-1avkicx"),p(X,"class","svelte-1avkicx"),p(o,"class","svelte-1avkicx"),p(e,"class","district-aggregate svelte-1avkicx")},m(Me,fe){L(Me,e,fe),c(e,t),c(t,s),c(s,a),c(e,n),c(e,o),c(o,f),c(f,r),c(f,h),c(f,k),c(k,m),c(f,d),c(f,v),c(v,g),c(o,T),c(o,V),c(V,U),c(U,N),c(V,y),c(V,A),c(A,G),c(V,Z),c(V,O),c(O,Q),c(o,ne),c(o,F),c(F,pe),c(pe,ge),c(F,be),c(F,ae),c(ae,ve),c(F,De),c(F,Pe),c(Pe,le),c(o,se),c(o,X),c(X,q),c(q,R),c(X,_e),c(X,J),c(J,K),c(X,te),c(X,x),c(x,S),c(e,_),we&&we.m(e,null),c(e,H),$||(je=he(t,"click",Ke),$=!0)},p(Me,fe){l=Me,fe&1&&i!==(i=Nl(l[12])+"")&&ce(a,i),fe&513&&z!==(z=me(l[9][l[12]].cvap10asian)+"")&&ce(G,z),fe&513&&C!==(C=me(l[9][l[12]].pop10asian)+"")&&ce(Q,C),fe&513&&ke!==(ke=me(l[9][l[12]].cvap19asian)+"")&&ce(ve,ke),fe&513&&Te!==(Te=me(l[9][l[12]].pop20asian)+"")&&ce(le,Te),fe&513&&Y!==(Y=me(l[9][l[12]].pct_increase)+"")&&ce(K,Y),fe&513&&w!==(w=me(l[9][l[12]].pct_increase_cvap)+"")&&ce(S,w),l[4]&&l[2]in l[5]?we?we.p(l,fe):(we=Et(l),we.c(),we.m(e,H)):we&&(we.d(1),we=null)},d(Me){Me&&u(e),we&&we.d(),$=!1,je()}}}function Et(l){let e,t,s=el(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+yl(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",i;return{c(){e=P("p"),t=j("Income: "),i=j(s),this.h()},l(a){e=D(a,"P",{class:!0});var n=b(e);t=M(n,"Income: "),i=M(n,s),n.forEach(u),this.h()},h(){p(e,"class","table-footer svelte-1avkicx")},m(a,n){L(a,e,n),c(e,t),c(e,i)},p(a,n){n&565&&s!==(s=el(a[9][a[12]].income)+(a[4]&&a[2]in a[5]?"; "+yl(a[9][a[12]].pop20_total-a[5][a[2]]):"")+"")&&ce(i,s)},d(a){a&&u(e)}}}function Pt(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&wt(l);return{c(){s&&s.c(),t=ie()},l(i){s&&s.l(i),t=ie()},m(i,a){s&&s.m(i,a),L(i,t,a)},p(i,a){a&5&&(e=i[12].split(",")[0].split("_")[0]===i[2].split("_")[0]),e?s?s.p(i,a):(s=wt(i),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(i){s&&s.d(i),i&&u(t)}}}function Ts(l){let e;function t(a,n){if(a[8]==="districts")return Vs;if(a[8]==="community")return Ds}let s=t(l),i=s&&s(l);return{c(){i&&i.c(),e=ie()},l(a){i&&i.l(a),e=ie()},m(a,n){i&&i.m(a,n),L(a,e,n)},p(a,[n]){s===(s=t(a))&&i?i.p(a,n):(i&&i.d(1),i=s&&s(a),i&&(i.c(),i.m(e.parentNode,e)))},i:$e,o:$e,d(a){i&&i.d(a),a&&u(e)}}}function Ss(l,e,t){let{aggregates:s,handleLabelClick:i,plan:a,stats:n,groups:o,changingLines:f,idealValues:r,drawings:h,delDrawing:k}=e,{type:m="districts"}=e;const d=g=>i(g),v=g=>k(g);return l.$$set=g=>{"aggregates"in g&&t(0,s=g.aggregates),"handleLabelClick"in g&&t(1,i=g.handleLabelClick),"plan"in g&&t(2,a=g.plan),"stats"in g&&t(9,n=g.stats),"groups"in g&&t(3,o=g.groups),"changingLines"in g&&t(4,f=g.changingLines),"idealValues"in g&&t(5,r=g.idealValues),"drawings"in g&&t(6,h=g.drawings),"delDrawing"in g&&t(7,k=g.delDrawing),"type"in g&&t(8,m=g.type)},[s,i,a,o,f,r,h,k,m,n,d,v]}class Dt extends cl{constructor(e){super();hl(this,e,Ss,Ts,ul,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}function Vt(l,e,t){const s=l.slice();return s[68]=e[t],s}function Tt(l,e,t){const s=l.slice();return s[71]=e[t],s}function St(l,e,t){const s=l.slice();return s[74]=e[t],s}function Ct(l,e,t){const s=l.slice();return s[77]=e[t],s}function At(l,e,t){const s=l.slice();return s[68]=e[t],s}function Ot(l,e,t){const s=l.slice();return s[68]=e[t],s}function jt(l){let e,t=(wl[l[68]]||l[68])+"",s,i;return{c(){e=P("option"),s=j(t),this.h()},l(a){e=D(a,"OPTION",{});var n=b(e);s=M(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[68],e.value=e.__value},m(a,n){L(a,e,n),c(e,s)},p(a,n){n[0]&4&&t!==(t=(wl[a[68]]||a[68])+"")&&ce(s,t),n[0]&4&&i!==(i=a[68])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function Mt(l){let e,t=(wl[l[68]]||l[68])+"",s,i;return{c(){e=P("option"),s=j(t),this.h()},l(a){e=D(a,"OPTION",{});var n=b(e);s=M(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[68],e.value=e.__value},m(a,n){L(a,e,n),c(e,s)},p(a,n){n[0]&8&&t!==(t=(wl[a[68]]||a[68])+"")&&ce(s,t),n[0]&8&&i!==(i=a[68])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function It(l){let e,t=l[2].includes(l[17]),s,i=l[2].includes(l[17]),a,n,o,f=t&&Bt(l),r=i&&Nt(l);return{c(){e=P("div"),f&&f.c(),s=I(),r&&r.c()},l(h){e=D(h,"DIV",{});var k=b(e);f&&f.l(k),s=B(k),r&&r.l(k),k.forEach(u)},m(h,k){L(h,e,k),f&&f.m(e,null),c(e,s),r&&r.m(e,null),o=!0},p(h,k){k[0]&131076&&(t=h[2].includes(h[17])),t?f?f.p(h,k):(f=Bt(h),f.c(),f.m(e,s)):f&&(f.d(1),f=null),k[0]&131076&&(i=h[2].includes(h[17])),i?r?r.p(h,k):(r=Nt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(h){o||(Le(()=>{n&&n.end(1),a=We(e,xe,{}),a.start()}),o=!0)},o(h){a&&a.invalidate(),n=Ye(e,xe,{}),o=!1},d(h){h&&u(e),f&&f.d(),r&&r.d(),h&&n&&n.end()}}}function Bt(l){let e,t=["past","present"],s=[];for(let i=0;i<2;i+=1)s[i]=Lt(Ct(l,t,i));return{c(){for(let i=0;i<2;i+=1)s[i].c();e=ie()},l(i){for(let a=0;a<2;a+=1)s[a].l(i);e=ie()},m(i,a){for(let n=0;n<2;n+=1)s[n].m(i,a);L(i,e,a)},p(i,a){if(a[0]&65536){t=["past","present"];let n;for(n=0;n<2;n+=1){const o=Ct(i,t,n);s[n]?s[n].p(o,a):(s[n]=Lt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<2;n+=1)s[n].d(1)}},d(i){Ve(s,i),i&&u(e)}}}function Lt(l){let e,t,s,i=ll(l[77])+"",a,n,o,f;return{c(){e=P("label"),t=P("input"),s=I(),a=j(i),n=I(),this.h()},l(r){e=D(r,"LABEL",{});var h=b(e);t=D(h,"INPUT",{type:!0,name:!0}),s=B(h),a=M(h,i),n=B(h),h.forEach(u),this.h()},h(){p(t,"type","radio"),p(t,"name","period"),t.__value=l[77],t.value=t.__value,l[53][0].push(t)},m(r,h){L(r,e,h),c(e,t),t.checked=t.__value===l[16],c(e,s),c(e,a),c(e,n),o||(f=he(t,"change",l[52]),o=!0)},p(r,h){h[0]&65536&&(t.checked=t.__value===r[16])},d(r){r&&u(e),l[53][0].splice(l[53][0].indexOf(t),1),o=!1,f()}}}function Nt(l){let e,t,s=(l[18]?"pct. asian":"pluralities")+"",i,a,n;return{c(){e=P("button"),t=j("Show "),i=j(s),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var f=b(e);t=M(f,"Show "),i=M(f,s),f.forEach(u),this.h()},h(){p(e,"class","plurality-toggle svelte-itk77i")},m(o,f){L(o,e,f),c(e,t),c(e,i),a||(n=he(e,"click",l[54]),a=!0)},p(o,f){f[0]&262144&&s!==(s=(o[18]?"pct. asian":"pluralities")+"")&&ce(i,s)},d(o){o&&u(e),a=!1,n()}}}function yt(l){let e,t,s,i,a,n,o,f,r,h,k=["assembly","senate","congress"],m=[];for(let d=0;d<3;d+=1)m[d]=Rt(Tt(l,k,d));return a=new Dt({props:{aggregates:l[10],handleLabelClick:l[39],plan:l[11],stats:l[24],groups:tl,changingLines:l[32],idealValues:_s}}),{c(){e=P("div"),t=P("div"),s=P("select");for(let d=0;d<3;d+=1)m[d].c();i=I(),dl(a.$$.fragment),this.h()},l(d){e=D(d,"DIV",{class:!0});var v=b(e);t=D(v,"DIV",{class:!0});var g=b(t);s=D(g,"SELECT",{class:!0});var T=b(s);for(let V=0;V<3;V+=1)m[V].l(T);T.forEach(u),g.forEach(u),i=B(v),gl(a.$$.fragment,v),v.forEach(u),this.h()},h(){p(s,"class","svelte-itk77i"),l[11]===void 0&&Le(()=>l[56].call(s)),p(t,"class","plan-selector svelte-itk77i"),p(e,"class","svelte-itk77i")},m(d,v){L(d,e,v),c(e,t),c(t,s);for(let g=0;g<3;g+=1)m[g].m(s,null);vl(s,l[11]),c(e,i),ml(a,e,null),f=!0,r||(h=he(s,"change",l[56]),r=!0)},p(d,v){if(v&0){k=["assembly","senate","congress"];let T;for(T=0;T<3;T+=1){const V=Tt(d,k,T);m[T]?m[T].p(V,v):(m[T]=Rt(V),m[T].c(),m[T].m(s,null))}for(;T<3;T+=1)m[T].d(1)}v[0]&2048&&vl(s,d[11]);const g={};v[0]&1024&&(g.aggregates=d[10]),v[0]&2048&&(g.plan=d[11]),v[0]&16777216&&(g.stats=d[24]),a.$set(g)},i(d){f||(ee(a.$$.fragment,d),Le(()=>{o&&o.end(1),n=We(e,xe,{}),n.start()}),f=!0)},o(d){ue(a.$$.fragment,d),n&&n.invalidate(),o=Ye(e,xe,{}),f=!1},d(d){d&&u(e),Ve(m,d),pl(a),d&&o&&o.end(),r=!1,h()}}}function Ut(l){let e,t=rs(l[71]+l[74])+"",s,i;return{c(){e=P("option"),s=j(t),this.h()},l(a){e=D(a,"OPTION",{});var n=b(e);s=M(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[71]+l[74],e.value=e.__value},m(a,n){L(a,e,n),c(e,s)},p:$e,d(a){a&&u(e)}}}function Rt(l){let e,t,s,i=["","_letters","_names"],a=[];for(let n=0;n<3;n+=1)a[n]=Ut(St(l,i,n));return{c(){e=P("optgroup");for(let n=0;n<3;n+=1)a[n].c();t=P("option"),s=j("Unity Map (soon)"),this.h()},l(n){e=D(n,"OPTGROUP",{label:!0});var o=b(e);for(let r=0;r<3;r+=1)a[r].l(o);t=D(o,"OPTION",{});var f=b(t);s=M(f,"Unity Map (soon)"),f.forEach(u),o.forEach(u),this.h()},h(){t.disabled=!0,t.__value="Unity Map (soon)",t.value=t.__value,p(e,"label",ll(l[71]))},m(n,o){L(n,e,o);for(let f=0;f<3;f+=1)a[f].m(e,null);c(e,t),c(t,s)},p(n,o){if(o&0){i=["","_letters","_names"];let f;for(f=0;f<3;f+=1){const r=St(n,i,f);a[f]?a[f].p(r,o):(a[f]=Ut(r),a[f].c(),a[f].m(e,t))}for(;f<3;f+=1)a[f].d(1)}},d(n){n&&u(e),Ve(a,n)}}}function Ht(l){let e,t,s,i,a,n,o,f,r,h,k;return t=new Dt({props:{type:"community",drawings:l[9],delDrawing:l[37],groups:tl,stats:l[24]}}),{c(){e=P("div"),dl(t.$$.fragment),s=I(),i=P("button"),a=P("b"),n=j("[SAVE]"),this.h()},l(m){e=D(m,"DIV",{class:!0});var d=b(e);gl(t.$$.fragment,d),s=B(d),i=D(d,"BUTTON",{style:!0});var v=b(i);a=D(v,"B",{});var g=b(a);n=M(g,"[SAVE]"),g.forEach(u),v.forEach(u),d.forEach(u),this.h()},h(){de(i,"font-size","13px"),p(e,"class","community svelte-itk77i")},m(m,d){L(m,e,d),ml(t,e,null),c(e,s),c(e,i),c(i,a),c(a,n),r=!0,h||(k=he(i,"click",l[38]),h=!0)},p(m,d){const v={};d[0]&512&&(v.drawings=m[9]),d[0]&16777216&&(v.stats=m[24]),t.$set(v)},i(m){r||(ee(t.$$.fragment,m),Le(()=>{f&&f.end(1),o=We(e,xe,{}),o.start()}),r=!0)},o(m){ue(t.$$.fragment,m),o&&o.invalidate(),f=Ye(e,xe,{}),r=!1},d(m){m&&u(e),pl(t),m&&f&&f.end(),h=!1,k()}}}function zt(l){let e,t,s,i,a,n,o,f,r,h,k,m,d=Object.keys(il),v=[];for(let g=0;g<d.length;g+=1)v[g]=Ft(Vt(l,d,g));return{c(){e=P("div"),t=P("h3"),s=j("Views"),i=I();for(let g=0;g<v.length;g+=1)v[g].c();a=I(),n=P("button"),o=j("See Streets"),this.h()},l(g){e=D(g,"DIV",{class:!0});var T=b(e);t=D(T,"H3",{class:!0});var V=b(t);s=M(V,"Views"),V.forEach(u),i=B(T);for(let N=0;N<v.length;N+=1)v[N].l(T);a=B(T),n=D(T,"BUTTON",{style:!0,class:!0});var U=b(n);o=M(U,"See Streets"),U.forEach(u),T.forEach(u),this.h()},h(){p(t,"class","svelte-itk77i"),de(n,"margin-top","10px"),p(n,"class","svelte-itk77i"),Oe(n,"view-selected",l[7]),p(e,"class","views svelte-itk77i")},m(g,T){L(g,e,T),c(e,t),c(t,s),c(e,i);for(let V=0;V<v.length;V+=1)v[V].m(e,null);c(e,a),c(e,n),c(n,o),h=!0,k||(m=he(n,"click",l[60]),k=!0)},p(g,T){if(T[0]&268451840){d=Object.keys(il);let V;for(V=0;V<d.length;V+=1){const U=Vt(g,d,V);v[V]?v[V].p(U,T):(v[V]=Ft(U),v[V].c(),v[V].m(e,a))}for(;V<v.length;V+=1)v[V].d(1);v.length=d.length}T[0]&128&&Oe(n,"view-selected",g[7])},i(g){h||(Le(()=>{r&&r.end(1),f=We(e,Ne,{}),f.start()}),h=!0)},o(g){f&&f.invalidate(),r=Ye(e,Ne,{}),h=!1},d(g){g&&u(e),Ve(v,g),g&&r&&r.end(),k=!1,m()}}}function Ft(l){let e,t=l[68]+"",s,i,a;function n(){return l[59](l[68])}return{c(){e=P("button"),s=j(t),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var f=b(e);s=M(f,t),f.forEach(u),this.h()},h(){p(e,"class","svelte-itk77i"),Oe(e,"view-selected",l[14]===il[l[68]])},m(o,f){L(o,e,f),c(e,s),i||(a=he(e,"click",n),i=!0)},p(o,f){l=o,f[0]&16384&&Oe(e,"view-selected",l[14]===il[l[68]])},d(o){o&&u(e),i=!1,a()}}}function Cs(l){let e,t,s,i,a,n,o,f,r,h,k,m,d,v=(l[20]?"\u2191":"\u2193")+"",g,T,V,U,N,y,A,z=(l[6]?"\u2191":"\u2193")+"",G,Z,O,C,Q,ne,F,pe,ge,be,ae,ke,ve,De,Pe,Te,le,se,X,q=l[2],R=[];for(let w=0;w<q.length;w+=1)R[w]=jt(Ot(l,q,w));let _e=l[3],J=[];for(let w=0;w<_e.length;w+=1)J[w]=Mt(At(l,_e,w));let Y=l[21]&&It(l);f=new Ps({props:{groups:tl,levels:Tl,colors:Vl,dynamicVars:l[2],variable:l[17],metric:l[19],showPluralities:l[18],pluralityVars:l[5],periods:kl,breaks:l[31]}});let K=l[20]&&yt(l),te=l[6]&&Ht(l);F=new ms({props:{viewBox:l[14],labelSize:l[30],draggedBgs:l[8],data:l[1],path:bl,color:l[36],changingLines:l[32],neighbor:l[35],showPluralities:l[18],metric:l[19],period:l[16],tractVars:l[4],showComms:l[6],drawings:l[9],showPlans:l[20],plan:l[11],points:l[27],tractMesh:l[34],bgMesh:l[25],mesh:l[33],aggregates:l[10],obj:l[0],handleLabelClick:l[39],congressPlans:l[12],plans:l[26],startDrag:l[40],endDrag:l[41],handleMouseMove:l[42],viewCutoff:l[28],showOnlyFocusDistricts:l[22],showStreets:l[7],streets:l[13]}});let x=l[21]&&zt(l);return{c(){e=P("div"),t=P("div"),s=P("select"),i=P("optgroup");for(let w=0;w<R.length;w+=1)R[w].c();a=P("optgroup");for(let w=0;w<J.length;w+=1)J[w].c();n=I(),Y&&Y.c(),o=I(),dl(f.$$.fragment),r=I(),h=P("div"),k=P("h3"),m=P("button"),d=j("Plans "),g=j(v),T=I(),K&&K.c(),V=I(),U=P("div"),N=P("h3"),y=P("button"),A=j("Communities "),G=j(z),Z=I(),O=P("button"),C=j("+"),Q=I(),te&&te.c(),ne=I(),dl(F.$$.fragment),pe=I(),x&&x.c(),ge=I(),be=P("div"),ae=P("p"),ke=j("Questions, suggestions, concerns --> "),ve=P("a"),De=j("jason.kao@columbia.edu"),Pe=j("."),this.h()},l(w){e=D(w,"DIV",{class:!0,style:!0});var S=b(e);t=D(S,"DIV",{class:!0});var _=b(t);s=D(_,"SELECT",{style:!0,class:!0});var H=b(s);i=D(H,"OPTGROUP",{label:!0});var $=b(i);for(let Se=0;Se<R.length;Se+=1)R[Se].l($);$.forEach(u),a=D(H,"OPTGROUP",{label:!0});var je=b(a);for(let Se=0;Se<J.length;Se+=1)J[Se].l(je);je.forEach(u),H.forEach(u),n=B(_),Y&&Y.l(_),o=B(_),gl(f.$$.fragment,_),r=B(_),h=D(_,"DIV",{class:!0});var Ke=b(h);k=D(Ke,"H3",{class:!0});var we=b(k);m=D(we,"BUTTON",{});var Me=b(m);d=M(Me,"Plans "),g=M(Me,v),Me.forEach(u),we.forEach(u),T=B(Ke),K&&K.l(Ke),Ke.forEach(u),V=B(_),U=D(_,"DIV",{class:!0});var fe=b(U);N=D(fe,"H3",{class:!0});var ze=b(N);y=D(ze,"BUTTON",{});var Qe=b(y);A=M(Qe,"Communities "),G=M(Qe,z),Qe.forEach(u),Z=B(ze),O=D(ze,"BUTTON",{});var Ie=b(O);C=M(Ie,"+"),Ie.forEach(u),ze.forEach(u),Q=B(fe),te&&te.l(fe),fe.forEach(u),_.forEach(u),ne=B(S),gl(F.$$.fragment,S),pe=B(S),x&&x.l(S),ge=B(S),be=D(S,"DIV",{class:!0});var Ue=b(be);ae=D(Ue,"P",{});var Fe=b(ae);ke=M(Fe,"Questions, suggestions, concerns --> "),ve=D(Fe,"A",{href:!0});var Xe=b(ve);De=M(Xe,"jason.kao@columbia.edu"),Xe.forEach(u),Pe=M(Fe,"."),Fe.forEach(u),Ue.forEach(u),S.forEach(u),this.h()},h(){p(i,"label","Redistricting data"),p(a,"label","American Community Survey data"),de(s,"width",l[3].includes(l[17])?"auto":"calc(var(--control-width) - 20px)"),p(s,"class","svelte-itk77i"),l[17]===void 0&&Le(()=>l[51].call(s)),p(k,"class","svelte-itk77i"),p(h,"class","stats svelte-itk77i"),p(N,"class","svelte-itk77i"),p(U,"class","stats svelte-itk77i"),p(t,"class","controls svelte-itk77i"),p(ve,"href","mailto:jason.kao@console.edu"),p(be,"class","footer svelte-itk77i"),p(e,"class","container svelte-itk77i"),de(e,"cursor",l[23]?"crosshair":"auto"),de(e,"--container-font",l[29]+"px"),de(e,"--control-width",270+(l[29]-16)*10+"px"),Le(()=>l[61].call(e))},m(w,S){L(w,e,S),c(e,t),c(t,s),c(s,i);for(let _=0;_<R.length;_+=1)R[_].m(i,null);c(s,a);for(let _=0;_<J.length;_+=1)J[_].m(a,null);vl(s,l[17]),c(t,n),Y&&Y.m(t,null),c(t,o),ml(f,t,null),c(t,r),c(t,h),c(h,k),c(k,m),c(m,d),c(m,g),c(h,T),K&&K.m(h,null),c(t,V),c(t,U),c(U,N),c(N,y),c(y,A),c(y,G),c(N,Z),c(N,O),c(O,C),c(U,Q),te&&te.m(U,null),c(e,ne),ml(F,e,null),c(e,pe),x&&x.m(e,null),c(e,ge),c(e,be),c(be,ae),c(ae,ke),c(ae,ve),c(ve,De),c(ae,Pe),Te=es(e,l[61].bind(e)),le=!0,se||(X=[he(window,"keydown",l[43]),he(s,"change",l[51]),he(m,"click",l[55]),he(y,"click",l[57]),he(O,"click",l[58])],se=!0)},p(w,S){if(S[0]&4){q=w[2];let $;for($=0;$<q.length;$+=1){const je=Ot(w,q,$);R[$]?R[$].p(je,S):(R[$]=jt(je),R[$].c(),R[$].m(i,null))}for(;$<R.length;$+=1)R[$].d(1);R.length=q.length}if(S[0]&8){_e=w[3];let $;for($=0;$<_e.length;$+=1){const je=At(w,_e,$);J[$]?J[$].p(je,S):(J[$]=Mt(je),J[$].c(),J[$].m(a,null))}for(;$<J.length;$+=1)J[$].d(1);J.length=_e.length}(!le||S[0]&131080)&&de(s,"width",w[3].includes(w[17])?"auto":"calc(var(--control-width) - 20px)"),S[0]&131084&&vl(s,w[17]),w[21]?Y?(Y.p(w,S),S[0]&2097152&&ee(Y,1)):(Y=It(w),Y.c(),ee(Y,1),Y.m(t,o)):Y&&(Re(),ue(Y,1,1,()=>{Y=null}),He());const _={};S[0]&4&&(_.dynamicVars=w[2]),S[0]&131072&&(_.variable=w[17]),S[0]&524288&&(_.metric=w[19]),S[0]&262144&&(_.showPluralities=w[18]),S[0]&32&&(_.pluralityVars=w[5]),S[1]&1&&(_.breaks=w[31]),f.$set(_),(!le||S[0]&1048576)&&v!==(v=(w[20]?"\u2191":"\u2193")+"")&&ce(g,v),w[20]?K?(K.p(w,S),S[0]&1048576&&ee(K,1)):(K=yt(w),K.c(),ee(K,1),K.m(h,null)):K&&(Re(),ue(K,1,1,()=>{K=null}),He()),(!le||S[0]&64)&&z!==(z=(w[6]?"\u2191":"\u2193")+"")&&ce(G,z),w[6]?te?(te.p(w,S),S[0]&64&&ee(te,1)):(te=Ht(w),te.c(),ee(te,1),te.m(U,null)):te&&(Re(),ue(te,1,1,()=>{te=null}),He());const H={};S[0]&16384&&(H.viewBox=w[14]),S[0]&1073741824&&(H.labelSize=w[30]),S[0]&256&&(H.draggedBgs=w[8]),S[0]&2&&(H.data=w[1]),S[0]&262144&&(H.showPluralities=w[18]),S[0]&524288&&(H.metric=w[19]),S[0]&65536&&(H.period=w[16]),S[0]&16&&(H.tractVars=w[4]),S[0]&64&&(H.showComms=w[6]),S[0]&512&&(H.drawings=w[9]),S[0]&1048576&&(H.showPlans=w[20]),S[0]&2048&&(H.plan=w[11]),S[0]&134217728&&(H.points=w[27]),S[0]&33554432&&(H.bgMesh=w[25]),S[0]&1024&&(H.aggregates=w[10]),S[0]&1&&(H.obj=w[0]),S[0]&4096&&(H.congressPlans=w[12]),S[0]&67108864&&(H.plans=w[26]),S[0]&268435456&&(H.viewCutoff=w[28]),S[0]&4194304&&(H.showOnlyFocusDistricts=w[22]),S[0]&128&&(H.showStreets=w[7]),S[0]&8192&&(H.streets=w[13]),F.$set(H),w[21]?x?(x.p(w,S),S[0]&2097152&&ee(x,1)):(x=zt(w),x.c(),ee(x,1),x.m(e,ge)):x&&(Re(),ue(x,1,1,()=>{x=null}),He()),(!le||S[0]&8388608)&&de(e,"cursor",w[23]?"crosshair":"auto"),(!le||S[0]&536870912)&&de(e,"--container-font",w[29]+"px"),(!le||S[0]&536870912)&&de(e,"--control-width",270+(w[29]-16)*10+"px")},i(w){le||(ee(Y),ee(f.$$.fragment,w),ee(K),ee(te),ee(F.$$.fragment,w),ee(x),le=!0)},o(w){ue(Y),ue(f.$$.fragment,w),ue(K),ue(te),ue(F.$$.fragment,w),ue(x),le=!1},d(w){w&&u(e),Ve(R,w),Ve(J,w),Y&&Y.d(),pl(f),K&&K.d(),te&&te.d(),pl(F),x&&x.d(),Te(),se=!1,_l(X)}}}async function Bs({fetch:l}){const e=await(await l(`${Dl}/output_census.topojson`)).json(),t=as(e.objects.census),s=$t(e,t).features.map(Ul),i=["pop","cvap"],a=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(h=>[...i,"GEOID","senate","assembly","congress"].every(k=>!h.includes(k))&&h===h.toLowerCase()).map(h=>h.split("_")[0]);return new Set([...o,...r])},[])],n=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:xt(t.geometries),dynamicVars:i,staticVars:a,idToIndex:n,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function As(l,e,t){let s,i,a,n,{topoData:o,obj:f,neighbors:r,data:h,dynamicVars:k,staticVars:m,tractVars:d,pluralityVars:v,idToIndex:g}=e,T=!0,V,U,N=!0,y=!1,A,z,G,Z,O=[],C=[],Q=[],ne={},F="assembly",pe,ge,be,ae,ke,ve=2183,De=il.Brooklyn,Pe=18,Te;const le=E=>nl(o,f,E),se=bl(le((E,re)=>ye(E).substring(0,11)!==ye(re).substring(0,11)));ls(async()=>{t(25,pe=bl(Ul(le((re,W)=>ye(re)!==ye(W)))));const E=await Promise.all([fs(),cs()]);t(26,ge=E[0]),t(27,ae=E[1])});let X;const q=E=>h[E].properties[F];function R(E){const re=q(E),W=new Set(r[E].map(q).filter(oe=>oe!==re));if(W.size===1)t(0,f.geometries[E].properties[F]=X=W.values().next().value,f);else if(W.has(X))t(0,f.geometries[E].properties[F]=X,f);else return;t(0,f)}let _e="present",J="pop";const Y={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let K=!1;function te({properties:E}){if(!E.ALAND)return"#fff";const re=E[`${s}_total`];if(v.includes(s)){const W=Ee=>E[`${s}_${Ee}`];if(W(kl[0])===null)return"#eee";const oe=[...kl].sort((Ee,Ge)=>W(Ge)-W(Ee));return sl[kl.indexOf(oe[0])]}else if(m.includes(s)){if(!Rl(i(E)))return"#eee";if(re<=10)return"#fff";for(let W=1;W<a.length;W++)if(i(E)<a[W])return sl[W];return sl[a.length-1]}else{if(re<=10)return"#fff";const W=oe=>E[`${s}_${oe}`]/E[`${s}_total`];if(K){const oe=tl.filter(Je=>W(Je)>.5)[0];if(oe!==void 0)return Vl[oe]+Tl[re<130?0:re<200?1:2];const Ee=[...tl].sort((Je,fl)=>W(fl)-W(Je)),Ge=W(Ee[0])-W(Ee[1]);return Vl[Ee[0]]+Tl[Ge<.093?0:1]}else{const oe=Y[J];for(let Ee=1;Ee<oe.length;Ee++)if(W("asian")<oe[Ee])return El[Ee-1];return El[oe.length-1]}}}const x=async()=>t(12,be=await hs()),w=async()=>t(13,ke=await us());function S(E){const re=typeof E[0]=="string"?E.map(Be=>h[g[Be]].properties):E.map(Be=>Be.properties),W=(Be,Ze)=>re.reduce((Wt,Cl)=>Wt+(Cl[Be]||0)*(Ze&&Cl[Ze]||1),0),oe=Be=>W(Be,"pop20_total")/W("pop20_total"),Ee=(Be,Ze)=>W(`${Be}_${Ze}`)/W(`${Be}_total`);let Ge=W("pop10_asian"),Je=W("pop20_asian"),fl=W("cvap10_asian"),Gt=W("cvap19_asian");const Sl={income:oe("income"),hhlang:Ee("hhlang","asian"),benefits:Ee("families","benefits"),pop20_total:W("pop20_total"),pct_increase:(Je-Ge)/Ge,pct_increase_cvap:(Gt-fl)/fl};return["pop20","cvap19","pop10","cvap10"].forEach(Be=>tl.forEach(Ze=>Sl[Be+Ze]=Ee(Be,Ze))),Sl}const _=E=>t(9,C=C.filter((re,W)=>W!==E));async function H(){try{await fetch(`${Dl}/data.json`,{method:"POST",body:JSON.stringify(C)})}catch(E){console.error(E)}}async function $(){try{const E=await fetch(`${Dl}/data.json`);t(9,C=(await E.json()).map(re=>Ml(jl({},re),{stats:S(re.ids)})))}catch(E){console.error(E)}}function je(E){Q.includes(E)?t(10,Q=Q.filter(re=>re!==E)):t(10,Q=[...Q,E])}const Ke=()=>t(47,z=!0),we=()=>t(47,z=t(23,A=!1)),Me=E=>A&&z&&(O.length===0?t(8,O=[ye(E)]):O.push(ye(E)));function fe({key:E}){E==="="&&t(29,Pe+=2),E==="-"&&t(29,Pe-=2),E==="v"&&t(21,N=!N),E==="f"&&t(22,y=!y)}const ze=[[]];function Qe(){J=Bl(this),t(17,J),t(3,m),t(2,k)}function Ie(){_e=this.__value,t(16,_e)}const Ue=()=>t(18,K=!K),Fe=()=>{t(20,T=!T),t(6,V=!1)};function Xe(){F=Bl(this),t(11,F)}const Se=()=>{t(6,V=!V),t(20,T=!1)},al=()=>t(23,A=!0),ol=E=>{t(14,De=il[E]),t(28,ve=6e3)},rl=()=>t(7,U=!U);function qe(){Te=this.clientWidth,t(15,Te)}return l.$$set=E=>{"topoData"in E&&t(44,o=E.topoData),"obj"in E&&t(0,f=E.obj),"neighbors"in E&&t(45,r=E.neighbors),"data"in E&&t(1,h=E.data),"dynamicVars"in E&&t(2,k=E.dynamicVars),"staticVars"in E&&t(3,m=E.staticVars),"tractVars"in E&&t(4,d=E.tractVars),"pluralityVars"in E&&t(5,v=E.pluralityVars),"idToIndex"in E&&t(46,g=E.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&196616&&t(19,s=m.includes(J)?J:J+(_e==="past"?10:J==="cvap"?19:20)),l.$$.dirty[0]&524288&&t(50,i={income:E=>E[s],hhlang:E=>E[`${s}_asian`]/E[`${s}_total`],graduates:E=>(E[`${s}_hs_grad`]+E[`${s}_ba_above`])/E[`${s}_total`],families:E=>E[`${s}_benefits`]/E[`${s}_total`],workers:E=>E[`${s}_publictransport`]/E[`${s}_total`]}[s]),l.$$.dirty[0]&917518|l.$$.dirty[1]&786432&&t(31,a=k.includes(J)&&!K?Y[J]:Y[s]||!m.includes(s)||s==="asiaentry"||t(49,Y[s]=ts(h.map(E=>i(E.properties)).filter(Rl),6),Y)),l.$$.dirty[0]&770|l.$$.dirty[1]&65536&&!z&&O.length>0){if(O[0]===O[O.length-1]){const E=new Set(O),re=ss(le((oe,Ee)=>os(E.has(ye(oe)),E.has(ye(Ee)))).coordinates.flat()),W=h.filter(oe=>is(ns(oe.geometry.coordinates[0]),re)).map(ye);t(9,C=[...C,{outline:bl({type:"LineString",coordinates:re}),ids:W,stats:S(W)}])}t(8,O=[])}if(l.$$.dirty[0]&6144&&F.startsWith("congress")&&be===void 0&&x(),l.$$.dirty[0]&8320&&U&&ke===void 0&&w(),l.$$.dirty[0]&64|l.$$.dirty[1]&131072&&V&&!Z&&($(),t(48,Z=!0)),l.$$.dirty[0]&51200&&t(30,n=(F.endsWith("_names")?.9:1.1)/((Te-410)/De[2])),l.$$.dirty[0]&3073)for(let E=0;E<Q.length;E++){const[re,W]=Q[E].split(",");re===F&&t(24,ne[Q[E]]=S(f.geometries.filter(({properties:oe})=>W===""+oe[F])),ne)}},[f,h,k,m,d,v,V,U,O,C,Q,F,be,ke,De,Te,_e,J,K,s,T,N,y,A,ne,pe,ge,ae,ve,Pe,n,a,G,le,se,R,te,_,H,je,Ke,we,Me,fe,o,r,g,z,Z,Y,i,Qe,Ie,ze,Ue,Fe,Xe,Se,al,ol,rl,qe]}class Ls extends cl{constructor(e){super();hl(this,e,As,Cs,ul,{topoData:44,obj:0,neighbors:45,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:46},null,[-1,-1,-1])}}export{Ls as default,Bs as load};

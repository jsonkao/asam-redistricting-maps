var jt=Object.defineProperty,Lt=Object.defineProperties;var Bt=Object.getOwnPropertyDescriptors;var kl=Object.getOwnPropertySymbols;var It=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var wl=(l,e,t)=>e in l?jt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,El=(l,e)=>{for(var t in e||(e={}))It.call(e,t)&&wl(l,t,e[t]);if(kl)for(var t of kl(e))St.call(e,t)&&wl(l,t,e[t]);return l},Pl=(l,e)=>Lt(l,Bt(e));import{S as sl,i as nl,s as il,l as te,f as z,J as De,K as Ve,a as k,d as _,b,L as je,M as de,N as yl,O as dl,P as Te,Q as Ne,R as Ce,T as ze,U as Ee,H as u,x as K,t as R,g as U,V as Xe,h as he,r as Le,u as ie,w as Be,W as ve,X as Dl,Y as Nt,Z as zt,I as Fe,e as y,c as D,k as B,n as I,_ as Rt,$ as Ut,j as al,m as ol,a0 as rl,o as fl,v as cl,a1 as Ht,A as Ft,a2 as Gt,a3 as Wt,a4 as Yt,a5 as Kt,a6 as Ge,a7 as Vl}from"../chunks/vendor-b5d01dd2.js";import{b as ml}from"../chunks/paths-28a87002.js";import{i as Ae,D as Tl,p as pe,m as We,c as Ye,a as Cl,d as Al,u as qt,r as Ol,b as hl,e as Ml,x as Jt,f as Qt,g as Xt,h as Zt,j as $t}from"../chunks/utils-22b41f2c.js";const vl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},pl=["44","99","ee"],Ke=["asian","black","hispanic","white"],ul=["1990_earlier","1990_1999","2000_2009","2010_later"],_l={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},gl=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],qe=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],xt={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},Je={Brooklyn:[35,670,650,550],Chinatown:[80,430,500,600],"All of NYC":[0,0,975,1420]},es={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};function jl(l,e,t){const s=l.slice();return s[40]=e[t].properties,s[41]=e[t].geometry.coordinates[0],s[42]=e[t].geometry.coordinates[1],s}function Ll(l,e,t){const s=l.slice();return s[45]=e[t].outline,s}function Bl(l,e,t){const s=l.slice();return s[48]=e[t],s[50]=t,s}function Il(l){let e,t,s,n,a;function i(){return l[34](l[50])}function o(){return l[35](l[48])}function f(){return l[36](l[48])}return{c(){e=De("path"),this.h()},l(r){e=Ve(r,"path",{d:!0,fill:!0,class:!0}),k(e).forEach(_),this.h()},h(){b(e,"d",t=l[5](l[48])),b(e,"fill",s=l[6](l[48],l[10],l[11],l[9])),b(e,"class","svelte-1tmbpzy"),je(e,"head",l[3][0]===Ae(l[48]))},m(r,h){z(r,e,h),n||(a=[de(e,"click",i),de(e,"contextmenu",yl(o)),de(e,"mousemove",yl(f))],n=!0)},p(r,h){l=r,h[0]&48&&t!==(t=l[5](l[48]))&&b(e,"d",t),h[0]&3664&&s!==(s=l[6](l[48],l[10],l[11],l[9]))&&b(e,"fill",s),h[0]&24&&je(e,"head",l[3][0]===Ae(l[48]))},d(r){r&&_(e),n=!1,dl(a)}}}function Sl(l,e){let t,s,n=e[50]<e[28]&&Il(e);return{key:l,first:null,c(){t=te(),n&&n.c(),s=te(),this.h()},l(a){t=te(),n&&n.l(a),s=te(),this.h()},h(){this.first=t},m(a,i){z(a,t,i),n&&n.m(a,i),z(a,s,i)},p(a,i){e=a,e[50]<e[28]?n?n.p(e,i):(n=Il(e),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(a){a&&_(t),n&&n.d(a),a&&_(s)}}}function Nl(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),k(e).forEach(_),this.h()},h(){b(e,"class","mesh-bg svelte-1tmbpzy"),b(e,"d",t=l[12].includes(l[10])?l[18]:l[19])},m(s,n){z(s,e,n)},p(s,n){n[0]&791552&&t!==(t=s[12].includes(s[10])?s[18]:s[19])&&b(e,"d",t)},d(s){s&&_(e)}}}function zl(l){let e,t,s,n,a=l[14],i=[];for(let o=0;o<a.length;o+=1)i[o]=Rl(Ll(l,a,o));return{c(){e=De("g");for(let o=0;o<i.length;o+=1)i[o].c()},l(o){e=Ve(o,"g",{});var f=k(e);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(_)},m(o,f){z(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);n=!0},p(o,f){if(f[0]&16384){a=o[14];let r;for(r=0;r<a.length;r+=1){const h=Ll(o,a,r);i[r]?i[r].p(h,f):(i[r]=Rl(h),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=a.length}},i(o){n||(Te(()=>{s&&s.end(1),t=Ne(e,Ce,{}),t.start()}),n=!0)},o(o){t&&t.invalidate(),s=ze(e,Ce,{}),n=!1},d(o){o&&_(e),Ee(i,o),o&&s&&s.end()}}}function Rl(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),k(e).forEach(_),this.h()},h(){b(e,"class","mesh-community svelte-1tmbpzy"),b(e,"d",t=l[45])},m(s,n){z(s,e,n)},p(s,n){n[0]&16384&&t!==(t=s[45])&&b(e,"d",t)},d(s){s&&_(e)}}}function Ul(l){let e,t,s,n,a,i;return{c(){e=De("g"),t=De("path"),this.h()},l(o){e=Ve(o,"g",{});var f=k(e);t=Ve(f,"path",{class:!0,d:!0}),k(t).forEach(_),f.forEach(_),this.h()},h(){b(t,"class","mesh-district svelte-1tmbpzy"),b(t,"d",s=l[33](l[16],l[24],l[23],l[29])),je(t,"showPluralities",l[9])},m(o,f){z(o,e,f),u(e,t),i=!0},p(o,f){(!i||f[0]&562102272&&s!==(s=o[33](o[16],o[24],o[23],o[29])))&&b(t,"d",s),f[0]&512&&je(t,"showPluralities",o[9])},i(o){i||(Te(()=>{a&&a.end(1),n=Ne(e,Ce,{}),n.start()}),i=!0)},o(o){n&&n.invalidate(),a=ze(e,Ce,{}),i=!1},d(o){o&&_(e),o&&a&&a.end()}}}function Hl(l){let e,t,s,n,a,i;return{c(){e=De("g"),t=De("path"),this.h()},l(o){e=Ve(o,"g",{});var f=k(e);t=Ve(f,"path",{class:!0,d:!0}),k(t).forEach(_),f.forEach(_),this.h()},h(){b(t,"class","mesh-district svelte-1tmbpzy"),b(t,"d",s=l[5](l[20](l[37],l[0])))},m(o,f){z(o,e,f),u(e,t),i=!0},p(o,f){(!i||f[0]&1114145&&s!==(s=o[5](o[20](o[37],o[0]))))&&b(t,"d",s)},i(o){i||(Te(()=>{a&&a.end(1),n=Ne(e,Ce,{}),n.start()}),i=!0)},o(o){n&&n.invalidate(),a=ze(e,Ce,{}),i=!1},d(o){o&&_(e),o&&a&&a.end()}}}function Fl(l){let e,t,s,n,a=l[17],i=[];for(let f=0;f<a.length;f+=1)i[f]=Wl(jl(l,a,f));const o=f=>ie(i[f],1,1,()=>{i[f]=null});return{c(){e=De("g");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=Ve(f,"g",{class:!0});var r=k(e);for(let h=0;h<i.length;h+=1)i[h].l(r);r.forEach(_),this.h()},h(){b(e,"class","labels svelte-1tmbpzy")},m(f,r){z(f,e,r);for(let h=0;h<i.length;h+=1)i[h].m(e,null);n=!0},p(f,r){if(r[0]&1080229921|r[1]&3){a=f[17];let h;for(h=0;h<a.length;h+=1){const v=jl(f,a,h);i[h]?(i[h].p(v,r),K(i[h],1)):(i[h]=Wl(v),i[h].c(),K(i[h],1),i[h].m(e,null))}for(Le(),h=a.length;h<i.length;h+=1)o(h);Be()}},i(f){if(!n){for(let r=0;r<a.length;r+=1)K(i[r]);Te(()=>{s&&s.end(1),t=Ne(e,Ce,{}),t.start()}),n=!0}},o(f){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)ie(i[r]);t&&t.invalidate(),s=ze(e,Ce,{}),n=!1},d(f){f&&_(e),Ee(i,f),f&&s&&s.end()}}}function Gl(l){let e,t=l[40][l[16]]+"",s,n,a,i,o,f,r,h,v,m;function d(){return l[38](l[40])}function w(...g){return l[39](l[40],...g)}return{c(){e=De("text"),s=R(t),f=De("path"),this.h()},l(g){e=Ve(g,"text",{x:!0,y:!0,class:!0});var E=k(e);s=U(E,t),E.forEach(_),f=Ve(g,"path",{class:!0,d:!0}),k(f).forEach(_),this.h()},h(){b(e,"x",n=l[41]),b(e,"y",a=l[42]),b(e,"class","text-label svelte-1tmbpzy"),je(e,"chosen",l[21].includes(`${l[16]},${l[40][l[16]]}`)),b(f,"class","mesh-onhover mesh-district svelte-1tmbpzy"),b(f,"d",r=l[0]&&l[5](Xe(l[30],{type:l[0].type,geometries:l[0].geometries.filter(w)})))},m(g,E){z(g,e,E),u(e,s),z(g,f,E),h=!0,v||(m=de(e,"click",d),v=!0)},p(g,E){l=g,(!h||E[0]&196608)&&t!==(t=l[40][l[16]]+"")&&he(s,t),(!h||E[0]&131072&&n!==(n=l[41]))&&b(e,"x",n),(!h||E[0]&131072&&a!==(a=l[42]))&&b(e,"y",a),E[0]&2293760&&je(e,"chosen",l[21].includes(`${l[16]},${l[40][l[16]]}`)),(!h||E[0]&1073938465&&r!==(r=l[0]&&l[5](Xe(l[30],{type:l[0].type,geometries:l[0].geometries.filter(w)}))))&&b(f,"d",r)},i(g){h||(Te(()=>{o&&o.end(1),i=Ne(e,Ce,{}),i.start()}),h=!0)},o(g){i&&i.invalidate(),o=ze(e,Ce,{}),h=!1},d(g){g&&_(e),g&&o&&o.end(),g&&_(f),v=!1,m()}}}function Wl(l){let e=l[16]in l[40]&&(!l[32]||l[32]&&l[31].includes(l[40][l[16]])),t,s,n=e&&Gl(l);return{c(){n&&n.c(),t=te()},l(a){n&&n.l(a),t=te()},m(a,i){n&&n.m(a,i),z(a,t,i),s=!0},p(a,i){i[0]&196608|i[1]&3&&(e=a[16]in a[40]&&(!a[32]||a[32]&&a[31].includes(a[40][a[16]]))),e?n?(n.p(a,i),i[0]&196608|i[1]&3&&K(n,1)):(n=Gl(a),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(Le(),ie(n,1,1,()=>{n=null}),Be())},i(a){s||(K(n),s=!0)},o(a){ie(n),s=!1},d(a){n&&n.d(a),a&&_(t)}}}function ls(l){let e,t,s=[],n=new Map,a,i,o,f,r,h,v,m,d,w=l[4];const g=T=>Ae(T[48]);for(let T=0;T<w.length;T+=1){let O=Bl(l,w,T),J=g(O);n.set(J,s[T]=Sl(J,O))}let E=l[19]&&Nl(l),P=l[13]&&zl(l),A=l[15]&&!l[7]&&Ul(l),H=l[7]&&Hl(l),j=(l[15]||l[7])&&Fl(l);return{c(){e=De("svg"),t=De("g");for(let T=0;T<s.length;T+=1)s[T].c();a=De("g"),E&&E.c(),i=te(),P&&P.c(),o=te(),A&&A.c(),f=te(),H&&H.c(),r=te(),j&&j.c(),this.h()},l(T){e=Ve(T,"svg",{viewBox:!0,style:!0,class:!0});var O=k(e);t=Ve(O,"g",{class:!0});var J=k(t);for(let Z=0;Z<s.length;Z+=1)s[Z].l(J);J.forEach(_),a=Ve(O,"g",{class:!0});var ne=k(a);E&&E.l(ne),i=te(),P&&P.l(ne),o=te(),A&&A.l(ne),f=te(),H&&H.l(ne),r=te(),j&&j.l(ne),ne.forEach(_),O.forEach(_),this.h()},h(){b(t,"class","block-groups svelte-1tmbpzy"),b(a,"class","meshes svelte-1tmbpzy"),b(e,"viewBox",h=l[1].join(" ")),ve(e,"--font-size",(l[2]||.8)+"em"),b(e,"class","svelte-1tmbpzy")},m(T,O){z(T,e,O),u(e,t);for(let J=0;J<s.length;J+=1)s[J].m(t,null);u(e,a),E&&E.m(a,null),u(a,i),P&&P.m(a,null),u(a,o),A&&A.m(a,null),u(a,f),H&&H.m(a,null),u(a,r),j&&j.m(a,null),v=!0,m||(d=[de(e,"mousedown",function(){Dl(l[25])&&l[25].apply(this,arguments)}),de(e,"mouseup",function(){Dl(l[26])&&l[26].apply(this,arguments)})],m=!0)},p(T,O){l=T,O[0]&402722808&&(w=l[4],s=Nt(s,O,g,1,l,w,n,t,zt,Sl,null,Bl)),l[19]?E?E.p(l,O):(E=Nl(l),E.c(),E.m(a,i)):E&&(E.d(1),E=null),l[13]?P?(P.p(l,O),O[0]&8192&&K(P,1)):(P=zl(l),P.c(),K(P,1),P.m(a,o)):P&&(Le(),ie(P,1,1,()=>{P=null}),Be()),l[15]&&!l[7]?A?(A.p(l,O),O[0]&32896&&K(A,1)):(A=Ul(l),A.c(),K(A,1),A.m(a,f)):A&&(Le(),ie(A,1,1,()=>{A=null}),Be()),l[7]?H?(H.p(l,O),O[0]&128&&K(H,1)):(H=Hl(l),H.c(),K(H,1),H.m(a,r)):H&&(Le(),ie(H,1,1,()=>{H=null}),Be()),l[15]||l[7]?j?(j.p(l,O),O[0]&32896&&K(j,1)):(j=Fl(l),j.c(),K(j,1),j.m(a,null)):j&&(Le(),ie(j,1,1,()=>{j=null}),Be()),(!v||O[0]&2&&h!==(h=l[1].join(" ")))&&b(e,"viewBox",h),(!v||O[0]&4)&&ve(e,"--font-size",(l[2]||.8)+"em")},i(T){v||(K(P),K(A),K(H),K(j),v=!0)},o(T){ie(P),ie(A),ie(H),ie(j),v=!1},d(T){T&&_(e);for(let O=0;O<s.length;O+=1)s[O].d();E&&E.d(),P&&P.d(),A&&A.d(),H&&H.d(),j&&j.d(),m=!1,dl(d)}}}function ts(l,e,t){let s,n,a,{viewBox:i,labelSize:o,draggedBgs:f,data:r,path:h,color:v,changingLines:m,neighbor:d,showPluralities:w,metric:g,period:E,tractVars:P,showComms:A,drawings:H,showPlans:j,plan:T,points:O=[],tractMesh:J,bgMesh:ne,mesh:Z,aggregates:q,obj:ee,handleLabelClick:ae,congressPlans:Q,plans:oe,startDrag:re,endDrag:se,handleMouseMove:le,viewCutoff:ue,showOnlyFocusDistricts:X}=e;function W(){if(!!a)return h(n?Xe(a,{type:ee.type,geometries:ee.geometries.filter(c=>s.includes(c.properties[T]))}):Xe(a,ee,(c,V)=>Tl(c)!==Tl(V)))}const ce=c=>m&&T.includes("_")&&d(c),$=c=>console.log(c.properties),F=c=>le(c),N=(c,V)=>c.properties[T]!==V.properties[T],M=c=>ae(`${T},${c[T]}`),C=(c,V)=>c[T]===V.properties[T];return l.$$set=c=>{"viewBox"in c&&t(1,i=c.viewBox),"labelSize"in c&&t(2,o=c.labelSize),"draggedBgs"in c&&t(3,f=c.draggedBgs),"data"in c&&t(4,r=c.data),"path"in c&&t(5,h=c.path),"color"in c&&t(6,v=c.color),"changingLines"in c&&t(7,m=c.changingLines),"neighbor"in c&&t(8,d=c.neighbor),"showPluralities"in c&&t(9,w=c.showPluralities),"metric"in c&&t(10,g=c.metric),"period"in c&&t(11,E=c.period),"tractVars"in c&&t(12,P=c.tractVars),"showComms"in c&&t(13,A=c.showComms),"drawings"in c&&t(14,H=c.drawings),"showPlans"in c&&t(15,j=c.showPlans),"plan"in c&&t(16,T=c.plan),"points"in c&&t(17,O=c.points),"tractMesh"in c&&t(18,J=c.tractMesh),"bgMesh"in c&&t(19,ne=c.bgMesh),"mesh"in c&&t(20,Z=c.mesh),"aggregates"in c&&t(21,q=c.aggregates),"obj"in c&&t(0,ee=c.obj),"handleLabelClick"in c&&t(22,ae=c.handleLabelClick),"congressPlans"in c&&t(23,Q=c.congressPlans),"plans"in c&&t(24,oe=c.plans),"startDrag"in c&&t(25,re=c.startDrag),"endDrag"in c&&t(26,se=c.endDrag),"handleMouseMove"in c&&t(27,le=c.handleMouseMove),"viewCutoff"in c&&t(28,ue=c.viewCutoff),"showOnlyFocusDistricts"in c&&t(29,X=c.showOnlyFocusDistricts)},l.$$.update=()=>{l.$$.dirty[0]&65536&&t(31,s=es[T]),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(32,n=X&&s),l.$$.dirty[0]&25231360&&t(30,a=T.startsWith("congress")?Q:oe),l.$$.dirty[0]&1073807360&&t(0,ee=a?a.objects[T]:void 0)},[ee,i,o,f,r,h,v,m,d,w,g,E,P,A,H,j,T,O,J,ne,Z,q,ae,Q,oe,re,se,le,ue,X,a,s,n,W,ce,$,F,N,M,C]}class ss extends sl{constructor(e){super();nl(this,e,ts,ls,il,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,showComms:13,drawings:14,showPlans:15,plan:16,points:17,tractMesh:18,bgMesh:19,mesh:20,aggregates:21,obj:0,handleLabelClick:22,congressPlans:23,plans:24,startDrag:25,endDrag:26,handleMouseMove:27,viewCutoff:28,showOnlyFocusDistricts:29},null,[-1,-1])}}function Yl(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function Kl(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ql(l,e,t){const s=l.slice();return s[16]=e[t],s}function Jl(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function Ql(l,e,t){const s=l.slice();return s[10]=e[t],s}function Xl(l,e,t){const s=l.slice();return s[13]=e[t],s}function ns(l){let e,t,s=l[9],n=[];for(let o=0;o<s.length;o+=1)n[o]=Zl(Kl(l,s,o));let a=l[9],i=[];for(let o=0;o<a.length;o+=1)i[o]=$l(Yl(l,a,o));return{c(){e=y("div");for(let o=0;o<n.length;o+=1)n[o].c();t=B();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0});var f=k(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=I(f);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(_),this.h()},h(){b(e,"class","color-legend svelte-lnhifj"),ve(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.5em)"),je(e,"pctasian",l[3].includes(l[4]))},m(o,f){z(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);u(e,t);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const h=Kl(o,s,r);n[r]?n[r].p(h,f):(n[r]=Zl(h),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&536){a=o[9];let r;for(r=0;r<a.length;r+=1){const h=Yl(o,a,r);i[r]?i[r].p(h,f):(i[r]=$l(h),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=a.length}f&24&&ve(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.5em)"),f&24&&je(e,"pctasian",o[3].includes(o[4]))},d(o){o&&_(e),Ee(n,o),Ee(i,o)}}}function is(l){let e,t,s=l[8],n=[];for(let o=0;o<s.length;o+=1)n[o]=xl(Jl(l,s,o));let a=l[8],i=[];for(let o=0;o<a.length;o+=1)i[o]=et(ql(l,a,o));return{c(){e=y("div");for(let o=0;o<n.length;o+=1)n[o].c();t=B();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0});var f=k(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=I(f);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(_),this.h()},h(){b(e,"class","color-legend plurality-legend svelte-lnhifj")},m(o,f){z(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);u(e,t);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const h=Jl(o,s,r);n[r]?n[r].p(h,f):(n[r]=xl(h),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&256){a=o[8];let r;for(r=0;r<a.length;r+=1){const h=ql(o,a,r);i[r]?i[r].p(h,f):(i[r]=et(h),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=a.length}},d(o){o&&_(e),Ee(n,o),Ee(i,o)}}}function as(l){let e,t,s,n,a,i,o,f,r,h,v,m,d=l[0],w=[];for(let g=0;g<d.length;g+=1)w[g]=tt(Ql(l,d,g));return{c(){e=y("div");for(let g=0;g<w.length;g+=1)w[g].c();t=B(),s=y("p"),n=y("span"),a=R("Weak plurality"),i=B(),o=y("p"),f=B(),r=y("p"),h=R("Majority"),v=B(),m=y("p"),this.h()},l(g){e=D(g,"DIV",{class:!0});var E=k(e);for(let j=0;j<w.length;j+=1)w[j].l(E);t=I(E),s=D(E,"P",{class:!0});var P=k(s);n=D(P,"SPAN",{});var A=k(n);a=U(A,"Weak plurality"),A.forEach(_),P.forEach(_),i=I(E),o=D(E,"P",{class:!0}),k(o).forEach(_),f=I(E),r=D(E,"P",{class:!0});var H=k(r);h=U(H,"Majority"),H.forEach(_),v=I(E),m=D(E,"P",{class:!0}),k(m).forEach(_),E.forEach(_),this.h()},h(){b(s,"class","col-head svelte-lnhifj"),b(o,"class","col-head svelte-lnhifj"),b(r,"class","col-head svelte-lnhifj"),b(m,"class","col-head svelte-lnhifj"),b(e,"class","legend svelte-lnhifj")},m(g,E){z(g,e,E);for(let P=0;P<w.length;P+=1)w[P].m(e,null);u(e,t),u(e,s),u(s,n),u(n,a),u(e,i),u(e,o),u(e,f),u(e,r),u(r,h),u(e,v),u(e,m)},p(g,E){if(E&7){d=g[0];let P;for(P=0;P<d.length;P+=1){const A=Ql(g,d,P);w[P]?w[P].p(A,E):(w[P]=tt(A),w[P].c(),w[P].m(e,t))}for(;P<w.length;P+=1)w[P].d(1);w.length=d.length}},d(g){g&&_(e),Ee(w,g)}}}function Zl(l){let e;return{c(){e=y("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),k(e).forEach(_),this.h()},h(){ve(e,"background-color",l[3].includes(l[4])?gl[l[20]]:qe[l[20]])},m(t,s){z(t,e,s)},p(t,s){s&24&&ve(e,"background-color",t[3].includes(t[4])?gl[t[20]]:qe[t[20]])},d(t){t&&_(e)}}}function $l(l){let e,t=(l[9][l[9].length-1]<1?pe(l[21],0):l[9][l[9].length-1]>1e3?We(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?" Asian":"")+"",s,n;return{c(){e=y("p"),s=R(t),n=B(),this.h()},l(a){e=D(a,"P",{class:!0});var i=k(e);s=U(i,t),n=I(i),i.forEach(_),this.h()},h(){b(e,"class","svelte-lnhifj")},m(a,i){z(a,e,i),u(e,s),u(e,n)},p(a,i){i&536&&t!==(t=(a[9][a[9].length-1]<1?pe(a[21],0):a[9][a[9].length-1]>1e3?We(a[21]):a[21])+(a[3].includes(a[4])&&a[20]===a[9].length-1?" Asian":"")+"")&&he(s,t)},d(a){a&&_(e)}}}function xl(l){let e;return{c(){e=y("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),k(e).forEach(_),this.h()},h(){ve(e,"background-color",qe[l[20]])},m(t,s){z(t,e,s)},p:Fe,d(t){t&&_(e)}}}function et(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=y("p"),s=R(t),this.h()},l(n){e=D(n,"P",{class:!0});var a=k(e);s=U(a,t),a.forEach(_),this.h()},h(){b(e,"class","svelte-lnhifj")},m(n,a){z(n,e,a),u(e,s)},p(n,a){a&256&&t!==(t=n[16].replace("_","-")+"")&&he(s,t)},d(n){n&&_(e)}}}function lt(l){let e;return{c(){e=y("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),k(e).forEach(_),this.h()},h(){ve(e,"background-color",l[2][l[10]]+l[13])},m(t,s){z(t,e,s)},p(t,s){s&7&&ve(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&_(e)}}}function tt(l){let e,t,s=Ye(l[10])+"",n,a=l[1],i=[];for(let o=0;o<a.length;o+=1)i[o]=lt(Xl(l,a,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=B(),t=y("p"),n=R(s),this.h()},l(o){for(let r=0;r<i.length;r+=1)i[r].l(o);e=I(o),t=D(o,"P",{class:!0});var f=k(t);n=U(f,s),f.forEach(_),this.h()},h(){b(t,"class","row-label svelte-lnhifj")},m(o,f){for(let r=0;r<i.length;r+=1)i[r].m(o,f);z(o,e,f),z(o,t,f),u(t,n)},p(o,f){if(f&7){a=o[1];let r;for(r=0;r<a.length;r+=1){const h=Xl(o,a,r);i[r]?i[r].p(h,f):(i[r]=lt(h),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=a.length}f&1&&s!==(s=Ye(o[10])+"")&&he(n,s)},d(o){Ee(i,o),o&&_(e),o&&_(t)}}}function os(l){let e,t,s;function n(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?as:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?is:ns)}let a=n(l,-1),i=a(l);return{c(){i.c(),s=te()},l(o){i.l(o),s=te()},m(o,f){i.m(o,f),z(o,s,f)},p(o,[f]){a===(a=n(o,f))&&i?i.p(o,f):(i.d(1),i=a(o),i&&(i.c(),i.m(s.parentNode,s)))},i:Fe,o:Fe,d(o){i.d(o),o&&_(s)}}}function rs(l,e,t){let{groups:s,levels:n,colors:a,dynamicVars:i,variable:o,metric:f,showPluralities:r,pluralityVars:h,periods:v,breaks:m}=e;return l.$$set=d=>{"groups"in d&&t(0,s=d.groups),"levels"in d&&t(1,n=d.levels),"colors"in d&&t(2,a=d.colors),"dynamicVars"in d&&t(3,i=d.dynamicVars),"variable"in d&&t(4,o=d.variable),"metric"in d&&t(5,f=d.metric),"showPluralities"in d&&t(6,r=d.showPluralities),"pluralityVars"in d&&t(7,h=d.pluralityVars),"periods"in d&&t(8,v=d.periods),"breaks"in d&&t(9,m=d.breaks)},[s,n,a,i,o,f,r,h,v,m]}class fs extends sl{constructor(e){super();nl(this,e,rs,os,il,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function st(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function nt(l,e,t){const s=l.slice();return s[18]=e[t],s}function it(l,e,t){const s=l.slice();return s[12]=e[t],s}function cs(l){let e,t=l[6],s=[];for(let n=0;n<t.length;n+=1)s[n]=ot(st(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=te()},l(n){for(let a=0;a<s.length;a+=1)s[a].l(n);e=te()},m(n,a){for(let i=0;i<s.length;i+=1)s[i].m(n,a);z(n,e,a)},p(n,a){if(a&200){t=n[6];let i;for(i=0;i<t.length;i+=1){const o=st(n,t,i);s[i]?s[i].p(o,a):(s[i]=ot(o),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(n){Ee(s,n),n&&_(e)}}}function hs(l){let e,t=l[0],s=[];for(let n=0;n<t.length;n+=1)s[n]=ft(it(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=te()},l(n){for(let a=0;a<s.length;a+=1)s[a].l(n);e=te()},m(n,a){for(let i=0;i<s.length;i+=1)s[i].m(n,a);z(n,e,a)},p(n,a){if(a&567){t=n[0];let i;for(i=0;i<t.length;i+=1){const o=it(n,t,i);s[i]?s[i].p(o,a):(s[i]=ft(o),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(n){Ee(s,n),n&&_(e)}}}function at(l){let e,t,s=Ye(l[18])+"",n,a,i,o=pe(l[9]["cvap19"+l[18]])+"",f,r,h,v=pe(l[9]["pop20"+l[18]])+"",m,d;return{c(){e=y("tr"),t=y("td"),n=R(s),a=B(),i=y("td"),f=R(o),r=B(),h=y("td"),m=R(v),d=B(),this.h()},l(w){e=D(w,"TR",{class:!0});var g=k(e);t=D(g,"TD",{class:!0});var E=k(t);n=U(E,s),E.forEach(_),a=I(g),i=D(g,"TD",{class:!0});var P=k(i);f=U(P,o),P.forEach(_),r=I(g),h=D(g,"TD",{class:!0});var A=k(h);m=U(A,v),A.forEach(_),d=I(g),g.forEach(_),this.h()},h(){b(t,"class","svelte-1nt0y8e"),b(i,"class","svelte-1nt0y8e"),b(h,"class","svelte-1nt0y8e"),b(e,"class","svelte-1nt0y8e")},m(w,g){z(w,e,g),u(e,t),u(t,n),u(e,a),u(e,i),u(i,f),u(e,r),u(e,h),u(h,m),u(e,d)},p(w,g){g&8&&s!==(s=Ye(w[18])+"")&&he(n,s),g&72&&o!==(o=pe(w[9]["cvap19"+w[18]])+"")&&he(f,o),g&72&&v!==(v=pe(w[9]["pop20"+w[18]])+"")&&he(m,v)},d(w){w&&_(e)}}}function ot(l){let e,t,s,n=(l[15]||"COI"+(l[17]+1))+"",a,i,o,f,r,h,v,m,d,w,g,E,P,A,H,j,T,O,J=We(l[9].income)+"",ne,Z,q,ee,ae=pe(l[9].hhlang)+"",Q,oe,re,se,le=pe(l[9].benefits)+"",ue,X,W,ce;function $(){return l[11](l[17])}let F=l[3],N=[];for(let M=0;M<F.length;M+=1)N[M]=at(nt(l,F,M));return{c(){e=y("div"),t=y("p"),s=y("i"),a=R(n),i=B(),o=y("button"),f=R("\u{1F5D1}"),r=B(),h=y("table"),v=y("tr"),m=y("th"),d=B(),w=y("th"),g=R("CVAP"),E=B(),P=y("th"),A=R("Pop."),H=B();for(let M=0;M<N.length;M+=1)N[M].c();j=B(),T=y("p"),O=R("Income: "),ne=R(J),Z=B(),q=y("p"),ee=R("Asian and LEP: "),Q=R(ae),oe=B(),re=y("p"),se=R("Pct. gov't benefits: "),ue=R(le),X=B(),this.h()},l(M){e=D(M,"DIV",{});var C=k(e);t=D(C,"P",{class:!0});var c=k(t);s=D(c,"I",{});var V=k(s);a=U(V,n),V.forEach(_),i=I(c),o=D(c,"BUTTON",{});var G=k(o);f=U(G,"\u{1F5D1}"),G.forEach(_),c.forEach(_),r=I(C),h=D(C,"TABLE",{class:!0});var S=k(h);v=D(S,"TR",{class:!0});var L=k(v);m=D(L,"TH",{class:!0}),k(m).forEach(_),d=I(L),w=D(L,"TH",{class:!0});var be=k(w);g=U(be,"CVAP"),be.forEach(_),E=I(L),P=D(L,"TH",{class:!0});var ke=k(P);A=U(ke,"Pop."),ke.forEach(_),L.forEach(_),H=I(S);for(let ge=0;ge<N.length;ge+=1)N[ge].l(S);S.forEach(_),j=I(C),T=D(C,"P",{class:!0});var x=k(T);O=U(x,"Income: "),ne=U(x,J),x.forEach(_),Z=I(C),q=D(C,"P",{class:!0});var Oe=k(q);ee=U(Oe,"Asian and LEP: "),Q=U(Oe,ae),Oe.forEach(_),oe=I(C),re=D(C,"P",{class:!0});var Me=k(re);se=U(Me,"Pct. gov't benefits: "),ue=U(Me,le),Me.forEach(_),X=I(C),C.forEach(_),this.h()},h(){b(t,"class","svelte-1nt0y8e"),b(m,"class","svelte-1nt0y8e"),b(w,"class","svelte-1nt0y8e"),b(P,"class","svelte-1nt0y8e"),b(v,"class","svelte-1nt0y8e"),b(h,"class","svelte-1nt0y8e"),b(T,"class","table-footer svelte-1nt0y8e"),b(q,"class","table-footer svelte-1nt0y8e"),b(re,"class","table-footer svelte-1nt0y8e")},m(M,C){z(M,e,C),u(e,t),u(t,s),u(s,a),u(t,i),u(t,o),u(o,f),u(e,r),u(e,h),u(h,v),u(v,m),u(v,d),u(v,w),u(w,g),u(v,E),u(v,P),u(P,A),u(h,H);for(let c=0;c<N.length;c+=1)N[c].m(h,null);u(e,j),u(e,T),u(T,O),u(T,ne),u(e,Z),u(e,q),u(q,ee),u(q,Q),u(e,oe),u(e,re),u(re,se),u(re,ue),u(e,X),W||(ce=de(o,"click",$),W=!0)},p(M,C){if(l=M,C&64&&n!==(n=(l[15]||"COI"+(l[17]+1))+"")&&he(a,n),C&72){F=l[3];let c;for(c=0;c<F.length;c+=1){const V=nt(l,F,c);N[c]?N[c].p(V,C):(N[c]=at(V),N[c].c(),N[c].m(h,null))}for(;c<N.length;c+=1)N[c].d(1);N.length=F.length}C&64&&J!==(J=We(l[9].income)+"")&&he(ne,J),C&64&&ae!==(ae=pe(l[9].hhlang)+"")&&he(Q,ae),C&64&&le!==(le=pe(l[9].benefits)+"")&&he(ue,le)},d(M){M&&_(e),Ee(N,M),W=!1,ce()}}}function rt(l){let e,t,s,n=Cl(l[12])+"",a,i,o,f,r,h,v,m,d,w,g,E,P,A,H,j,T,O=pe(l[9][l[12]].cvap10asian)+"",J,ne,Z,q=pe(l[9][l[12]].pop10asian)+"",ee,ae,Q,oe,re,se,le,ue=pe(l[9][l[12]].cvap19asian)+"",X,W,ce,$=pe(l[9][l[12]].pop20asian)+"",F,N,M,C,c=We(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+Al(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",V,G,S,L;function be(){return l[10](l[12])}return{c(){e=y("div"),t=y("p"),s=y("i"),a=R(n),i=B(),o=y("table"),f=y("tr"),r=y("th"),h=B(),v=y("th"),m=R("CVAP"),d=B(),w=y("th"),g=R("Pop."),E=B(),P=y("tr"),A=y("td"),H=R("Asians in 2010"),j=B(),T=y("td"),J=R(O),ne=B(),Z=y("td"),ee=R(q),ae=B(),Q=y("tr"),oe=y("td"),re=R("Asians now"),se=B(),le=y("td"),X=R(ue),W=B(),ce=y("td"),F=R($),N=B(),M=y("p"),C=R("Income: "),V=R(c),G=B(),this.h()},l(ke){e=D(ke,"DIV",{class:!0});var x=k(e);t=D(x,"P",{class:!0});var Oe=k(t);s=D(Oe,"I",{});var Me=k(s);a=U(Me,n),Me.forEach(_),Oe.forEach(_),i=I(x),o=D(x,"TABLE",{class:!0});var ge=k(o);f=D(ge,"TR",{class:!0});var ye=k(f);r=D(ye,"TH",{class:!0}),k(r).forEach(_),h=I(ye),v=D(ye,"TH",{class:!0});var Ie=k(v);m=U(Ie,"CVAP"),Ie.forEach(_),d=I(ye),w=D(ye,"TH",{class:!0});var Ue=k(w);g=U(Ue,"Pop."),Ue.forEach(_),ye.forEach(_),E=I(ge),P=D(ge,"TR",{class:!0});var Pe=k(P);A=D(Pe,"TD",{class:!0});var Ze=k(A);H=U(Ze,"Asians in 2010"),Ze.forEach(_),j=I(Pe),T=D(Pe,"TD",{class:!0});var $e=k(T);J=U($e,O),$e.forEach(_),ne=I(Pe),Z=D(Pe,"TD",{class:!0});var xe=k(Z);ee=U(xe,q),xe.forEach(_),Pe.forEach(_),ae=I(ge),Q=D(ge,"TR",{class:!0});var Re=k(Q);oe=D(Re,"TD",{class:!0});var el=k(oe);re=U(el,"Asians now"),el.forEach(_),se=I(Re),le=D(Re,"TD",{class:!0});var ll=k(le);X=U(ll,ue),ll.forEach(_),W=I(Re),ce=D(Re,"TD",{class:!0});var tl=k(ce);F=U(tl,$),tl.forEach(_),Re.forEach(_),ge.forEach(_),N=I(x),M=D(x,"P",{class:!0});var Qe=k(M);C=U(Qe,"Income: "),V=U(Qe,c),Qe.forEach(_),G=I(x),x.forEach(_),this.h()},h(){b(t,"class","svelte-1nt0y8e"),b(r,"class","svelte-1nt0y8e"),b(v,"class","svelte-1nt0y8e"),b(w,"class","svelte-1nt0y8e"),b(f,"class","svelte-1nt0y8e"),b(A,"class","svelte-1nt0y8e"),b(T,"class","svelte-1nt0y8e"),b(Z,"class","svelte-1nt0y8e"),b(P,"class","svelte-1nt0y8e"),b(oe,"class","svelte-1nt0y8e"),b(le,"class","svelte-1nt0y8e"),b(ce,"class","svelte-1nt0y8e"),b(Q,"class","svelte-1nt0y8e"),b(o,"class","svelte-1nt0y8e"),b(M,"class","table-footer svelte-1nt0y8e"),b(e,"class","district-aggregate svelte-1nt0y8e")},m(ke,x){z(ke,e,x),u(e,t),u(t,s),u(s,a),u(e,i),u(e,o),u(o,f),u(f,r),u(f,h),u(f,v),u(v,m),u(f,d),u(f,w),u(w,g),u(o,E),u(o,P),u(P,A),u(A,H),u(P,j),u(P,T),u(T,J),u(P,ne),u(P,Z),u(Z,ee),u(o,ae),u(o,Q),u(Q,oe),u(oe,re),u(Q,se),u(Q,le),u(le,X),u(Q,W),u(Q,ce),u(ce,F),u(e,N),u(e,M),u(M,C),u(M,V),u(e,G),S||(L=de(t,"click",be),S=!0)},p(ke,x){l=ke,x&1&&n!==(n=Cl(l[12])+"")&&he(a,n),x&513&&O!==(O=pe(l[9][l[12]].cvap10asian)+"")&&he(J,O),x&513&&q!==(q=pe(l[9][l[12]].pop10asian)+"")&&he(ee,q),x&513&&ue!==(ue=pe(l[9][l[12]].cvap19asian)+"")&&he(X,ue),x&513&&$!==($=pe(l[9][l[12]].pop20asian)+"")&&he(F,$),x&565&&c!==(c=We(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+Al(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"")&&he(V,c)},d(ke){ke&&_(e),S=!1,L()}}}function ft(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&rt(l);return{c(){s&&s.c(),t=te()},l(n){s&&s.l(n),t=te()},m(n,a){s&&s.m(n,a),z(n,t,a)},p(n,a){a&5&&(e=n[12].split(",")[0].split("_")[0]===n[2].split("_")[0]),e?s?s.p(n,a):(s=rt(n),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&_(t)}}}function us(l){let e;function t(a,i){if(a[8]==="districts")return hs;if(a[8]==="community")return cs}let s=t(l),n=s&&s(l);return{c(){n&&n.c(),e=te()},l(a){n&&n.l(a),e=te()},m(a,i){n&&n.m(a,i),z(a,e,i)},p(a,[i]){s===(s=t(a))&&n?n.p(a,i):(n&&n.d(1),n=s&&s(a),n&&(n.c(),n.m(e.parentNode,e)))},i:Fe,o:Fe,d(a){n&&n.d(a),a&&_(e)}}}function _s(l,e,t){let{aggregates:s,handleLabelClick:n,plan:a,stats:i,groups:o,changingLines:f,idealValues:r,drawings:h,delDrawing:v}=e,{type:m="districts"}=e;const d=g=>n(g),w=g=>v(g);return l.$$set=g=>{"aggregates"in g&&t(0,s=g.aggregates),"handleLabelClick"in g&&t(1,n=g.handleLabelClick),"plan"in g&&t(2,a=g.plan),"stats"in g&&t(9,i=g.stats),"groups"in g&&t(3,o=g.groups),"changingLines"in g&&t(4,f=g.changingLines),"idealValues"in g&&t(5,r=g.idealValues),"drawings"in g&&t(6,h=g.drawings),"delDrawing"in g&&t(7,v=g.delDrawing),"type"in g&&t(8,m=g.type)},[s,n,a,o,f,r,h,v,m,i,d,w]}class ct extends sl{constructor(e){super();nl(this,e,_s,us,il,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}function ht(l,e,t){const s=l.slice();return s[65]=e[t],s}function ut(l,e,t){const s=l.slice();return s[68]=e[t],s}function _t(l,e,t){const s=l.slice();return s[71]=e[t],s}function gt(l,e,t){const s=l.slice();return s[74]=e[t],s}function dt(l,e,t){const s=l.slice();return s[65]=e[t],s}function mt(l,e,t){const s=l.slice();return s[65]=e[t],s}function vt(l){let e,t=(_l[l[65]]||l[65])+"",s,n;return{c(){e=y("option"),s=R(t),this.h()},l(a){e=D(a,"OPTION",{});var i=k(e);s=U(i,t),i.forEach(_),this.h()},h(){e.__value=n=l[65],e.value=e.__value},m(a,i){z(a,e,i),u(e,s)},p(a,i){i[0]&4&&t!==(t=(_l[a[65]]||a[65])+"")&&he(s,t),i[0]&4&&n!==(n=a[65])&&(e.__value=n,e.value=e.__value)},d(a){a&&_(e)}}}function pt(l){let e,t=(_l[l[65]]||l[65])+"",s,n;return{c(){e=y("option"),s=R(t),this.h()},l(a){e=D(a,"OPTION",{});var i=k(e);s=U(i,t),i.forEach(_),this.h()},h(){e.__value=n=l[65],e.value=e.__value},m(a,i){z(a,e,i),u(e,s)},p(a,i){i[0]&8&&t!==(t=(_l[a[65]]||a[65])+"")&&he(s,t),i[0]&8&&n!==(n=a[65])&&(e.__value=n,e.value=e.__value)},d(a){a&&_(e)}}}function bt(l){let e,t=l[2].includes(l[7]),s,n=l[2].includes(l[7]),a,i,o,f=t&&kt(l),r=n&&Et(l);return{c(){e=y("div"),f&&f.c(),s=B(),r&&r.c()},l(h){e=D(h,"DIV",{});var v=k(e);f&&f.l(v),s=I(v),r&&r.l(v),v.forEach(_)},m(h,v){z(h,e,v),f&&f.m(e,null),u(e,s),r&&r.m(e,null),o=!0},p(h,v){v[0]&132&&(t=h[2].includes(h[7])),t?f?f.p(h,v):(f=kt(h),f.c(),f.m(e,s)):f&&(f.d(1),f=null),v[0]&132&&(n=h[2].includes(h[7])),n?r?r.p(h,v):(r=Et(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(h){o||(Te(()=>{i&&i.end(1),a=Ne(e,Ge,{}),a.start()}),o=!0)},o(h){a&&a.invalidate(),i=ze(e,Ge,{}),o=!1},d(h){h&&_(e),f&&f.d(),r&&r.d(),h&&i&&i.end()}}}function kt(l){let e,t=["past","present"],s=[];for(let n=0;n<2;n+=1)s[n]=wt(gt(l,t,n));return{c(){for(let n=0;n<2;n+=1)s[n].c();e=te()},l(n){for(let a=0;a<2;a+=1)s[a].l(n);e=te()},m(n,a){for(let i=0;i<2;i+=1)s[i].m(n,a);z(n,e,a)},p(n,a){if(a[0]&64){t=["past","present"];let i;for(i=0;i<2;i+=1){const o=gt(n,t,i);s[i]?s[i].p(o,a):(s[i]=wt(o),s[i].c(),s[i].m(e.parentNode,e))}for(;i<2;i+=1)s[i].d(1)}},d(n){Ee(s,n),n&&_(e)}}}function wt(l){let e,t,s,n=Ye(l[74])+"",a,i,o,f;return{c(){e=y("label"),t=y("input"),s=B(),a=R(n),i=B(),this.h()},l(r){e=D(r,"LABEL",{});var h=k(e);t=D(h,"INPUT",{type:!0,name:!0}),s=I(h),a=U(h,n),i=I(h),h.forEach(_),this.h()},h(){b(t,"type","radio"),b(t,"name","period"),t.__value=l[74],t.value=t.__value,l[51][0].push(t)},m(r,h){z(r,e,h),u(e,t),t.checked=t.__value===l[6],u(e,s),u(e,a),u(e,i),o||(f=de(t,"change",l[50]),o=!0)},p(r,h){h[0]&64&&(t.checked=t.__value===r[6])},d(r){r&&_(e),l[51][0].splice(l[51][0].indexOf(t),1),o=!1,f()}}}function Et(l){let e,t,s=(l[8]?"pct. asian":"pluralities")+"",n,a,i;return{c(){e=y("button"),t=R("Show "),n=R(s),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var f=k(e);t=U(f,"Show "),n=U(f,s),f.forEach(_),this.h()},h(){b(e,"class","plurality-toggle svelte-115161l")},m(o,f){z(o,e,f),u(e,t),u(e,n),a||(i=de(e,"click",l[52]),a=!0)},p(o,f){f[0]&256&&s!==(s=(o[8]?"pct. asian":"pluralities")+"")&&he(n,s)},d(o){o&&_(e),a=!1,i()}}}function Pt(l){let e,t,s,n,a,i,o,f,r,h,v=["assembly","senate","congress"],m=[];for(let d=0;d<3;d+=1)m[d]=Dt(ut(l,v,d));return a=new ct({props:{aggregates:l[16],handleLabelClick:l[37],plan:l[15],stats:l[25],groups:Ke,changingLines:l[24],idealValues:xt}}),{c(){e=y("div"),t=y("div"),s=y("select");for(let d=0;d<3;d+=1)m[d].c();n=B(),al(a.$$.fragment),this.h()},l(d){e=D(d,"DIV",{class:!0});var w=k(e);t=D(w,"DIV",{class:!0});var g=k(t);s=D(g,"SELECT",{class:!0});var E=k(s);for(let P=0;P<3;P+=1)m[P].l(E);E.forEach(_),g.forEach(_),n=I(w),ol(a.$$.fragment,w),w.forEach(_),this.h()},h(){b(s,"class","svelte-115161l"),l[15]===void 0&&Te(()=>l[55].call(s)),b(t,"class","plan-selector svelte-115161l"),b(e,"class","svelte-115161l")},m(d,w){z(d,e,w),u(e,t),u(t,s);for(let g=0;g<3;g+=1)m[g].m(s,null);rl(s,l[15]),u(e,n),fl(a,e,null),f=!0,r||(h=de(s,"change",l[55]),r=!0)},p(d,w){if(w&0){v=["assembly","senate","congress"];let E;for(E=0;E<3;E+=1){const P=ut(d,v,E);m[E]?m[E].p(P,w):(m[E]=Dt(P),m[E].c(),m[E].m(s,null))}for(;E<3;E+=1)m[E].d(1)}w[0]&32768&&rl(s,d[15]);const g={};w[0]&65536&&(g.aggregates=d[16]),w[0]&32768&&(g.plan=d[15]),w[0]&33554432&&(g.stats=d[25]),w[0]&16777216&&(g.changingLines=d[24]),a.$set(g)},i(d){f||(K(a.$$.fragment,d),Te(()=>{o&&o.end(1),i=Ne(e,Ge,{}),i.start()}),f=!0)},o(d){ie(a.$$.fragment,d),i&&i.invalidate(),o=ze(e,Ge,{}),f=!1},d(d){d&&_(e),Ee(m,d),cl(a),d&&o&&o.end(),r=!1,h()}}}function yt(l){let e,t=Qt(l[68]+l[71])+"",s,n;return{c(){e=y("option"),s=R(t),this.h()},l(a){e=D(a,"OPTION",{});var i=k(e);s=U(i,t),i.forEach(_),this.h()},h(){e.__value=n=l[68]+l[71],e.value=e.__value},m(a,i){z(a,e,i),u(e,s)},p:Fe,d(a){a&&_(e)}}}function Dt(l){let e,t=["","_letters","_names"],s=[];for(let n=0;n<3;n+=1)s[n]=yt(_t(l,t,n));return{c(){e=y("optgroup");for(let n=0;n<3;n+=1)s[n].c();this.h()},l(n){e=D(n,"OPTGROUP",{label:!0});var a=k(e);for(let i=0;i<3;i+=1)s[i].l(a);a.forEach(_),this.h()},h(){b(e,"label",Ye(l[68]))},m(n,a){z(n,e,a);for(let i=0;i<3;i+=1)s[i].m(e,null)},p(n,a){if(a&0){t=["","_letters","_names"];let i;for(i=0;i<3;i+=1){const o=_t(n,t,i);s[i]?s[i].p(o,a):(s[i]=yt(o),s[i].c(),s[i].m(e,null))}for(;i<3;i+=1)s[i].d(1)}},d(n){n&&_(e),Ee(s,n)}}}function Vt(l){let e,t,s,n,a,i,o,f,r,h,v;return t=new ct({props:{type:"community",drawings:l[11],delDrawing:l[35],groups:Ke,stats:l[25]}}),{c(){e=y("div"),al(t.$$.fragment),s=B(),n=y("button"),a=y("b"),i=R("[SAVE]"),this.h()},l(m){e=D(m,"DIV",{class:!0});var d=k(e);ol(t.$$.fragment,d),s=I(d),n=D(d,"BUTTON",{style:!0});var w=k(n);a=D(w,"B",{});var g=k(a);i=U(g,"[SAVE]"),g.forEach(_),w.forEach(_),d.forEach(_),this.h()},h(){ve(n,"font-size","13px"),b(e,"class","community svelte-115161l")},m(m,d){z(m,e,d),fl(t,e,null),u(e,s),u(e,n),u(n,a),u(a,i),r=!0,h||(v=de(n,"click",l[36]),h=!0)},p(m,d){const w={};d[0]&2048&&(w.drawings=m[11]),d[0]&33554432&&(w.stats=m[25]),t.$set(w)},i(m){r||(K(t.$$.fragment,m),Te(()=>{f&&f.end(1),o=Ne(e,Ge,{}),o.start()}),r=!0)},o(m){ie(t.$$.fragment,m),o&&o.invalidate(),f=ze(e,Ge,{}),r=!1},d(m){m&&_(e),cl(t),m&&f&&f.end(),h=!1,v()}}}function Tt(l){let e,t,s,n,a,i,o,f=Object.keys(Je),r=[];for(let h=0;h<f.length;h+=1)r[h]=Ct(ht(l,f,h));return{c(){e=y("div"),t=y("h3"),s=R("Views"),n=B();for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){e=D(h,"DIV",{class:!0});var v=k(e);t=D(v,"H3",{class:!0});var m=k(t);s=U(m,"Views"),m.forEach(_),n=I(v);for(let d=0;d<r.length;d+=1)r[d].l(v);v.forEach(_),this.h()},h(){b(t,"class","svelte-115161l"),b(e,"class","views svelte-115161l")},m(h,v){z(h,e,v),u(e,t),u(t,s),u(e,n);for(let m=0;m<r.length;m+=1)r[m].m(e,null);o=!0},p(h,v){if(v[0]&8192){f=Object.keys(Je);let m;for(m=0;m<f.length;m+=1){const d=ht(h,f,m);r[m]?r[m].p(d,v):(r[m]=Ct(d),r[m].c(),r[m].m(e,null))}for(;m<r.length;m+=1)r[m].d(1);r.length=f.length}},i(h){o||(Te(()=>{i&&i.end(1),a=Ne(e,Ce,{}),a.start()}),o=!0)},o(h){a&&a.invalidate(),i=ze(e,Ce,{}),o=!1},d(h){h&&_(e),Ee(r,h),h&&i&&i.end()}}}function Ct(l){let e,t=l[65]+"",s,n,a;function i(){return l[58](l[65])}return{c(){e=y("button"),s=R(t),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var f=k(e);s=U(f,t),f.forEach(_),this.h()},h(){b(e,"class","svelte-115161l"),je(e,"view-selected",l[13]===Je[l[65]])},m(o,f){z(o,e,f),u(e,s),n||(a=de(e,"click",i),n=!0)},p(o,f){l=o,f[0]&8192&&je(e,"view-selected",l[13]===Je[l[65]])},d(o){o&&_(e),n=!1,a()}}}function gs(l){let e,t,s,n,a,i,o,f,r,h,v,m,d,w,g,E=(l[24]?"Original":"Modify")+"",P,A,H,j,T,O,J,ne,Z,q,ee,ae,Q,oe,re,se,le,ue,X=l[2],W=[];for(let c=0;c<X.length;c+=1)W[c]=vt(mt(l,X,c));let ce=l[3],$=[];for(let c=0;c<ce.length;c+=1)$[c]=pt(dt(l,ce,c));let F=l[27]&&bt(l);f=new fs({props:{groups:Ke,levels:pl,colors:vl,dynamicVars:l[2],variable:l[7],metric:l[17],showPluralities:l[8],pluralityVars:l[5],periods:ul,breaks:l[30]}});let N=l[22]&&Pt(l),M=l[9]&&Vt(l);Q=new ss({props:{viewBox:l[13],labelSize:l[29],draggedBgs:l[10],data:l[1],path:hl,color:l[34],changingLines:l[24],neighbor:l[33],showPluralities:l[8],metric:l[17],period:l[6],tractVars:l[4],showComms:l[9],drawings:l[11],showPlans:l[22],plan:l[15],points:l[21],tractMesh:l[32],bgMesh:l[20],mesh:l[31],aggregates:l[16],obj:l[0],handleLabelClick:l[37],congressPlans:l[12],plans:l[19],startDrag:l[38],endDrag:l[39],handleMouseMove:l[40],viewCutoff:l[18],showOnlyFocusDistricts:l[28]}});let C=l[27]&&Tt(l);return{c(){e=y("div"),t=y("div"),s=y("select"),n=y("optgroup");for(let c=0;c<W.length;c+=1)W[c].c();a=y("optgroup");for(let c=0;c<$.length;c+=1)$[c].c();i=B(),F&&F.c(),o=B(),al(f.$$.fragment),r=B(),h=y("div"),v=y("h3"),m=y("button"),d=R("Plans \u2193"),w=B(),g=y("button"),P=R(E),A=B(),N&&N.c(),H=B(),j=y("div"),T=y("h3"),O=y("button"),J=R("Communities \u2193"),ne=B(),Z=y("button"),q=R("+"),ee=B(),M&&M.c(),ae=B(),al(Q.$$.fragment),oe=B(),C&&C.c(),this.h()},l(c){e=D(c,"DIV",{class:!0,style:!0});var V=k(e);t=D(V,"DIV",{class:!0});var G=k(t);s=D(G,"SELECT",{style:!0,class:!0});var S=k(s);n=D(S,"OPTGROUP",{label:!0});var L=k(n);for(let Pe=0;Pe<W.length;Pe+=1)W[Pe].l(L);L.forEach(_),a=D(S,"OPTGROUP",{label:!0});var be=k(a);for(let Pe=0;Pe<$.length;Pe+=1)$[Pe].l(be);be.forEach(_),S.forEach(_),i=I(G),F&&F.l(G),o=I(G),ol(f.$$.fragment,G),r=I(G),h=D(G,"DIV",{class:!0});var ke=k(h);v=D(ke,"H3",{class:!0});var x=k(v);m=D(x,"BUTTON",{});var Oe=k(m);d=U(Oe,"Plans \u2193"),Oe.forEach(_),w=I(x),g=D(x,"BUTTON",{class:!0});var Me=k(g);P=U(Me,E),Me.forEach(_),x.forEach(_),A=I(ke),N&&N.l(ke),ke.forEach(_),H=I(G),j=D(G,"DIV",{class:!0});var ge=k(j);T=D(ge,"H3",{class:!0});var ye=k(T);O=D(ye,"BUTTON",{});var Ie=k(O);J=U(Ie,"Communities \u2193"),Ie.forEach(_),ne=I(ye),Z=D(ye,"BUTTON",{});var Ue=k(Z);q=U(Ue,"+"),Ue.forEach(_),ye.forEach(_),ee=I(ge),M&&M.l(ge),ge.forEach(_),G.forEach(_),ae=I(V),ol(Q.$$.fragment,V),oe=I(V),C&&C.l(V),V.forEach(_),this.h()},h(){b(n,"label","Redistricting data"),b(a,"label","American Community Survey data"),ve(s,"width",l[3].includes(l[7])?"auto":"calc(var(--control-width) - 20px)"),b(s,"class","svelte-115161l"),l[7]===void 0&&Te(()=>l[49].call(s)),b(g,"class","subbutton svelte-115161l"),b(v,"class","svelte-115161l"),b(h,"class","stats svelte-115161l"),b(T,"class","svelte-115161l"),b(j,"class","stats svelte-115161l"),b(t,"class","controls svelte-115161l"),b(e,"class","container svelte-115161l"),ve(e,"cursor",l[23]?"crosshair":"auto"),ve(e,"--container-font",l[26]+"px"),ve(e,"--control-width",270+(l[26]-16)*10+"px"),Te(()=>l[59].call(e))},m(c,V){z(c,e,V),u(e,t),u(t,s),u(s,n);for(let G=0;G<W.length;G+=1)W[G].m(n,null);u(s,a);for(let G=0;G<$.length;G+=1)$[G].m(a,null);rl(s,l[7]),u(t,i),F&&F.m(t,null),u(t,o),fl(f,t,null),u(t,r),u(t,h),u(h,v),u(v,m),u(m,d),u(v,w),u(v,g),u(g,P),u(h,A),N&&N.m(h,null),u(t,H),u(t,j),u(j,T),u(T,O),u(O,J),u(T,ne),u(T,Z),u(Z,q),u(j,ee),M&&M.m(j,null),u(e,ae),fl(Q,e,null),u(e,oe),C&&C.m(e,null),re=Ht(e,l[59].bind(e)),se=!0,le||(ue=[de(window,"keydown",l[41]),de(s,"change",l[49]),de(m,"click",l[53]),de(g,"click",l[54]),de(O,"click",l[56]),de(Z,"click",l[57])],le=!0)},p(c,V){if(V[0]&4){X=c[2];let L;for(L=0;L<X.length;L+=1){const be=mt(c,X,L);W[L]?W[L].p(be,V):(W[L]=vt(be),W[L].c(),W[L].m(n,null))}for(;L<W.length;L+=1)W[L].d(1);W.length=X.length}if(V[0]&8){ce=c[3];let L;for(L=0;L<ce.length;L+=1){const be=dt(c,ce,L);$[L]?$[L].p(be,V):($[L]=pt(be),$[L].c(),$[L].m(a,null))}for(;L<$.length;L+=1)$[L].d(1);$.length=ce.length}(!se||V[0]&136)&&ve(s,"width",c[3].includes(c[7])?"auto":"calc(var(--control-width) - 20px)"),V[0]&140&&rl(s,c[7]),c[27]?F?(F.p(c,V),V[0]&134217728&&K(F,1)):(F=bt(c),F.c(),K(F,1),F.m(t,o)):F&&(Le(),ie(F,1,1,()=>{F=null}),Be());const G={};V[0]&4&&(G.dynamicVars=c[2]),V[0]&128&&(G.variable=c[7]),V[0]&131072&&(G.metric=c[17]),V[0]&256&&(G.showPluralities=c[8]),V[0]&32&&(G.pluralityVars=c[5]),V[0]&1073741824&&(G.breaks=c[30]),f.$set(G),(!se||V[0]&16777216)&&E!==(E=(c[24]?"Original":"Modify")+"")&&he(P,E),c[22]?N?(N.p(c,V),V[0]&4194304&&K(N,1)):(N=Pt(c),N.c(),K(N,1),N.m(h,null)):N&&(Le(),ie(N,1,1,()=>{N=null}),Be()),c[9]?M?(M.p(c,V),V[0]&512&&K(M,1)):(M=Vt(c),M.c(),K(M,1),M.m(j,null)):M&&(Le(),ie(M,1,1,()=>{M=null}),Be());const S={};V[0]&8192&&(S.viewBox=c[13]),V[0]&536870912&&(S.labelSize=c[29]),V[0]&1024&&(S.draggedBgs=c[10]),V[0]&2&&(S.data=c[1]),V[0]&16777216&&(S.changingLines=c[24]),V[0]&256&&(S.showPluralities=c[8]),V[0]&131072&&(S.metric=c[17]),V[0]&64&&(S.period=c[6]),V[0]&16&&(S.tractVars=c[4]),V[0]&512&&(S.showComms=c[9]),V[0]&2048&&(S.drawings=c[11]),V[0]&4194304&&(S.showPlans=c[22]),V[0]&32768&&(S.plan=c[15]),V[0]&2097152&&(S.points=c[21]),V[0]&1048576&&(S.bgMesh=c[20]),V[0]&65536&&(S.aggregates=c[16]),V[0]&1&&(S.obj=c[0]),V[0]&4096&&(S.congressPlans=c[12]),V[0]&524288&&(S.plans=c[19]),V[0]&262144&&(S.viewCutoff=c[18]),V[0]&268435456&&(S.showOnlyFocusDistricts=c[28]),Q.$set(S),c[27]?C?(C.p(c,V),V[0]&134217728&&K(C,1)):(C=Tt(c),C.c(),K(C,1),C.m(e,null)):C&&(Le(),ie(C,1,1,()=>{C=null}),Be()),(!se||V[0]&8388608)&&ve(e,"cursor",c[23]?"crosshair":"auto"),(!se||V[0]&67108864)&&ve(e,"--container-font",c[26]+"px"),(!se||V[0]&67108864)&&ve(e,"--control-width",270+(c[26]-16)*10+"px")},i(c){se||(K(F),K(f.$$.fragment,c),K(N),K(M),K(Q.$$.fragment,c),K(C),se=!0)},o(c){ie(F),ie(f.$$.fragment,c),ie(N),ie(M),ie(Q.$$.fragment,c),ie(C),se=!1},d(c){c&&_(e),Ee(W,c),Ee($,c),F&&F.d(),cl(f),N&&N.d(),M&&M.d(),cl(Q),C&&C.d(),re(),le=!1,dl(ue)}}}async function ks({fetch:l}){const e=await(await l(`${ml}/output_census.topojson`)).json(),t=qt(e.objects.census),s=Rt(e,t).features.map(Ol),n=["pop","cvap"],a=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(h=>[...n,"GEOID","senate","assembly","congress"].every(v=>!h.includes(v))&&h===h.toLowerCase()).map(h=>h.split("_")[0]);return new Set([...o,...r])},[])],i=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:Ut(t.geometries),dynamicVars:n,staticVars:a,idToIndex:i,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function ds(l,e,t){let s,n,a,i,{topoData:o,obj:f,neighbors:r,data:h,dynamicVars:v,staticVars:m,tractVars:d,pluralityVars:w,idToIndex:g}=e;const E=p=>Xe(o,f,p),P=hl(E((p,fe)=>Ae(p).substring(0,11)!==Ae(fe).substring(0,11)));let A=2765,H,j,T;Ft(async()=>{t(20,j=hl(Ol(E((fe,Y)=>Ae(fe)!==Ae(Y))))),t(18,A=6e3);const p=await Promise.all([Xt(),Zt()]);t(19,H=p[0]),t(21,T=p[1])});let O;const J=p=>h[p].properties[S];function ne(p){const fe=J(p),Y=new Set(r[p].map(J).filter(_e=>_e!==fe));if(Y.size===1)t(0,f.geometries[p].properties[S]=O=Y.values().next().value,f);else if(Y.has(O))t(0,f.geometries[p].properties[S]=O,f);else return;t(0,f)}let Z="present",q="pop";const ee={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let ae=!1;function Q({properties:p}){if(!p.ALAND)return"#fff";const fe=p[`${s}_total`];if(w.includes(s)){const Y=me=>p[`${s}_${me}`];if(Y(ul[0])===null)return"#eee";const _e=[...ul].sort((me,He)=>Y(He)-Y(me));return qe[ul.indexOf(_e[0])]}else if(m.includes(s)){if(!Ml(n(p)))return"#eee";if(fe<=10)return"#fff";for(let Y=1;Y<a.length;Y++)if(n(p)<a[Y])return qe[Y];return qe[a.length-1]}else{if(fe<=10)return"#fff";const Y=_e=>p[`${s}_${_e}`]/p[`${s}_total`];if(ae){const _e=Ke.filter(we=>Y(we)>.5)[0];if(_e!==void 0)return vl[_e]+pl[fe<130?0:fe<200?1:2];const me=[...Ke].sort((we,Se)=>Y(Se)-Y(we)),He=Y(me[0])-Y(me[1]);return vl[me[0]]+pl[He<.093?0:1]}else{const _e=ee[q];for(let me=1;me<_e.length;me++)if(Y("asian")<_e[me])return gl[me-1];return gl[_e.length-1]}}}let oe=!0,re,se,le,ue,X=[],W=[],ce;const $=async()=>t(12,ce=await $t());function F(p){const fe=typeof p[0]=="string"?p.map(we=>h[g[we]].properties):p.map(we=>we.properties),Y=(we,Se)=>fe.reduce((Mt,bl)=>Mt+(bl[we]||0)*(Se&&bl[Se]||1),0),_e=we=>Y(we,"pop20_total")/Y("pop20_total"),me=(we,Se)=>Y(`${we}_${Se}`)/Y(`${we}_total`),He={income:_e("income"),hhlang:me("hhlang","asian"),benefits:me("families","benefits"),pop20_total:Y("pop20_total")};return["pop20","cvap19","pop10","cvap10"].forEach(we=>Ke.forEach(Se=>He[we+Se]=me(we,Se))),He}const N=p=>t(11,W=W.filter((fe,Y)=>Y!==p));async function M(){try{await fetch(`${ml}/data.json`,{method:"POST",body:JSON.stringify(W)})}catch(p){console.error(p)}}let C;async function c(){try{const p=await fetch(`${ml}/data.json`);t(11,W=(await p.json()).map(fe=>Pl(El({},fe),{stats:F(fe.ids)})))}catch(p){console.error(p)}}let V=Je.Brooklyn,G,S="assembly",L=[],be={};function ke(p){L.includes(p)?t(16,L=L.filter(fe=>fe!==p)):t(16,L=[...L,p])}const x=()=>t(46,le=!0),Oe=()=>t(46,le=t(23,se=!1)),Me=p=>se&&le&&(X.length===0?t(10,X=[Ae(p)]):X.push(Ae(p)));let ge=18,ye=!1,Ie=!0;function Ue({key:p}){p==="="&&t(26,ge+=2),p==="-"&&t(26,ge-=2),p==="v"&&t(27,ye=!ye),p==="f"&&t(28,Ie=!Ie)}const Pe=[[]];function Ze(){q=Vl(this),t(7,q),t(3,m),t(2,v)}function $e(){Z=this.__value,t(6,Z)}const xe=()=>t(8,ae=!ae),Re=()=>{t(22,oe=!oe),t(9,re=!1)},el=()=>t(24,ue=!ue);function ll(){S=Vl(this),t(15,S)}const tl=()=>{t(9,re=!re),t(22,oe=!1)},Qe=()=>t(23,se=!0),At=p=>t(13,V=Je[p]);function Ot(){G=this.clientWidth,t(14,G)}return l.$$set=p=>{"topoData"in p&&t(42,o=p.topoData),"obj"in p&&t(0,f=p.obj),"neighbors"in p&&t(43,r=p.neighbors),"data"in p&&t(1,h=p.data),"dynamicVars"in p&&t(2,v=p.dynamicVars),"staticVars"in p&&t(3,m=p.staticVars),"tractVars"in p&&t(4,d=p.tractVars),"pluralityVars"in p&&t(5,w=p.pluralityVars),"idToIndex"in p&&t(44,g=p.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&200&&t(17,s=m.includes(q)?q:q+(Z==="past"?10:q==="cvap"?19:20)),l.$$.dirty[0]&131072&&t(48,n={income:p=>p[s],hhlang:p=>p[`${s}_asian`]/p[`${s}_total`],graduates:p=>(p[`${s}_hs_grad`]+p[`${s}_ba_above`])/p[`${s}_total`],families:p=>p[`${s}_benefits`]/p[`${s}_total`],workers:p=>p[`${s}_publictransport`]/p[`${s}_total`]}[s]),l.$$.dirty[0]&131470|l.$$.dirty[1]&147456&&t(30,a=v.includes(q)&&!ae?ee[q]:ee[s]||!m.includes(s)||s==="asiaentry"||t(45,ee[s]=Gt(h.map(p=>n(p.properties)).filter(Ml),6),ee)),l.$$.dirty[0]&3074|l.$$.dirty[1]&32768&&!le&&X.length>0){if(X[0]===X[X.length-1]){const p=new Set(X),fe=Wt(E((_e,me)=>Jt(p.has(Ae(_e)),p.has(Ae(me)))).coordinates.flat()),Y=h.filter(_e=>Yt(Kt(_e.geometry.coordinates[0]),fe)).map(Ae);t(11,W=[...W,{outline:hl({type:"LineString",coordinates:fe}),ids:Y,stats:F(Y)}])}t(10,X=[])}if(l.$$.dirty[0]&36864&&S.startsWith("congress")&&ce===void 0&&$(),l.$$.dirty[0]&512|l.$$.dirty[1]&65536&&re&&!C&&(c(),t(47,C=!0)),l.$$.dirty[0]&57344&&t(29,i=(S.endsWith("_names")?.9:1.1)/((G-410)/V[2])),l.$$.dirty[0]&98305)for(let p=0;p<L.length;p++){const[fe,Y]=L[p].split(",");fe===S&&t(25,be[L[p]]=F(f.geometries.filter(({properties:_e})=>Y===""+_e[S])),be)}},[f,h,v,m,d,w,Z,q,ae,re,X,W,ce,V,G,S,L,s,A,H,j,T,oe,se,ue,be,ge,ye,Ie,i,a,E,P,ne,Q,N,M,ke,x,Oe,Me,Ue,o,r,g,ee,le,C,n,Ze,$e,Pe,xe,Re,el,ll,tl,Qe,At,Ot]}class ws extends sl{constructor(e){super();nl(this,e,ds,gs,il,{topoData:42,obj:0,neighbors:43,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:44},null,[-1,-1,-1])}}export{ws as default,ks as load};

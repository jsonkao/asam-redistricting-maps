var xt=Object.defineProperty,es=Object.defineProperties;var ls=Object.getOwnPropertyDescriptors;var Il=Object.getOwnPropertySymbols;var ts=Object.prototype.hasOwnProperty,ss=Object.prototype.propertyIsEnumerable;var Nl=(l,e,t)=>e in l?xt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Ll=(l,e)=>{for(var t in e||(e={}))ts.call(e,t)&&Nl(l,t,e[t]);if(Il)for(var t of Il(e))ss.call(e,t)&&Nl(l,t,e[t]);return l},Bl=(l,e)=>es(l,ls(e));import{S as Ze,i as $e,s as xe,e as P,t as z,c as D,a as b,g as R,d as h,b as p,J as ne,f as O,H as u,h as oe,l as X,K as we,L as Ee,M as Ie,N as re,O as Dl,P as al,Q as Se,R as Ue,T as Ae,U as qe,V as ve,x as Q,r as Be,u as te,w as je,W as ol,k as L,n as B,X as Vl,Y as ns,Z as is,I as Fe,_ as as,$ as os,D as jl,E as zl,F as Rl,G as Hl,a0 as vl,a1 as rs,a2 as fs,j as Ge,m as We,o as Ye,v as Ke,a3 as el,a4 as cs,A as us,a5 as hs,a6 as _s,a7 as ds,a8 as gs,a9 as Tl}from"../chunks/vendor-10aa861a.js";import{b as yl}from"../chunks/paths-28a87002.js";import{i as Ce,D as Ul,p as ue,m as ll,c as Qe,a as ql,d as Fl,u as ms,r as Gl,b as bl,e as Wl,x as ps,g as vs,f as bs,h as ks,j as ws,k as Es}from"../chunks/utils-218ed524.js";const Ml={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},Sl=["44","99","ee"],tl=["asian","black","hispanic","white"],kl=["1990_earlier","1990_1999","2000_2009","2010_later"],wl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race / \u4EBA\u53E3\u5212\u5206: \u5404\u79CD\u65CF\u7FA4"},El=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],sl=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],Ps={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},nl={Chinatown:[80,500,300,220],"Chinatown Wide":[80,430,500,600],Brooklyn:[20,670,600,520],Queens:[200,290,775,600],"All of NYC":[20,0,975,1220]},Ds={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};if(typeof window=="undefined"){const[l,e,t,s]=nl[Object.keys(nl)[0]];console.log(`${l},${e},${l+t},${e+s}`)}function Yl(l,e,t){const s=l.slice();return s[49]=e[t],s}function Kl(l,e,t){const s=l.slice();return s[52]=e[t].properties,s[53]=e[t].geometry.coordinates[0],s[54]=e[t].geometry.coordinates[1],s}function Ql(l,e,t){const s=l.slice();return s[57]=e[t].outline,s}function Jl(l,e,t){const s=l.slice();return s[49]=e[t],s[61]=t,s}function Xl(l){let e,t=l[35].label+"",s;return{c(){e=P("p"),s=z(t),this.h()},l(n){e=D(n,"P",{class:!0,style:!0});var i=b(e);s=R(i,t),i.forEach(h),this.h()},h(){p(e,"class","street-inspector svelte-12yd007"),ne(e,"left",l[35].x+"px"),ne(e,"top","calc("+l[35].y+"px - 1.2em)")},m(n,i){O(n,e,i),u(e,s)},p(n,i){i[1]&16&&t!==(t=n[35].label+"")&&oe(s,t),i[1]&16&&ne(e,"left",n[35].x+"px"),i[1]&16&&ne(e,"top","calc("+n[35].y+"px - 1.2em)")},d(n){n&&h(e)}}}function Zl(l){let e,t,s,n,i;function a(){return l[39](l[61])}function o(){return l[40](l[49])}function f(){return l[41](l[49])}return{c(){e=we("path"),this.h()},l(r){e=Ee(r,"path",{d:!0,fill:!0,class:!0}),b(e).forEach(h),this.h()},h(){p(e,"d",t=l[5](l[49])),p(e,"fill",s=l[6](l[49],l[10],l[11],l[9])),p(e,"class","svelte-12yd007"),Ie(e,"head",l[3][0]===Ce(l[49]))},m(r,c){O(r,e,c),n||(i=[re(e,"click",a),re(e,"contextmenu",Dl(o)),re(e,"mousemove",Dl(f))],n=!0)},p(r,c){l=r,c[0]&48&&t!==(t=l[5](l[49]))&&p(e,"d",t),c[0]&3664&&s!==(s=l[6](l[49],l[10],l[11],l[9]))&&p(e,"fill",s),c[0]&24&&Ie(e,"head",l[3][0]===Ce(l[49]))},d(r){r&&h(e),n=!1,al(i)}}}function $l(l,e){let t,s,n=e[61]<e[27]&&Zl(e);return{key:l,first:null,c(){t=X(),n&&n.c(),s=X(),this.h()},l(i){t=X(),n&&n.l(i),s=X(),this.h()},h(){this.first=t},m(i,a){O(i,t,a),n&&n.m(i,a),O(i,s,a)},p(i,a){e=i,e[61]<e[27]?n?n.p(e,a):(n=Zl(e),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(i){i&&h(t),n&&n.d(i),i&&h(s)}}}function xl(l){let e,t;return{c(){e=we("path"),this.h()},l(s){e=Ee(s,"path",{class:!0,d:!0}),b(e).forEach(h),this.h()},h(){p(e,"class","mesh-bg svelte-12yd007"),p(e,"d",t=l[12].includes(l[10])?l[17]:l[18])},m(s,n){O(s,e,n)},p(s,n){n[0]&398336&&t!==(t=s[12].includes(s[10])?s[17]:s[18])&&p(e,"d",t)},d(s){s&&h(e)}}}function et(l){let e,t,s,n,i=l[13],a=[];for(let o=0;o<i.length;o+=1)a[o]=lt(Ql(l,i,o));return{c(){e=we("g");for(let o=0;o<a.length;o+=1)a[o].c()},l(o){e=Ee(o,"g",{});var f=b(e);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(h)},m(o,f){O(o,e,f);for(let r=0;r<a.length;r+=1)a[r].m(e,null);n=!0},p(o,f){if(f[0]&8192){i=o[13];let r;for(r=0;r<i.length;r+=1){const c=Ql(o,i,r);a[r]?a[r].p(c,f):(a[r]=lt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i(o){n||(Se(()=>{s&&s.end(1),t=Ue(e,Ae,{}),t.start()}),n=!0)},o(o){t&&t.invalidate(),s=qe(e,Ae,{}),n=!1},d(o){o&&h(e),ve(a,o),o&&s&&s.end()}}}function lt(l){let e,t;return{c(){e=we("path"),this.h()},l(s){e=Ee(s,"path",{class:!0,d:!0}),b(e).forEach(h),this.h()},h(){p(e,"class","mesh-community svelte-12yd007"),p(e,"d",t=l[57])},m(s,n){O(s,e,n)},p(s,n){n[0]&8192&&t!==(t=s[57])&&p(e,"d",t)},d(s){s&&h(e)}}}function tt(l){let e,t,s,n,i,a;return{c(){e=we("g"),t=we("path"),this.h()},l(o){e=Ee(o,"g",{});var f=b(e);t=Ee(f,"path",{class:!0,d:!0}),b(t).forEach(h),f.forEach(h),this.h()},h(){p(t,"class","mesh-district svelte-12yd007"),p(t,"d",s=l[37](l[15],l[23],l[22],l[28])),Ie(t,"showPluralities",l[9])},m(o,f){O(o,e,f),u(e,t),a=!0},p(o,f){(!a||f[0]&281051136&&s!==(s=o[37](o[15],o[23],o[22],o[28])))&&p(t,"d",s),f[0]&512&&Ie(t,"showPluralities",o[9])},i(o){a||(Se(()=>{i&&i.end(1),n=Ue(e,Ae,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=qe(e,Ae,{}),a=!1},d(o){o&&h(e),o&&i&&i.end()}}}function st(l){let e,t,s,n,i,a;return{c(){e=we("g"),t=we("path"),this.h()},l(o){e=Ee(o,"g",{});var f=b(e);t=Ee(f,"path",{class:!0,d:!0}),b(t).forEach(h),f.forEach(h),this.h()},h(){p(t,"class","mesh-district svelte-12yd007"),p(t,"d",s=l[5](l[19](l[42],l[0])))},m(o,f){O(o,e,f),u(e,t),a=!0},p(o,f){(!a||f[0]&557089&&s!==(s=o[5](o[19](o[42],o[0]))))&&p(t,"d",s)},i(o){a||(Se(()=>{i&&i.end(1),n=Ue(e,Ae,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=qe(e,Ae,{}),a=!1},d(o){o&&h(e),o&&i&&i.end()}}}function nt(l){let e,t,s,n,i,a=l[16],o=[];for(let c=0;c<a.length;c+=1)o[c]=at(Kl(l,a,c));const f=c=>te(o[c],1,1,()=>{o[c]=null});let r=l[34]&&ot(l);return{c(){e=we("g");for(let c=0;c<o.length;c+=1)o[c].c();t=X(),r&&r.c(),this.h()},l(c){e=Ee(c,"g",{class:!0});var _=b(e);for(let d=0;d<o.length;d+=1)o[d].l(_);t=X(),r&&r.l(_),_.forEach(h),this.h()},h(){p(e,"class","labels svelte-12yd007")},m(c,_){O(c,e,_);for(let d=0;d<o.length;d+=1)o[d].m(e,null);u(e,t),r&&r.m(e,null),i=!0},p(c,_){if(_[0]&3244032|_[1]&44){a=c[16];let d;for(d=0;d<a.length;d+=1){const m=Kl(c,a,d);o[d]?(o[d].p(m,_),Q(o[d],1)):(o[d]=at(m),o[d].c(),Q(o[d],1),o[d].m(e,t))}for(Be(),d=a.length;d<o.length;d+=1)f(d);je()}c[34]?r?r.p(c,_):(r=ot(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){if(!i){for(let _=0;_<a.length;_+=1)Q(o[_]);Se(()=>{n&&n.end(1),s=Ue(e,Ae,{}),s.start()}),i=!0}},o(c){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)te(o[_]);s&&s.invalidate(),n=qe(e,Ae,{}),i=!1},d(c){c&&h(e),ve(o,c),r&&r.d(),c&&n&&n.end()}}}function it(l){let e,t=l[52][l[15]]+"",s,n,i,a,o,f,r,c;function _(){return l[43](l[52])}function d(){return l[44](l[52])}return{c(){e=we("text"),s=z(t),this.h()},l(m){e=Ee(m,"text",{x:!0,y:!0,class:!0});var v=b(e);s=R(v,t),v.forEach(h),this.h()},h(){p(e,"x",n=l[53]),p(e,"y",i=l[54]),p(e,"class","svelte-12yd007"),Ie(e,"chosen",l[20].includes(`${l[15]},${l[52][l[15]]}`))},m(m,v){O(m,e,v),u(e,s),f=!0,r||(c=[re(e,"click",_),re(e,"mousemove",d),re(e,"mouseout",l[45]),re(e,"blur",void 0)],r=!0)},p(m,v){l=m,(!f||v[0]&98304)&&t!==(t=l[52][l[15]]+"")&&oe(s,t),(!f||v[0]&65536&&n!==(n=l[53]))&&p(e,"x",n),(!f||v[0]&65536&&i!==(i=l[54]))&&p(e,"y",i),v[0]&1146880&&Ie(e,"chosen",l[20].includes(`${l[15]},${l[52][l[15]]}`))},i(m){f||(Se(()=>{o&&o.end(1),a=Ue(e,Ae,{}),a.start()}),f=!0)},o(m){a&&a.invalidate(),o=qe(e,Ae,{}),f=!1},d(m){m&&h(e),m&&o&&o.end(),r=!1,al(c)}}}function at(l){let e=l[15]in l[52]&&(!l[36]||l[36]&&l[33].includes(l[52][l[15]])),t,s,n=e&&it(l);return{c(){n&&n.c(),t=X()},l(i){n&&n.l(i),t=X()},m(i,a){n&&n.m(i,a),O(i,t,a),s=!0},p(i,a){a[0]&98304|a[1]&36&&(e=i[15]in i[52]&&(!i[36]||i[36]&&i[33].includes(i[52][i[15]]))),e?n?(n.p(i,a),a[0]&98304|a[1]&36&&Q(n,1)):(n=it(i),n.c(),Q(n,1),n.m(t.parentNode,t)):n&&(Be(),te(n,1,1,()=>{n=null}),je())},i(i){s||(Q(n),s=!0)},o(i){te(n),s=!1},d(i){n&&n.d(i),i&&h(t)}}}function ot(l){let e,t;return{c(){e=we("path"),this.h()},l(s){e=Ee(s,"path",{class:!0,d:!0}),b(e).forEach(h),this.h()},h(){p(e,"class","mesh-onhover mesh-district svelte-12yd007"),p(e,"d",t=l[0]&&l[5](ol(l[32],{type:l[0].type,geometries:l[0].geometries.filter(l[46])})))},m(s,n){O(s,e,n)},p(s,n){n[0]&32801|n[1]&10&&t!==(t=s[0]&&s[5](ol(s[32],{type:s[0].type,geometries:s[0].geometries.filter(s[46])})))&&p(e,"d",t)},d(s){s&&h(e)}}}function rt(l){let e,t,s,n=l[31],i=[];for(let a=0;a<n.length;a+=1)i[a]=ft(Yl(l,n,a));return{c(){e=we("g");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=Ee(a,"g",{class:!0});var o=b(e);for(let f=0;f<i.length;f+=1)i[f].l(o);o.forEach(h),this.h()},h(){p(e,"class","streets svelte-12yd007"),Ie(e,"showStreets",l[29])},m(a,o){O(a,e,o);for(let f=0;f<i.length;f+=1)i[f].m(e,null);t||(s=re(e,"mousemove",l[48]),t=!0)},p(a,o){if(o[0]&536870944|o[1]&129){n=a[31];let f;for(f=0;f<n.length;f+=1){const r=Yl(a,n,f);i[f]?i[f].p(r,o):(i[f]=ft(r),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=n.length}o[0]&536870912&&Ie(e,"showStreets",a[29])},d(a){a&&h(e),ve(i,a),t=!1,s()}}}function ft(l){let e,t,s,n;function i(...a){return l[47](l[49],...a)}return{c(){e=we("path"),this.h()},l(a){e=Ee(a,"path",{d:!0,class:!0}),b(e).forEach(h),this.h()},h(){p(e,"d",t=l[5](l[49])),p(e,"class","svelte-12yd007")},m(a,o){O(a,e,o),s||(n=re(e,"click",Dl(i)),s=!0)},p(a,o){l=a,o[0]&32|o[1]&1&&t!==(t=l[5](l[49]))&&p(e,"d",t)},d(a){a&&h(e),s=!1,n()}}}function Vs(l){let e,t,s,n=[],i=new Map,a,o,f=l[14].includes("communities"),r,c=l[14].includes("plans")&&!l[7],_,d,m=l[14].includes("plans")||l[7],v,k,S,T,C,H=l[35]&&Xl(l),U=l[4];const J=I=>Ce(I[49]);for(let I=0;I<U.length;I+=1){let y=Jl(l,U,I),g=J(y);i.set(g,n[I]=$l(g,y))}let K=l[18]&&xl(l),F=f&&et(l),N=c&&tt(l),j=l[7]&&st(l),M=m&&nt(l),A=l[31]&&rt(l);return{c(){H&&H.c(),e=L(),t=we("svg"),s=we("g");for(let I=0;I<n.length;I+=1)n[I].c();a=we("g"),K&&K.c(),o=X(),F&&F.c(),r=X(),N&&N.c(),_=X(),j&&j.c(),d=X(),M&&M.c(),v=X(),A&&A.c(),this.h()},l(I){H&&H.l(I),e=B(I),t=Ee(I,"svg",{viewBox:!0,style:!0,class:!0});var y=b(t);s=Ee(y,"g",{class:!0});var g=b(s);for(let G=0;G<n.length;G+=1)n[G].l(g);g.forEach(h),a=Ee(y,"g",{class:!0});var V=b(a);K&&K.l(V),o=X(),F&&F.l(V),r=X(),N&&N.l(V),_=X(),j&&j.l(V),d=X(),M&&M.l(V),v=X(),A&&A.l(V),V.forEach(h),y.forEach(h),this.h()},h(){p(s,"class","block-groups svelte-12yd007"),p(a,"class","meshes svelte-12yd007"),p(t,"viewBox",k=l[1].join(" ")),ne(t,"--font-size",(l[2]||.8)+"em"),ne(t,"--mesh-thin",l[30]?.6:.2),ne(t,"--mesh-thick",l[30]?2.2:1.1),p(t,"class","svelte-12yd007")},m(I,y){H&&H.m(I,y),O(I,e,y),O(I,t,y),u(t,s);for(let g=0;g<n.length;g+=1)n[g].m(s,null);u(t,a),K&&K.m(a,null),u(a,o),F&&F.m(a,null),u(a,r),N&&N.m(a,null),u(a,_),j&&j.m(a,null),u(a,d),M&&M.m(a,null),u(a,v),A&&A.m(a,null),S=!0,T||(C=[re(t,"mousedown",function(){Vl(l[24])&&l[24].apply(this,arguments)}),re(t,"mouseup",function(){Vl(l[25])&&l[25].apply(this,arguments)})],T=!0)},p(I,y){l=I,l[35]?H?H.p(l,y):(H=Xl(l),H.c(),H.m(e.parentNode,e)):H&&(H.d(1),H=null),y[0]&201363448&&(U=l[4],n=ns(n,y,J,1,l,U,i,s,is,$l,null,Jl)),l[18]?K?K.p(l,y):(K=xl(l),K.c(),K.m(a,o)):K&&(K.d(1),K=null),y[0]&16384&&(f=l[14].includes("communities")),f?F?(F.p(l,y),y[0]&16384&&Q(F,1)):(F=et(l),F.c(),Q(F,1),F.m(a,r)):F&&(Be(),te(F,1,1,()=>{F=null}),je()),y[0]&16512&&(c=l[14].includes("plans")&&!l[7]),c?N?(N.p(l,y),y[0]&16512&&Q(N,1)):(N=tt(l),N.c(),Q(N,1),N.m(a,_)):N&&(Be(),te(N,1,1,()=>{N=null}),je()),l[7]?j?(j.p(l,y),y[0]&128&&Q(j,1)):(j=st(l),j.c(),Q(j,1),j.m(a,d)):j&&(Be(),te(j,1,1,()=>{j=null}),je()),y[0]&16512&&(m=l[14].includes("plans")||l[7]),m?M?(M.p(l,y),y[0]&16512&&Q(M,1)):(M=nt(l),M.c(),Q(M,1),M.m(a,v)):M&&(Be(),te(M,1,1,()=>{M=null}),je()),l[31]?A?A.p(l,y):(A=rt(l),A.c(),A.m(a,null)):A&&(A.d(1),A=null),(!S||y[0]&2&&k!==(k=l[1].join(" ")))&&p(t,"viewBox",k),(!S||y[0]&4)&&ne(t,"--font-size",(l[2]||.8)+"em"),(!S||y[0]&1073741824)&&ne(t,"--mesh-thin",l[30]?.6:.2),(!S||y[0]&1073741824)&&ne(t,"--mesh-thick",l[30]?2.2:1.1)},i(I){S||(Q(F),Q(N),Q(j),Q(M),S=!0)},o(I){te(F),te(N),te(j),te(M),S=!1},d(I){H&&H.d(I),I&&h(e),I&&h(t);for(let y=0;y<n.length;y+=1)n[y].d();K&&K.d(),F&&F.d(),N&&N.d(),j&&j.d(),M&&M.d(),A&&A.d(),T=!1,al(C)}}}function Ts(l,e,t){let s,n,i,{viewBox:a,labelSize:o,draggedBgs:f,data:r,path:c,color:_,changingLines:d,neighbor:m,showPluralities:v,metric:k,period:S,tractVars:T,drawings:C,panels:H,plan:U,points:J=[],tractMesh:K,bgMesh:F,mesh:N,aggregates:j,obj:M,handleLabelClick:A,congressPlans:I,plans:y,startDrag:g,endDrag:V,handleMouseMove:G,viewCutoff:ee,showOnlyFocusDistricts:ie,showStreets:ce,presentationMode:W,streets:Y}=e;function me(){if(!!i)return c(n?ol(i,{type:M.type,geometries:M.geometries.filter(w=>s.includes(w.properties[U]))}):ol(i,M,(w,de)=>Ul(w)!==Ul(de)))}let he,le;function Z({pageX:w,pageY:de},{properties:{Label:Je}}){t(35,le={x:w,y:de,label:Je})}const $=w=>d&&U.includes("_")&&m(w),x=w=>console.log(w.properties),De=w=>G(w),Ve=(w,de)=>w.properties[U]!==de.properties[U],be=w=>A(`${U},${w[U]}`),ae=w=>t(34,he=w[U]),Pe=()=>t(34,he=null),ke=w=>he===w.properties[U],Te=(w,de)=>ce&&Z(de,w),Me=()=>t(35,le=null);return l.$$set=w=>{"viewBox"in w&&t(1,a=w.viewBox),"labelSize"in w&&t(2,o=w.labelSize),"draggedBgs"in w&&t(3,f=w.draggedBgs),"data"in w&&t(4,r=w.data),"path"in w&&t(5,c=w.path),"color"in w&&t(6,_=w.color),"changingLines"in w&&t(7,d=w.changingLines),"neighbor"in w&&t(8,m=w.neighbor),"showPluralities"in w&&t(9,v=w.showPluralities),"metric"in w&&t(10,k=w.metric),"period"in w&&t(11,S=w.period),"tractVars"in w&&t(12,T=w.tractVars),"drawings"in w&&t(13,C=w.drawings),"panels"in w&&t(14,H=w.panels),"plan"in w&&t(15,U=w.plan),"points"in w&&t(16,J=w.points),"tractMesh"in w&&t(17,K=w.tractMesh),"bgMesh"in w&&t(18,F=w.bgMesh),"mesh"in w&&t(19,N=w.mesh),"aggregates"in w&&t(20,j=w.aggregates),"obj"in w&&t(0,M=w.obj),"handleLabelClick"in w&&t(21,A=w.handleLabelClick),"congressPlans"in w&&t(22,I=w.congressPlans),"plans"in w&&t(23,y=w.plans),"startDrag"in w&&t(24,g=w.startDrag),"endDrag"in w&&t(25,V=w.endDrag),"handleMouseMove"in w&&t(26,G=w.handleMouseMove),"viewCutoff"in w&&t(27,ee=w.viewCutoff),"showOnlyFocusDistricts"in w&&t(28,ie=w.showOnlyFocusDistricts),"showStreets"in w&&t(29,ce=w.showStreets),"presentationMode"in w&&t(30,W=w.presentationMode),"streets"in w&&t(31,Y=w.streets)},l.$$.update=()=>{l.$$.dirty[0]&32768&&t(33,s=Ds[U]),l.$$.dirty[0]&268435456|l.$$.dirty[1]&4&&t(36,n=ie&&s),l.$$.dirty[0]&12615680&&t(32,i=U.startsWith("congress")?I:y),l.$$.dirty[0]&32768|l.$$.dirty[1]&2&&t(0,M=i?i.objects[U]:void 0)},[M,a,o,f,r,c,_,d,m,v,k,S,T,C,H,U,J,K,F,N,j,A,I,y,g,V,G,ee,ie,ce,W,Y,i,s,he,le,n,me,Z,$,x,De,Ve,be,ae,Pe,ke,Te,Me]}class ys extends Ze{constructor(e){super();$e(this,e,Ts,Vs,xe,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,drawings:13,panels:14,plan:15,points:16,tractMesh:17,bgMesh:18,mesh:19,aggregates:20,obj:0,handleLabelClick:21,congressPlans:22,plans:23,startDrag:24,endDrag:25,handleMouseMove:26,viewCutoff:27,showOnlyFocusDistricts:28,showStreets:29,presentationMode:30,streets:31},null,[-1,-1])}}function ct(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ut(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ht(l,e,t){const s=l.slice();return s[16]=e[t],s}function _t(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function dt(l,e,t){const s=l.slice();return s[10]=e[t],s}function gt(l,e,t){const s=l.slice();return s[13]=e[t],s}function Ms(l){let e,t,s=l[9],n=[];for(let o=0;o<s.length;o+=1)n[o]=mt(ut(l,s,o));let i=l[9],a=[];for(let o=0;o<i.length;o+=1)a[o]=pt(ct(l,i,o));return{c(){e=P("div");for(let o=0;o<n.length;o+=1)n[o].c();t=L();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0});var f=b(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=B(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(h),this.h()},h(){p(e,"class","color-legend svelte-6sr79v"),ne(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.9em)"),Ie(e,"pctasian",l[3].includes(l[4]))},m(o,f){O(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);u(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const c=ut(o,s,r);n[r]?n[r].p(c,f):(n[r]=mt(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&536){i=o[9];let r;for(r=0;r<i.length;r+=1){const c=ct(o,i,r);a[r]?a[r].p(c,f):(a[r]=pt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&24&&ne(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.9em)"),f&24&&Ie(e,"pctasian",o[3].includes(o[4]))},d(o){o&&h(e),ve(n,o),ve(a,o)}}}function Ss(l){let e,t,s=l[8],n=[];for(let o=0;o<s.length;o+=1)n[o]=vt(_t(l,s,o));let i=l[8],a=[];for(let o=0;o<i.length;o+=1)a[o]=bt(ht(l,i,o));return{c(){e=P("div");for(let o=0;o<n.length;o+=1)n[o].c();t=L();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0});var f=b(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=B(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(h),this.h()},h(){p(e,"class","color-legend plurality-legend svelte-6sr79v")},m(o,f){O(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);u(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const c=_t(o,s,r);n[r]?n[r].p(c,f):(n[r]=vt(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&256){i=o[8];let r;for(r=0;r<i.length;r+=1){const c=ht(o,i,r);a[r]?a[r].p(c,f):(a[r]=bt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},d(o){o&&h(e),ve(n,o),ve(a,o)}}}function As(l){let e,t,s,n,i,a,o,f,r,c,_,d,m=l[0],v=[];for(let k=0;k<m.length;k+=1)v[k]=wt(dt(l,m,k));return{c(){e=P("div");for(let k=0;k<v.length;k+=1)v[k].c();t=L(),s=P("p"),n=P("span"),i=z("Weak plurality"),a=L(),o=P("p"),f=L(),r=P("p"),c=z("Majority"),_=L(),d=P("p"),this.h()},l(k){e=D(k,"DIV",{class:!0});var S=b(e);for(let U=0;U<v.length;U+=1)v[U].l(S);t=B(S),s=D(S,"P",{class:!0});var T=b(s);n=D(T,"SPAN",{});var C=b(n);i=R(C,"Weak plurality"),C.forEach(h),T.forEach(h),a=B(S),o=D(S,"P",{class:!0}),b(o).forEach(h),f=B(S),r=D(S,"P",{class:!0});var H=b(r);c=R(H,"Majority"),H.forEach(h),_=B(S),d=D(S,"P",{class:!0}),b(d).forEach(h),S.forEach(h),this.h()},h(){p(s,"class","col-head svelte-6sr79v"),p(o,"class","col-head svelte-6sr79v"),p(r,"class","col-head svelte-6sr79v"),p(d,"class","col-head svelte-6sr79v"),p(e,"class","legend svelte-6sr79v")},m(k,S){O(k,e,S);for(let T=0;T<v.length;T+=1)v[T].m(e,null);u(e,t),u(e,s),u(s,n),u(n,i),u(e,a),u(e,o),u(e,f),u(e,r),u(r,c),u(e,_),u(e,d)},p(k,S){if(S&7){m=k[0];let T;for(T=0;T<m.length;T+=1){const C=dt(k,m,T);v[T]?v[T].p(C,S):(v[T]=wt(C),v[T].c(),v[T].m(e,t))}for(;T<v.length;T+=1)v[T].d(1);v.length=m.length}},d(k){k&&h(e),ve(v,k)}}}function mt(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(h),this.h()},h(){ne(e,"background-color",l[3].includes(l[4])?El[l[20]]:sl[l[20]])},m(t,s){O(t,e,s)},p(t,s){s&24&&ne(e,"background-color",t[3].includes(t[4])?El[t[20]]:sl[t[20]])},d(t){t&&h(e)}}}function pt(l){let e,t,s=(l[9][l[9].length-1]<1?ue(l[21],0):l[9][l[9].length-1]>1e3?ll(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?"+ Asian <br/>(\u4E9A\u88D4\u4EBA\u53E3)":"")+"",n;return{c(){e=P("p"),t=new as,n=L(),this.h()},l(i){e=D(i,"P",{class:!0});var a=b(e);t=os(a),n=B(a),a.forEach(h),this.h()},h(){t.a=n,p(e,"class","svelte-6sr79v")},m(i,a){O(i,e,a),t.m(s,e),u(e,n)},p(i,a){a&536&&s!==(s=(i[9][i[9].length-1]<1?ue(i[21],0):i[9][i[9].length-1]>1e3?ll(i[21]):i[21])+(i[3].includes(i[4])&&i[20]===i[9].length-1?"+ Asian <br/>(\u4E9A\u88D4\u4EBA\u53E3)":"")+"")&&t.p(s)},d(i){i&&h(e)}}}function vt(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(h),this.h()},h(){ne(e,"background-color",sl[l[20]])},m(t,s){O(t,e,s)},p:Fe,d(t){t&&h(e)}}}function bt(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=P("p"),s=z(t),this.h()},l(n){e=D(n,"P",{class:!0});var i=b(e);s=R(i,t),i.forEach(h),this.h()},h(){p(e,"class","svelte-6sr79v")},m(n,i){O(n,e,i),u(e,s)},p(n,i){i&256&&t!==(t=n[16].replace("_","-")+"")&&oe(s,t)},d(n){n&&h(e)}}}function kt(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(h),this.h()},h(){ne(e,"background-color",l[2][l[10]]+l[13])},m(t,s){O(t,e,s)},p(t,s){s&7&&ne(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&h(e)}}}function wt(l){let e,t,s=Qe(l[10])+"",n,i=l[1],a=[];for(let o=0;o<i.length;o+=1)a[o]=kt(gt(l,i,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=L(),t=P("p"),n=z(s),this.h()},l(o){for(let r=0;r<a.length;r+=1)a[r].l(o);e=B(o),t=D(o,"P",{class:!0});var f=b(t);n=R(f,s),f.forEach(h),this.h()},h(){p(t,"class","row-label svelte-6sr79v")},m(o,f){for(let r=0;r<a.length;r+=1)a[r].m(o,f);O(o,e,f),O(o,t,f),u(t,n)},p(o,f){if(f&7){i=o[1];let r;for(r=0;r<i.length;r+=1){const c=gt(o,i,r);a[r]?a[r].p(c,f):(a[r]=kt(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&1&&s!==(s=Qe(o[10])+"")&&oe(n,s)},d(o){ve(a,o),o&&h(e),o&&h(t)}}}function Cs(l){let e,t,s;function n(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?As:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?Ss:Ms)}let i=n(l,-1),a=i(l);return{c(){a.c(),s=X()},l(o){a.l(o),s=X()},m(o,f){a.m(o,f),O(o,s,f)},p(o,[f]){i===(i=n(o,f))&&a?a.p(o,f):(a.d(1),a=i(o),a&&(a.c(),a.m(s.parentNode,s)))},i:Fe,o:Fe,d(o){a.d(o),o&&h(s)}}}function Os(l,e,t){let{groups:s,levels:n,colors:i,dynamicVars:a,variable:o,metric:f,showPluralities:r,pluralityVars:c,periods:_,breaks:d}=e;return l.$$set=m=>{"groups"in m&&t(0,s=m.groups),"levels"in m&&t(1,n=m.levels),"colors"in m&&t(2,i=m.colors),"dynamicVars"in m&&t(3,a=m.dynamicVars),"variable"in m&&t(4,o=m.variable),"metric"in m&&t(5,f=m.metric),"showPluralities"in m&&t(6,r=m.showPluralities),"pluralityVars"in m&&t(7,c=m.pluralityVars),"periods"in m&&t(8,_=m.periods),"breaks"in m&&t(9,d=m.breaks)},[s,n,i,a,o,f,r,c,_,d]}class Is extends Ze{constructor(e){super();$e(this,e,Os,Cs,xe,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function Et(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function Pt(l,e,t){const s=l.slice();return s[18]=e[t],s}function Dt(l,e,t){const s=l.slice();return s[12]=e[t],s}function Ns(l){let e,t=l[6],s=[];for(let n=0;n<t.length;n+=1)s[n]=Tt(Et(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=X()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=X()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);O(n,e,i)},p(n,i){if(i&200){t=n[6];let a;for(a=0;a<t.length;a+=1){const o=Et(n,t,a);s[a]?s[a].p(o,i):(s[a]=Tt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){ve(s,n),n&&h(e)}}}function Ls(l){let e,t=l[0],s=[];for(let n=0;n<t.length;n+=1)s[n]=St(Dt(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=X()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=X()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);O(n,e,i)},p(n,i){if(i&567){t=n[0];let a;for(a=0;a<t.length;a+=1){const o=Dt(n,t,a);s[a]?s[a].p(o,i):(s[a]=St(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){ve(s,n),n&&h(e)}}}function Vt(l){let e,t,s=Qe(l[18])+"",n,i,a,o=ue(l[9]["cvap19"+l[18]])+"",f,r,c,_=ue(l[9]["pop20"+l[18]])+"",d,m;return{c(){e=P("tr"),t=P("td"),n=z(s),i=L(),a=P("td"),f=z(o),r=L(),c=P("td"),d=z(_),m=L(),this.h()},l(v){e=D(v,"TR",{class:!0});var k=b(e);t=D(k,"TD",{class:!0});var S=b(t);n=R(S,s),S.forEach(h),i=B(k),a=D(k,"TD",{class:!0});var T=b(a);f=R(T,o),T.forEach(h),r=B(k),c=D(k,"TD",{class:!0});var C=b(c);d=R(C,_),C.forEach(h),m=B(k),k.forEach(h),this.h()},h(){p(t,"class","svelte-1avkicx"),p(a,"class","svelte-1avkicx"),p(c,"class","svelte-1avkicx"),p(e,"class","svelte-1avkicx")},m(v,k){O(v,e,k),u(e,t),u(t,n),u(e,i),u(e,a),u(a,f),u(e,r),u(e,c),u(c,d),u(e,m)},p(v,k){k&8&&s!==(s=Qe(v[18])+"")&&oe(n,s),k&72&&o!==(o=ue(v[9]["cvap19"+v[18]])+"")&&oe(f,o),k&72&&_!==(_=ue(v[9]["pop20"+v[18]])+"")&&oe(d,_)},d(v){v&&h(e)}}}function Tt(l){let e,t,s,n=(l[15]||"COI"+(l[17]+1))+"",i,a,o,f,r,c,_,d,m,v,k,S,T,C,H,U,J,K,F=ll(l[9].income)+"",N,j,M,A,I=ue(l[9].hhlang)+"",y,g,V,G,ee=ue(l[9].benefits)+"",ie,ce,W,Y;function me(){return l[11](l[17])}let he=l[3],le=[];for(let Z=0;Z<he.length;Z+=1)le[Z]=Vt(Pt(l,he,Z));return{c(){e=P("div"),t=P("p"),s=P("i"),i=z(n),a=L(),o=P("button"),f=z("\u{1F5D1}"),r=L(),c=P("table"),_=P("tr"),d=P("th"),m=L(),v=P("th"),k=z("CVAP"),S=L(),T=P("th"),C=z("Pop."),H=L();for(let Z=0;Z<le.length;Z+=1)le[Z].c();U=L(),J=P("p"),K=z("Income: "),N=z(F),j=L(),M=P("p"),A=z("Asian and LEP: "),y=z(I),g=L(),V=P("p"),G=z("Pct. gov't benefits: "),ie=z(ee),ce=L(),this.h()},l(Z){e=D(Z,"DIV",{});var $=b(e);t=D($,"P",{class:!0});var x=b(t);s=D(x,"I",{});var De=b(s);i=R(De,n),De.forEach(h),a=B(x),o=D(x,"BUTTON",{});var Ve=b(o);f=R(Ve,"\u{1F5D1}"),Ve.forEach(h),x.forEach(h),r=B($),c=D($,"TABLE",{class:!0});var be=b(c);_=D(be,"TR",{class:!0});var ae=b(_);d=D(ae,"TH",{class:!0}),b(d).forEach(h),m=B(ae),v=D(ae,"TH",{class:!0});var Pe=b(v);k=R(Pe,"CVAP"),Pe.forEach(h),S=B(ae),T=D(ae,"TH",{class:!0});var ke=b(T);C=R(ke,"Pop."),ke.forEach(h),ae.forEach(h),H=B(be);for(let de=0;de<le.length;de+=1)le[de].l(be);be.forEach(h),U=B($),J=D($,"P",{class:!0});var Te=b(J);K=R(Te,"Income: "),N=R(Te,F),Te.forEach(h),j=B($),M=D($,"P",{class:!0});var Me=b(M);A=R(Me,"Asian and LEP: "),y=R(Me,I),Me.forEach(h),g=B($),V=D($,"P",{class:!0});var w=b(V);G=R(w,"Pct. gov't benefits: "),ie=R(w,ee),w.forEach(h),ce=B($),$.forEach(h),this.h()},h(){p(t,"class","svelte-1avkicx"),p(d,"class","svelte-1avkicx"),p(v,"class","svelte-1avkicx"),p(T,"class","svelte-1avkicx"),p(_,"class","svelte-1avkicx"),p(c,"class","svelte-1avkicx"),p(J,"class","table-footer svelte-1avkicx"),p(M,"class","table-footer svelte-1avkicx"),p(V,"class","table-footer svelte-1avkicx")},m(Z,$){O(Z,e,$),u(e,t),u(t,s),u(s,i),u(t,a),u(t,o),u(o,f),u(e,r),u(e,c),u(c,_),u(_,d),u(_,m),u(_,v),u(v,k),u(_,S),u(_,T),u(T,C),u(c,H);for(let x=0;x<le.length;x+=1)le[x].m(c,null);u(e,U),u(e,J),u(J,K),u(J,N),u(e,j),u(e,M),u(M,A),u(M,y),u(e,g),u(e,V),u(V,G),u(V,ie),u(e,ce),W||(Y=re(o,"click",me),W=!0)},p(Z,$){if(l=Z,$&64&&n!==(n=(l[15]||"COI"+(l[17]+1))+"")&&oe(i,n),$&72){he=l[3];let x;for(x=0;x<he.length;x+=1){const De=Pt(l,he,x);le[x]?le[x].p(De,$):(le[x]=Vt(De),le[x].c(),le[x].m(c,null))}for(;x<le.length;x+=1)le[x].d(1);le.length=he.length}$&64&&F!==(F=ll(l[9].income)+"")&&oe(N,F),$&64&&I!==(I=ue(l[9].hhlang)+"")&&oe(y,I),$&64&&ee!==(ee=ue(l[9].benefits)+"")&&oe(ie,ee)},d(Z){Z&&h(e),ve(le,Z),W=!1,Y()}}}function yt(l){let e,t,s,n=ql(l[12])+"",i,a,o,f,r,c,_,d,m,v,k,S,T,C,H,U,J,K=ue(l[9][l[12]].cvap10asian)+"",F,N,j,M=ue(l[9][l[12]].pop10asian)+"",A,I,y,g,V,G,ee,ie=ue(l[9][l[12]].cvap19asian)+"",ce,W,Y,me=ue(l[9][l[12]].pop20asian)+"",he,le,Z,$,x,De,Ve,be=ue(l[9][l[12]].pct_increase)+"",ae,Pe,ke,Te=ue(l[9][l[12]].pct_increase_cvap)+"",Me,w,de,Je,rl;function Pl(){return l[10](l[12])}let pe=l[4]&&l[2]in l[5]&&Mt(l);return{c(){e=P("div"),t=P("p"),s=P("i"),i=z(n),a=L(),o=P("table"),f=P("tr"),r=P("th"),c=L(),_=P("th"),d=z("CVAP"),m=L(),v=P("th"),k=z("Pop."),S=L(),T=P("tr"),C=P("td"),H=z("Asians in 2010"),U=L(),J=P("td"),F=z(K),N=L(),j=P("td"),A=z(M),I=L(),y=P("tr"),g=P("td"),V=z("Asians now"),G=L(),ee=P("td"),ce=z(ie),W=L(),Y=P("td"),he=z(me),le=L(),Z=P("tr"),$=P("td"),x=z("Asian increase"),De=L(),Ve=P("td"),ae=z(be),Pe=L(),ke=P("td"),Me=z(Te),w=L(),pe&&pe.c(),de=L(),this.h()},l(Ne){e=D(Ne,"DIV",{class:!0});var ge=b(e);t=D(ge,"P",{class:!0});var fl=b(t);s=D(fl,"I",{});var cl=b(s);i=R(cl,n),cl.forEach(h),fl.forEach(h),a=B(ge),o=D(ge,"TABLE",{class:!0});var Oe=b(o);f=D(Oe,"TR",{class:!0});var ze=b(f);r=D(ze,"TH",{class:!0}),b(r).forEach(h),c=B(ze),_=D(ze,"TH",{class:!0});var ul=b(_);d=R(ul,"CVAP"),ul.forEach(h),m=B(ze),v=D(ze,"TH",{class:!0});var hl=b(v);k=R(hl,"Pop."),hl.forEach(h),ze.forEach(h),S=B(Oe),T=D(Oe,"TR",{class:!0});var Re=b(T);C=D(Re,"TD",{class:!0});var _l=b(C);H=R(_l,"Asians in 2010"),_l.forEach(h),U=B(Re),J=D(Re,"TD",{class:!0});var dl=b(J);F=R(dl,K),dl.forEach(h),N=B(Re),j=D(Re,"TD",{class:!0});var gl=b(j);A=R(gl,M),gl.forEach(h),Re.forEach(h),I=B(Oe),y=D(Oe,"TR",{class:!0});var He=b(y);g=D(He,"TD",{class:!0});var ml=b(g);V=R(ml,"Asians now"),ml.forEach(h),G=B(He),ee=D(He,"TD",{class:!0});var E=b(ee);ce=R(E,ie),E.forEach(h),W=B(He),Y=D(He,"TD",{class:!0});var se=b(Y);he=R(se,me),se.forEach(h),He.forEach(h),le=B(Oe),Z=D(Oe,"TR",{class:!0});var q=b(Z);$=D(q,"TD",{class:!0});var fe=b($);x=R(fe,"Asian increase"),fe.forEach(h),De=B(q),Ve=D(q,"TD",{class:!0});var _e=b(Ve);ae=R(_e,be),_e.forEach(h),Pe=B(q),ke=D(q,"TD",{class:!0});var Le=b(ke);Me=R(Le,Te),Le.forEach(h),q.forEach(h),Oe.forEach(h),w=B(ge),pe&&pe.l(ge),de=B(ge),ge.forEach(h),this.h()},h(){p(t,"class","svelte-1avkicx"),p(r,"class","svelte-1avkicx"),p(_,"class","svelte-1avkicx"),p(v,"class","svelte-1avkicx"),p(f,"class","svelte-1avkicx"),p(C,"class","svelte-1avkicx"),p(J,"class","svelte-1avkicx"),p(j,"class","svelte-1avkicx"),p(T,"class","svelte-1avkicx"),p(g,"class","svelte-1avkicx"),p(ee,"class","svelte-1avkicx"),p(Y,"class","svelte-1avkicx"),p(y,"class","svelte-1avkicx"),p($,"class","svelte-1avkicx"),p(Ve,"class","svelte-1avkicx"),p(ke,"class","svelte-1avkicx"),p(Z,"class","svelte-1avkicx"),p(o,"class","svelte-1avkicx"),p(e,"class","district-aggregate svelte-1avkicx")},m(Ne,ge){O(Ne,e,ge),u(e,t),u(t,s),u(s,i),u(e,a),u(e,o),u(o,f),u(f,r),u(f,c),u(f,_),u(_,d),u(f,m),u(f,v),u(v,k),u(o,S),u(o,T),u(T,C),u(C,H),u(T,U),u(T,J),u(J,F),u(T,N),u(T,j),u(j,A),u(o,I),u(o,y),u(y,g),u(g,V),u(y,G),u(y,ee),u(ee,ce),u(y,W),u(y,Y),u(Y,he),u(o,le),u(o,Z),u(Z,$),u($,x),u(Z,De),u(Z,Ve),u(Ve,ae),u(Z,Pe),u(Z,ke),u(ke,Me),u(e,w),pe&&pe.m(e,null),u(e,de),Je||(rl=re(t,"click",Pl),Je=!0)},p(Ne,ge){l=Ne,ge&1&&n!==(n=ql(l[12])+"")&&oe(i,n),ge&513&&K!==(K=ue(l[9][l[12]].cvap10asian)+"")&&oe(F,K),ge&513&&M!==(M=ue(l[9][l[12]].pop10asian)+"")&&oe(A,M),ge&513&&ie!==(ie=ue(l[9][l[12]].cvap19asian)+"")&&oe(ce,ie),ge&513&&me!==(me=ue(l[9][l[12]].pop20asian)+"")&&oe(he,me),ge&513&&be!==(be=ue(l[9][l[12]].pct_increase)+"")&&oe(ae,be),ge&513&&Te!==(Te=ue(l[9][l[12]].pct_increase_cvap)+"")&&oe(Me,Te),l[4]&&l[2]in l[5]?pe?pe.p(l,ge):(pe=Mt(l),pe.c(),pe.m(e,de)):pe&&(pe.d(1),pe=null)},d(Ne){Ne&&h(e),pe&&pe.d(),Je=!1,rl()}}}function Mt(l){let e,t,s=ll(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+Fl(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",n;return{c(){e=P("p"),t=z("Income: "),n=z(s),this.h()},l(i){e=D(i,"P",{class:!0});var a=b(e);t=R(a,"Income: "),n=R(a,s),a.forEach(h),this.h()},h(){p(e,"class","table-footer svelte-1avkicx")},m(i,a){O(i,e,a),u(e,t),u(e,n)},p(i,a){a&565&&s!==(s=ll(i[9][i[12]].income)+(i[4]&&i[2]in i[5]?"; "+Fl(i[9][i[12]].pop20_total-i[5][i[2]]):"")+"")&&oe(n,s)},d(i){i&&h(e)}}}function St(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&yt(l);return{c(){s&&s.c(),t=X()},l(n){s&&s.l(n),t=X()},m(n,i){s&&s.m(n,i),O(n,t,i)},p(n,i){i&5&&(e=n[12].split(",")[0].split("_")[0]===n[2].split("_")[0]),e?s?s.p(n,i):(s=yt(n),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&h(t)}}}function Bs(l){let e;function t(i,a){if(i[8]==="districts")return Ls;if(i[8]==="community")return Ns}let s=t(l),n=s&&s(l);return{c(){n&&n.c(),e=X()},l(i){n&&n.l(i),e=X()},m(i,a){n&&n.m(i,a),O(i,e,a)},p(i,[a]){s===(s=t(i))&&n?n.p(i,a):(n&&n.d(1),n=s&&s(i),n&&(n.c(),n.m(e.parentNode,e)))},i:Fe,o:Fe,d(i){n&&n.d(i),i&&h(e)}}}function js(l,e,t){let{aggregates:s,handleLabelClick:n,plan:i,stats:a,groups:o,changingLines:f,idealValues:r}=e,{drawings:c=[]}=e,{delDrawing:_=void 0}=e,{type:d="districts"}=e;const m=k=>n(k),v=k=>_(k);return l.$$set=k=>{"aggregates"in k&&t(0,s=k.aggregates),"handleLabelClick"in k&&t(1,n=k.handleLabelClick),"plan"in k&&t(2,i=k.plan),"stats"in k&&t(9,a=k.stats),"groups"in k&&t(3,o=k.groups),"changingLines"in k&&t(4,f=k.changingLines),"idealValues"in k&&t(5,r=k.idealValues),"drawings"in k&&t(6,c=k.drawings),"delDrawing"in k&&t(7,_=k.delDrawing),"type"in k&&t(8,d=k.type)},[s,n,i,o,f,r,c,_,d,a,m,v]}class At extends Ze{constructor(e){super();$e(this,e,js,Bs,xe,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}const zs=l=>({}),Ct=l=>({}),Rs=l=>({}),Ot=l=>({});function It(l){let e,t,s,n;const i=l[4].body,a=jl(i,l,l[3],Ct);return{c(){e=P("div"),a&&a.c(),this.h()},l(o){e=D(o,"DIV",{class:!0});var f=b(e);a&&a.l(f),f.forEach(h),this.h()},h(){p(e,"class","svelte-a3zm9u")},m(o,f){O(o,e,f),a&&a.m(e,null),n=!0},p(o,f){a&&a.p&&(!n||f&8)&&zl(a,i,o,o[3],n?Hl(i,o[3],f,zs):Rl(o[3]),Ct)},i(o){n||(Q(a,o),Se(()=>{s&&s.end(1),t=Ue(e,vl,{}),t.start()}),n=!0)},o(o){te(a,o),t&&t.invalidate(),s=qe(e,vl,{}),n=!1},d(o){o&&h(e),a&&a.d(o),o&&s&&s.end()}}}function Hs(l){let e,t,s,n=(l[2]==="plans"?"Districts / \u533A\u57DF\u5212\u5206":l[2]==="views"?"Views / \u9009\u62E9\u533A":Qe(l[2]))+"",i,a,o=(l[0].includes(l[2])?"\u2191":"\u2193")+"",f,r,c,_=l[0].includes(l[2]),d,m,v;const k=l[4].title,S=jl(k,l,l[3],Ot);let T=_&&It(l);return{c(){e=P("div"),t=P("h3"),s=P("button"),i=z(n),a=L(),f=z(o),r=L(),S&&S.c(),c=L(),T&&T.c(),this.h()},l(C){e=D(C,"DIV",{class:!0});var H=b(e);t=D(H,"H3",{class:!0});var U=b(t);s=D(U,"BUTTON",{});var J=b(s);i=R(J,n),a=B(J),f=R(J,o),J.forEach(h),r=B(U),S&&S.l(U),U.forEach(h),c=B(H),T&&T.l(H),H.forEach(h),this.h()},h(){p(t,"class","svelte-a3zm9u"),p(e,"class","panel svelte-a3zm9u")},m(C,H){O(C,e,H),u(e,t),u(t,s),u(s,i),u(s,a),u(s,f),u(t,r),S&&S.m(t,null),u(e,c),T&&T.m(e,null),d=!0,m||(v=re(s,"click",l[5]),m=!0)},p(C,[H]){(!d||H&4)&&n!==(n=(C[2]==="plans"?"Districts / \u533A\u57DF\u5212\u5206":C[2]==="views"?"Views / \u9009\u62E9\u533A":Qe(C[2]))+"")&&oe(i,n),(!d||H&5)&&o!==(o=(C[0].includes(C[2])?"\u2191":"\u2193")+"")&&oe(f,o),S&&S.p&&(!d||H&8)&&zl(S,k,C,C[3],d?Hl(k,C[3],H,Rs):Rl(C[3]),Ot),H&5&&(_=C[0].includes(C[2])),_?T?(T.p(C,H),H&5&&Q(T,1)):(T=It(C),T.c(),Q(T,1),T.m(e,null)):T&&(Be(),te(T,1,1,()=>{T=null}),je())},i(C){d||(Q(S,C),Q(T),d=!0)},o(C){te(S,C),te(T),d=!1},d(C){C&&h(e),S&&S.d(C),T&&T.d(),m=!1,v()}}}function Us(l,e,t){let{$$slots:s={},$$scope:n}=e,{panels:i,togglePanel:a,panelName:o}=e;const f=()=>a(o);return l.$$set=r=>{"panels"in r&&t(0,i=r.panels),"togglePanel"in r&&t(1,a=r.togglePanel),"panelName"in r&&t(2,o=r.panelName),"$$scope"in r&&t(3,n=r.$$scope)},[i,a,o,n,s,f]}class Al extends Ze{constructor(e){super();$e(this,e,Us,Hs,xe,{panels:0,togglePanel:1,panelName:2})}}function Nt(l){let e,t,s,n,i,a,o,f,r,c,_;return{c(){e=P("div"),t=P("a"),s=z("Click here"),n=z(` to see a video tutorial of this website.
    `),i=P("button"),a=z("Close message."),this.h()},l(d){e=D(d,"DIV",{class:!0});var m=b(e);t=D(m,"A",{href:!0,target:!0});var v=b(t);s=R(v,"Click here"),v.forEach(h),n=R(m,` to see a video tutorial of this website.
    `),i=D(m,"BUTTON",{class:!0});var k=b(i);a=R(k,"Close message."),k.forEach(h),m.forEach(h),this.h()},h(){p(t,"href","https://youtu.be/dU5a4PRSF14"),p(t,"target","_blank"),p(i,"class","svelte-a8zkqf"),p(e,"class","modal svelte-a8zkqf")},m(d,m){O(d,e,m),u(e,t),u(t,s),u(e,n),u(e,i),u(i,a),r=!0,c||(_=re(i,"click",function(){Vl(l[1])&&l[1].apply(this,arguments)}),c=!0)},p(d,m){l=d},i(d){r||(Se(()=>{f&&f.end(1),o=Ue(e,Ae,{}),o.start()}),r=!0)},o(d){o&&o.invalidate(),f=qe(e,Ae,{}),r=!1},d(d){d&&h(e),d&&f&&f.end(),c=!1,_()}}}function qs(l){let e,t,s=l[0]&&Nt(l);return{c(){s&&s.c(),e=X()},l(n){s&&s.l(n),e=X()},m(n,i){s&&s.m(n,i),O(n,e,i),t=!0},p(n,[i]){n[0]?s?(s.p(n,i),i&1&&Q(s,1)):(s=Nt(n),s.c(),Q(s,1),s.m(e.parentNode,e)):s&&(Be(),te(s,1,1,()=>{s=null}),je())},i(n){t||(Q(s),t=!0)},o(n){te(s),t=!1},d(n){s&&s.d(n),n&&h(e)}}}function Fs(l,e,t){let{showModal:s,closeModal:n}=e;return l.$$set=i=>{"showModal"in i&&t(0,s=i.showModal),"closeModal"in i&&t(1,n=i.closeModal)},[s,n]}class Gs extends Ze{constructor(e){super();$e(this,e,Fs,qs,xe,{showModal:0,closeModal:1})}}function Lt(l,e,t){const s=l.slice();return s[69]=e[t],s}function Bt(l,e,t){const s=l.slice();return s[72]=e[t],s}function jt(l,e,t){const s=l.slice();return s[75]=e[t],s}function zt(l,e,t){const s=l.slice();return s[78]=e[t],s}function Rt(l,e,t){const s=l.slice();return s[69]=e[t],s}function Ht(l,e,t){const s=l.slice();return s[69]=e[t],s}function Ut(l){let e,t=(wl[l[69]]||l[69])+"",s,n;return{c(){e=P("option"),s=z(t),this.h()},l(i){e=D(i,"OPTION",{});var a=b(e);s=R(a,t),a.forEach(h),this.h()},h(){e.__value=n=l[69],e.value=e.__value},m(i,a){O(i,e,a),u(e,s)},p(i,a){a[0]&4&&t!==(t=(wl[i[69]]||i[69])+"")&&oe(s,t),a[0]&4&&n!==(n=i[69])&&(e.__value=n,e.value=e.__value)},d(i){i&&h(e)}}}function qt(l){let e,t=(wl[l[69]]||l[69])+"",s,n;return{c(){e=P("option"),s=z(t),this.h()},l(i){e=D(i,"OPTION",{});var a=b(e);s=R(a,t),a.forEach(h),this.h()},h(){e.__value=n=l[69],e.value=e.__value},m(i,a){O(i,e,a),u(e,s)},p(i,a){a[0]&8&&t!==(t=(wl[i[69]]||i[69])+"")&&oe(s,t),a[0]&8&&n!==(n=i[69])&&(e.__value=n,e.value=e.__value)},d(i){i&&h(e)}}}function Ft(l){let e,t=l[2].includes(l[17]),s,n=l[2].includes(l[17]),i,a,o,f=t&&Gt(l),r=n&&Yt(l);return{c(){e=P("div"),f&&f.c(),s=L(),r&&r.c()},l(c){e=D(c,"DIV",{});var _=b(e);f&&f.l(_),s=B(_),r&&r.l(_),_.forEach(h)},m(c,_){O(c,e,_),f&&f.m(e,null),u(e,s),r&&r.m(e,null),o=!0},p(c,_){_[0]&131076&&(t=c[2].includes(c[17])),t?f?f.p(c,_):(f=Gt(c),f.c(),f.m(e,s)):f&&(f.d(1),f=null),_[0]&131076&&(n=c[2].includes(c[17])),n?r?r.p(c,_):(r=Yt(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){o||(Se(()=>{a&&a.end(1),i=Ue(e,vl,{}),i.start()}),o=!0)},o(c){i&&i.invalidate(),a=qe(e,vl,{}),o=!1},d(c){c&&h(e),f&&f.d(),r&&r.d(),c&&a&&a.end()}}}function Gt(l){let e,t=["past","present"],s=[];for(let n=0;n<2;n+=1)s[n]=Wt(zt(l,t,n));return{c(){for(let n=0;n<2;n+=1)s[n].c();e=X()},l(n){for(let i=0;i<2;i+=1)s[i].l(n);e=X()},m(n,i){for(let a=0;a<2;a+=1)s[a].m(n,i);O(n,e,i)},p(n,i){if(i[0]&65536){t=["past","present"];let a;for(a=0;a<2;a+=1){const o=zt(n,t,a);s[a]?s[a].p(o,i):(s[a]=Wt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<2;a+=1)s[a].d(1)}},d(n){ve(s,n),n&&h(e)}}}function Wt(l){let e,t,s,n=Qe(l[78])+"",i,a,o,f;return{c(){e=P("label"),t=P("input"),s=L(),i=z(n),a=L(),this.h()},l(r){e=D(r,"LABEL",{});var c=b(e);t=D(c,"INPUT",{type:!0,name:!0}),s=B(c),i=R(c,n),a=B(c),c.forEach(h),this.h()},h(){p(t,"type","radio"),p(t,"name","period"),t.__value=l[78],t.value=t.__value,l[56][0].push(t)},m(r,c){O(r,e,c),u(e,t),t.checked=t.__value===l[16],u(e,s),u(e,i),u(e,a),o||(f=re(t,"change",l[55]),o=!0)},p(r,c){c[0]&65536&&(t.checked=t.__value===r[16])},d(r){r&&h(e),l[56][0].splice(l[56][0].indexOf(t),1),o=!1,f()}}}function Yt(l){let e,t,s=(l[18]?"pct. asian":"pluralities")+"",n,i,a;return{c(){e=P("button"),t=z("Show "),n=z(s),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var f=b(e);t=R(f,"Show "),n=R(f,s),f.forEach(h),this.h()},h(){p(e,"class","plurality-toggle svelte-1fv06xq")},m(o,f){O(o,e,f),u(e,t),u(e,n),i||(a=re(e,"click",l[57]),i=!0)},p(o,f){f[0]&262144&&s!==(s=(o[18]?"pct. asian":"pluralities")+"")&&oe(n,s)},d(o){o&&h(e),i=!1,a()}}}function Ws(l){let e,t=Es(l[72]+l[75])+"",s,n,i;return{c(){e=P("option"),s=z(t),n=L(),this.h()},l(a){e=D(a,"OPTION",{});var o=b(e);s=R(o,t),n=B(o),o.forEach(h),this.h()},h(){e.__value=i=l[72]+l[75],e.value=e.__value},m(a,o){O(a,e,o),u(e,s),u(e,n)},p:Fe,d(a){a&&h(e)}}}function Kt(l){let e,t=l[72]+l[75]!=="congress_unity"&&Ws(l);return{c(){t&&t.c(),e=X()},l(s){t&&t.l(s),e=X()},m(s,n){t&&t.m(s,n),O(s,e,n)},p(s,n){s[72]+s[75]!=="congress_unity"&&t.p(s,n)},d(s){t&&t.d(s),s&&h(e)}}}function Qt(l){let e,t,s=["","_letters","_names","_unity"],n=[];for(let i=0;i<4;i+=1)n[i]=Kt(jt(l,s,i));return{c(){e=P("optgroup");for(let i=0;i<4;i+=1)n[i].c();this.h()},l(i){e=D(i,"OPTGROUP",{label:!0});var a=b(e);for(let o=0;o<4;o+=1)n[o].l(a);a.forEach(h),this.h()},h(){p(e,"label",t=Qe(l[72]))},m(i,a){O(i,e,a);for(let o=0;o<4;o+=1)n[o].m(e,null)},p(i,a){if(a&0){s=["","_letters","_names","_unity"];let o;for(o=0;o<4;o+=1){const f=jt(i,s,o);n[o]?n[o].p(f,a):(n[o]=Kt(f),n[o].c(),n[o].m(e,null))}for(;o<4;o+=1)n[o].d(1)}},d(i){i&&h(e),ve(n,i)}}}function Ys(l){let e,t,s,n,i,a,o,f,r=["assembly","senate","congress"],c=[];for(let _=0;_<3;_+=1)c[_]=Qt(Bt(l,r,_));return i=new At({props:{aggregates:l[9],handleLabelClick:l[42],plan:l[11],stats:l[25],groups:tl,changingLines:l[33],idealValues:Ps}}),{c(){e=P("div"),t=P("div"),s=P("select");for(let _=0;_<3;_+=1)c[_].c();n=L(),Ge(i.$$.fragment),this.h()},l(_){e=D(_,"DIV",{slot:!0});var d=b(e);t=D(d,"DIV",{class:!0});var m=b(t);s=D(m,"SELECT",{class:!0});var v=b(s);for(let k=0;k<3;k+=1)c[k].l(v);v.forEach(h),m.forEach(h),n=B(d),We(i.$$.fragment,d),d.forEach(h),this.h()},h(){p(s,"class","svelte-1fv06xq"),l[11]===void 0&&Se(()=>l[58].call(s)),p(t,"class","plan-selector svelte-1fv06xq"),p(e,"slot","body")},m(_,d){O(_,e,d),u(e,t),u(t,s);for(let m=0;m<3;m+=1)c[m].m(s,null);el(s,l[11]),u(e,n),Ye(i,e,null),a=!0,o||(f=re(s,"change",l[58]),o=!0)},p(_,d){if(d&0){r=["assembly","senate","congress"];let v;for(v=0;v<3;v+=1){const k=Bt(_,r,v);c[v]?c[v].p(k,d):(c[v]=Qt(k),c[v].c(),c[v].m(s,null))}for(;v<3;v+=1)c[v].d(1)}d[0]&2048&&el(s,_[11]);const m={};d[0]&512&&(m.aggregates=_[9]),d[0]&2048&&(m.plan=_[11]),d[0]&33554432&&(m.stats=_[25]),i.$set(m)},i(_){a||(Q(i.$$.fragment,_),a=!0)},o(_){te(i.$$.fragment,_),a=!1},d(_){_&&h(e),ve(c,_),Ke(i),o=!1,f()}}}function Jt(l){let e,t=l[69]+"",s,n;return{c(){e=P("option"),s=z(t),this.h()},l(i){e=D(i,"OPTION",{});var a=b(e);s=R(a,t),a.forEach(h),this.h()},h(){e.__value=n=l[69],e.value=e.__value},m(i,a){O(i,e,a),u(e,s)},p:Fe,d(i){i&&h(e)}}}function Ks(l){let e,t,s,n,i,a,o,f,r=Object.keys(nl),c=[];for(let _=0;_<r.length;_+=1)c[_]=Jt(Lt(l,r,_));return{c(){e=P("div"),t=P("select");for(let _=0;_<c.length;_+=1)c[_].c();s=L(),n=P("label"),i=P("input"),a=z(`
					Inspect streets`),this.h()},l(_){e=D(_,"DIV",{slot:!0,class:!0});var d=b(e);t=D(d,"SELECT",{class:!0});var m=b(t);for(let k=0;k<c.length;k+=1)c[k].l(m);m.forEach(h),s=B(d),n=D(d,"LABEL",{class:!0});var v=b(n);i=D(v,"INPUT",{type:!0}),a=R(v,`
					Inspect streets`),v.forEach(h),d.forEach(h),this.h()},h(){p(t,"class","svelte-1fv06xq"),l[15]===void 0&&Se(()=>l[59].call(t)),p(i,"type","checkbox"),p(n,"class","svelte-1fv06xq"),p(e,"slot","body"),p(e,"class","views svelte-1fv06xq")},m(_,d){O(_,e,d),u(e,t);for(let m=0;m<c.length;m+=1)c[m].m(t,null);el(t,l[15]),u(e,s),u(e,n),u(n,i),i.checked=l[6],u(n,a),o||(f=[re(t,"change",l[59]),re(i,"change",l[60])],o=!0)},p(_,d){if(d&0){r=Object.keys(nl);let m;for(m=0;m<r.length;m+=1){const v=Lt(_,r,m);c[m]?c[m].p(v,d):(c[m]=Jt(v),c[m].c(),c[m].m(t,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=r.length}d[0]&32768&&el(t,_[15]),d[0]&64&&(i.checked=_[6])},d(_){_&&h(e),ve(c,_),o=!1,al(f)}}}function Qs(l){let e,t;return e=new Al({props:{panelName:"communities",panels:l[10],togglePanel:l[41],$$slots:{body:[Xs],title:[Js]},$$scope:{ctx:l}}}),{c(){Ge(e.$$.fragment)},l(s){We(e.$$.fragment,s)},m(s,n){Ye(e,s,n),t=!0},p(s,n){const i={};n[0]&1024&&(i.panels=s[10]),n[0]&50331904|n[2]&8388608&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(Q(e.$$.fragment,s),t=!0)},o(s){te(e.$$.fragment,s),t=!1},d(s){Ke(e,s)}}}function Js(l){let e,t,s,n;return{c(){e=P("button"),t=z("+"),this.h()},l(i){e=D(i,"BUTTON",{slot:!0});var a=b(e);t=R(a,"+"),a.forEach(h),this.h()},h(){p(e,"slot","title")},m(i,a){O(i,e,a),u(e,t),s||(n=re(e,"click",l[61]),s=!0)},p:Fe,d(i){i&&h(e),s=!1,n()}}}function Xs(l){let e,t,s,n,i,a,o,f,r;return t=new At({props:{type:"community",drawings:l[8],delDrawing:l[39],groups:tl,stats:l[25]}}),{c(){e=P("div"),Ge(t.$$.fragment),s=L(),n=P("button"),i=P("b"),a=z("[SAVE]"),this.h()},l(c){e=D(c,"DIV",{slot:!0,class:!0});var _=b(e);We(t.$$.fragment,_),s=B(_),n=D(_,"BUTTON",{style:!0});var d=b(n);i=D(d,"B",{});var m=b(i);a=R(m,"[SAVE]"),m.forEach(h),d.forEach(h),_.forEach(h),this.h()},h(){ne(n,"font-size","13px"),p(e,"slot","body"),p(e,"class","community svelte-1fv06xq")},m(c,_){O(c,e,_),Ye(t,e,null),u(e,s),u(e,n),u(n,i),u(i,a),o=!0,f||(r=re(n,"click",l[40]),f=!0)},p(c,_){const d={};_[0]&256&&(d.drawings=c[8]),_[0]&33554432&&(d.stats=c[25]),t.$set(d)},i(c){o||(Q(t.$$.fragment,c),o=!0)},o(c){te(t.$$.fragment,c),o=!1},d(c){c&&h(e),Ke(t),f=!1,r()}}}function Zs(l){let e,t,s,n,i,a;return{c(){e=P("div"),t=P("p"),s=z("Questions, suggestions, concerns --> "),n=P("a"),i=z("jason.kao@columbia.edu"),a=z("."),this.h()},l(o){e=D(o,"DIV",{class:!0});var f=b(e);t=D(f,"P",{});var r=b(t);s=R(r,"Questions, suggestions, concerns --> "),n=D(r,"A",{href:!0});var c=b(n);i=R(c,"jason.kao@columbia.edu"),c.forEach(h),a=R(r,"."),r.forEach(h),f.forEach(h),this.h()},h(){p(n,"href","mailto:jason.kao@console.edu"),p(e,"class","footer svelte-1fv06xq")},m(o,f){O(o,e,f),u(e,t),u(t,s),u(t,n),u(n,i),u(t,a)},d(o){o&&h(e)}}}function $s(l){let e,t,s,n,i,a,o,f,r,c,_,d,m,v,k,S,T,C,H,U,J,K;e=new Gs({props:{showModal:l[21],closeModal:l[36]}});let F=l[2],N=[];for(let g=0;g<F.length;g+=1)N[g]=Ut(Ht(l,F,g));let j=l[3],M=[];for(let g=0;g<j.length;g+=1)M[g]=qt(Rt(l,j,g));let A=l[22]&&Ft(l);c=new Is({props:{groups:tl,levels:Sl,colors:Ml,dynamicVars:l[2],variable:l[17],metric:l[20],showPluralities:l[18],pluralityVars:l[5],periods:kl,breaks:l[32]}}),d=new Al({props:{panelName:"plans",panels:l[10],togglePanel:l[41],$$slots:{body:[Ys]},$$scope:{ctx:l}}}),v=new Al({props:{panelName:"views",panels:l[10],togglePanel:l[41],$$slots:{body:[Ks]},$$scope:{ctx:l}}});let I=Qs(l);T=new ys({props:{viewBox:l[19],labelSize:l[31],draggedBgs:l[7],data:l[1],path:bl,color:l[38],changingLines:l[33],neighbor:l[37],showPluralities:l[18],metric:l[20],period:l[16],tractVars:l[4],panels:l[10],drawings:l[8],plan:l[11],points:l[27],tractMesh:l[35],bgMesh:l[26],mesh:l[34],aggregates:l[9],obj:l[0],handleLabelClick:l[42],congressPlans:l[12],plans:l[28],startDrag:l[43],endDrag:l[44],handleMouseMove:l[45],viewCutoff:l[30],showOnlyFocusDistricts:l[23],showStreets:l[6],streets:l[13],presentationMode:Xt}});let y=Zs();return{c(){Ge(e.$$.fragment),t=L(),s=P("div"),n=P("div"),i=P("select"),a=P("optgroup");for(let g=0;g<N.length;g+=1)N[g].c();o=P("optgroup");for(let g=0;g<M.length;g+=1)M[g].c();f=L(),A&&A.c(),r=L(),Ge(c.$$.fragment),_=L(),Ge(d.$$.fragment),m=L(),Ge(v.$$.fragment),k=L(),I&&I.c(),S=L(),Ge(T.$$.fragment),C=L(),y&&y.c(),this.h()},l(g){We(e.$$.fragment,g),t=B(g),s=D(g,"DIV",{class:!0,style:!0});var V=b(s);n=D(V,"DIV",{class:!0});var G=b(n);i=D(G,"SELECT",{style:!0,class:!0});var ee=b(i);a=D(ee,"OPTGROUP",{label:!0});var ie=b(a);for(let W=0;W<N.length;W+=1)N[W].l(ie);ie.forEach(h),o=D(ee,"OPTGROUP",{label:!0});var ce=b(o);for(let W=0;W<M.length;W+=1)M[W].l(ce);ce.forEach(h),ee.forEach(h),f=B(G),A&&A.l(G),r=B(G),We(c.$$.fragment,G),_=B(G),We(d.$$.fragment,G),m=B(G),We(v.$$.fragment,G),k=B(G),I&&I.l(G),G.forEach(h),S=B(V),We(T.$$.fragment,V),C=B(V),y&&y.l(V),V.forEach(h),this.h()},h(){p(a,"label","Redistricting data"),p(o,"label","American Community Survey data"),ne(i,"width",l[3].includes(l[17])?"auto":"calc(var(--control-width) + 45px)"),p(i,"class","svelte-1fv06xq"),l[17]===void 0&&Se(()=>l[54].call(i)),p(n,"class","controls svelte-1fv06xq"),p(s,"class","container svelte-1fv06xq"),ne(s,"cursor",l[24]?"crosshair":"auto"),ne(s,"--container-font",l[29]+"px"),ne(s,"--control-width",270+(l[29]-16)*10+"px"),Se(()=>l[62].call(s))},m(g,V){Ye(e,g,V),O(g,t,V),O(g,s,V),u(s,n),u(n,i),u(i,a);for(let G=0;G<N.length;G+=1)N[G].m(a,null);u(i,o);for(let G=0;G<M.length;G+=1)M[G].m(o,null);el(i,l[17]),u(n,f),A&&A.m(n,null),u(n,r),Ye(c,n,null),u(n,_),Ye(d,n,null),u(n,m),Ye(v,n,null),u(n,k),I&&I.m(n,null),u(s,S),Ye(T,s,null),u(s,C),y&&y.m(s,null),H=cs(s,l[62].bind(s)),U=!0,J||(K=[re(window,"keydown",l[46]),re(i,"change",l[54])],J=!0)},p(g,V){const G={};if(V[0]&2097152&&(G.showModal=g[21]),e.$set(G),V[0]&4){F=g[2];let Y;for(Y=0;Y<F.length;Y+=1){const me=Ht(g,F,Y);N[Y]?N[Y].p(me,V):(N[Y]=Ut(me),N[Y].c(),N[Y].m(a,null))}for(;Y<N.length;Y+=1)N[Y].d(1);N.length=F.length}if(V[0]&8){j=g[3];let Y;for(Y=0;Y<j.length;Y+=1){const me=Rt(g,j,Y);M[Y]?M[Y].p(me,V):(M[Y]=qt(me),M[Y].c(),M[Y].m(o,null))}for(;Y<M.length;Y+=1)M[Y].d(1);M.length=j.length}(!U||V[0]&131080)&&ne(i,"width",g[3].includes(g[17])?"auto":"calc(var(--control-width) + 45px)"),V[0]&131084&&el(i,g[17]),g[22]?A?(A.p(g,V),V[0]&4194304&&Q(A,1)):(A=Ft(g),A.c(),Q(A,1),A.m(n,r)):A&&(Be(),te(A,1,1,()=>{A=null}),je());const ee={};V[0]&4&&(ee.dynamicVars=g[2]),V[0]&131072&&(ee.variable=g[17]),V[0]&1048576&&(ee.metric=g[20]),V[0]&262144&&(ee.showPluralities=g[18]),V[0]&32&&(ee.pluralityVars=g[5]),V[1]&2&&(ee.breaks=g[32]),c.$set(ee);const ie={};V[0]&1024&&(ie.panels=g[10]),V[0]&33556992|V[2]&8388608&&(ie.$$scope={dirty:V,ctx:g}),d.$set(ie);const ce={};V[0]&1024&&(ce.panels=g[10]),V[0]&32832|V[2]&8388608&&(ce.$$scope={dirty:V,ctx:g}),v.$set(ce),I.p(g,V);const W={};V[0]&524288&&(W.viewBox=g[19]),V[1]&1&&(W.labelSize=g[31]),V[0]&128&&(W.draggedBgs=g[7]),V[0]&2&&(W.data=g[1]),V[0]&262144&&(W.showPluralities=g[18]),V[0]&1048576&&(W.metric=g[20]),V[0]&65536&&(W.period=g[16]),V[0]&16&&(W.tractVars=g[4]),V[0]&1024&&(W.panels=g[10]),V[0]&256&&(W.drawings=g[8]),V[0]&2048&&(W.plan=g[11]),V[0]&134217728&&(W.points=g[27]),V[0]&67108864&&(W.bgMesh=g[26]),V[0]&512&&(W.aggregates=g[9]),V[0]&1&&(W.obj=g[0]),V[0]&4096&&(W.congressPlans=g[12]),V[0]&268435456&&(W.plans=g[28]),V[0]&1073741824&&(W.viewCutoff=g[30]),V[0]&8388608&&(W.showOnlyFocusDistricts=g[23]),V[0]&64&&(W.showStreets=g[6]),V[0]&8192&&(W.streets=g[13]),T.$set(W),(!U||V[0]&16777216)&&ne(s,"cursor",g[24]?"crosshair":"auto"),(!U||V[0]&536870912)&&ne(s,"--container-font",g[29]+"px"),(!U||V[0]&536870912)&&ne(s,"--control-width",270+(g[29]-16)*10+"px")},i(g){U||(Q(e.$$.fragment,g),Q(A),Q(c.$$.fragment,g),Q(d.$$.fragment,g),Q(v.$$.fragment,g),Q(I),Q(T.$$.fragment,g),U=!0)},o(g){te(e.$$.fragment,g),te(A),te(c.$$.fragment,g),te(d.$$.fragment,g),te(v.$$.fragment,g),te(I),te(T.$$.fragment,g),U=!1},d(g){Ke(e,g),g&&h(t),g&&h(s),ve(N,g),ve(M,g),A&&A.d(),Ke(c),Ke(d),Ke(v),I&&I.d(),Ke(T),y&&y.d(),H(),J=!1,al(K)}}}async function nn({fetch:l}){const e=await(await l(`${yl}/output_census.topojson`)).json(),t=ms(e.objects.census),s=rs(e,t).features.map(Gl),n=["pop","cvap"],i=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(c=>[...n,"GEOID","senate","assembly","congress"].every(_=>!c.includes(_))&&c===c.toLowerCase()).map(c=>c.split("_")[0]);return new Set([...o,...r])},[])],a=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:fs(t.geometries),dynamicVars:n,staticVars:i,idToIndex:a,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}let Xt=!1;function xs(l,e,t){let s,n,i,a,o,{topoData:f,obj:r,neighbors:c,data:_,dynamicVars:d,staticVars:m,tractVars:v,pluralityVars:k,idToIndex:S}=e,T,C,H=!0,U=!1,J,K,F,N,j=[],M=[],A=[],I={},y=["plans","views"],g="assembly",V,G,ee,ie,ce,W=18,Y,me=870,he=Object.keys(nl)[0];const le=E=>ol(f,r,E),Z=bl(le((E,se)=>Ce(E).substring(0,11)!==Ce(se).substring(0,11))),$=()=>t(21,C=!1);us(async()=>{t(26,V=bl(Gl(le((se,q)=>Ce(se)!==Ce(q)))));const E=await Promise.all([vs(),bs()]);t(28,ce=E[0]),t(27,ee=E[1]),t(30,me=_.length),t(21,C=!Xt)});let x;const De=E=>_[E].properties[g];function Ve(E){const se=De(E),q=new Set(c[E].map(De).filter(fe=>fe!==se));if(q.size===1)t(0,r.geometries[E].properties[g]=x=q.values().next().value,r);else if(q.has(x))t(0,r.geometries[E].properties[g]=x,r);else return;t(0,r)}let be="present",ae="pop";const Pe={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let ke=!1;function Te({properties:E}){if(!E.ALAND)return"#fff";const se=E[`${n}_total`];if(k.includes(n)){const q=_e=>E[`${n}_${_e}`];if(q(kl[0])===null)return"#eee";const fe=[...kl].sort((_e,Le)=>q(Le)-q(_e));return sl[kl.indexOf(fe[0])]}else if(m.includes(n)){if(!Wl(i(E)))return"#eee";if(se<=10)return"#fff";for(let q=1;q<a.length;q++)if(i(E)<a[q])return sl[q];return sl[a.length-1]}else{if(se<=10)return"#fff";const q=fe=>E[`${n}_${fe}`]/E[`${n}_total`];if(ke){const fe=tl.filter(il=>q(il)>.5)[0];if(fe!==void 0)return Ml[fe]+Sl[se<130?0:se<200?1:2];const _e=[...tl].sort((il,pl)=>q(pl)-q(il)),Le=q(_e[0])-q(_e[1]);return Ml[_e[0]]+Sl[Le<.093?0:1]}else{const fe=Pe[ae];for(let _e=1;_e<fe.length;_e++)if(q("asian")<fe[_e])return El[_e-1];return El[fe.length-1]}}}const Me=async()=>t(12,G=await ks()),w=async()=>t(13,ie=await ws());function de(E){const se=typeof E[0]=="string"?E.map(ye=>_[S[ye]].properties):E.map(ye=>ye.properties),q=(ye,Xe)=>se.reduce(($t,Ol)=>$t+(Ol[ye]||0)*(Xe&&Ol[Xe]||1),0),fe=ye=>q(ye,"pop20_total")/q("pop20_total"),_e=(ye,Xe)=>q(`${ye}_${Xe}`)/q(`${ye}_total`);let Le=q("pop10_asian"),il=q("pop20_asian"),pl=q("cvap10_asian"),Zt=q("cvap19_asian");const Cl={income:fe("income"),hhlang:_e("hhlang","asian"),benefits:_e("families","benefits"),pop20_total:q("pop20_total"),pct_increase:(il-Le)/Le,pct_increase_cvap:(Zt-pl)/pl};return["pop20","cvap19","pop10","cvap10"].forEach(ye=>tl.forEach(Xe=>Cl[ye+Xe]=_e(ye,Xe))),Cl}const Je=E=>t(8,M=M.filter((se,q)=>q!==E));async function rl(){try{await fetch(`${yl}/data.json`,{method:"POST",body:JSON.stringify(M)})}catch(E){console.error(E)}}async function Pl(){try{const E=await fetch(`${yl}/data.json`);t(8,M=(await E.json()).map(se=>Bl(Ll({},se),{stats:de(se.ids)})))}catch(E){console.error(E)}}const pe=E=>t(10,y=y.includes(E)?y.filter(se=>se!==E):[...y,E]);function Ne(E){A.includes(E)?t(9,A=A.filter(se=>se!==E)):t(9,A=[...A,E])}const ge=()=>t(50,K=!0),fl=()=>t(50,K=t(24,J=!1)),cl=E=>J&&K&&(j.length===0?t(7,j=[Ce(E)]):j.push(Ce(E)));function Oe({key:E}){}const ze=[[]];function ul(){ae=Tl(this),t(17,ae),t(3,m),t(2,d)}function hl(){be=this.__value,t(16,be)}const Re=()=>t(18,ke=!ke);function _l(){g=Tl(this),t(11,g)}function dl(){he=Tl(this),t(15,he)}function gl(){T=this.checked,t(6,T)}const He=()=>t(24,J=!0);function ml(){Y=this.clientWidth,t(14,Y)}return l.$$set=E=>{"topoData"in E&&t(47,f=E.topoData),"obj"in E&&t(0,r=E.obj),"neighbors"in E&&t(48,c=E.neighbors),"data"in E&&t(1,_=E.data),"dynamicVars"in E&&t(2,d=E.dynamicVars),"staticVars"in E&&t(3,m=E.staticVars),"tractVars"in E&&t(4,v=E.tractVars),"pluralityVars"in E&&t(5,k=E.pluralityVars),"idToIndex"in E&&t(49,S=E.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&32768&&t(19,s=nl[he]),l.$$.dirty[0]&196616&&t(20,n=m.includes(ae)?ae:ae+(be==="past"?10:ae==="cvap"?19:20)),l.$$.dirty[0]&1048576&&t(53,i={income:E=>E[n],hhlang:E=>E[`${n}_asian`]/E[`${n}_total`],graduates:E=>(E[`${n}_hs_grad`]+E[`${n}_ba_above`])/E[`${n}_total`],families:E=>E[`${n}_benefits`]/E[`${n}_total`],workers:E=>E[`${n}_publictransport`]/E[`${n}_total`]}[n]),l.$$.dirty[0]&1441806|l.$$.dirty[1]&6291456&&t(32,a=d.includes(ae)&&!ke?Pe[ae]:Pe[n]||!m.includes(n)||n==="asiaentry"||t(52,Pe[n]=hs(_.map(E=>i(E.properties)).filter(Wl),6),Pe)),l.$$.dirty[0]&386|l.$$.dirty[1]&524288&&!K&&j.length>0){if(j[0]===j[j.length-1]){const E=new Set(j),se=_s(le((fe,_e)=>ps(E.has(Ce(fe)),E.has(Ce(_e)))).coordinates.flat()),q=_.filter(fe=>ds(gs(fe.geometry.coordinates[0]),se)).map(Ce);t(8,M=[...M,{outline:bl({type:"LineString",coordinates:se}),ids:q,stats:de(q)}])}t(7,j=[])}if(l.$$.dirty[0]&6144&&g.startsWith("congress")&&G===void 0&&Me(),l.$$.dirty[0]&8256&&T&&ie===void 0&&w(),l.$$.dirty[0]&1024|l.$$.dirty[1]&1048576&&y.includes("communities")&&!N&&(Pl(),t(51,N=!0)),l.$$.dirty[0]&542720&&t(31,o=(g.endsWith("_names")?.9:1.1)/((Y-410)/s[2])*1.1),l.$$.dirty[0]&2561)for(let E=0;E<A.length;E++){const[se,q]=A[E].split(",");se===g&&t(25,I[A[E]]=de(r.geometries.filter(({properties:fe})=>q===""+fe[g])),I)}},[r,_,d,m,v,k,T,j,M,A,y,g,G,ie,Y,he,be,ae,ke,s,n,C,H,U,J,I,V,ee,ce,W,me,o,a,F,le,Z,$,Ve,Te,Je,rl,pe,Ne,ge,fl,cl,Oe,f,c,S,K,N,Pe,i,ul,hl,ze,Re,_l,dl,gl,He,ml]}class an extends Ze{constructor(e){super();$e(this,e,xs,$s,xe,{topoData:47,obj:0,neighbors:48,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:49},null,[-1,-1,-1])}}export{an as default,nn as load};

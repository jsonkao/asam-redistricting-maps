import{S as D,i as w,s as J,e as h,c as d,a as y,d as u,b as _,f as m,k as b,t as P,n as g,g as T,H as v,N as q,O as N,l as L,a8 as S,a9 as $,I as k,A as C,J as W}from"../chunks/vendor-a9cad297.js";import{e as A}from"../chunks/utils-071fc457.js";function x(r,a,t){const e=r.slice();return e[6]=a[t],e}function E(r){let a,t=r[2],e=[];for(let o=0;o<t.length;o+=1)e[o]=I(x(r,t,o));return{c(){a=h("div");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){a=d(o,"DIV",{class:!0});var n=y(a);for(let l=0;l<e.length;l+=1)e[l].l(n);n.forEach(u),this.h()},h(){_(a,"class","controls svelte-1ve7sum")},m(o,n){m(o,a,n);for(let l=0;l<e.length;l+=1)e[l].m(a,null)},p(o,n){if(n&6){t=o[2];let l;for(l=0;l<t.length;l+=1){const p=x(o,t,l);e[l]?e[l].p(p,n):(e[l]=I(p),e[l].c(),e[l].m(a,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=t.length}},d(o){o&&u(a),N(e,o)}}}function I(r){let a,t,e,o=A(r[6])+"",n,l,p,c;return{c(){a=h("label"),t=h("input"),e=b(),n=P(o),l=b(),this.h()},l(s){a=d(s,"LABEL",{class:!0});var i=y(a);t=d(i,"INPUT",{type:!0,name:!0}),e=g(i),n=T(i,o),l=g(i),i.forEach(u),this.h()},h(){_(t,"type","radio"),_(t,"name","plans"),t.__value=r[6],t.value=t.__value,r[5][0].push(t),_(a,"class","svelte-1ve7sum")},m(s,i){m(s,a,i),v(a,t),t.checked=t.__value===r[1],v(a,e),v(a,n),v(a,l),p||(c=q(t,"change",r[4]),p=!0)},p(s,i){i&2&&(t.checked=t.__value===s[1])},d(s){s&&u(a),r[5][0].splice(r[5][0].indexOf(t),1),p=!1,c()}}}function F(r){let a,t,e,o,n,l,p,c=r[0]&&E(r);return{c(){a=h("link"),t=h("script"),o=b(),n=h("div"),l=b(),c&&c.c(),p=L(),this.h()},l(s){const i=S('[data-svelte="svelte-1p75gtx"]',document.head);a=d(i,"LINK",{href:!0,rel:!0}),t=d(i,"SCRIPT",{src:!0});var f=y(t);f.forEach(u),i.forEach(u),o=g(s),n=d(s,"DIV",{id:!0,class:!0}),y(n).forEach(u),l=g(s),c&&c.l(s),p=L(),this.h()},h(){_(a,"href","https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css"),_(a,"rel","stylesheet"),$(t.src,e="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js")||_(t,"src",e),_(n,"id","map"),_(n,"class","svelte-1ve7sum")},m(s,i){v(document.head,a),v(document.head,t),m(s,o,i),m(s,n,i),m(s,l,i),c&&c.m(s,i),m(s,p,i)},p(s,[i]){s[0]?c?c.p(s,i):(c=E(s),c.c(),c.m(p.parentNode,p)):c&&(c.d(1),c=null)},i:k,o:k,d(s){u(a),u(t),s&&u(o),s&&u(n),s&&u(l),c&&c.d(s),s&&u(p)}}}function G(r,a,t){let e,o;const n=["assembly","assembly_letters","assembly_names","senate","senate_letters","senate_names"];C(()=>{mapboxgl.accessToken="pk.eyJ1IjoiaGFvaGFvbTEiLCJhIjoiY2tlenMwMDdhMDh5dDJxcWk1MXRpNWdrcSJ9.WJ50sc0kycv1demj-0tlMQ",t(3,e=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[-73.967,40.72],zoom:12})),e.on("load",async()=>{const i=await(await fetch("/plans.topojson")).json();n.forEach(f=>{const M=W(i,i.objects[f]);e.addSource(f,{type:"geojson",data:M}),e.addLayer({id:f+"_fill",type:"fill",source:f,paint:{"fill-color":"#0080ff","fill-opacity":.1}}),e.addLayer({id:f+"_outline",type:"line",source:f,layout:{},paint:{"line-color":"#000","line-width":1}}),e.on("click",f+"_fill",j=>{new mapboxgl.Popup().setLngLat(j.lngLat).setHTML(j.features[0].properties[f]).addTo(e)})}),t(0,o=!0)})});let l=n[0];const p=[[]];function c(){l=this.__value,t(1,l)}return r.$$.update=()=>{r.$$.dirty&11&&o&&n.forEach(s=>{const i=s===l?"visible":"none";e.setLayoutProperty(`${s}_fill`,"visibility",i),e.setLayoutProperty(`${s}_outline`,"visibility",i),console.log(s,i)})},[o,l,n,e,c,p]}class R extends D{constructor(a){super();w(this,a,G,F,J,{})}}export{R as default};

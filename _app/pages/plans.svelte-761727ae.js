import{S as I,i as M,s as w,e as h,c as d,a as b,d as u,b as f,f as m,k as y,t as P,n as g,g as T,H as v,N as q,V as J,l as k,ab as N,ac as S,I as L,A as C,a1 as V}from"../chunks/vendor-10aa861a.js";import{b as W}from"../chunks/paths-28a87002.js";import{k as A}from"../chunks/utils-218ed524.js";function D(r,s,e){const o=r.slice();return o[7]=s[e],o}function x(r){let s,e=r[2],o=[];for(let t=0;t<e.length;t+=1)o[t]=E(D(r,e,t));return{c(){s=h("div");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){s=d(t,"DIV",{class:!0});var n=b(s);for(let a=0;a<o.length;a+=1)o[a].l(n);n.forEach(u),this.h()},h(){f(s,"class","controls svelte-1ve7sum")},m(t,n){m(t,s,n);for(let a=0;a<o.length;a+=1)o[a].m(s,null)},p(t,n){if(n&6){e=t[2];let a;for(a=0;a<e.length;a+=1){const p=D(t,e,a);o[a]?o[a].p(p,n):(o[a]=E(p),o[a].c(),o[a].m(s,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=e.length}},d(t){t&&u(s),J(o,t)}}}function E(r){let s,e,o,t=A(r[7])+"",n,a,p,c;return{c(){s=h("label"),e=h("input"),o=y(),n=P(t),a=y(),this.h()},l(i){s=d(i,"LABEL",{class:!0});var l=b(s);e=d(l,"INPUT",{type:!0,name:!0}),o=g(l),n=T(l,t),a=g(l),l.forEach(u),this.h()},h(){f(e,"type","radio"),f(e,"name","plans"),e.__value=r[7],e.value=e.__value,r[6][0].push(e),f(s,"class","svelte-1ve7sum")},m(i,l){m(i,s,l),v(s,e),e.checked=e.__value===r[1],v(s,o),v(s,n),v(s,a),p||(c=q(e,"change",r[5]),p=!0)},p(i,l){l&2&&(e.checked=e.__value===i[1])},d(i){i&&u(s),r[6][0].splice(r[6][0].indexOf(e),1),p=!1,c()}}}function F(r){let s,e,o,t,n,a,p,c=r[0]&&x(r);return{c(){s=h("link"),e=h("script"),t=y(),n=h("div"),a=y(),c&&c.c(),p=k(),this.h()},l(i){const l=N('[data-svelte="svelte-1p75gtx"]',document.head);s=d(l,"LINK",{href:!0,rel:!0}),e=d(l,"SCRIPT",{src:!0});var _=b(e);_.forEach(u),l.forEach(u),t=g(i),n=d(i,"DIV",{id:!0,class:!0}),b(n).forEach(u),a=g(i),c&&c.l(i),p=k(),this.h()},h(){f(s,"href","https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css"),f(s,"rel","stylesheet"),S(e.src,o="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js")||f(e,"src",o),f(n,"id","map"),f(n,"class","svelte-1ve7sum")},m(i,l){v(document.head,s),v(document.head,e),m(i,t,l),m(i,n,l),m(i,a,l),c&&c.m(i,l),m(i,p,l)},p(i,[l]){i[0]?c?c.p(i,l):(c=x(i),c.c(),c.m(p.parentNode,p)):c&&(c.d(1),c=null)},i:L,o:L,d(i){u(s),u(e),i&&u(t),i&&u(n),i&&u(a),c&&c.d(i),i&&u(p)}}}async function B({fetch:r}){return{props:{topoData:await(await r(`${W}/plans.topojson`)).json()}}}function G(r,s,e){let{topoData:o}=s,t,n;const a=["assembly","assembly_letters","assembly_names","senate","senate_letters","senate_names"];C(()=>{mapboxgl.accessToken="pk.eyJ1IjoiaGFvaGFvbTEiLCJhIjoiY2tlenMwMDdhMDh5dDJxcWk1MXRpNWdrcSJ9.WJ50sc0kycv1demj-0tlMQ",e(4,t=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[-73.967,40.72],zoom:12})),t.on("load",async()=>{a.forEach(l=>{const _=V(o,o.objects[l]);t.addSource(l,{type:"geojson",data:_}),t.addLayer({id:l+"_fill",type:"fill",source:l,paint:{"fill-color":"#0080ff","fill-opacity":.1}}),t.addLayer({id:l+"_outline",type:"line",source:l,layout:{},paint:{"line-color":"#000","line-width":1}}),t.on("click",l+"_fill",j=>{new mapboxgl.Popup().setLngLat(j.lngLat).setHTML(j.features[0].properties[l]).addTo(t)})}),e(0,n=!0)})});let p=a[0];const c=[[]];function i(){p=this.__value,e(1,p)}return r.$$set=l=>{"topoData"in l&&e(3,o=l.topoData)},r.$$.update=()=>{r.$$.dirty&19&&n&&a.forEach(l=>{const _=l===p?"visible":"none";t.setLayoutProperty(`${l}_fill`,"visibility",_),t.setLayoutProperty(`${l}_outline`,"visibility",_)})},[n,p,a,o,t,i,c]}class K extends I{constructor(s){super();M(this,s,G,F,w,{topoData:3})}}export{K as default,B as load};

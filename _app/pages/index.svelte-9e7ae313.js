var Mt=Object.defineProperty,Tt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var bl=Object.getOwnPropertySymbols;var jt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable;var vl=(t,e,l)=>e in t?Mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,pl=(t,e)=>{for(var l in e||(e={}))jt.call(e,l)&&vl(t,l,e[l]);if(bl)for(var l of bl(e))Lt.call(e,l)&&vl(t,l,e[l]);return t},kl=(t,e)=>Tt(t,Ct(e));import{S as $e,i as xe,s as el,l as ne,f as S,J as Te,K as Ce,a as v,d as c,b as p,L as ye,M as pe,N as wl,O as ul,P as Be,Q as We,R as Ne,T as Ge,U as ke,H as h,t as z,g as U,h as be,V as Ve,W as El,X as It,x as de,r as qe,u as Pe,w as Fe,Y as Bt,I as Je,e as D,c as M,k as I,n as B,Z as Ot,_ as yt,j as ll,m as tl,$ as sl,o as nl,v as il,a0 as Nt,a1 as St,A as At,a2 as zt,a3 as Ut,a4 as Ht,a5 as Rt,a6 as al,a7 as Pl}from"../chunks/vendor-48024f35.js";import{b as _l}from"../chunks/paths-28a87002.js";import{i as Le,p as De,m as Ke,c as Se,a as Vl,d as Dl,u as Wt,r as Ml,b as ol,e as Tl,x as Gt,f as qt,g as Ft,h as Jt,j as Kt}from"../chunks/utils-a6b74bf3.js";const gl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},dl=["44","99","ee"],Qe=["asian","black","hispanic","white"],rl=["1990_earlier","1990_1999","2000_2009","2010_later"],fl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},hl=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],Xe=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],Qt={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},cl={Chinatown:[80,500,300,220],"Chinatown Wide":[80,430,500,440],Brooklyn:[20,550,600,600],Full:[0,0,975,1420]};function Cl(t,e,l){const s=t.slice();return s[34]=e[l].properties,s[35]=e[l].geometry.coordinates[0],s[36]=e[l].geometry.coordinates[1],s}function jl(t,e,l){const s=t.slice();return s[39]=e[l].outline,s}function Ll(t,e,l){const s=t.slice();return s[42]=e[l],s[44]=l,s}function Il(t){let e,l,s,n,o;function i(){return t[29](t[44])}function a(){return t[30](t[42])}function f(){return t[31](t[42])}return{c(){e=Te("path"),this.h()},l(r){e=Ce(r,"path",{d:!0,fill:!0,class:!0}),v(e).forEach(c),this.h()},h(){p(e,"d",l=t[4](t[42])),p(e,"fill",s=t[5](t[42],t[9],t[10],t[8])),p(e,"class","svelte-fth5l8"),ye(e,"head",t[2][0]===Le(t[42]))},m(r,u){S(r,e,u),n||(o=[pe(e,"click",i),pe(e,"contextmenu",wl(a)),pe(e,"mousemove",wl(f))],n=!0)},p(r,u){t=r,u[0]&24&&l!==(l=t[4](t[42]))&&p(e,"d",l),u[0]&1832&&s!==(s=t[5](t[42],t[9],t[10],t[8]))&&p(e,"fill",s),u[0]&12&&ye(e,"head",t[2][0]===Le(t[42]))},d(r){r&&c(e),n=!1,ul(o)}}}function Bl(t,e){let l,s,n=e[44]<e[28]&&Il(e);return{key:t,first:null,c(){l=ne(),n&&n.c(),s=ne(),this.h()},l(o){l=ne(),n&&n.l(o),s=ne(),this.h()},h(){this.first=l},m(o,i){S(o,l,i),n&&n.m(o,i),S(o,s,i)},p(o,i){e=o,e[44]<e[28]?n?n.p(e,i):(n=Il(e),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(o){o&&c(l),n&&n.d(o),o&&c(s)}}}function Ol(t){let e,l;return{c(){e=Te("path"),this.h()},l(s){e=Ce(s,"path",{class:!0,d:!0}),v(e).forEach(c),this.h()},h(){p(e,"class","mesh-bg svelte-fth5l8"),p(e,"d",l=t[11].includes(t[9])?t[17]:t[18])},m(s,n){S(s,e,n)},p(s,n){n[0]&395776&&l!==(l=s[11].includes(s[9])?s[17]:s[18])&&p(e,"d",l)},d(s){s&&c(e)}}}function yl(t){let e,l,s,n,o=t[13],i=[];for(let a=0;a<o.length;a+=1)i[a]=Nl(jl(t,o,a));return{c(){e=Te("g");for(let a=0;a<i.length;a+=1)i[a].c()},l(a){e=Ce(a,"g",{});var f=v(e);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(c)},m(a,f){S(a,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);n=!0},p(a,f){if(f[0]&8192){o=a[13];let r;for(r=0;r<o.length;r+=1){const u=jl(a,o,r);i[r]?i[r].p(u,f):(i[r]=Nl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i(a){n||(Be(()=>{s&&s.end(1),l=We(e,Ne,{}),l.start()}),n=!0)},o(a){l&&l.invalidate(),s=Ge(e,Ne,{}),n=!1},d(a){a&&c(e),ke(i,a),a&&s&&s.end()}}}function Nl(t){let e,l;return{c(){e=Te("path"),this.h()},l(s){e=Ce(s,"path",{class:!0,d:!0}),v(e).forEach(c),this.h()},h(){p(e,"class","mesh-community svelte-fth5l8"),p(e,"d",l=t[39])},m(s,n){S(s,e,n)},p(s,n){n[0]&8192&&l!==(l=s[39])&&p(e,"d",l)},d(s){s&&c(e)}}}function Sl(t){let e,l,s,n,o,i;return{c(){e=Te("g"),l=Te("path"),this.h()},l(a){e=Ce(a,"g",{});var f=v(e);l=Ce(f,"path",{class:!0,d:!0}),v(l).forEach(c),f.forEach(c),this.h()},h(){p(l,"class","mesh-district svelte-fth5l8"),p(l,"d",s=((t[15].startsWith("congress")?t[23]:t[24])||{})[t[15]]),ye(l,"showPluralities",t[8])},m(a,f){S(a,e,f),h(e,l),i=!0},p(a,f){(!i||f[0]&25198592&&s!==(s=((a[15].startsWith("congress")?a[23]:a[24])||{})[a[15]]))&&p(l,"d",s),f[0]&256&&ye(l,"showPluralities",a[8])},i(a){i||(Be(()=>{o&&o.end(1),n=We(e,Ne,{}),n.start()}),i=!0)},o(a){n&&n.invalidate(),o=Ge(e,Ne,{}),i=!1},d(a){a&&c(e),a&&o&&o.end()}}}function Al(t){let e,l,s,n,o,i;return{c(){e=Te("g"),l=Te("path"),this.h()},l(a){e=Ce(a,"g",{});var f=v(e);l=Ce(f,"path",{class:!0,d:!0}),v(l).forEach(c),f.forEach(c),this.h()},h(){p(l,"class","mesh-district svelte-fth5l8"),p(l,"d",s=t[4](t[19](t[32],t[21])))},m(a,f){S(a,e,f),h(e,l),i=!0},p(a,f){(!i||f[0]&2654224&&s!==(s=a[4](a[19](a[32],a[21]))))&&p(l,"d",s)},i(a){i||(Be(()=>{o&&o.end(1),n=We(e,Ne,{}),n.start()}),i=!0)},o(a){n&&n.invalidate(),o=Ge(e,Ne,{}),i=!1},d(a){a&&c(e),a&&o&&o.end()}}}function zl(t){let e,l,s,n,o=t[16],i=[];for(let a=0;a<o.length;a+=1)i[a]=Hl(Cl(t,o,a));return{c(){e=Te("g");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=Ce(a,"g",{class:!0});var f=v(e);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(c),this.h()},h(){p(e,"class","labels svelte-fth5l8")},m(a,f){S(a,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);n=!0},p(a,f){if(f[0]&5341184){o=a[16];let r;for(r=0;r<o.length;r+=1){const u=Cl(a,o,r);i[r]?i[r].p(u,f):(i[r]=Hl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i(a){n||(Be(()=>{s&&s.end(1),l=We(e,Ne,{}),l.start()}),n=!0)},o(a){l&&l.invalidate(),s=Ge(e,Ne,{}),n=!1},d(a){a&&c(e),ke(i,a),a&&s&&s.end()}}}function Ul(t){let e,l=t[34][t[15]]+"",s,n,o,i,a;function f(){return t[33](t[34])}return{c(){e=Te("text"),s=z(l),this.h()},l(r){e=Ce(r,"text",{x:!0,y:!0,class:!0});var u=v(e);s=U(u,l),u.forEach(c),this.h()},h(){p(e,"x",n=t[35]),p(e,"y",o=t[36]),p(e,"class","svelte-fth5l8"),ye(e,"chosen",t[20].includes(`${t[15]},${t[34][t[15]]}`))},m(r,u){S(r,e,u),h(e,s),i||(a=pe(e,"click",f),i=!0)},p(r,u){t=r,u[0]&98304&&l!==(l=t[34][t[15]]+"")&&be(s,l),u[0]&65536&&n!==(n=t[35])&&p(e,"x",n),u[0]&65536&&o!==(o=t[36])&&p(e,"y",o),u[0]&1146880&&ye(e,"chosen",t[20].includes(`${t[15]},${t[34][t[15]]}`))},d(r){r&&c(e),i=!1,a()}}}function Hl(t){let e,l=t[15]in t[34]&&Ul(t);return{c(){l&&l.c(),e=ne()},l(s){l&&l.l(s),e=ne()},m(s,n){l&&l.m(s,n),S(s,e,n)},p(s,n){s[15]in s[34]?l?l.p(s,n):(l=Ul(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(s){l&&l.d(s),s&&c(e)}}}function Xt(t){let e,l,s=[],n=new Map,o,i,a,f,r,u,P,w,g,d=t[3];const _=y=>Le(y[42]);for(let y=0;y<d.length;y+=1){let L=Ll(t,d,y),G=_(L);n.set(G,s[y]=Bl(G,L))}let E=t[18]&&Ol(t),V=t[12]&&yl(t),T=t[14]&&!t[6]&&Sl(t),O=t[6]&&Al(t),j=(t[14]||t[6])&&zl(t);return{c(){e=Te("svg"),l=Te("g");for(let y=0;y<s.length;y+=1)s[y].c();o=Te("g"),E&&E.c(),i=ne(),V&&V.c(),a=ne(),T&&T.c(),f=ne(),O&&O.c(),r=ne(),j&&j.c(),this.h()},l(y){e=Ce(y,"svg",{viewBox:!0,style:!0,class:!0});var L=v(e);l=Ce(L,"g",{class:!0});var G=v(l);for(let ie=0;ie<s.length;ie+=1)s[ie].l(G);G.forEach(c),o=Ce(L,"g",{class:!0});var Z=v(o);E&&E.l(Z),i=ne(),V&&V.l(Z),a=ne(),T&&T.l(Z),f=ne(),O&&O.l(Z),r=ne(),j&&j.l(Z),Z.forEach(c),L.forEach(c),this.h()},h(){p(l,"class","block-groups svelte-fth5l8"),p(o,"class","meshes svelte-fth5l8"),p(e,"viewBox",u=t[0].join(" ")),Ve(e,"--font-size",(t[1]||11)+"px"),p(e,"class","svelte-fth5l8")},m(y,L){S(y,e,L),h(e,l);for(let G=0;G<s.length;G+=1)s[G].m(l,null);h(e,o),E&&E.m(o,null),h(o,i),V&&V.m(o,null),h(o,a),T&&T.m(o,null),h(o,f),O&&O.m(o,null),h(o,r),j&&j.m(o,null),P=!0,w||(g=[pe(e,"mousedown",function(){El(t[25])&&t[25].apply(this,arguments)}),pe(e,"mouseup",function(){El(t[26])&&t[26].apply(this,arguments)})],w=!0)},p(y,L){t=y,L[0]&402655228&&(d=t[3],s=It(s,L,_,1,t,d,n,l,Bt,Bl,null,Ll)),t[18]?E?E.p(t,L):(E=Ol(t),E.c(),E.m(o,i)):E&&(E.d(1),E=null),t[12]?V?(V.p(t,L),L[0]&4096&&de(V,1)):(V=yl(t),V.c(),de(V,1),V.m(o,a)):V&&(qe(),Pe(V,1,1,()=>{V=null}),Fe()),t[14]&&!t[6]?T?(T.p(t,L),L[0]&16448&&de(T,1)):(T=Sl(t),T.c(),de(T,1),T.m(o,f)):T&&(qe(),Pe(T,1,1,()=>{T=null}),Fe()),t[6]?O?(O.p(t,L),L[0]&64&&de(O,1)):(O=Al(t),O.c(),de(O,1),O.m(o,r)):O&&(qe(),Pe(O,1,1,()=>{O=null}),Fe()),t[14]||t[6]?j?(j.p(t,L),L[0]&16448&&de(j,1)):(j=zl(t),j.c(),de(j,1),j.m(o,null)):j&&(qe(),Pe(j,1,1,()=>{j=null}),Fe()),(!P||L[0]&1&&u!==(u=t[0].join(" ")))&&p(e,"viewBox",u),(!P||L[0]&2)&&Ve(e,"--font-size",(t[1]||11)+"px")},i(y){P||(de(V),de(T),de(O),de(j),P=!0)},o(y){Pe(V),Pe(T),Pe(O),Pe(j),P=!1},d(y){y&&c(e);for(let L=0;L<s.length;L+=1)s[L].d();E&&E.d(),V&&V.d(),T&&T.d(),O&&O.d(),j&&j.d(),w=!1,ul(g)}}}function Yt(t,e,l){let{viewBox:s,labelSize:n,draggedBgs:o,data:i,path:a,color:f,changingLines:r,neighbor:u,showPluralities:P,metric:w,period:g,tractVars:d,showComms:_,drawings:E,showPlans:V,plan:T,points:O,tractMesh:j,bgMesh:y,mesh:L,aggregates:G,obj:Z,handleLabelClick:ie,congressMeshes:K,plansMeshes:q,startDrag:H,endDrag:$,handleMouseMove:W,viewCutoff:le}=e;const oe=k=>r&&u(k),re=k=>console.log(k.properties),he=k=>W(k),te=(k,Oe)=>k.properties[T]!==Oe.properties[T],me=k=>ie(`${T},${k[T]}`);return t.$$set=k=>{"viewBox"in k&&l(0,s=k.viewBox),"labelSize"in k&&l(1,n=k.labelSize),"draggedBgs"in k&&l(2,o=k.draggedBgs),"data"in k&&l(3,i=k.data),"path"in k&&l(4,a=k.path),"color"in k&&l(5,f=k.color),"changingLines"in k&&l(6,r=k.changingLines),"neighbor"in k&&l(7,u=k.neighbor),"showPluralities"in k&&l(8,P=k.showPluralities),"metric"in k&&l(9,w=k.metric),"period"in k&&l(10,g=k.period),"tractVars"in k&&l(11,d=k.tractVars),"showComms"in k&&l(12,_=k.showComms),"drawings"in k&&l(13,E=k.drawings),"showPlans"in k&&l(14,V=k.showPlans),"plan"in k&&l(15,T=k.plan),"points"in k&&l(16,O=k.points),"tractMesh"in k&&l(17,j=k.tractMesh),"bgMesh"in k&&l(18,y=k.bgMesh),"mesh"in k&&l(19,L=k.mesh),"aggregates"in k&&l(20,G=k.aggregates),"obj"in k&&l(21,Z=k.obj),"handleLabelClick"in k&&l(22,ie=k.handleLabelClick),"congressMeshes"in k&&l(23,K=k.congressMeshes),"plansMeshes"in k&&l(24,q=k.plansMeshes),"startDrag"in k&&l(25,H=k.startDrag),"endDrag"in k&&l(26,$=k.endDrag),"handleMouseMove"in k&&l(27,W=k.handleMouseMove),"viewCutoff"in k&&l(28,le=k.viewCutoff)},[s,n,o,i,a,f,r,u,P,w,g,d,_,E,V,T,O,j,y,L,G,Z,ie,K,q,H,$,W,le,oe,re,he,te,me]}class Zt extends $e{constructor(e){super();xe(this,e,Yt,Xt,el,{viewBox:0,labelSize:1,draggedBgs:2,data:3,path:4,color:5,changingLines:6,neighbor:7,showPluralities:8,metric:9,period:10,tractVars:11,showComms:12,drawings:13,showPlans:14,plan:15,points:16,tractMesh:17,bgMesh:18,mesh:19,aggregates:20,obj:21,handleLabelClick:22,congressMeshes:23,plansMeshes:24,startDrag:25,endDrag:26,handleMouseMove:27,viewCutoff:28},null,[-1,-1])}}function Rl(t,e,l){const s=t.slice();return s[21]=e[l],s[20]=l,s}function Wl(t,e,l){const s=t.slice();return s[21]=e[l],s[20]=l,s}function Gl(t,e,l){const s=t.slice();return s[16]=e[l],s}function ql(t,e,l){const s=t.slice();return s[16]=e[l],s[20]=l,s}function Fl(t,e,l){const s=t.slice();return s[10]=e[l],s}function Jl(t,e,l){const s=t.slice();return s[13]=e[l],s}function $t(t){let e,l,s=t[9],n=[];for(let a=0;a<s.length;a+=1)n[a]=Kl(Wl(t,s,a));let o=t[9],i=[];for(let a=0;a<o.length;a+=1)i[a]=Ql(Rl(t,o,a));return{c(){e=D("div");for(let a=0;a<n.length;a+=1)n[a].c();l=I();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0,style:!0});var f=v(e);for(let r=0;r<n.length;r+=1)n[r].l(f);l=B(f);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(c),this.h()},h(){p(e,"class","color-legend svelte-1dpo440"),Ve(e,"grid-template-columns","repeat("+(t[3].includes(t[4])?5:6)+", 40px)"),ye(e,"pctasian",t[3].includes(t[4]))},m(a,f){S(a,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);h(e,l);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(a,f){if(f&536){s=a[9];let r;for(r=0;r<s.length;r+=1){const u=Wl(a,s,r);n[r]?n[r].p(u,f):(n[r]=Kl(u),n[r].c(),n[r].m(e,l))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&536){o=a[9];let r;for(r=0;r<o.length;r+=1){const u=Rl(a,o,r);i[r]?i[r].p(u,f):(i[r]=Ql(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}f&24&&Ve(e,"grid-template-columns","repeat("+(a[3].includes(a[4])?5:6)+", 40px)"),f&24&&ye(e,"pctasian",a[3].includes(a[4]))},d(a){a&&c(e),ke(n,a),ke(i,a)}}}function xt(t){let e,l,s=t[8],n=[];for(let a=0;a<s.length;a+=1)n[a]=Xl(ql(t,s,a));let o=t[8],i=[];for(let a=0;a<o.length;a+=1)i[a]=Yl(Gl(t,o,a));return{c(){e=D("div");for(let a=0;a<n.length;a+=1)n[a].c();l=I();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0});var f=v(e);for(let r=0;r<n.length;r+=1)n[r].l(f);l=B(f);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(c),this.h()},h(){p(e,"class","color-legend plurality-legend svelte-1dpo440")},m(a,f){S(a,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);h(e,l);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(a,f){if(f&256){s=a[8];let r;for(r=0;r<s.length;r+=1){const u=ql(a,s,r);n[r]?n[r].p(u,f):(n[r]=Xl(u),n[r].c(),n[r].m(e,l))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&256){o=a[8];let r;for(r=0;r<o.length;r+=1){const u=Gl(a,o,r);i[r]?i[r].p(u,f):(i[r]=Yl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},d(a){a&&c(e),ke(n,a),ke(i,a)}}}function es(t){let e,l,s,n,o,i,a,f,r,u,P,w,g=t[0],d=[];for(let _=0;_<g.length;_+=1)d[_]=$l(Fl(t,g,_));return{c(){e=D("div");for(let _=0;_<d.length;_+=1)d[_].c();l=I(),s=D("p"),n=D("span"),o=z("Weak plurality"),i=I(),a=D("p"),f=I(),r=D("p"),u=z("Majority"),P=I(),w=D("p"),this.h()},l(_){e=M(_,"DIV",{class:!0});var E=v(e);for(let j=0;j<d.length;j+=1)d[j].l(E);l=B(E),s=M(E,"P",{class:!0});var V=v(s);n=M(V,"SPAN",{});var T=v(n);o=U(T,"Weak plurality"),T.forEach(c),V.forEach(c),i=B(E),a=M(E,"P",{class:!0}),v(a).forEach(c),f=B(E),r=M(E,"P",{class:!0});var O=v(r);u=U(O,"Majority"),O.forEach(c),P=B(E),w=M(E,"P",{class:!0}),v(w).forEach(c),E.forEach(c),this.h()},h(){p(s,"class","col-head svelte-1dpo440"),p(a,"class","col-head svelte-1dpo440"),p(r,"class","col-head svelte-1dpo440"),p(w,"class","col-head svelte-1dpo440"),p(e,"class","legend svelte-1dpo440")},m(_,E){S(_,e,E);for(let V=0;V<d.length;V+=1)d[V].m(e,null);h(e,l),h(e,s),h(s,n),h(n,o),h(e,i),h(e,a),h(e,f),h(e,r),h(r,u),h(e,P),h(e,w)},p(_,E){if(E&7){g=_[0];let V;for(V=0;V<g.length;V+=1){const T=Fl(_,g,V);d[V]?d[V].p(T,E):(d[V]=$l(T),d[V].c(),d[V].m(e,l))}for(;V<d.length;V+=1)d[V].d(1);d.length=g.length}},d(_){_&&c(e),ke(d,_)}}}function Kl(t){let e;return{c(){e=D("div"),this.h()},l(l){e=M(l,"DIV",{style:!0}),v(e).forEach(c),this.h()},h(){Ve(e,"background-color",t[3].includes(t[4])?hl[t[20]]:Xe[t[20]])},m(l,s){S(l,e,s)},p(l,s){s&24&&Ve(e,"background-color",l[3].includes(l[4])?hl[l[20]]:Xe[l[20]])},d(l){l&&c(e)}}}function Ql(t){let e,l=(t[9][t[9].length-1]<1?De(t[21],0):t[9][t[9].length-1]>1e3?Ke(t[21]):t[21])+(t[3].includes(t[4])&&t[20]===t[9].length-1?" Asian":"")+"",s,n;return{c(){e=D("p"),s=z(l),n=I(),this.h()},l(o){e=M(o,"P",{class:!0});var i=v(e);s=U(i,l),n=B(i),i.forEach(c),this.h()},h(){p(e,"class","svelte-1dpo440")},m(o,i){S(o,e,i),h(e,s),h(e,n)},p(o,i){i&536&&l!==(l=(o[9][o[9].length-1]<1?De(o[21],0):o[9][o[9].length-1]>1e3?Ke(o[21]):o[21])+(o[3].includes(o[4])&&o[20]===o[9].length-1?" Asian":"")+"")&&be(s,l)},d(o){o&&c(e)}}}function Xl(t){let e;return{c(){e=D("div"),this.h()},l(l){e=M(l,"DIV",{style:!0}),v(e).forEach(c),this.h()},h(){Ve(e,"background-color",Xe[t[20]])},m(l,s){S(l,e,s)},p:Je,d(l){l&&c(e)}}}function Yl(t){let e,l=t[16].replace("_","-")+"",s;return{c(){e=D("p"),s=z(l),this.h()},l(n){e=M(n,"P",{class:!0});var o=v(e);s=U(o,l),o.forEach(c),this.h()},h(){p(e,"class","svelte-1dpo440")},m(n,o){S(n,e,o),h(e,s)},p(n,o){o&256&&l!==(l=n[16].replace("_","-")+"")&&be(s,l)},d(n){n&&c(e)}}}function Zl(t){let e;return{c(){e=D("div"),this.h()},l(l){e=M(l,"DIV",{style:!0}),v(e).forEach(c),this.h()},h(){Ve(e,"background-color",t[2][t[10]]+t[13])},m(l,s){S(l,e,s)},p(l,s){s&7&&Ve(e,"background-color",l[2][l[10]]+l[13])},d(l){l&&c(e)}}}function $l(t){let e,l,s=Se(t[10])+"",n,o=t[1],i=[];for(let a=0;a<o.length;a+=1)i[a]=Zl(Jl(t,o,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=I(),l=D("p"),n=z(s),this.h()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=B(a),l=M(a,"P",{class:!0});var f=v(l);n=U(f,s),f.forEach(c),this.h()},h(){p(l,"class","row-label svelte-1dpo440")},m(a,f){for(let r=0;r<i.length;r+=1)i[r].m(a,f);S(a,e,f),S(a,l,f),h(l,n)},p(a,f){if(f&7){o=a[1];let r;for(r=0;r<o.length;r+=1){const u=Jl(a,o,r);i[r]?i[r].p(u,f):(i[r]=Zl(u),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}f&1&&s!==(s=Se(a[10])+"")&&be(n,s)},d(a){ke(i,a),a&&c(e),a&&c(l)}}}function ls(t){let e,l,s;function n(a,f){return(e==null||f&88)&&(e=!!(a[3].includes(a[4])&&a[6])),e?es:((l==null||f&160)&&(l=!!a[7].includes(a[5])),l?xt:$t)}let o=n(t,-1),i=o(t);return{c(){i.c(),s=ne()},l(a){i.l(a),s=ne()},m(a,f){i.m(a,f),S(a,s,f)},p(a,[f]){o===(o=n(a,f))&&i?i.p(a,f):(i.d(1),i=o(a),i&&(i.c(),i.m(s.parentNode,s)))},i:Je,o:Je,d(a){i.d(a),a&&c(s)}}}function ts(t,e,l){let{groups:s,levels:n,colors:o,dynamicVars:i,variable:a,metric:f,showPluralities:r,pluralityVars:u,periods:P,breaks:w}=e;return t.$$set=g=>{"groups"in g&&l(0,s=g.groups),"levels"in g&&l(1,n=g.levels),"colors"in g&&l(2,o=g.colors),"dynamicVars"in g&&l(3,i=g.dynamicVars),"variable"in g&&l(4,a=g.variable),"metric"in g&&l(5,f=g.metric),"showPluralities"in g&&l(6,r=g.showPluralities),"pluralityVars"in g&&l(7,u=g.pluralityVars),"periods"in g&&l(8,P=g.periods),"breaks"in g&&l(9,w=g.breaks)},[s,n,o,i,a,f,r,u,P,w]}class ss extends $e{constructor(e){super();xe(this,e,ts,ls,el,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function xl(t,e,l){const s=t.slice();return s[18]=e[l].name,s[9]=e[l].stats,s[20]=l,s}function et(t,e,l){const s=t.slice();return s[15]=e[l],s}function lt(t,e,l){const s=t.slice();return s[12]=e[l],s}function tt(t,e,l){const s=t.slice();return s[15]=e[l],s}function ns(t){let e,l=t[6],s=[];for(let n=0;n<l.length;n+=1)s[n]=nt(xl(t,l,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=ne()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=ne()},m(n,o){for(let i=0;i<s.length;i+=1)s[i].m(n,o);S(n,e,o)},p(n,o){if(o&200){l=n[6];let i;for(i=0;i<l.length;i+=1){const a=xl(n,l,i);s[i]?s[i].p(a,o):(s[i]=nt(a),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},d(n){ke(s,n),n&&c(e)}}}function is(t){let e,l=t[0],s=[];for(let n=0;n<l.length;n+=1)s[n]=ot(lt(t,l,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=ne()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=ne()},m(n,o){for(let i=0;i<s.length;i+=1)s[i].m(n,o);S(n,e,o)},p(n,o){if(o&575){l=n[0];let i;for(i=0;i<l.length;i+=1){const a=lt(n,l,i);s[i]?s[i].p(a,o):(s[i]=ot(a),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},d(n){ke(s,n),n&&c(e)}}}function st(t){let e,l,s=Se(t[15])+"",n,o,i,a=De(t[9]["cvap19"+t[15]])+"",f,r,u,P=De(t[9]["pop20"+t[15]])+"",w,g;return{c(){e=D("tr"),l=D("td"),n=z(s),o=I(),i=D("td"),f=z(a),r=I(),u=D("td"),w=z(P),g=I(),this.h()},l(d){e=M(d,"TR",{class:!0});var _=v(e);l=M(_,"TD",{class:!0});var E=v(l);n=U(E,s),E.forEach(c),o=B(_),i=M(_,"TD",{class:!0});var V=v(i);f=U(V,a),V.forEach(c),r=B(_),u=M(_,"TD",{class:!0});var T=v(u);w=U(T,P),T.forEach(c),g=B(_),_.forEach(c),this.h()},h(){p(l,"class","svelte-1u9ffu2"),p(i,"class","svelte-1u9ffu2"),p(u,"class","svelte-1u9ffu2"),p(e,"class","svelte-1u9ffu2")},m(d,_){S(d,e,_),h(e,l),h(l,n),h(e,o),h(e,i),h(i,f),h(e,r),h(e,u),h(u,w),h(e,g)},p(d,_){_&8&&s!==(s=Se(d[15])+"")&&be(n,s),_&72&&a!==(a=De(d[9]["cvap19"+d[15]])+"")&&be(f,a),_&72&&P!==(P=De(d[9]["pop20"+d[15]])+"")&&be(w,P)},d(d){d&&c(e)}}}function nt(t){let e,l,s,n=(t[18]||"COI"+(t[20]+1))+"",o,i,a,f,r,u,P,w,g,d,_,E,V,T,O,j,y,L,G=Ke(t[9].income)+"",Z,ie,K,q,H=De(t[9].hhlang)+"",$,W,le,oe,re=De(t[9].benefits)+"",he,te,me,k;function Oe(){return t[11](t[20])}let ve=t[3],ue=[];for(let _e=0;_e<ve.length;_e+=1)ue[_e]=st(et(t,ve,_e));return{c(){e=D("div"),l=D("p"),s=D("i"),o=z(n),i=I(),a=D("button"),f=z("\u{1F5D1}"),r=I(),u=D("table"),P=D("tr"),w=D("th"),g=I(),d=D("th"),_=z("CVAP"),E=I(),V=D("th"),T=z("Pop."),O=I();for(let _e=0;_e<ue.length;_e+=1)ue[_e].c();j=I(),y=D("p"),L=z("Income: "),Z=z(G),ie=I(),K=D("p"),q=z("Asian and LEP: "),$=z(H),W=I(),le=D("p"),oe=z("Pct. gov't benefits: "),he=z(re),te=I(),this.h()},l(_e){e=M(_e,"DIV",{});var X=v(e);l=M(X,"P",{class:!0});var A=v(l);s=M(A,"I",{});var Ee=v(s);o=U(Ee,n),Ee.forEach(c),i=B(A),a=M(A,"BUTTON",{});var fe=v(a);f=U(fe,"\u{1F5D1}"),fe.forEach(c),A.forEach(c),r=B(X),u=M(X,"TABLE",{class:!0});var Q=v(u);P=M(Q,"TR",{class:!0});var J=v(P);w=M(J,"TH",{class:!0}),v(w).forEach(c),g=B(J),d=M(J,"TH",{class:!0});var x=v(d);_=U(x,"CVAP"),x.forEach(c),E=B(J),V=M(J,"TH",{class:!0});var ae=v(V);T=U(ae,"Pop."),ae.forEach(c),J.forEach(c),O=B(Q);for(let C=0;C<ue.length;C+=1)ue[C].l(Q);Q.forEach(c),j=B(X),y=M(X,"P",{class:!0});var je=v(y);L=U(je,"Income: "),Z=U(je,G),je.forEach(c),ie=B(X),K=M(X,"P",{class:!0});var ge=v(K);q=U(ge,"Asian and LEP: "),$=U(ge,H),ge.forEach(c),W=B(X),le=M(X,"P",{class:!0});var m=v(le);oe=U(m,"Pct. gov't benefits: "),he=U(m,re),m.forEach(c),te=B(X),X.forEach(c),this.h()},h(){p(l,"class","svelte-1u9ffu2"),p(w,"class","svelte-1u9ffu2"),p(d,"class","svelte-1u9ffu2"),p(V,"class","svelte-1u9ffu2"),p(P,"class","svelte-1u9ffu2"),p(u,"class","svelte-1u9ffu2"),p(y,"class","table-footer svelte-1u9ffu2"),p(K,"class","table-footer svelte-1u9ffu2"),p(le,"class","table-footer svelte-1u9ffu2")},m(_e,X){S(_e,e,X),h(e,l),h(l,s),h(s,o),h(l,i),h(l,a),h(a,f),h(e,r),h(e,u),h(u,P),h(P,w),h(P,g),h(P,d),h(d,_),h(P,E),h(P,V),h(V,T),h(u,O);for(let A=0;A<ue.length;A+=1)ue[A].m(u,null);h(e,j),h(e,y),h(y,L),h(y,Z),h(e,ie),h(e,K),h(K,q),h(K,$),h(e,W),h(e,le),h(le,oe),h(le,he),h(e,te),me||(k=pe(a,"click",Oe),me=!0)},p(_e,X){if(t=_e,X&64&&n!==(n=(t[18]||"COI"+(t[20]+1))+"")&&be(o,n),X&72){ve=t[3];let A;for(A=0;A<ve.length;A+=1){const Ee=et(t,ve,A);ue[A]?ue[A].p(Ee,X):(ue[A]=st(Ee),ue[A].c(),ue[A].m(u,null))}for(;A<ue.length;A+=1)ue[A].d(1);ue.length=ve.length}X&64&&G!==(G=Ke(t[9].income)+"")&&be(Z,G),X&64&&H!==(H=De(t[9].hhlang)+"")&&be($,H),X&64&&re!==(re=De(t[9].benefits)+"")&&be(he,re)},d(_e){_e&&c(e),ke(ue,_e),me=!1,k()}}}function it(t){let e,l,s,n=Vl(t[12])+"",o,i,a,f,r,u,P,w,g,d,_,E,V,T,O,j=Ke(t[9][t[12]].income)+(t[4]&&t[2]in t[5]?"; "+Dl(t[9][t[12]].pop20_total-t[5][t[2]]):"")+"",y,L,G,Z;function ie(){return t[10](t[12])}let K=t[3],q=[];for(let H=0;H<K.length;H+=1)q[H]=at(tt(t,K,H));return{c(){e=D("div"),l=D("p"),s=D("i"),o=z(n),i=I(),a=D("table"),f=D("tr"),r=D("th"),u=I(),P=D("th"),w=z("CVAP"),g=I(),d=D("th"),_=z("Pop."),E=I();for(let H=0;H<q.length;H+=1)q[H].c();V=I(),T=D("p"),O=z("Income: "),y=z(j),L=I(),this.h()},l(H){e=M(H,"DIV",{class:!0});var $=v(e);l=M($,"P",{class:!0});var W=v(l);s=M(W,"I",{});var le=v(s);o=U(le,n),le.forEach(c),W.forEach(c),i=B($),a=M($,"TABLE",{class:!0});var oe=v(a);f=M(oe,"TR",{class:!0});var re=v(f);r=M(re,"TH",{class:!0}),v(r).forEach(c),u=B(re),P=M(re,"TH",{class:!0});var he=v(P);w=U(he,"CVAP"),he.forEach(c),g=B(re),d=M(re,"TH",{class:!0});var te=v(d);_=U(te,"Pop."),te.forEach(c),re.forEach(c),E=B(oe);for(let k=0;k<q.length;k+=1)q[k].l(oe);oe.forEach(c),V=B($),T=M($,"P",{class:!0});var me=v(T);O=U(me,"Income: "),y=U(me,j),me.forEach(c),L=B($),$.forEach(c),this.h()},h(){p(l,"class","svelte-1u9ffu2"),p(r,"class","svelte-1u9ffu2"),p(P,"class","svelte-1u9ffu2"),p(d,"class","svelte-1u9ffu2"),p(f,"class","svelte-1u9ffu2"),p(a,"class","svelte-1u9ffu2"),p(T,"class","table-footer svelte-1u9ffu2"),p(e,"class","district-aggregate svelte-1u9ffu2")},m(H,$){S(H,e,$),h(e,l),h(l,s),h(s,o),h(e,i),h(e,a),h(a,f),h(f,r),h(f,u),h(f,P),h(P,w),h(f,g),h(f,d),h(d,_),h(a,E);for(let W=0;W<q.length;W+=1)q[W].m(a,null);h(e,V),h(e,T),h(T,O),h(T,y),h(e,L),G||(Z=pe(l,"click",ie),G=!0)},p(H,$){if(t=H,$&1&&n!==(n=Vl(t[12])+"")&&be(o,n),$&521){K=t[3];let W;for(W=0;W<K.length;W+=1){const le=tt(t,K,W);q[W]?q[W].p(le,$):(q[W]=at(le),q[W].c(),q[W].m(a,null))}for(;W<q.length;W+=1)q[W].d(1);q.length=K.length}$&565&&j!==(j=Ke(t[9][t[12]].income)+(t[4]&&t[2]in t[5]?"; "+Dl(t[9][t[12]].pop20_total-t[5][t[2]]):"")+"")&&be(y,j)},d(H){H&&c(e),ke(q,H),G=!1,Z()}}}function at(t){let e,l,s=Se(t[15])+"",n,o,i,a=De(t[9][t[12]]["cvap19"+t[15]])+"",f,r,u,P=De(t[9][t[12]]["pop20"+t[15]])+"",w,g;return{c(){e=D("tr"),l=D("td"),n=z(s),o=I(),i=D("td"),f=z(a),r=I(),u=D("td"),w=z(P),g=I(),this.h()},l(d){e=M(d,"TR",{class:!0});var _=v(e);l=M(_,"TD",{class:!0});var E=v(l);n=U(E,s),E.forEach(c),o=B(_),i=M(_,"TD",{class:!0});var V=v(i);f=U(V,a),V.forEach(c),r=B(_),u=M(_,"TD",{class:!0});var T=v(u);w=U(T,P),T.forEach(c),g=B(_),_.forEach(c),this.h()},h(){p(l,"class","svelte-1u9ffu2"),p(i,"class","svelte-1u9ffu2"),p(u,"class","svelte-1u9ffu2"),p(e,"class","svelte-1u9ffu2")},m(d,_){S(d,e,_),h(e,l),h(l,n),h(e,o),h(e,i),h(i,f),h(e,r),h(e,u),h(u,w),h(e,g)},p(d,_){_&8&&s!==(s=Se(d[15])+"")&&be(n,s),_&521&&a!==(a=De(d[9][d[12]]["cvap19"+d[15]])+"")&&be(f,a),_&521&&P!==(P=De(d[9][d[12]]["pop20"+d[15]])+"")&&be(w,P)},d(d){d&&c(e)}}}function ot(t){let e=t[12].split(",")[0].split("_")[0]===t[2].split("_")[0],l,s=e&&it(t);return{c(){s&&s.c(),l=ne()},l(n){s&&s.l(n),l=ne()},m(n,o){s&&s.m(n,o),S(n,l,o)},p(n,o){o&5&&(e=n[12].split(",")[0].split("_")[0]===n[2].split("_")[0]),e?s?s.p(n,o):(s=it(n),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&c(l)}}}function as(t){let e;function l(o,i){if(o[8]==="districts")return is;if(o[8]==="community")return ns}let s=l(t),n=s&&s(t);return{c(){n&&n.c(),e=ne()},l(o){n&&n.l(o),e=ne()},m(o,i){n&&n.m(o,i),S(o,e,i)},p(o,[i]){s===(s=l(o))&&n?n.p(o,i):(n&&n.d(1),n=s&&s(o),n&&(n.c(),n.m(e.parentNode,e)))},i:Je,o:Je,d(o){n&&n.d(o),o&&c(e)}}}function os(t,e,l){let{aggregates:s,handleLabelClick:n,plan:o,stats:i,groups:a,changingLines:f,idealValues:r,drawings:u,delDrawing:P}=e,{type:w="districts"}=e;const g=_=>n(_),d=_=>P(_);return t.$$set=_=>{"aggregates"in _&&l(0,s=_.aggregates),"handleLabelClick"in _&&l(1,n=_.handleLabelClick),"plan"in _&&l(2,o=_.plan),"stats"in _&&l(9,i=_.stats),"groups"in _&&l(3,a=_.groups),"changingLines"in _&&l(4,f=_.changingLines),"idealValues"in _&&l(5,r=_.idealValues),"drawings"in _&&l(6,u=_.drawings),"delDrawing"in _&&l(7,P=_.delDrawing),"type"in _&&l(8,w=_.type)},[s,n,o,a,f,r,u,P,w,i,g,d]}class rt extends $e{constructor(e){super();xe(this,e,os,as,el,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}function ft(t,e,l){const s=t.slice();return s[61]=e[l],s}function ht(t,e,l){const s=t.slice();return s[64]=e[l],s}function ct(t,e,l){const s=t.slice();return s[67]=e[l],s}function ut(t,e,l){const s=t.slice();return s[70]=e[l],s}function _t(t,e,l){const s=t.slice();return s[61]=e[l],s}function gt(t,e,l){const s=t.slice();return s[61]=e[l],s}function dt(t){let e,l=(fl[t[61]]||t[61])+"",s,n;return{c(){e=D("option"),s=z(l),this.h()},l(o){e=M(o,"OPTION",{});var i=v(e);s=U(i,l),i.forEach(c),this.h()},h(){e.__value=n=t[61],e.value=e.__value},m(o,i){S(o,e,i),h(e,s)},p(o,i){i[0]&4&&l!==(l=(fl[o[61]]||o[61])+"")&&be(s,l),i[0]&4&&n!==(n=o[61])&&(e.__value=n,e.value=e.__value)},d(o){o&&c(e)}}}function mt(t){let e,l=(fl[t[61]]||t[61])+"",s,n;return{c(){e=D("option"),s=z(l),this.h()},l(o){e=M(o,"OPTION",{});var i=v(e);s=U(i,l),i.forEach(c),this.h()},h(){e.__value=n=t[61],e.value=e.__value},m(o,i){S(o,e,i),h(e,s)},p(o,i){i[0]&8&&l!==(l=(fl[o[61]]||o[61])+"")&&be(s,l),i[0]&8&&n!==(n=o[61])&&(e.__value=n,e.value=e.__value)},d(o){o&&c(e)}}}function bt(t){let e,l=["past","present"],s=[];for(let n=0;n<2;n+=1)s[n]=vt(ut(t,l,n));return{c(){for(let n=0;n<2;n+=1)s[n].c();e=ne()},l(n){for(let o=0;o<2;o+=1)s[o].l(n);e=ne()},m(n,o){for(let i=0;i<2;i+=1)s[i].m(n,o);S(n,e,o)},p(n,o){if(o[0]&64){l=["past","present"];let i;for(i=0;i<2;i+=1){const a=ut(n,l,i);s[i]?s[i].p(a,o):(s[i]=vt(a),s[i].c(),s[i].m(e.parentNode,e))}for(;i<2;i+=1)s[i].d(1)}},d(n){ke(s,n),n&&c(e)}}}function vt(t){let e,l,s,n=Se(t[70])+"",o,i,a,f;return{c(){e=D("label"),l=D("input"),s=I(),o=z(n),i=I(),this.h()},l(r){e=M(r,"LABEL",{});var u=v(e);l=M(u,"INPUT",{type:!0,name:!0}),s=B(u),o=U(u,n),i=B(u),u.forEach(c),this.h()},h(){p(l,"type","radio"),p(l,"name","period"),l.__value=t[70],l.value=l.__value,t[47][0].push(l)},m(r,u){S(r,e,u),h(e,l),l.checked=l.__value===t[6],h(e,s),h(e,o),h(e,i),a||(f=pe(l,"change",t[46]),a=!0)},p(r,u){u[0]&64&&(l.checked=l.__value===r[6])},d(r){r&&c(e),t[47][0].splice(t[47][0].indexOf(l),1),a=!1,f()}}}function pt(t){let e,l,s=(t[8]?"pct. asian":"pluralities")+"",n,o,i;return{c(){e=D("button"),l=z("Show "),n=z(s),this.h()},l(a){e=M(a,"BUTTON",{class:!0});var f=v(e);l=U(f,"Show "),n=U(f,s),f.forEach(c),this.h()},h(){p(e,"class","plurality-toggle svelte-hjb9oi")},m(a,f){S(a,e,f),h(e,l),h(e,n),o||(i=pe(e,"click",t[48]),o=!0)},p(a,f){f[0]&256&&s!==(s=(a[8]?"pct. asian":"pluralities")+"")&&be(n,s)},d(a){a&&c(e),o=!1,i()}}}function kt(t){let e,l,s,n,o,i,a,f,r,u,P=["assembly","senate","congress"],w=[];for(let g=0;g<3;g+=1)w[g]=Et(ht(t,P,g));return o=new rt({props:{aggregates:t[16],handleLabelClick:t[34],plan:t[15],stats:t[25],groups:Qe,changingLines:t[24],idealValues:Qt}}),{c(){e=D("div"),l=D("div"),s=D("select");for(let g=0;g<3;g+=1)w[g].c();n=I(),ll(o.$$.fragment),this.h()},l(g){e=M(g,"DIV",{class:!0});var d=v(e);l=M(d,"DIV",{class:!0});var _=v(l);s=M(_,"SELECT",{class:!0});var E=v(s);for(let V=0;V<3;V+=1)w[V].l(E);E.forEach(c),_.forEach(c),n=B(d),tl(o.$$.fragment,d),d.forEach(c),this.h()},h(){p(s,"class","svelte-hjb9oi"),t[15]===void 0&&Be(()=>t[51].call(s)),p(l,"class","plan-selector svelte-hjb9oi"),p(e,"class","svelte-hjb9oi")},m(g,d){S(g,e,d),h(e,l),h(l,s);for(let _=0;_<3;_+=1)w[_].m(s,null);sl(s,t[15]),h(e,n),nl(o,e,null),f=!0,r||(u=pe(s,"change",t[51]),r=!0)},p(g,d){if(d&0){P=["assembly","senate","congress"];let E;for(E=0;E<3;E+=1){const V=ht(g,P,E);w[E]?w[E].p(V,d):(w[E]=Et(V),w[E].c(),w[E].m(s,null))}for(;E<3;E+=1)w[E].d(1)}d[0]&32768&&sl(s,g[15]);const _={};d[0]&65536&&(_.aggregates=g[16]),d[0]&32768&&(_.plan=g[15]),d[0]&33554432&&(_.stats=g[25]),d[0]&16777216&&(_.changingLines=g[24]),o.$set(_)},i(g){f||(de(o.$$.fragment,g),Be(()=>{a&&a.end(1),i=We(e,al,{}),i.start()}),f=!0)},o(g){Pe(o.$$.fragment,g),i&&i.invalidate(),a=Ge(e,al,{}),f=!1},d(g){g&&c(e),ke(w,g),il(o),g&&a&&a.end(),r=!1,u()}}}function wt(t){let e,l=qt(t[64]+t[67])+"",s,n;return{c(){e=D("option"),s=z(l),this.h()},l(o){e=M(o,"OPTION",{});var i=v(e);s=U(i,l),i.forEach(c),this.h()},h(){e.__value=n=t[64]+t[67],e.value=e.__value},m(o,i){S(o,e,i),h(e,s)},p:Je,d(o){o&&c(e)}}}function Et(t){let e,l=["","_letters","_names"],s=[];for(let n=0;n<3;n+=1)s[n]=wt(ct(t,l,n));return{c(){e=D("optgroup");for(let n=0;n<3;n+=1)s[n].c();this.h()},l(n){e=M(n,"OPTGROUP",{label:!0});var o=v(e);for(let i=0;i<3;i+=1)s[i].l(o);o.forEach(c),this.h()},h(){p(e,"label",Se(t[64]))},m(n,o){S(n,e,o);for(let i=0;i<3;i+=1)s[i].m(e,null)},p(n,o){if(o&0){l=["","_letters","_names"];let i;for(i=0;i<3;i+=1){const a=ct(n,l,i);s[i]?s[i].p(a,o):(s[i]=wt(a),s[i].c(),s[i].m(e,null))}for(;i<3;i+=1)s[i].d(1)}},d(n){n&&c(e),ke(s,n)}}}function Pt(t){let e,l,s,n,o,i,a,f,r,u,P;return l=new rt({props:{type:"community",drawings:t[11],delDrawing:t[32],groups:Qe,stats:t[25]}}),{c(){e=D("div"),ll(l.$$.fragment),s=I(),n=D("button"),o=D("b"),i=z("[SAVE]"),this.h()},l(w){e=M(w,"DIV",{class:!0});var g=v(e);tl(l.$$.fragment,g),s=B(g),n=M(g,"BUTTON",{style:!0});var d=v(n);o=M(d,"B",{});var _=v(o);i=U(_,"[SAVE]"),_.forEach(c),d.forEach(c),g.forEach(c),this.h()},h(){Ve(n,"font-size","13px"),p(e,"class","community svelte-hjb9oi")},m(w,g){S(w,e,g),nl(l,e,null),h(e,s),h(e,n),h(n,o),h(o,i),r=!0,u||(P=pe(n,"click",t[33]),u=!0)},p(w,g){const d={};g[0]&2048&&(d.drawings=w[11]),g[0]&33554432&&(d.stats=w[25]),l.$set(d)},i(w){r||(de(l.$$.fragment,w),Be(()=>{f&&f.end(1),a=We(e,al,{}),a.start()}),r=!0)},o(w){Pe(l.$$.fragment,w),a&&a.invalidate(),f=Ge(e,al,{}),r=!1},d(w){w&&c(e),il(l),w&&f&&f.end(),u=!1,P()}}}function Vt(t){let e,l=t[61]+"",s,n,o;function i(){return t[54](t[61])}return{c(){e=D("button"),s=z(l),this.h()},l(a){e=M(a,"BUTTON",{class:!0});var f=v(e);s=U(f,l),f.forEach(c),this.h()},h(){p(e,"class","svelte-hjb9oi")},m(a,f){S(a,e,f),h(e,s),n||(o=pe(e,"click",i),n=!0)},p(a,f){t=a},d(a){a&&c(e),n=!1,o()}}}function rs(t){let e,l,s,n,o,i,a=t[2].includes(t[7]),f,r=t[2].includes(t[7]),u,P,w,g,d,_,E,V,T,O=(t[24]?"Original":"Modify")+"",j,y,L,G,Z,ie,K,q,H,$,W,le,oe,re,he,te,me,k,Oe,ve,ue,_e,X=t[2],A=[];for(let m=0;m<X.length;m+=1)A[m]=dt(gt(t,X,m));let Ee=t[3],fe=[];for(let m=0;m<Ee.length;m+=1)fe[m]=mt(_t(t,Ee,m));let Q=a&&bt(t),J=r&&pt(t);P=new ss({props:{groups:Qe,levels:dl,colors:gl,dynamicVars:t[2],variable:t[7],metric:t[17],showPluralities:t[8],pluralityVars:t[5],periods:rl,breaks:t[27]}});let x=t[22]&&kt(t),ae=t[9]&&Pt(t);oe=new Zt({props:{viewBox:t[13],labelSize:t[26],draggedBgs:t[10],data:t[1],path:ol,color:t[31],changingLines:t[24],neighbor:t[30],showPluralities:t[8],metric:t[17],period:t[6],tractVars:t[4],showComms:t[9],drawings:t[11],showPlans:t[22],plan:t[15],points:t[21],tractMesh:t[29],bgMesh:t[20],mesh:t[28],aggregates:t[16],obj:t[0],handleLabelClick:t[34],congressMeshes:t[12],plansMeshes:t[19],startDrag:t[35],endDrag:t[36],handleMouseMove:t[37],viewCutoff:t[18]}});let je=Object.keys(cl),ge=[];for(let m=0;m<je.length;m+=1)ge[m]=Vt(ft(t,je,m));return{c(){e=D("div"),l=D("div"),s=D("select"),n=D("optgroup");for(let m=0;m<A.length;m+=1)A[m].c();o=D("optgroup");for(let m=0;m<fe.length;m+=1)fe[m].c();i=I(),Q&&Q.c(),f=I(),J&&J.c(),u=I(),ll(P.$$.fragment),w=I(),g=D("div"),d=D("h3"),_=D("button"),E=z("Plans \u2193"),V=I(),T=D("button"),j=z(O),y=I(),x&&x.c(),L=I(),G=D("div"),Z=D("h3"),ie=D("button"),K=z("Communities \u2193"),q=I(),H=D("button"),$=z("+"),W=I(),ae&&ae.c(),le=I(),ll(oe.$$.fragment),re=I(),he=D("div"),te=D("h3"),me=z("Views"),k=I();for(let m=0;m<ge.length;m+=1)ge[m].c();this.h()},l(m){e=M(m,"DIV",{class:!0,style:!0});var C=v(e);l=M(C,"DIV",{class:!0});var F=v(l);s=M(F,"SELECT",{style:!0,class:!0});var ee=v(s);n=M(ee,"OPTGROUP",{label:!0});var N=v(n);for(let Y=0;Y<A.length;Y+=1)A[Y].l(N);N.forEach(c),o=M(ee,"OPTGROUP",{label:!0});var Me=v(o);for(let Y=0;Y<fe.length;Y+=1)fe[Y].l(Me);Me.forEach(c),ee.forEach(c),i=B(F),Q&&Q.l(F),f=B(F),J&&J.l(F),u=B(F),tl(P.$$.fragment,F),w=B(F),g=M(F,"DIV",{class:!0});var Ae=v(g);d=M(Ae,"H3",{class:!0});var ze=v(d);_=M(ze,"BUTTON",{});var Ye=v(_);E=U(Ye,"Plans \u2193"),Ye.forEach(c),V=B(ze),T=M(ze,"BUTTON",{class:!0});var Ze=v(T);j=U(Ze,O),Ze.forEach(c),ze.forEach(c),y=B(Ae),x&&x.l(Ae),Ae.forEach(c),L=B(F),G=M(F,"DIV",{class:!0});var Ue=v(G);Z=M(Ue,"H3",{class:!0});var He=v(Z);ie=M(He,"BUTTON",{});var b=v(ie);K=U(b,"Communities \u2193"),b.forEach(c),q=B(He),H=M(He,"BUTTON",{});var se=v(H);$=U(se,"+"),se.forEach(c),He.forEach(c),W=B(Ue),ae&&ae.l(Ue),Ue.forEach(c),F.forEach(c),le=B(C),tl(oe.$$.fragment,C),re=B(C),he=M(C,"DIV",{class:!0});var R=v(he);te=M(R,"H3",{class:!0});var ce=v(te);me=U(ce,"Views"),ce.forEach(c),k=B(R);for(let Y=0;Y<ge.length;Y+=1)ge[Y].l(R);R.forEach(c),C.forEach(c),this.h()},h(){p(n,"label","Redistricting data"),p(o,"label","American Community Survey data"),Ve(s,"width",t[3].includes(t[7])?"auto":"calc(var(--control-width) - 20px)"),p(s,"class","svelte-hjb9oi"),t[7]===void 0&&Be(()=>t[45].call(s)),p(T,"class","subbutton svelte-hjb9oi"),p(d,"class","svelte-hjb9oi"),p(g,"class","stats svelte-hjb9oi"),p(Z,"class","svelte-hjb9oi"),p(G,"class","stats svelte-hjb9oi"),p(l,"class","controls svelte-hjb9oi"),p(te,"class","svelte-hjb9oi"),p(he,"class","views svelte-hjb9oi"),p(e,"class","container svelte-hjb9oi"),Ve(e,"cursor",t[23]?"crosshair":"auto"),Be(()=>t[55].call(e))},m(m,C){S(m,e,C),h(e,l),h(l,s),h(s,n);for(let F=0;F<A.length;F+=1)A[F].m(n,null);h(s,o);for(let F=0;F<fe.length;F+=1)fe[F].m(o,null);sl(s,t[7]),h(l,i),Q&&Q.m(l,null),h(l,f),J&&J.m(l,null),h(l,u),nl(P,l,null),h(l,w),h(l,g),h(g,d),h(d,_),h(_,E),h(d,V),h(d,T),h(T,j),h(g,y),x&&x.m(g,null),h(l,L),h(l,G),h(G,Z),h(Z,ie),h(ie,K),h(Z,q),h(Z,H),h(H,$),h(G,W),ae&&ae.m(G,null),h(e,le),nl(oe,e,null),h(e,re),h(e,he),h(he,te),h(te,me),h(he,k);for(let F=0;F<ge.length;F+=1)ge[F].m(he,null);Oe=Nt(e,t[55].bind(e)),ve=!0,ue||(_e=[pe(s,"change",t[45]),pe(_,"click",t[49]),pe(T,"click",t[50]),pe(ie,"click",t[52]),pe(H,"click",t[53])],ue=!0)},p(m,C){if(C[0]&4){X=m[2];let N;for(N=0;N<X.length;N+=1){const Me=gt(m,X,N);A[N]?A[N].p(Me,C):(A[N]=dt(Me),A[N].c(),A[N].m(n,null))}for(;N<A.length;N+=1)A[N].d(1);A.length=X.length}if(C[0]&8){Ee=m[3];let N;for(N=0;N<Ee.length;N+=1){const Me=_t(m,Ee,N);fe[N]?fe[N].p(Me,C):(fe[N]=mt(Me),fe[N].c(),fe[N].m(o,null))}for(;N<fe.length;N+=1)fe[N].d(1);fe.length=Ee.length}(!ve||C[0]&136)&&Ve(s,"width",m[3].includes(m[7])?"auto":"calc(var(--control-width) - 20px)"),C[0]&140&&sl(s,m[7]),C[0]&132&&(a=m[2].includes(m[7])),a?Q?Q.p(m,C):(Q=bt(m),Q.c(),Q.m(l,f)):Q&&(Q.d(1),Q=null),C[0]&132&&(r=m[2].includes(m[7])),r?J?J.p(m,C):(J=pt(m),J.c(),J.m(l,u)):J&&(J.d(1),J=null);const F={};C[0]&4&&(F.dynamicVars=m[2]),C[0]&128&&(F.variable=m[7]),C[0]&131072&&(F.metric=m[17]),C[0]&256&&(F.showPluralities=m[8]),C[0]&32&&(F.pluralityVars=m[5]),C[0]&134217728&&(F.breaks=m[27]),P.$set(F),(!ve||C[0]&16777216)&&O!==(O=(m[24]?"Original":"Modify")+"")&&be(j,O),m[22]?x?(x.p(m,C),C[0]&4194304&&de(x,1)):(x=kt(m),x.c(),de(x,1),x.m(g,null)):x&&(qe(),Pe(x,1,1,()=>{x=null}),Fe()),m[9]?ae?(ae.p(m,C),C[0]&512&&de(ae,1)):(ae=Pt(m),ae.c(),de(ae,1),ae.m(G,null)):ae&&(qe(),Pe(ae,1,1,()=>{ae=null}),Fe());const ee={};if(C[0]&8192&&(ee.viewBox=m[13]),C[0]&67108864&&(ee.labelSize=m[26]),C[0]&1024&&(ee.draggedBgs=m[10]),C[0]&2&&(ee.data=m[1]),C[0]&16777216&&(ee.changingLines=m[24]),C[0]&256&&(ee.showPluralities=m[8]),C[0]&131072&&(ee.metric=m[17]),C[0]&64&&(ee.period=m[6]),C[0]&16&&(ee.tractVars=m[4]),C[0]&512&&(ee.showComms=m[9]),C[0]&2048&&(ee.drawings=m[11]),C[0]&4194304&&(ee.showPlans=m[22]),C[0]&32768&&(ee.plan=m[15]),C[0]&2097152&&(ee.points=m[21]),C[0]&1048576&&(ee.bgMesh=m[20]),C[0]&65536&&(ee.aggregates=m[16]),C[0]&1&&(ee.obj=m[0]),C[0]&4096&&(ee.congressMeshes=m[12]),C[0]&524288&&(ee.plansMeshes=m[19]),C[0]&262144&&(ee.viewCutoff=m[18]),oe.$set(ee),C[0]&8192){je=Object.keys(cl);let N;for(N=0;N<je.length;N+=1){const Me=ft(m,je,N);ge[N]?ge[N].p(Me,C):(ge[N]=Vt(Me),ge[N].c(),ge[N].m(he,null))}for(;N<ge.length;N+=1)ge[N].d(1);ge.length=je.length}(!ve||C[0]&8388608)&&Ve(e,"cursor",m[23]?"crosshair":"auto")},i(m){ve||(de(P.$$.fragment,m),de(x),de(ae),de(oe.$$.fragment,m),ve=!0)},o(m){Pe(P.$$.fragment,m),Pe(x),Pe(ae),Pe(oe.$$.fragment,m),ve=!1},d(m){m&&c(e),ke(A,m),ke(fe,m),Q&&Q.d(),J&&J.d(),il(P),x&&x.d(),ae&&ae.d(),il(oe),ke(ge,m),Oe(),ue=!1,ul(_e)}}}async function gs({fetch:t}){const e=await(await t(`${_l}/output_census.topojson`)).json(),l=Wt(e.objects.census),s=Ot(e,l).features.map(Ml),n=["pop","cvap"],o=[...s.reduce((a,f)=>{const r=Object.keys(f.properties).filter(u=>[...n,"GEOID","senate","assembly","congress"].every(P=>!u.includes(P))&&u===u.toLowerCase()).map(u=>u.split("_")[0]);return new Set([...a,...r])},[])],i=s.reduce((a,f,r)=>(a[f.properties.GEOID]=r,a),{});return{props:{topoData:e,obj:l,data:s,neighbors:yt(l.geometries),dynamicVars:n,staticVars:o,idToIndex:i,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function fs(t,e,l){let s,n,o,i,{topoData:a,obj:f,neighbors:r,data:u,dynamicVars:P,staticVars:w,tractVars:g,pluralityVars:d,idToIndex:_}=e;const E=b=>St(a,f,b),V=ol(E((b,se)=>Le(b).substring(0,11)!==Le(se).substring(0,11)));let T=2765,O,j,y;At(async()=>{l(20,j=ol(Ml(E((se,R)=>Le(se)!==Le(R))))),l(18,T=6e3);const b=await Promise.all([Ft(),Jt()]);console.log(b),l(19,O=b[0]),l(21,y=b[1])});let L;const G=b=>u[b].properties[Q];function Z(b){const se=G(b),R=new Set(r[b].map(G).filter(ce=>ce!==se));if(R.size===1)l(0,f.geometries[b].properties[Q]=L=R.values().next().value,f);else if(R.has(L))l(0,f.geometries[b].properties[Q]=L,f);else return;l(0,f)}let ie="present",K="pop";const q={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let H=!1;function $({properties:b}){if(!b.ALAND)return"#fff";const se=b[`${s}_total`];if(d.includes(s)){const R=Y=>b[`${s}_${Y}`];if(R(rl[0])===null)return"#eee";const ce=[...rl].sort((Y,Re)=>R(Re)-R(Y));return Xe[rl.indexOf(ce[0])]}else if(w.includes(s)){if(!Tl(n(b)))return"#eee";if(se<=10)return"#fff";for(let R=1;R<o.length;R++)if(n(b)<o[R])return Xe[R];return Xe[o.length-1]}else{if(se<=10)return"#fff";const R=ce=>b[`${s}_${ce}`]/b[`${s}_total`];if(H){const ce=Qe.filter(we=>R(we)>.5)[0];if(ce!==void 0)return gl[ce]+dl[se<130?0:se<200?1:2];const Y=[...Qe].sort((we,Ie)=>R(Ie)-R(we)),Re=R(Y[0])-R(Y[1]);return gl[Y[0]]+dl[Re<.093?0:1]}else{const ce=q[K];for(let Y=1;Y<ce.length;Y++)if(R("asian")<ce[Y])return hl[Y-1];return hl[ce.length-1]}}}let W,le,oe,re,he,te=[],me=[],k;const Oe=async()=>l(12,k=await Kt());function ve(b){const se=typeof b[0]=="string"?b.map(we=>u[_[we]].properties):b.map(we=>we.properties),R=(we,Ie)=>se.reduce((Dt,ml)=>Dt+(ml[we]||0)*(Ie&&ml[Ie]||1),0),ce=we=>R(we,"pop20_total")/R("pop20_total"),Y=(we,Ie)=>R(`${we}_${Ie}`)/R(`${we}_total`),Re={income:ce("income"),hhlang:Y("hhlang","asian"),benefits:Y("families","benefits"),pop20_total:R("pop20_total")};return["pop20","cvap19"].forEach(we=>Qe.forEach(Ie=>Re[we+Ie]=Y(we,Ie))),Re}const ue=b=>l(11,me=me.filter((se,R)=>R!==b));async function _e(){try{await fetch(`${_l}/data.json`,{method:"POST",body:JSON.stringify(me)})}catch(b){console.error(b)}}let X;async function A(){try{const b=await fetch(`${_l}/data.json`);l(11,me=(await b.json()).map(se=>kl(pl({},se),{stats:ve(se.ids)})))}catch(b){console.error(b)}}let Ee=cl.Brooklyn,fe,Q="assembly",J=[],x={};function ae(b){J.includes(b)?l(16,J=J.filter(se=>se!==b)):l(16,J=[...J,b])}const je=()=>l(42,re=!0),ge=()=>l(42,re=l(23,oe=!1)),m=b=>oe&&re&&(te.length===0?l(10,te=[Le(b)]):te.push(Le(b))),C=[[]];function F(){K=Pl(this),l(7,K),l(3,w),l(2,P)}function ee(){ie=this.__value,l(6,ie)}const N=()=>l(8,H=!H),Me=()=>{l(22,W=!W),l(9,le=!1)},Ae=()=>l(24,he=!he);function ze(){Q=Pl(this),l(15,Q)}const Ye=()=>{l(9,le=!le),l(22,W=!1)},Ze=()=>l(23,oe=!0),Ue=b=>l(13,Ee=cl[b]);function He(){fe=this.clientWidth,l(14,fe)}return t.$$set=b=>{"topoData"in b&&l(38,a=b.topoData),"obj"in b&&l(0,f=b.obj),"neighbors"in b&&l(39,r=b.neighbors),"data"in b&&l(1,u=b.data),"dynamicVars"in b&&l(2,P=b.dynamicVars),"staticVars"in b&&l(3,w=b.staticVars),"tractVars"in b&&l(4,g=b.tractVars),"pluralityVars"in b&&l(5,d=b.pluralityVars),"idToIndex"in b&&l(40,_=b.idToIndex)},t.$$.update=()=>{if(t.$$.dirty[0]&200&&l(17,s=w.includes(K)?K:K+(ie==="past"?10:K==="cvap"?19:20)),t.$$.dirty[0]&131072&&l(44,n={income:b=>b[s],hhlang:b=>b[`${s}_asian`]/b[`${s}_total`],graduates:b=>(b[`${s}_hs_grad`]+b[`${s}_ba_above`])/b[`${s}_total`],families:b=>b[`${s}_benefits`]/b[`${s}_total`],workers:b=>b[`${s}_publictransport`]/b[`${s}_total`]}[s]),t.$$.dirty[0]&131470|t.$$.dirty[1]&9216&&l(27,o=P.includes(K)&&!H?q[K]:q[s]||!w.includes(s)||s==="asiaentry"||l(41,q[s]=zt(u.map(b=>n(b.properties)).filter(Tl),6),q)),t.$$.dirty[0]&3074|t.$$.dirty[1]&2048&&!re&&te.length>0){if(te[0]===te[te.length-1]){const b=new Set(te),se=Ut(E((ce,Y)=>Gt(b.has(Le(ce)),b.has(Le(Y)))).coordinates.flat()),R=u.filter(ce=>Ht(Rt(ce.geometry.coordinates[0]),se)).map(Le);l(11,me=[...me,{outline:ol({type:"LineString",coordinates:se}),ids:R,stats:ve(R)}])}l(10,te=[])}if(t.$$.dirty[0]&36864&&Q.startsWith("congress")&&k===void 0&&Oe(),t.$$.dirty[0]&512|t.$$.dirty[1]&4096&&le&&!X&&(A(),l(43,X=!0)),t.$$.dirty[0]&57344&&l(26,i=(Q.endsWith("_names")?13:16)/((fe-410)/Ee[2])),t.$$.dirty[0]&98305)for(let b=0;b<J.length;b++){const[se,R]=J[b].split(",");se===Q&&l(25,x[J[b]]=ve(f.geometries.filter(({properties:ce})=>R===""+ce[Q])),x)}},[f,u,P,w,g,d,ie,K,H,le,te,me,k,Ee,fe,Q,J,s,T,O,j,y,W,oe,he,x,i,o,E,V,Z,$,ue,_e,ae,je,ge,m,a,r,_,q,re,X,n,F,ee,C,N,Me,Ae,ze,Ye,Ze,Ue,He]}class ds extends $e{constructor(e){super();xe(this,e,fs,rs,el,{topoData:38,obj:0,neighbors:39,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:40},null,[-1,-1,-1])}}export{ds as default,gs as load};

var Kt=Object.defineProperty,qt=Object.defineProperties;var Jt=Object.getOwnPropertyDescriptors;var Ol=Object.getOwnPropertySymbols;var Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable;var Ml=(l,e,t)=>e in l?Kt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Ll=(l,e)=>{for(var t in e||(e={}))Qt.call(e,t)&&Ml(l,t,e[t]);if(Ol)for(var t of Ol(e))Xt.call(e,t)&&Ml(l,t,e[t]);return l},jl=(l,e)=>qt(l,Jt(e));import{S as hl,i as ul,s as _l,e as V,t as H,c as T,a as w,g as z,d as u,b,J as _e,f as y,H as c,h as oe,l as le,K as Te,L as Se,M as Ce,N as ne,O as Dl,P as gl,Q as Me,R as Ue,T as Le,U as He,V as De,x as $,r as Ie,u as re,w as Ne,W as ll,k as j,n as B,X as Bl,Y as Zt,Z as $t,I as qe,_ as xt,$ as es,j as dl,m as ml,a0 as vl,o as pl,v as bl,a1 as ls,A as ts,a2 as ss,a3 as is,a4 as ns,a5 as as,a6 as Je,a7 as Il}from"../chunks/vendor-9292600a.js";import{b as Vl}from"../chunks/paths-28a87002.js";import{i as je,D as Nl,p as de,m as Qe,c as Xe,a as yl,d as Rl,u as os,r as Ul,b as kl,e as Hl,x as rs,f as fs,g as cs,h as hs,j as us,k as _s}from"../chunks/utils-f9cad560.js";const Tl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},Sl=["44","99","ee"],Ze=["asian","black","hispanic","white"],wl=["1990_earlier","1990_1999","2000_2009","2010_later"],El={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},Pl=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],$e=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],gs={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},xe={Brooklyn:[35,670,600,520],Chinatown:[80,430,500,600],"All of NYC":[0,0,975,1420]},ds={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};function zl(l,e,t){const s=l.slice();return s[49]=e[t],s}function Fl(l,e,t){const s=l.slice();return s[52]=e[t].properties,s[53]=e[t].geometry.coordinates[0],s[54]=e[t].geometry.coordinates[1],s}function Gl(l,e,t){const s=l.slice();return s[57]=e[t].outline,s}function Wl(l,e,t){const s=l.slice();return s[49]=e[t],s[61]=t,s}function Yl(l){let e,t=l[35].label+"",s;return{c(){e=V("p"),s=H(t),this.h()},l(i){e=T(i,"P",{class:!0,style:!0});var a=w(e);s=z(a,t),a.forEach(u),this.h()},h(){b(e,"class","street-inspector svelte-1i7628d"),_e(e,"left",l[35].x+"px"),_e(e,"top","calc("+l[35].y+"px - 1em)")},m(i,a){y(i,e,a),c(e,s)},p(i,a){a[1]&16&&t!==(t=i[35].label+"")&&oe(s,t),a[1]&16&&_e(e,"left",i[35].x+"px"),a[1]&16&&_e(e,"top","calc("+i[35].y+"px - 1em)")},d(i){i&&u(e)}}}function Kl(l){let e,t,s,i,a;function n(){return l[39](l[61])}function o(){return l[40](l[49])}function f(){return l[41](l[49])}return{c(){e=Te("path"),this.h()},l(r){e=Se(r,"path",{d:!0,fill:!0,class:!0}),w(e).forEach(u),this.h()},h(){b(e,"d",t=l[5](l[49])),b(e,"fill",s=l[6](l[49],l[10],l[11],l[9])),b(e,"class","svelte-1i7628d"),Ce(e,"head",l[3][0]===je(l[49]))},m(r,h){y(r,e,h),i||(a=[ne(e,"click",n),ne(e,"contextmenu",Dl(o)),ne(e,"mousemove",Dl(f))],i=!0)},p(r,h){l=r,h[0]&48&&t!==(t=l[5](l[49]))&&b(e,"d",t),h[0]&3664&&s!==(s=l[6](l[49],l[10],l[11],l[9]))&&b(e,"fill",s),h[0]&24&&Ce(e,"head",l[3][0]===je(l[49]))},d(r){r&&u(e),i=!1,gl(a)}}}function ql(l,e){let t,s,i=e[61]<e[28]&&Kl(e);return{key:l,first:null,c(){t=le(),i&&i.c(),s=le(),this.h()},l(a){t=le(),i&&i.l(a),s=le(),this.h()},h(){this.first=t},m(a,n){y(a,t,n),i&&i.m(a,n),y(a,s,n)},p(a,n){e=a,e[61]<e[28]?i?i.p(e,n):(i=Kl(e),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(a){a&&u(t),i&&i.d(a),a&&u(s)}}}function Jl(l){let e,t;return{c(){e=Te("path"),this.h()},l(s){e=Se(s,"path",{class:!0,d:!0}),w(e).forEach(u),this.h()},h(){b(e,"class","mesh-bg svelte-1i7628d"),b(e,"d",t=l[12].includes(l[10])?l[18]:l[19])},m(s,i){y(s,e,i)},p(s,i){i[0]&791552&&t!==(t=s[12].includes(s[10])?s[18]:s[19])&&b(e,"d",t)},d(s){s&&u(e)}}}function Ql(l){let e,t,s,i,a=l[14],n=[];for(let o=0;o<a.length;o+=1)n[o]=Xl(Gl(l,a,o));return{c(){e=Te("g");for(let o=0;o<n.length;o+=1)n[o].c()},l(o){e=Se(o,"g",{});var f=w(e);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u)},m(o,f){y(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);i=!0},p(o,f){if(f[0]&16384){a=o[14];let r;for(r=0;r<a.length;r+=1){const h=Gl(o,a,r);n[r]?n[r].p(h,f):(n[r]=Xl(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},i(o){i||(Me(()=>{s&&s.end(1),t=Ue(e,Le,{}),t.start()}),i=!0)},o(o){t&&t.invalidate(),s=He(e,Le,{}),i=!1},d(o){o&&u(e),De(n,o),o&&s&&s.end()}}}function Xl(l){let e,t;return{c(){e=Te("path"),this.h()},l(s){e=Se(s,"path",{class:!0,d:!0}),w(e).forEach(u),this.h()},h(){b(e,"class","mesh-community svelte-1i7628d"),b(e,"d",t=l[57])},m(s,i){y(s,e,i)},p(s,i){i[0]&16384&&t!==(t=s[57])&&b(e,"d",t)},d(s){s&&u(e)}}}function Zl(l){let e,t,s,i,a,n;return{c(){e=Te("g"),t=Te("path"),this.h()},l(o){e=Se(o,"g",{});var f=w(e);t=Se(f,"path",{class:!0,d:!0}),w(t).forEach(u),f.forEach(u),this.h()},h(){b(t,"class","mesh-district svelte-1i7628d"),b(t,"d",s=l[37](l[16],l[24],l[23],l[29])),Ce(t,"showPluralities",l[9])},m(o,f){y(o,e,f),c(e,t),n=!0},p(o,f){(!n||f[0]&562102272&&s!==(s=o[37](o[16],o[24],o[23],o[29])))&&b(t,"d",s),f[0]&512&&Ce(t,"showPluralities",o[9])},i(o){n||(Me(()=>{a&&a.end(1),i=Ue(e,Le,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=He(e,Le,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function $l(l){let e,t,s,i,a,n;return{c(){e=Te("g"),t=Te("path"),this.h()},l(o){e=Se(o,"g",{});var f=w(e);t=Se(f,"path",{class:!0,d:!0}),w(t).forEach(u),f.forEach(u),this.h()},h(){b(t,"class","mesh-district svelte-1i7628d"),b(t,"d",s=l[5](l[20](l[42],l[0])))},m(o,f){y(o,e,f),c(e,t),n=!0},p(o,f){(!n||f[0]&1114145&&s!==(s=o[5](o[20](o[42],o[0]))))&&b(t,"d",s)},i(o){n||(Me(()=>{a&&a.end(1),i=Ue(e,Le,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=He(e,Le,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function xl(l){let e,t,s,i,a,n=l[17],o=[];for(let h=0;h<n.length;h+=1)o[h]=lt(Fl(l,n,h));const f=h=>re(o[h],1,1,()=>{o[h]=null});let r=l[34]&&tt(l);return{c(){e=Te("g");for(let h=0;h<o.length;h+=1)o[h].c();t=le(),r&&r.c(),this.h()},l(h){e=Se(h,"g",{class:!0});var p=w(e);for(let v=0;v<o.length;v+=1)o[v].l(p);t=le(),r&&r.l(p),p.forEach(u),this.h()},h(){b(e,"class","labels svelte-1i7628d")},m(h,p){y(h,e,p);for(let v=0;v<o.length;v+=1)o[v].m(e,null);c(e,t),r&&r.m(e,null),a=!0},p(h,p){if(p[0]&6488064|p[1]&44){n=h[17];let v;for(v=0;v<n.length;v+=1){const g=Fl(h,n,v);o[v]?(o[v].p(g,p),$(o[v],1)):(o[v]=lt(g),o[v].c(),$(o[v],1),o[v].m(e,t))}for(Ie(),v=n.length;v<o.length;v+=1)f(v);Ne()}h[34]?r?r.p(h,p):(r=tt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(h){if(!a){for(let p=0;p<n.length;p+=1)$(o[p]);Me(()=>{i&&i.end(1),s=Ue(e,Le,{}),s.start()}),a=!0}},o(h){o=o.filter(Boolean);for(let p=0;p<o.length;p+=1)re(o[p]);s&&s.invalidate(),i=He(e,Le,{}),a=!1},d(h){h&&u(e),De(o,h),r&&r.d(),h&&i&&i.end()}}}function et(l){let e,t=l[52][l[16]]+"",s,i,a,n,o,f,r,h;function p(){return l[43](l[52])}function v(){return l[44](l[52])}return{c(){e=Te("text"),s=H(t),this.h()},l(g){e=Se(g,"text",{x:!0,y:!0,class:!0});var m=w(e);s=z(m,t),m.forEach(u),this.h()},h(){b(e,"x",i=l[53]),b(e,"y",a=l[54]),b(e,"class","svelte-1i7628d"),Ce(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},m(g,m){y(g,e,m),c(e,s),f=!0,r||(h=[ne(e,"click",p),ne(e,"mousemove",v),ne(e,"mouseout",l[45]),ne(e,"blur",void 0)],r=!0)},p(g,m){l=g,(!f||m[0]&196608)&&t!==(t=l[52][l[16]]+"")&&oe(s,t),(!f||m[0]&131072&&i!==(i=l[53]))&&b(e,"x",i),(!f||m[0]&131072&&a!==(a=l[54]))&&b(e,"y",a),m[0]&2293760&&Ce(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},i(g){f||(Me(()=>{o&&o.end(1),n=Ue(e,Le,{}),n.start()}),f=!0)},o(g){n&&n.invalidate(),o=He(e,Le,{}),f=!1},d(g){g&&u(e),g&&o&&o.end(),r=!1,gl(h)}}}function lt(l){let e=l[16]in l[52]&&(!l[36]||l[36]&&l[33].includes(l[52][l[16]])),t,s,i=e&&et(l);return{c(){i&&i.c(),t=le()},l(a){i&&i.l(a),t=le()},m(a,n){i&&i.m(a,n),y(a,t,n),s=!0},p(a,n){n[0]&196608|n[1]&36&&(e=a[16]in a[52]&&(!a[36]||a[36]&&a[33].includes(a[52][a[16]]))),e?i?(i.p(a,n),n[0]&196608|n[1]&36&&$(i,1)):(i=et(a),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(Ie(),re(i,1,1,()=>{i=null}),Ne())},i(a){s||($(i),s=!0)},o(a){re(i),s=!1},d(a){i&&i.d(a),a&&u(t)}}}function tt(l){let e,t;return{c(){e=Te("path"),this.h()},l(s){e=Se(s,"path",{class:!0,d:!0}),w(e).forEach(u),this.h()},h(){b(e,"class","mesh-onhover mesh-district svelte-1i7628d"),b(e,"d",t=l[0]&&l[5](ll(l[32],{type:l[0].type,geometries:l[0].geometries.filter(l[46])})))},m(s,i){y(s,e,i)},p(s,i){i[0]&65569|i[1]&10&&t!==(t=s[0]&&s[5](ll(s[32],{type:s[0].type,geometries:s[0].geometries.filter(s[46])})))&&b(e,"d",t)},d(s){s&&u(e)}}}function st(l){let e,t,s,i=l[31],a=[];for(let n=0;n<i.length;n+=1)a[n]=it(zl(l,i,n));return{c(){e=Te("g");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=Se(n,"g",{class:!0});var o=w(e);for(let f=0;f<a.length;f+=1)a[f].l(o);o.forEach(u),this.h()},h(){b(e,"class","streets svelte-1i7628d"),Ce(e,"showStreets",l[30])},m(n,o){y(n,e,o);for(let f=0;f<a.length;f+=1)a[f].m(e,null);t||(s=ne(e,"mousemove",l[48]),t=!0)},p(n,o){if(o[0]&1073741856|o[1]&129){i=n[31];let f;for(f=0;f<i.length;f+=1){const r=zl(n,i,f);a[f]?a[f].p(r,o):(a[f]=it(r),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}o[0]&1073741824&&Ce(e,"showStreets",n[30])},d(n){n&&u(e),De(a,n),t=!1,s()}}}function it(l){let e,t,s,i;function a(...n){return l[47](l[49],...n)}return{c(){e=Te("path"),this.h()},l(n){e=Se(n,"path",{d:!0,class:!0}),w(e).forEach(u),this.h()},h(){b(e,"d",t=l[5](l[49])),b(e,"class","svelte-1i7628d")},m(n,o){y(n,e,o),s||(i=ne(e,"click",Dl(a)),s=!0)},p(n,o){l=n,o[0]&32|o[1]&1&&t!==(t=l[5](l[49]))&&b(e,"d",t)},d(n){n&&u(e),s=!1,i()}}}function ms(l){let e,t,s,i=[],a=new Map,n,o,f,r,h,p,v,g,m,_,P=l[35]&&Yl(l),D=l[4];const Q=O=>je(O[49]);for(let O=0;O<D.length;O+=1){let A=Wl(l,D,O),X=Q(A);a.set(X,i[O]=ql(X,A))}let K=l[19]&&Jl(l),I=l[13]&&Ql(l),C=l[15]&&!l[7]&&Zl(l),G=l[7]&&$l(l),q=(l[15]||l[7])&&xl(l),Z=l[31]&&st(l);return{c(){P&&P.c(),e=j(),t=Te("svg"),s=Te("g");for(let O=0;O<i.length;O+=1)i[O].c();n=Te("g"),K&&K.c(),o=le(),I&&I.c(),f=le(),C&&C.c(),r=le(),G&&G.c(),h=le(),q&&q.c(),p=le(),Z&&Z.c(),this.h()},l(O){P&&P.l(O),e=B(O),t=Se(O,"svg",{viewBox:!0,style:!0,class:!0});var A=w(t);s=Se(A,"g",{class:!0});var X=w(s);for(let Y=0;Y<i.length;Y+=1)i[Y].l(X);X.forEach(u),n=Se(A,"g",{class:!0});var te=w(n);K&&K.l(te),o=le(),I&&I.l(te),f=le(),C&&C.l(te),r=le(),G&&G.l(te),h=le(),q&&q.l(te),p=le(),Z&&Z.l(te),te.forEach(u),A.forEach(u),this.h()},h(){b(s,"class","block-groups svelte-1i7628d"),b(n,"class","meshes svelte-1i7628d"),b(t,"viewBox",v=l[1].join(" ")),_e(t,"--font-size",(l[2]||.8)+"em"),b(t,"class","svelte-1i7628d")},m(O,A){P&&P.m(O,A),y(O,e,A),y(O,t,A),c(t,s);for(let X=0;X<i.length;X+=1)i[X].m(s,null);c(t,n),K&&K.m(n,null),c(n,o),I&&I.m(n,null),c(n,f),C&&C.m(n,null),c(n,r),G&&G.m(n,null),c(n,h),q&&q.m(n,null),c(n,p),Z&&Z.m(n,null),g=!0,m||(_=[ne(t,"mousedown",function(){Bl(l[25])&&l[25].apply(this,arguments)}),ne(t,"mouseup",function(){Bl(l[26])&&l[26].apply(this,arguments)})],m=!0)},p(O,A){l=O,l[35]?P?P.p(l,A):(P=Yl(l),P.c(),P.m(e.parentNode,e)):P&&(P.d(1),P=null),A[0]&402722808&&(D=l[4],i=Zt(i,A,Q,1,l,D,a,s,$t,ql,null,Wl)),l[19]?K?K.p(l,A):(K=Jl(l),K.c(),K.m(n,o)):K&&(K.d(1),K=null),l[13]?I?(I.p(l,A),A[0]&8192&&$(I,1)):(I=Ql(l),I.c(),$(I,1),I.m(n,f)):I&&(Ie(),re(I,1,1,()=>{I=null}),Ne()),l[15]&&!l[7]?C?(C.p(l,A),A[0]&32896&&$(C,1)):(C=Zl(l),C.c(),$(C,1),C.m(n,r)):C&&(Ie(),re(C,1,1,()=>{C=null}),Ne()),l[7]?G?(G.p(l,A),A[0]&128&&$(G,1)):(G=$l(l),G.c(),$(G,1),G.m(n,h)):G&&(Ie(),re(G,1,1,()=>{G=null}),Ne()),l[15]||l[7]?q?(q.p(l,A),A[0]&32896&&$(q,1)):(q=xl(l),q.c(),$(q,1),q.m(n,p)):q&&(Ie(),re(q,1,1,()=>{q=null}),Ne()),l[31]?Z?Z.p(l,A):(Z=st(l),Z.c(),Z.m(n,null)):Z&&(Z.d(1),Z=null),(!g||A[0]&2&&v!==(v=l[1].join(" ")))&&b(t,"viewBox",v),(!g||A[0]&4)&&_e(t,"--font-size",(l[2]||.8)+"em")},i(O){g||($(I),$(C),$(G),$(q),g=!0)},o(O){re(I),re(C),re(G),re(q),g=!1},d(O){P&&P.d(O),O&&u(e),O&&u(t);for(let A=0;A<i.length;A+=1)i[A].d();K&&K.d(),I&&I.d(),C&&C.d(),G&&G.d(),q&&q.d(),Z&&Z.d(),m=!1,gl(_)}}}function vs(l,e,t){let s,i,a,{viewBox:n,labelSize:o,draggedBgs:f,data:r,path:h,color:p,changingLines:v,neighbor:g,showPluralities:m,metric:_,period:P,tractVars:D,showComms:Q,drawings:K,showPlans:I,plan:C,points:G=[],tractMesh:q,bgMesh:Z,mesh:O,aggregates:A,obj:X,handleLabelClick:te,congressPlans:Y,plans:me,startDrag:pe,endDrag:ae,handleMouseMove:fe,viewCutoff:be,showOnlyFocusDistricts:ge,showStreets:x,streets:ce}=e;function ee(){if(!!a)return h(i?ll(a,{type:X.type,geometries:X.geometries.filter(k=>s.includes(k.properties[C]))}):ll(a,X,(k,he)=>Nl(k)!==Nl(he)))}let J,F;function M({pageX:k,pageY:he},{properties:{Label:Oe}}){t(35,F={x:k,y:he,label:Oe})}const L=k=>v&&C.includes("_")&&g(k),d=k=>console.log(k.properties),S=k=>fe(k),N=(k,he)=>k.properties[C]!==he.properties[C],R=k=>te(`${C},${k[C]}`),U=k=>t(34,J=k[C]),we=()=>t(34,J=null),Ee=k=>J===k.properties[C],Pe=(k,he)=>x&&M(he,k),Ve=()=>t(35,F=null);return l.$$set=k=>{"viewBox"in k&&t(1,n=k.viewBox),"labelSize"in k&&t(2,o=k.labelSize),"draggedBgs"in k&&t(3,f=k.draggedBgs),"data"in k&&t(4,r=k.data),"path"in k&&t(5,h=k.path),"color"in k&&t(6,p=k.color),"changingLines"in k&&t(7,v=k.changingLines),"neighbor"in k&&t(8,g=k.neighbor),"showPluralities"in k&&t(9,m=k.showPluralities),"metric"in k&&t(10,_=k.metric),"period"in k&&t(11,P=k.period),"tractVars"in k&&t(12,D=k.tractVars),"showComms"in k&&t(13,Q=k.showComms),"drawings"in k&&t(14,K=k.drawings),"showPlans"in k&&t(15,I=k.showPlans),"plan"in k&&t(16,C=k.plan),"points"in k&&t(17,G=k.points),"tractMesh"in k&&t(18,q=k.tractMesh),"bgMesh"in k&&t(19,Z=k.bgMesh),"mesh"in k&&t(20,O=k.mesh),"aggregates"in k&&t(21,A=k.aggregates),"obj"in k&&t(0,X=k.obj),"handleLabelClick"in k&&t(22,te=k.handleLabelClick),"congressPlans"in k&&t(23,Y=k.congressPlans),"plans"in k&&t(24,me=k.plans),"startDrag"in k&&t(25,pe=k.startDrag),"endDrag"in k&&t(26,ae=k.endDrag),"handleMouseMove"in k&&t(27,fe=k.handleMouseMove),"viewCutoff"in k&&t(28,be=k.viewCutoff),"showOnlyFocusDistricts"in k&&t(29,ge=k.showOnlyFocusDistricts),"showStreets"in k&&t(30,x=k.showStreets),"streets"in k&&t(31,ce=k.streets)},l.$$.update=()=>{l.$$.dirty[0]&65536&&t(33,s=ds[C]),l.$$.dirty[0]&536870912|l.$$.dirty[1]&4&&t(36,i=ge&&s),l.$$.dirty[0]&25231360&&t(32,a=C.startsWith("congress")?Y:me),l.$$.dirty[0]&65536|l.$$.dirty[1]&2&&t(0,X=a?a.objects[C]:void 0)},[X,n,o,f,r,h,p,v,g,m,_,P,D,Q,K,I,C,G,q,Z,O,A,te,Y,me,pe,ae,fe,be,ge,x,ce,a,s,J,F,i,ee,M,L,d,S,N,R,U,we,Ee,Pe,Ve]}class ps extends hl{constructor(e){super();ul(this,e,vs,ms,_l,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,showComms:13,drawings:14,showPlans:15,plan:16,points:17,tractMesh:18,bgMesh:19,mesh:20,aggregates:21,obj:0,handleLabelClick:22,congressPlans:23,plans:24,startDrag:25,endDrag:26,handleMouseMove:27,viewCutoff:28,showOnlyFocusDistricts:29,showStreets:30,streets:31},null,[-1,-1])}}function nt(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function at(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ot(l,e,t){const s=l.slice();return s[16]=e[t],s}function rt(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function ft(l,e,t){const s=l.slice();return s[10]=e[t],s}function ct(l,e,t){const s=l.slice();return s[13]=e[t],s}function bs(l){let e,t,s=l[9],i=[];for(let o=0;o<s.length;o+=1)i[o]=ht(at(l,s,o));let a=l[9],n=[];for(let o=0;o<a.length;o+=1)n[o]=ut(nt(l,a,o));return{c(){e=V("div");for(let o=0;o<i.length;o+=1)i[o].c();t=j();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0,style:!0});var f=w(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=B(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){b(e,"class","color-legend svelte-lnhifj"),_e(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.5em)"),Ce(e,"pctasian",l[3].includes(l[4]))},m(o,f){y(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);c(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const h=at(o,s,r);i[r]?i[r].p(h,f):(i[r]=ht(h),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&536){a=o[9];let r;for(r=0;r<a.length;r+=1){const h=nt(o,a,r);n[r]?n[r].p(h,f):(n[r]=ut(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&24&&_e(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.5em)"),f&24&&Ce(e,"pctasian",o[3].includes(o[4]))},d(o){o&&u(e),De(i,o),De(n,o)}}}function ks(l){let e,t,s=l[8],i=[];for(let o=0;o<s.length;o+=1)i[o]=_t(rt(l,s,o));let a=l[8],n=[];for(let o=0;o<a.length;o+=1)n[o]=gt(ot(l,a,o));return{c(){e=V("div");for(let o=0;o<i.length;o+=1)i[o].c();t=j();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var f=w(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=B(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){b(e,"class","color-legend plurality-legend svelte-lnhifj")},m(o,f){y(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);c(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const h=rt(o,s,r);i[r]?i[r].p(h,f):(i[r]=_t(h),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&256){a=o[8];let r;for(r=0;r<a.length;r+=1){const h=ot(o,a,r);n[r]?n[r].p(h,f):(n[r]=gt(h),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},d(o){o&&u(e),De(i,o),De(n,o)}}}function ws(l){let e,t,s,i,a,n,o,f,r,h,p,v,g=l[0],m=[];for(let _=0;_<g.length;_+=1)m[_]=mt(ft(l,g,_));return{c(){e=V("div");for(let _=0;_<m.length;_+=1)m[_].c();t=j(),s=V("p"),i=V("span"),a=H("Weak plurality"),n=j(),o=V("p"),f=j(),r=V("p"),h=H("Majority"),p=j(),v=V("p"),this.h()},l(_){e=T(_,"DIV",{class:!0});var P=w(e);for(let I=0;I<m.length;I+=1)m[I].l(P);t=B(P),s=T(P,"P",{class:!0});var D=w(s);i=T(D,"SPAN",{});var Q=w(i);a=z(Q,"Weak plurality"),Q.forEach(u),D.forEach(u),n=B(P),o=T(P,"P",{class:!0}),w(o).forEach(u),f=B(P),r=T(P,"P",{class:!0});var K=w(r);h=z(K,"Majority"),K.forEach(u),p=B(P),v=T(P,"P",{class:!0}),w(v).forEach(u),P.forEach(u),this.h()},h(){b(s,"class","col-head svelte-lnhifj"),b(o,"class","col-head svelte-lnhifj"),b(r,"class","col-head svelte-lnhifj"),b(v,"class","col-head svelte-lnhifj"),b(e,"class","legend svelte-lnhifj")},m(_,P){y(_,e,P);for(let D=0;D<m.length;D+=1)m[D].m(e,null);c(e,t),c(e,s),c(s,i),c(i,a),c(e,n),c(e,o),c(e,f),c(e,r),c(r,h),c(e,p),c(e,v)},p(_,P){if(P&7){g=_[0];let D;for(D=0;D<g.length;D+=1){const Q=ft(_,g,D);m[D]?m[D].p(Q,P):(m[D]=mt(Q),m[D].c(),m[D].m(e,t))}for(;D<m.length;D+=1)m[D].d(1);m.length=g.length}},d(_){_&&u(e),De(m,_)}}}function ht(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),w(e).forEach(u),this.h()},h(){_e(e,"background-color",l[3].includes(l[4])?Pl[l[20]]:$e[l[20]])},m(t,s){y(t,e,s)},p(t,s){s&24&&_e(e,"background-color",t[3].includes(t[4])?Pl[t[20]]:$e[t[20]])},d(t){t&&u(e)}}}function ut(l){let e,t=(l[9][l[9].length-1]<1?de(l[21],0):l[9][l[9].length-1]>1e3?Qe(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?" Asian":"")+"",s,i;return{c(){e=V("p"),s=H(t),i=j(),this.h()},l(a){e=T(a,"P",{class:!0});var n=w(e);s=z(n,t),i=B(n),n.forEach(u),this.h()},h(){b(e,"class","svelte-lnhifj")},m(a,n){y(a,e,n),c(e,s),c(e,i)},p(a,n){n&536&&t!==(t=(a[9][a[9].length-1]<1?de(a[21],0):a[9][a[9].length-1]>1e3?Qe(a[21]):a[21])+(a[3].includes(a[4])&&a[20]===a[9].length-1?" Asian":"")+"")&&oe(s,t)},d(a){a&&u(e)}}}function _t(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),w(e).forEach(u),this.h()},h(){_e(e,"background-color",$e[l[20]])},m(t,s){y(t,e,s)},p:qe,d(t){t&&u(e)}}}function gt(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=V("p"),s=H(t),this.h()},l(i){e=T(i,"P",{class:!0});var a=w(e);s=z(a,t),a.forEach(u),this.h()},h(){b(e,"class","svelte-lnhifj")},m(i,a){y(i,e,a),c(e,s)},p(i,a){a&256&&t!==(t=i[16].replace("_","-")+"")&&oe(s,t)},d(i){i&&u(e)}}}function dt(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),w(e).forEach(u),this.h()},h(){_e(e,"background-color",l[2][l[10]]+l[13])},m(t,s){y(t,e,s)},p(t,s){s&7&&_e(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&u(e)}}}function mt(l){let e,t,s=Xe(l[10])+"",i,a=l[1],n=[];for(let o=0;o<a.length;o+=1)n[o]=dt(ct(l,a,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=j(),t=V("p"),i=H(s),this.h()},l(o){for(let r=0;r<n.length;r+=1)n[r].l(o);e=B(o),t=T(o,"P",{class:!0});var f=w(t);i=z(f,s),f.forEach(u),this.h()},h(){b(t,"class","row-label svelte-lnhifj")},m(o,f){for(let r=0;r<n.length;r+=1)n[r].m(o,f);y(o,e,f),y(o,t,f),c(t,i)},p(o,f){if(f&7){a=o[1];let r;for(r=0;r<a.length;r+=1){const h=ct(o,a,r);n[r]?n[r].p(h,f):(n[r]=dt(h),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&1&&s!==(s=Xe(o[10])+"")&&oe(i,s)},d(o){De(n,o),o&&u(e),o&&u(t)}}}function Es(l){let e,t,s;function i(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?ws:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?ks:bs)}let a=i(l,-1),n=a(l);return{c(){n.c(),s=le()},l(o){n.l(o),s=le()},m(o,f){n.m(o,f),y(o,s,f)},p(o,[f]){a===(a=i(o,f))&&n?n.p(o,f):(n.d(1),n=a(o),n&&(n.c(),n.m(s.parentNode,s)))},i:qe,o:qe,d(o){n.d(o),o&&u(s)}}}function Ps(l,e,t){let{groups:s,levels:i,colors:a,dynamicVars:n,variable:o,metric:f,showPluralities:r,pluralityVars:h,periods:p,breaks:v}=e;return l.$$set=g=>{"groups"in g&&t(0,s=g.groups),"levels"in g&&t(1,i=g.levels),"colors"in g&&t(2,a=g.colors),"dynamicVars"in g&&t(3,n=g.dynamicVars),"variable"in g&&t(4,o=g.variable),"metric"in g&&t(5,f=g.metric),"showPluralities"in g&&t(6,r=g.showPluralities),"pluralityVars"in g&&t(7,h=g.pluralityVars),"periods"in g&&t(8,p=g.periods),"breaks"in g&&t(9,v=g.breaks)},[s,i,a,n,o,f,r,h,p,v]}class Ds extends hl{constructor(e){super();ul(this,e,Ps,Es,_l,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function vt(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function pt(l,e,t){const s=l.slice();return s[18]=e[t],s}function bt(l,e,t){const s=l.slice();return s[12]=e[t],s}function Vs(l){let e,t=l[6],s=[];for(let i=0;i<t.length;i+=1)s[i]=wt(vt(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);y(i,e,a)},p(i,a){if(a&200){t=i[6];let n;for(n=0;n<t.length;n+=1){const o=vt(i,t,n);s[n]?s[n].p(o,a):(s[n]=wt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){De(s,i),i&&u(e)}}}function Ts(l){let e,t=l[0],s=[];for(let i=0;i<t.length;i+=1)s[i]=Dt(bt(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);y(i,e,a)},p(i,a){if(a&567){t=i[0];let n;for(n=0;n<t.length;n+=1){const o=bt(i,t,n);s[n]?s[n].p(o,a):(s[n]=Dt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){De(s,i),i&&u(e)}}}function kt(l){let e,t,s=Xe(l[18])+"",i,a,n,o=de(l[9]["cvap19"+l[18]])+"",f,r,h,p=de(l[9]["pop20"+l[18]])+"",v,g;return{c(){e=V("tr"),t=V("td"),i=H(s),a=j(),n=V("td"),f=H(o),r=j(),h=V("td"),v=H(p),g=j(),this.h()},l(m){e=T(m,"TR",{class:!0});var _=w(e);t=T(_,"TD",{class:!0});var P=w(t);i=z(P,s),P.forEach(u),a=B(_),n=T(_,"TD",{class:!0});var D=w(n);f=z(D,o),D.forEach(u),r=B(_),h=T(_,"TD",{class:!0});var Q=w(h);v=z(Q,p),Q.forEach(u),g=B(_),_.forEach(u),this.h()},h(){b(t,"class","svelte-1avkicx"),b(n,"class","svelte-1avkicx"),b(h,"class","svelte-1avkicx"),b(e,"class","svelte-1avkicx")},m(m,_){y(m,e,_),c(e,t),c(t,i),c(e,a),c(e,n),c(n,f),c(e,r),c(e,h),c(h,v),c(e,g)},p(m,_){_&8&&s!==(s=Xe(m[18])+"")&&oe(i,s),_&72&&o!==(o=de(m[9]["cvap19"+m[18]])+"")&&oe(f,o),_&72&&p!==(p=de(m[9]["pop20"+m[18]])+"")&&oe(v,p)},d(m){m&&u(e)}}}function wt(l){let e,t,s,i=(l[15]||"COI"+(l[17]+1))+"",a,n,o,f,r,h,p,v,g,m,_,P,D,Q,K,I,C,G,q=Qe(l[9].income)+"",Z,O,A,X,te=de(l[9].hhlang)+"",Y,me,pe,ae,fe=de(l[9].benefits)+"",be,ge,x,ce;function ee(){return l[11](l[17])}let J=l[3],F=[];for(let M=0;M<J.length;M+=1)F[M]=kt(pt(l,J,M));return{c(){e=V("div"),t=V("p"),s=V("i"),a=H(i),n=j(),o=V("button"),f=H("\u{1F5D1}"),r=j(),h=V("table"),p=V("tr"),v=V("th"),g=j(),m=V("th"),_=H("CVAP"),P=j(),D=V("th"),Q=H("Pop."),K=j();for(let M=0;M<F.length;M+=1)F[M].c();I=j(),C=V("p"),G=H("Income: "),Z=H(q),O=j(),A=V("p"),X=H("Asian and LEP: "),Y=H(te),me=j(),pe=V("p"),ae=H("Pct. gov't benefits: "),be=H(fe),ge=j(),this.h()},l(M){e=T(M,"DIV",{});var L=w(e);t=T(L,"P",{class:!0});var d=w(t);s=T(d,"I",{});var S=w(s);a=z(S,i),S.forEach(u),n=B(d),o=T(d,"BUTTON",{});var N=w(o);f=z(N,"\u{1F5D1}"),N.forEach(u),d.forEach(u),r=B(L),h=T(L,"TABLE",{class:!0});var R=w(h);p=T(R,"TR",{class:!0});var U=w(p);v=T(U,"TH",{class:!0}),w(v).forEach(u),g=B(U),m=T(U,"TH",{class:!0});var we=w(m);_=z(we,"CVAP"),we.forEach(u),P=B(U),D=T(U,"TH",{class:!0});var Ee=w(D);Q=z(Ee,"Pop."),Ee.forEach(u),U.forEach(u),K=B(R);for(let he=0;he<F.length;he+=1)F[he].l(R);R.forEach(u),I=B(L),C=T(L,"P",{class:!0});var Pe=w(C);G=z(Pe,"Income: "),Z=z(Pe,q),Pe.forEach(u),O=B(L),A=T(L,"P",{class:!0});var Ve=w(A);X=z(Ve,"Asian and LEP: "),Y=z(Ve,te),Ve.forEach(u),me=B(L),pe=T(L,"P",{class:!0});var k=w(pe);ae=z(k,"Pct. gov't benefits: "),be=z(k,fe),k.forEach(u),ge=B(L),L.forEach(u),this.h()},h(){b(t,"class","svelte-1avkicx"),b(v,"class","svelte-1avkicx"),b(m,"class","svelte-1avkicx"),b(D,"class","svelte-1avkicx"),b(p,"class","svelte-1avkicx"),b(h,"class","svelte-1avkicx"),b(C,"class","table-footer svelte-1avkicx"),b(A,"class","table-footer svelte-1avkicx"),b(pe,"class","table-footer svelte-1avkicx")},m(M,L){y(M,e,L),c(e,t),c(t,s),c(s,a),c(t,n),c(t,o),c(o,f),c(e,r),c(e,h),c(h,p),c(p,v),c(p,g),c(p,m),c(m,_),c(p,P),c(p,D),c(D,Q),c(h,K);for(let d=0;d<F.length;d+=1)F[d].m(h,null);c(e,I),c(e,C),c(C,G),c(C,Z),c(e,O),c(e,A),c(A,X),c(A,Y),c(e,me),c(e,pe),c(pe,ae),c(pe,be),c(e,ge),x||(ce=ne(o,"click",ee),x=!0)},p(M,L){if(l=M,L&64&&i!==(i=(l[15]||"COI"+(l[17]+1))+"")&&oe(a,i),L&72){J=l[3];let d;for(d=0;d<J.length;d+=1){const S=pt(l,J,d);F[d]?F[d].p(S,L):(F[d]=kt(S),F[d].c(),F[d].m(h,null))}for(;d<F.length;d+=1)F[d].d(1);F.length=J.length}L&64&&q!==(q=Qe(l[9].income)+"")&&oe(Z,q),L&64&&te!==(te=de(l[9].hhlang)+"")&&oe(Y,te),L&64&&fe!==(fe=de(l[9].benefits)+"")&&oe(be,fe)},d(M){M&&u(e),De(F,M),x=!1,ce()}}}function Et(l){let e,t,s,i=yl(l[12])+"",a,n,o,f,r,h,p,v,g,m,_,P,D,Q,K,I,C,G=de(l[9][l[12]].cvap10asian)+"",q,Z,O,A=de(l[9][l[12]].pop10asian)+"",X,te,Y,me,pe,ae,fe,be=de(l[9][l[12]].cvap19asian)+"",ge,x,ce,ee=de(l[9][l[12]].pop20asian)+"",J,F,M,L,d,S,N,R=de(l[9][l[12]].pct_increase)+"",U,we,Ee,Pe=de(l[9][l[12]].pct_increase_cvap)+"",Ve,k,he,Oe,We;function Ke(){return l[10](l[12])}let se=l[4]&&l[2]in l[5]&&Pt(l);return{c(){e=V("div"),t=V("p"),s=V("i"),a=H(i),n=j(),o=V("table"),f=V("tr"),r=V("th"),h=j(),p=V("th"),v=H("CVAP"),g=j(),m=V("th"),_=H("Pop."),P=j(),D=V("tr"),Q=V("td"),K=H("Asians in 2010"),I=j(),C=V("td"),q=H(G),Z=j(),O=V("td"),X=H(A),te=j(),Y=V("tr"),me=V("td"),pe=H("Asians now"),ae=j(),fe=V("td"),ge=H(be),x=j(),ce=V("td"),J=H(ee),F=j(),M=V("tr"),L=V("td"),d=H("Asian increase"),S=j(),N=V("td"),U=H(R),we=j(),Ee=V("td"),Ve=H(Pe),k=j(),se&&se.c(),he=j(),this.h()},l(ye){e=T(ye,"DIV",{class:!0});var ke=w(e);t=T(ke,"P",{class:!0});var tl=w(t);s=T(tl,"I",{});var sl=w(s);a=z(sl,i),sl.forEach(u),tl.forEach(u),n=B(ke),o=T(ke,"TABLE",{class:!0});var Be=w(o);f=T(Be,"TR",{class:!0});var ze=w(f);r=T(ze,"TH",{class:!0}),w(r).forEach(u),h=B(ze),p=T(ze,"TH",{class:!0});var il=w(p);v=z(il,"CVAP"),il.forEach(u),g=B(ze),m=T(ze,"TH",{class:!0});var nl=w(m);_=z(nl,"Pop."),nl.forEach(u),ze.forEach(u),P=B(Be),D=T(Be,"TR",{class:!0});var Fe=w(D);Q=T(Fe,"TD",{class:!0});var al=w(Q);K=z(al,"Asians in 2010"),al.forEach(u),I=B(Fe),C=T(Fe,"TD",{class:!0});var ol=w(C);q=z(ol,G),ol.forEach(u),Z=B(Fe),O=T(Fe,"TD",{class:!0});var rl=w(O);X=z(rl,A),rl.forEach(u),Fe.forEach(u),te=B(Be),Y=T(Be,"TR",{class:!0});var Ge=w(Y);me=T(Ge,"TD",{class:!0});var fl=w(me);pe=z(fl,"Asians now"),fl.forEach(u),ae=B(Ge),fe=T(Ge,"TD",{class:!0});var E=w(fe);ge=z(E,be),E.forEach(u),x=B(Ge),ce=T(Ge,"TD",{class:!0});var ie=w(ce);J=z(ie,ee),ie.forEach(u),Ge.forEach(u),F=B(Be),M=T(Be,"TR",{class:!0});var W=w(M);L=T(W,"TD",{class:!0});var ue=w(L);d=z(ue,"Asian increase"),ue.forEach(u),S=B(W),N=T(W,"TD",{class:!0});var ve=w(N);U=z(ve,R),ve.forEach(u),we=B(W),Ee=T(W,"TD",{class:!0});var Re=w(Ee);Ve=z(Re,Pe),Re.forEach(u),W.forEach(u),Be.forEach(u),k=B(ke),se&&se.l(ke),he=B(ke),ke.forEach(u),this.h()},h(){b(t,"class","svelte-1avkicx"),b(r,"class","svelte-1avkicx"),b(p,"class","svelte-1avkicx"),b(m,"class","svelte-1avkicx"),b(f,"class","svelte-1avkicx"),b(Q,"class","svelte-1avkicx"),b(C,"class","svelte-1avkicx"),b(O,"class","svelte-1avkicx"),b(D,"class","svelte-1avkicx"),b(me,"class","svelte-1avkicx"),b(fe,"class","svelte-1avkicx"),b(ce,"class","svelte-1avkicx"),b(Y,"class","svelte-1avkicx"),b(L,"class","svelte-1avkicx"),b(N,"class","svelte-1avkicx"),b(Ee,"class","svelte-1avkicx"),b(M,"class","svelte-1avkicx"),b(o,"class","svelte-1avkicx"),b(e,"class","district-aggregate svelte-1avkicx")},m(ye,ke){y(ye,e,ke),c(e,t),c(t,s),c(s,a),c(e,n),c(e,o),c(o,f),c(f,r),c(f,h),c(f,p),c(p,v),c(f,g),c(f,m),c(m,_),c(o,P),c(o,D),c(D,Q),c(Q,K),c(D,I),c(D,C),c(C,q),c(D,Z),c(D,O),c(O,X),c(o,te),c(o,Y),c(Y,me),c(me,pe),c(Y,ae),c(Y,fe),c(fe,ge),c(Y,x),c(Y,ce),c(ce,J),c(o,F),c(o,M),c(M,L),c(L,d),c(M,S),c(M,N),c(N,U),c(M,we),c(M,Ee),c(Ee,Ve),c(e,k),se&&se.m(e,null),c(e,he),Oe||(We=ne(t,"click",Ke),Oe=!0)},p(ye,ke){l=ye,ke&1&&i!==(i=yl(l[12])+"")&&oe(a,i),ke&513&&G!==(G=de(l[9][l[12]].cvap10asian)+"")&&oe(q,G),ke&513&&A!==(A=de(l[9][l[12]].pop10asian)+"")&&oe(X,A),ke&513&&be!==(be=de(l[9][l[12]].cvap19asian)+"")&&oe(ge,be),ke&513&&ee!==(ee=de(l[9][l[12]].pop20asian)+"")&&oe(J,ee),ke&513&&R!==(R=de(l[9][l[12]].pct_increase)+"")&&oe(U,R),ke&513&&Pe!==(Pe=de(l[9][l[12]].pct_increase_cvap)+"")&&oe(Ve,Pe),l[4]&&l[2]in l[5]?se?se.p(l,ke):(se=Pt(l),se.c(),se.m(e,he)):se&&(se.d(1),se=null)},d(ye){ye&&u(e),se&&se.d(),Oe=!1,We()}}}function Pt(l){let e,t,s=Qe(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+Rl(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",i;return{c(){e=V("p"),t=H("Income: "),i=H(s),this.h()},l(a){e=T(a,"P",{class:!0});var n=w(e);t=z(n,"Income: "),i=z(n,s),n.forEach(u),this.h()},h(){b(e,"class","table-footer svelte-1avkicx")},m(a,n){y(a,e,n),c(e,t),c(e,i)},p(a,n){n&565&&s!==(s=Qe(a[9][a[12]].income)+(a[4]&&a[2]in a[5]?"; "+Rl(a[9][a[12]].pop20_total-a[5][a[2]]):"")+"")&&oe(i,s)},d(a){a&&u(e)}}}function Dt(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&Et(l);return{c(){s&&s.c(),t=le()},l(i){s&&s.l(i),t=le()},m(i,a){s&&s.m(i,a),y(i,t,a)},p(i,a){a&5&&(e=i[12].split(",")[0].split("_")[0]===i[2].split("_")[0]),e?s?s.p(i,a):(s=Et(i),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(i){s&&s.d(i),i&&u(t)}}}function Ss(l){let e;function t(a,n){if(a[8]==="districts")return Ts;if(a[8]==="community")return Vs}let s=t(l),i=s&&s(l);return{c(){i&&i.c(),e=le()},l(a){i&&i.l(a),e=le()},m(a,n){i&&i.m(a,n),y(a,e,n)},p(a,[n]){s===(s=t(a))&&i?i.p(a,n):(i&&i.d(1),i=s&&s(a),i&&(i.c(),i.m(e.parentNode,e)))},i:qe,o:qe,d(a){i&&i.d(a),a&&u(e)}}}function Cs(l,e,t){let{aggregates:s,handleLabelClick:i,plan:a,stats:n,groups:o,changingLines:f,idealValues:r,drawings:h,delDrawing:p}=e,{type:v="districts"}=e;const g=_=>i(_),m=_=>p(_);return l.$$set=_=>{"aggregates"in _&&t(0,s=_.aggregates),"handleLabelClick"in _&&t(1,i=_.handleLabelClick),"plan"in _&&t(2,a=_.plan),"stats"in _&&t(9,n=_.stats),"groups"in _&&t(3,o=_.groups),"changingLines"in _&&t(4,f=_.changingLines),"idealValues"in _&&t(5,r=_.idealValues),"drawings"in _&&t(6,h=_.drawings),"delDrawing"in _&&t(7,p=_.delDrawing),"type"in _&&t(8,v=_.type)},[s,i,a,o,f,r,h,p,v,n,g,m]}class Vt extends hl{constructor(e){super();ul(this,e,Cs,Ss,_l,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}function Tt(l,e,t){const s=l.slice();return s[69]=e[t],s}function St(l,e,t){const s=l.slice();return s[72]=e[t],s}function Ct(l,e,t){const s=l.slice();return s[75]=e[t],s}function At(l,e,t){const s=l.slice();return s[78]=e[t],s}function Ot(l,e,t){const s=l.slice();return s[69]=e[t],s}function Mt(l,e,t){const s=l.slice();return s[69]=e[t],s}function Lt(l){let e,t=(El[l[69]]||l[69])+"",s,i;return{c(){e=V("option"),s=H(t),this.h()},l(a){e=T(a,"OPTION",{});var n=w(e);s=z(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[69],e.value=e.__value},m(a,n){y(a,e,n),c(e,s)},p(a,n){n[0]&4&&t!==(t=(El[a[69]]||a[69])+"")&&oe(s,t),n[0]&4&&i!==(i=a[69])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function jt(l){let e,t=(El[l[69]]||l[69])+"",s,i;return{c(){e=V("option"),s=H(t),this.h()},l(a){e=T(a,"OPTION",{});var n=w(e);s=z(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[69],e.value=e.__value},m(a,n){y(a,e,n),c(e,s)},p(a,n){n[0]&8&&t!==(t=(El[a[69]]||a[69])+"")&&oe(s,t),n[0]&8&&i!==(i=a[69])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function Bt(l){let e,t=l[2].includes(l[17]),s,i=l[2].includes(l[17]),a,n,o,f=t&&It(l),r=i&&yt(l);return{c(){e=V("div"),f&&f.c(),s=j(),r&&r.c()},l(h){e=T(h,"DIV",{});var p=w(e);f&&f.l(p),s=B(p),r&&r.l(p),p.forEach(u)},m(h,p){y(h,e,p),f&&f.m(e,null),c(e,s),r&&r.m(e,null),o=!0},p(h,p){p[0]&131076&&(t=h[2].includes(h[17])),t?f?f.p(h,p):(f=It(h),f.c(),f.m(e,s)):f&&(f.d(1),f=null),p[0]&131076&&(i=h[2].includes(h[17])),i?r?r.p(h,p):(r=yt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(h){o||(Me(()=>{n&&n.end(1),a=Ue(e,Je,{}),a.start()}),o=!0)},o(h){a&&a.invalidate(),n=He(e,Je,{}),o=!1},d(h){h&&u(e),f&&f.d(),r&&r.d(),h&&n&&n.end()}}}function It(l){let e,t=["past","present"],s=[];for(let i=0;i<2;i+=1)s[i]=Nt(At(l,t,i));return{c(){for(let i=0;i<2;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<2;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<2;n+=1)s[n].m(i,a);y(i,e,a)},p(i,a){if(a[0]&65536){t=["past","present"];let n;for(n=0;n<2;n+=1){const o=At(i,t,n);s[n]?s[n].p(o,a):(s[n]=Nt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<2;n+=1)s[n].d(1)}},d(i){De(s,i),i&&u(e)}}}function Nt(l){let e,t,s,i=Xe(l[78])+"",a,n,o,f;return{c(){e=V("label"),t=V("input"),s=j(),a=H(i),n=j(),this.h()},l(r){e=T(r,"LABEL",{});var h=w(e);t=T(h,"INPUT",{type:!0,name:!0}),s=B(h),a=z(h,i),n=B(h),h.forEach(u),this.h()},h(){b(t,"type","radio"),b(t,"name","period"),t.__value=l[78],t.value=t.__value,l[53][0].push(t)},m(r,h){y(r,e,h),c(e,t),t.checked=t.__value===l[16],c(e,s),c(e,a),c(e,n),o||(f=ne(t,"change",l[52]),o=!0)},p(r,h){h[0]&65536&&(t.checked=t.__value===r[16])},d(r){r&&u(e),l[53][0].splice(l[53][0].indexOf(t),1),o=!1,f()}}}function yt(l){let e,t,s=(l[18]?"pct. asian":"pluralities")+"",i,a,n;return{c(){e=V("button"),t=H("Show "),i=H(s),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var f=w(e);t=z(f,"Show "),i=z(f,s),f.forEach(u),this.h()},h(){b(e,"class","plurality-toggle svelte-p7agis")},m(o,f){y(o,e,f),c(e,t),c(e,i),a||(n=ne(e,"click",l[54]),a=!0)},p(o,f){f[0]&262144&&s!==(s=(o[18]?"pct. asian":"pluralities")+"")&&oe(i,s)},d(o){o&&u(e),a=!1,n()}}}function Rt(l){let e,t,s,i,a,n,o,f,r,h,p=["assembly","senate","congress"],v=[];for(let g=0;g<3;g+=1)v[g]=Ht(St(l,p,g));return a=new Vt({props:{aggregates:l[10],handleLabelClick:l[39],plan:l[11],stats:l[25],groups:Ze,changingLines:l[24],idealValues:gs}}),{c(){e=V("div"),t=V("div"),s=V("select");for(let g=0;g<3;g+=1)v[g].c();i=j(),dl(a.$$.fragment),this.h()},l(g){e=T(g,"DIV",{class:!0});var m=w(e);t=T(m,"DIV",{class:!0});var _=w(t);s=T(_,"SELECT",{class:!0});var P=w(s);for(let D=0;D<3;D+=1)v[D].l(P);P.forEach(u),_.forEach(u),i=B(m),ml(a.$$.fragment,m),m.forEach(u),this.h()},h(){b(s,"class","svelte-p7agis"),l[11]===void 0&&Me(()=>l[57].call(s)),b(t,"class","plan-selector svelte-p7agis"),b(e,"class","svelte-p7agis")},m(g,m){y(g,e,m),c(e,t),c(t,s);for(let _=0;_<3;_+=1)v[_].m(s,null);vl(s,l[11]),c(e,i),pl(a,e,null),f=!0,r||(h=ne(s,"change",l[57]),r=!0)},p(g,m){if(m&0){p=["assembly","senate","congress"];let P;for(P=0;P<3;P+=1){const D=St(g,p,P);v[P]?v[P].p(D,m):(v[P]=Ht(D),v[P].c(),v[P].m(s,null))}for(;P<3;P+=1)v[P].d(1)}m[0]&2048&&vl(s,g[11]);const _={};m[0]&1024&&(_.aggregates=g[10]),m[0]&2048&&(_.plan=g[11]),m[0]&33554432&&(_.stats=g[25]),m[0]&16777216&&(_.changingLines=g[24]),a.$set(_)},i(g){f||($(a.$$.fragment,g),Me(()=>{o&&o.end(1),n=Ue(e,Je,{}),n.start()}),f=!0)},o(g){re(a.$$.fragment,g),n&&n.invalidate(),o=He(e,Je,{}),f=!1},d(g){g&&u(e),De(v,g),bl(a),g&&o&&o.end(),r=!1,h()}}}function Ut(l){let e,t=fs(l[72]+l[75])+"",s,i;return{c(){e=V("option"),s=H(t),this.h()},l(a){e=T(a,"OPTION",{});var n=w(e);s=z(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[72]+l[75],e.value=e.__value},m(a,n){y(a,e,n),c(e,s)},p:qe,d(a){a&&u(e)}}}function Ht(l){let e,t=["","_letters","_names"],s=[];for(let i=0;i<3;i+=1)s[i]=Ut(Ct(l,t,i));return{c(){e=V("optgroup");for(let i=0;i<3;i+=1)s[i].c();this.h()},l(i){e=T(i,"OPTGROUP",{label:!0});var a=w(e);for(let n=0;n<3;n+=1)s[n].l(a);a.forEach(u),this.h()},h(){b(e,"label",Xe(l[72]))},m(i,a){y(i,e,a);for(let n=0;n<3;n+=1)s[n].m(e,null)},p(i,a){if(a&0){t=["","_letters","_names"];let n;for(n=0;n<3;n+=1){const o=Ct(i,t,n);s[n]?s[n].p(o,a):(s[n]=Ut(o),s[n].c(),s[n].m(e,null))}for(;n<3;n+=1)s[n].d(1)}},d(i){i&&u(e),De(s,i)}}}function zt(l){let e,t,s,i,a,n,o,f,r,h,p;return t=new Vt({props:{type:"community",drawings:l[9],delDrawing:l[37],groups:Ze,stats:l[25]}}),{c(){e=V("div"),dl(t.$$.fragment),s=j(),i=V("button"),a=V("b"),n=H("[SAVE]"),this.h()},l(v){e=T(v,"DIV",{class:!0});var g=w(e);ml(t.$$.fragment,g),s=B(g),i=T(g,"BUTTON",{style:!0});var m=w(i);a=T(m,"B",{});var _=w(a);n=z(_,"[SAVE]"),_.forEach(u),m.forEach(u),g.forEach(u),this.h()},h(){_e(i,"font-size","13px"),b(e,"class","community svelte-p7agis")},m(v,g){y(v,e,g),pl(t,e,null),c(e,s),c(e,i),c(i,a),c(a,n),r=!0,h||(p=ne(i,"click",l[38]),h=!0)},p(v,g){const m={};g[0]&512&&(m.drawings=v[9]),g[0]&33554432&&(m.stats=v[25]),t.$set(m)},i(v){r||($(t.$$.fragment,v),Me(()=>{f&&f.end(1),o=Ue(e,Je,{}),o.start()}),r=!0)},o(v){re(t.$$.fragment,v),o&&o.invalidate(),f=He(e,Je,{}),r=!1},d(v){v&&u(e),bl(t),v&&f&&f.end(),h=!1,p()}}}function Ft(l){let e,t,s,i,a,n,o,f,r,h,p,v,g=Object.keys(xe),m=[];for(let _=0;_<g.length;_+=1)m[_]=Gt(Tt(l,g,_));return{c(){e=V("div"),t=V("h3"),s=H("Views"),i=j();for(let _=0;_<m.length;_+=1)m[_].c();a=j(),n=V("button"),o=H("See Streets"),this.h()},l(_){e=T(_,"DIV",{class:!0});var P=w(e);t=T(P,"H3",{class:!0});var D=w(t);s=z(D,"Views"),D.forEach(u),i=B(P);for(let K=0;K<m.length;K+=1)m[K].l(P);a=B(P),n=T(P,"BUTTON",{style:!0,class:!0});var Q=w(n);o=z(Q,"See Streets"),Q.forEach(u),P.forEach(u),this.h()},h(){b(t,"class","svelte-p7agis"),_e(n,"margin-top","10px"),b(n,"class","svelte-p7agis"),Ce(n,"view-selected",l[7]),b(e,"class","views svelte-p7agis")},m(_,P){y(_,e,P),c(e,t),c(t,s),c(e,i);for(let D=0;D<m.length;D+=1)m[D].m(e,null);c(e,a),c(e,n),c(n,o),h=!0,p||(v=ne(n,"click",l[61]),p=!0)},p(_,P){if(P[0]&536887296){g=Object.keys(xe);let D;for(D=0;D<g.length;D+=1){const Q=Tt(_,g,D);m[D]?m[D].p(Q,P):(m[D]=Gt(Q),m[D].c(),m[D].m(e,a))}for(;D<m.length;D+=1)m[D].d(1);m.length=g.length}P[0]&128&&Ce(n,"view-selected",_[7])},i(_){h||(Me(()=>{r&&r.end(1),f=Ue(e,Le,{}),f.start()}),h=!0)},o(_){f&&f.invalidate(),r=He(e,Le,{}),h=!1},d(_){_&&u(e),De(m,_),_&&r&&r.end(),p=!1,v()}}}function Gt(l){let e,t=l[69]+"",s,i,a;function n(){return l[60](l[69])}return{c(){e=V("button"),s=H(t),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var f=w(e);s=z(f,t),f.forEach(u),this.h()},h(){b(e,"class","svelte-p7agis"),Ce(e,"view-selected",l[14]===xe[l[69]])},m(o,f){y(o,e,f),c(e,s),i||(a=ne(e,"click",n),i=!0)},p(o,f){l=o,f[0]&16384&&Ce(e,"view-selected",l[14]===xe[l[69]])},d(o){o&&u(e),i=!1,a()}}}function As(l){let e,t,s,i,a,n,o,f,r,h,p,v,g,m,_,P=(l[24]?"Original":"Modify")+"",D,Q,K,I,C,G,q,Z,O,A,X,te,Y,me,pe,ae,fe,be,ge=l[2],x=[];for(let d=0;d<ge.length;d+=1)x[d]=Lt(Mt(l,ge,d));let ce=l[3],ee=[];for(let d=0;d<ce.length;d+=1)ee[d]=jt(Ot(l,ce,d));let J=l[21]&&Bt(l);f=new Ds({props:{groups:Ze,levels:Sl,colors:Tl,dynamicVars:l[2],variable:l[17],metric:l[19],showPluralities:l[18],pluralityVars:l[5],periods:wl,breaks:l[32]}});let F=l[20]&&Rt(l),M=l[6]&&zt(l);Y=new ps({props:{viewBox:l[14],labelSize:l[31],draggedBgs:l[8],data:l[1],path:kl,color:l[36],changingLines:l[24],neighbor:l[35],showPluralities:l[18],metric:l[19],period:l[16],tractVars:l[4],showComms:l[6],drawings:l[9],showPlans:l[20],plan:l[11],points:l[28],tractMesh:l[34],bgMesh:l[26],mesh:l[33],aggregates:l[10],obj:l[0],handleLabelClick:l[39],congressPlans:l[12],plans:l[27],startDrag:l[40],endDrag:l[41],handleMouseMove:l[42],viewCutoff:l[29],showOnlyFocusDistricts:l[22],showStreets:l[7],streets:l[13]}});let L=l[21]&&Ft(l);return{c(){e=V("div"),t=V("div"),s=V("select"),i=V("optgroup");for(let d=0;d<x.length;d+=1)x[d].c();a=V("optgroup");for(let d=0;d<ee.length;d+=1)ee[d].c();n=j(),J&&J.c(),o=j(),dl(f.$$.fragment),r=j(),h=V("div"),p=V("h3"),v=V("button"),g=H("Plans \u2193"),m=j(),_=V("button"),D=H(P),Q=j(),F&&F.c(),K=j(),I=V("div"),C=V("h3"),G=V("button"),q=H("Communities \u2193"),Z=j(),O=V("button"),A=H("+"),X=j(),M&&M.c(),te=j(),dl(Y.$$.fragment),me=j(),L&&L.c(),this.h()},l(d){e=T(d,"DIV",{class:!0,style:!0});var S=w(e);t=T(S,"DIV",{class:!0});var N=w(t);s=T(N,"SELECT",{style:!0,class:!0});var R=w(s);i=T(R,"OPTGROUP",{label:!0});var U=w(i);for(let se=0;se<x.length;se+=1)x[se].l(U);U.forEach(u),a=T(R,"OPTGROUP",{label:!0});var we=w(a);for(let se=0;se<ee.length;se+=1)ee[se].l(we);we.forEach(u),R.forEach(u),n=B(N),J&&J.l(N),o=B(N),ml(f.$$.fragment,N),r=B(N),h=T(N,"DIV",{class:!0});var Ee=w(h);p=T(Ee,"H3",{class:!0});var Pe=w(p);v=T(Pe,"BUTTON",{});var Ve=w(v);g=z(Ve,"Plans \u2193"),Ve.forEach(u),m=B(Pe),_=T(Pe,"BUTTON",{class:!0});var k=w(_);D=z(k,P),k.forEach(u),Pe.forEach(u),Q=B(Ee),F&&F.l(Ee),Ee.forEach(u),K=B(N),I=T(N,"DIV",{class:!0});var he=w(I);C=T(he,"H3",{class:!0});var Oe=w(C);G=T(Oe,"BUTTON",{});var We=w(G);q=z(We,"Communities \u2193"),We.forEach(u),Z=B(Oe),O=T(Oe,"BUTTON",{});var Ke=w(O);A=z(Ke,"+"),Ke.forEach(u),Oe.forEach(u),X=B(he),M&&M.l(he),he.forEach(u),N.forEach(u),te=B(S),ml(Y.$$.fragment,S),me=B(S),L&&L.l(S),S.forEach(u),this.h()},h(){b(i,"label","Redistricting data"),b(a,"label","American Community Survey data"),_e(s,"width",l[3].includes(l[17])?"auto":"calc(var(--control-width) - 20px)"),b(s,"class","svelte-p7agis"),l[17]===void 0&&Me(()=>l[51].call(s)),b(_,"class","subbutton svelte-p7agis"),b(p,"class","svelte-p7agis"),b(h,"class","stats svelte-p7agis"),b(C,"class","svelte-p7agis"),b(I,"class","stats svelte-p7agis"),b(t,"class","controls svelte-p7agis"),b(e,"class","container svelte-p7agis"),_e(e,"cursor",l[23]?"crosshair":"auto"),_e(e,"--container-font",l[30]+"px"),_e(e,"--control-width",270+(l[30]-16)*10+"px"),Me(()=>l[62].call(e))},m(d,S){y(d,e,S),c(e,t),c(t,s),c(s,i);for(let N=0;N<x.length;N+=1)x[N].m(i,null);c(s,a);for(let N=0;N<ee.length;N+=1)ee[N].m(a,null);vl(s,l[17]),c(t,n),J&&J.m(t,null),c(t,o),pl(f,t,null),c(t,r),c(t,h),c(h,p),c(p,v),c(v,g),c(p,m),c(p,_),c(_,D),c(h,Q),F&&F.m(h,null),c(t,K),c(t,I),c(I,C),c(C,G),c(G,q),c(C,Z),c(C,O),c(O,A),c(I,X),M&&M.m(I,null),c(e,te),pl(Y,e,null),c(e,me),L&&L.m(e,null),pe=ls(e,l[62].bind(e)),ae=!0,fe||(be=[ne(window,"keydown",l[43]),ne(s,"change",l[51]),ne(v,"click",l[55]),ne(_,"click",l[56]),ne(G,"click",l[58]),ne(O,"click",l[59])],fe=!0)},p(d,S){if(S[0]&4){ge=d[2];let U;for(U=0;U<ge.length;U+=1){const we=Mt(d,ge,U);x[U]?x[U].p(we,S):(x[U]=Lt(we),x[U].c(),x[U].m(i,null))}for(;U<x.length;U+=1)x[U].d(1);x.length=ge.length}if(S[0]&8){ce=d[3];let U;for(U=0;U<ce.length;U+=1){const we=Ot(d,ce,U);ee[U]?ee[U].p(we,S):(ee[U]=jt(we),ee[U].c(),ee[U].m(a,null))}for(;U<ee.length;U+=1)ee[U].d(1);ee.length=ce.length}(!ae||S[0]&131080)&&_e(s,"width",d[3].includes(d[17])?"auto":"calc(var(--control-width) - 20px)"),S[0]&131084&&vl(s,d[17]),d[21]?J?(J.p(d,S),S[0]&2097152&&$(J,1)):(J=Bt(d),J.c(),$(J,1),J.m(t,o)):J&&(Ie(),re(J,1,1,()=>{J=null}),Ne());const N={};S[0]&4&&(N.dynamicVars=d[2]),S[0]&131072&&(N.variable=d[17]),S[0]&524288&&(N.metric=d[19]),S[0]&262144&&(N.showPluralities=d[18]),S[0]&32&&(N.pluralityVars=d[5]),S[1]&2&&(N.breaks=d[32]),f.$set(N),(!ae||S[0]&16777216)&&P!==(P=(d[24]?"Original":"Modify")+"")&&oe(D,P),d[20]?F?(F.p(d,S),S[0]&1048576&&$(F,1)):(F=Rt(d),F.c(),$(F,1),F.m(h,null)):F&&(Ie(),re(F,1,1,()=>{F=null}),Ne()),d[6]?M?(M.p(d,S),S[0]&64&&$(M,1)):(M=zt(d),M.c(),$(M,1),M.m(I,null)):M&&(Ie(),re(M,1,1,()=>{M=null}),Ne());const R={};S[0]&16384&&(R.viewBox=d[14]),S[1]&1&&(R.labelSize=d[31]),S[0]&256&&(R.draggedBgs=d[8]),S[0]&2&&(R.data=d[1]),S[0]&16777216&&(R.changingLines=d[24]),S[0]&262144&&(R.showPluralities=d[18]),S[0]&524288&&(R.metric=d[19]),S[0]&65536&&(R.period=d[16]),S[0]&16&&(R.tractVars=d[4]),S[0]&64&&(R.showComms=d[6]),S[0]&512&&(R.drawings=d[9]),S[0]&1048576&&(R.showPlans=d[20]),S[0]&2048&&(R.plan=d[11]),S[0]&268435456&&(R.points=d[28]),S[0]&67108864&&(R.bgMesh=d[26]),S[0]&1024&&(R.aggregates=d[10]),S[0]&1&&(R.obj=d[0]),S[0]&4096&&(R.congressPlans=d[12]),S[0]&134217728&&(R.plans=d[27]),S[0]&536870912&&(R.viewCutoff=d[29]),S[0]&4194304&&(R.showOnlyFocusDistricts=d[22]),S[0]&128&&(R.showStreets=d[7]),S[0]&8192&&(R.streets=d[13]),Y.$set(R),d[21]?L?(L.p(d,S),S[0]&2097152&&$(L,1)):(L=Ft(d),L.c(),$(L,1),L.m(e,null)):L&&(Ie(),re(L,1,1,()=>{L=null}),Ne()),(!ae||S[0]&8388608)&&_e(e,"cursor",d[23]?"crosshair":"auto"),(!ae||S[0]&1073741824)&&_e(e,"--container-font",d[30]+"px"),(!ae||S[0]&1073741824)&&_e(e,"--control-width",270+(d[30]-16)*10+"px")},i(d){ae||($(J),$(f.$$.fragment,d),$(F),$(M),$(Y.$$.fragment,d),$(L),ae=!0)},o(d){re(J),re(f.$$.fragment,d),re(F),re(M),re(Y.$$.fragment,d),re(L),ae=!1},d(d){d&&u(e),De(x,d),De(ee,d),J&&J.d(),bl(f),F&&F.d(),M&&M.d(),bl(Y),L&&L.d(),pe(),fe=!1,gl(be)}}}async function Is({fetch:l}){const e=await(await l(`${Vl}/output_census.topojson`)).json(),t=os(e.objects.census),s=xt(e,t).features.map(Ul),i=["pop","cvap"],a=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(h=>[...i,"GEOID","senate","assembly","congress"].every(p=>!h.includes(p))&&h===h.toLowerCase()).map(h=>h.split("_")[0]);return new Set([...o,...r])},[])],n=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:es(t.geometries),dynamicVars:i,staticVars:a,idToIndex:n,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function Os(l,e,t){let s,i,a,n,{topoData:o,obj:f,neighbors:r,data:h,dynamicVars:p,staticVars:v,tractVars:g,pluralityVars:m,idToIndex:_}=e,P=!0,D,Q,K=!0,I=!0,C,G,q,Z,O=[],A=[],X=[],te={},Y="assembly",me,pe,ae,fe,be,ge=2183,x=xe.Brooklyn,ce=18,ee;const J=E=>ll(o,f,E),F=kl(J((E,ie)=>je(E).substring(0,11)!==je(ie).substring(0,11)));ts(async()=>{t(26,me=kl(Ul(J((ie,W)=>je(ie)!==je(W)))));const E=await Promise.all([cs(),hs()]);t(27,pe=E[0]),t(28,fe=E[1])});let M;const L=E=>h[E].properties[Y];function d(E){const ie=L(E),W=new Set(r[E].map(L).filter(ue=>ue!==ie));if(W.size===1)t(0,f.geometries[E].properties[Y]=M=W.values().next().value,f);else if(W.has(M))t(0,f.geometries[E].properties[Y]=M,f);else return;t(0,f)}let S="present",N="pop";const R={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let U=!1;function we({properties:E}){if(!E.ALAND)return"#fff";const ie=E[`${s}_total`];if(m.includes(s)){const W=ve=>E[`${s}_${ve}`];if(W(wl[0])===null)return"#eee";const ue=[...wl].sort((ve,Re)=>W(Re)-W(ve));return $e[wl.indexOf(ue[0])]}else if(v.includes(s)){if(!Hl(i(E)))return"#eee";if(ie<=10)return"#fff";for(let W=1;W<a.length;W++)if(i(E)<a[W])return $e[W];return $e[a.length-1]}else{if(ie<=10)return"#fff";const W=ue=>E[`${s}_${ue}`]/E[`${s}_total`];if(U){const ue=Ze.filter(el=>W(el)>.5)[0];if(ue!==void 0)return Tl[ue]+Sl[ie<130?0:ie<200?1:2];const ve=[...Ze].sort((el,cl)=>W(cl)-W(el)),Re=W(ve[0])-W(ve[1]);return Tl[ve[0]]+Sl[Re<.093?0:1]}else{const ue=R[N];for(let ve=1;ve<ue.length;ve++)if(W("asian")<ue[ve])return Pl[ve-1];return Pl[ue.length-1]}}}const Ee=async()=>t(12,ae=await us()),Pe=async()=>t(13,be=await _s());function Ve(E){const ie=typeof E[0]=="string"?E.map(Ae=>h[_[Ae]].properties):E.map(Ae=>Ae.properties),W=(Ae,Ye)=>ie.reduce((Yt,Al)=>Yt+(Al[Ae]||0)*(Ye&&Al[Ye]||1),0),ue=Ae=>W(Ae,"pop20_total")/W("pop20_total"),ve=(Ae,Ye)=>W(`${Ae}_${Ye}`)/W(`${Ae}_total`);let Re=W("pop10_asian"),el=W("pop20_asian"),cl=W("cvap10_asian"),Wt=W("cvap19_asian");const Cl={income:ue("income"),hhlang:ve("hhlang","asian"),benefits:ve("families","benefits"),pop20_total:W("pop20_total"),pct_increase:(el-Re)/Re,pct_increase_cvap:(Wt-cl)/cl};return["pop20","cvap19","pop10","cvap10"].forEach(Ae=>Ze.forEach(Ye=>Cl[Ae+Ye]=ve(Ae,Ye))),Cl}const k=E=>t(9,A=A.filter((ie,W)=>W!==E));async function he(){try{await fetch(`${Vl}/data.json`,{method:"POST",body:JSON.stringify(A)})}catch(E){console.error(E)}}async function Oe(){try{const E=await fetch(`${Vl}/data.json`);t(9,A=(await E.json()).map(ie=>jl(Ll({},ie),{stats:Ve(ie.ids)})))}catch(E){console.error(E)}}function We(E){X.includes(E)?t(10,X=X.filter(ie=>ie!==E)):t(10,X=[...X,E])}const Ke=()=>t(47,G=!0),se=()=>t(47,G=t(23,C=!1)),ye=E=>C&&G&&(O.length===0?t(8,O=[je(E)]):O.push(je(E)));function ke({key:E}){E==="="&&t(30,ce+=2),E==="-"&&t(30,ce-=2),E==="v"&&t(21,K=!K),E==="f"&&t(22,I=!I)}const tl=[[]];function sl(){N=Il(this),t(17,N),t(3,v),t(2,p)}function Be(){S=this.__value,t(16,S)}const ze=()=>t(18,U=!U),il=()=>{t(20,P=!P),t(6,D=!1)},nl=()=>t(24,q=!q);function Fe(){Y=Il(this),t(11,Y)}const al=()=>{t(6,D=!D),t(20,P=!1)},ol=()=>t(23,C=!0),rl=E=>{t(14,x=xe[E]),t(29,ge=6e3)},Ge=()=>t(7,Q=!Q);function fl(){ee=this.clientWidth,t(15,ee)}return l.$$set=E=>{"topoData"in E&&t(44,o=E.topoData),"obj"in E&&t(0,f=E.obj),"neighbors"in E&&t(45,r=E.neighbors),"data"in E&&t(1,h=E.data),"dynamicVars"in E&&t(2,p=E.dynamicVars),"staticVars"in E&&t(3,v=E.staticVars),"tractVars"in E&&t(4,g=E.tractVars),"pluralityVars"in E&&t(5,m=E.pluralityVars),"idToIndex"in E&&t(46,_=E.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&196616&&t(19,s=v.includes(N)?N:N+(S==="past"?10:N==="cvap"?19:20)),l.$$.dirty[0]&524288&&t(50,i={income:E=>E[s],hhlang:E=>E[`${s}_asian`]/E[`${s}_total`],graduates:E=>(E[`${s}_hs_grad`]+E[`${s}_ba_above`])/E[`${s}_total`],families:E=>E[`${s}_benefits`]/E[`${s}_total`],workers:E=>E[`${s}_publictransport`]/E[`${s}_total`]}[s]),l.$$.dirty[0]&917518|l.$$.dirty[1]&786432&&t(32,a=p.includes(N)&&!U?R[N]:R[s]||!v.includes(s)||s==="asiaentry"||t(49,R[s]=ss(h.map(E=>i(E.properties)).filter(Hl),6),R)),l.$$.dirty[0]&770|l.$$.dirty[1]&65536&&!G&&O.length>0){if(O[0]===O[O.length-1]){const E=new Set(O),ie=is(J((ue,ve)=>rs(E.has(je(ue)),E.has(je(ve)))).coordinates.flat()),W=h.filter(ue=>ns(as(ue.geometry.coordinates[0]),ie)).map(je);t(9,A=[...A,{outline:kl({type:"LineString",coordinates:ie}),ids:W,stats:Ve(W)}])}t(8,O=[])}if(l.$$.dirty[0]&6144&&Y.startsWith("congress")&&ae===void 0&&Ee(),l.$$.dirty[0]&8320&&Q&&be===void 0&&Pe(),l.$$.dirty[0]&64|l.$$.dirty[1]&131072&&D&&!Z&&(Oe(),t(48,Z=!0)),l.$$.dirty[0]&51200&&t(31,n=(Y.endsWith("_names")?.9:1.1)/((ee-410)/x[2])),l.$$.dirty[0]&3073)for(let E=0;E<X.length;E++){const[ie,W]=X[E].split(",");ie===Y&&t(25,te[X[E]]=Ve(f.geometries.filter(({properties:ue})=>W===""+ue[Y])),te)}},[f,h,p,v,g,m,D,Q,O,A,X,Y,ae,be,x,ee,S,N,U,s,P,K,I,C,q,te,me,pe,fe,ge,ce,n,a,J,F,d,we,k,he,We,Ke,se,ye,ke,o,r,_,G,Z,R,i,sl,Be,tl,ze,il,nl,Fe,al,ol,rl,Ge,fl]}class Ns extends hl{constructor(e){super();ul(this,e,Os,As,_l,{topoData:44,obj:0,neighbors:45,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:46},null,[-1,-1,-1])}}export{Ns as default,Is as load};

var nt=Object.defineProperty,it=Object.defineProperties;var ot=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Qe=(t,e,s)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Ke=(t,e)=>{for(var s in e||(e={}))rt.call(e,s)&&Qe(t,s,e[s]);if(Ye)for(var s of Ye(e))ct.call(e,s)&&Qe(t,s,e[s]);return t},Je=(t,e)=>it(t,ot(e));import{S as De,i as Ie,s as Ne,l as ne,g as j,K as _e,d as p,e as y,c as E,a as D,f as ie,L as ft,k as A,M as ut,m as S,b as N,J as h,N as Xe,O as ae,t as R,h as U,j as $,P as ce,F as Jl,G as Xl,H as Zl,I as $l,q as J,Q as Le,R as qe,T as je,o as se,U as We,n as Me,p as Re,V as _t,W as Ze,X as ht,Y as pt,v as dt,Z as xl,w as me,x as ve,y as be,B as ke,_ as Ve,$ as et,a0 as gt,a1 as $e,a2 as Ge,a3 as mt}from"../chunks/vendor-80ca69e6.js";import{b as Ae}from"../chunks/paths-4b3c6e7e.js";const re=(t,e=1)=>Math.round(t*Math.pow(10,e+2))/Math.pow(10,e)+"%",Te=t=>"$"+Math.round(t/1e3)+"k",oe=t=>t.charAt(0).toUpperCase()+t.slice(1),xe=t=>!isNaN(t)&&t!==null,el=t=>`${Math.abs(t)} ${t<0?"below":"above"}`,ll=t=>{const[e,s]=t.split(","),l=e.split("_");return(l.length===1?"":`\u201C${l[1]==="latfor"?"LATFOR":oe(l[1])}\u201D `)+oe(l[0])+" "+s},lt=t=>{const e=t.split("_");return(e.length===1?"Current ":`\u201C${e[1]==="latfor"?"LATFOR":oe(e[1])}\u201D `)+oe(e[0])};function vt(t){const e=t.geometries,s=e[0].properties.fields;for(let l=0;l<e.length;l++){const a={};e[l].properties=e[l].properties.d.split(",");for(let n=0;n<s.length;n++){let i=e[l].properties[n];i===""?i=null:!isNaN(+i)&&s[n]!=="GEOID"&&(i=+i),a[s[n]]=i}e[l].properties=a}return t}function bt(t){const e=t.split(`
`),s=e.shift().split(",");return e.map(l=>l.split(",")).map(l=>s.reduce((a,n,i)=>(a[n]=l[i],(n.includes("vap")||n.includes("pop"))&&(a[n]=+a[n]),a),{}))}const He={black:["rgb(165, 213, 15)","rgb(191, 225, 91)","rgb(219, 236, 170)"].reverse(),hispanic:["rgb(254, 175, 16)","rgb(252, 197, 91)","rgb(249, 223, 170)"].reverse(),asian:["rgb(254, 15, 16)","rgb(252, 91, 91)","rgb(249, 170, 170)"].reverse(),white:["rgb(125, 193, 254)","rgb(163, 203, 252)","rgb(206, 225, 249)"].reverse()},kt=["44","99","ee"],ye=["asian","black","hispanic","white"],Se=["1990_earlier","1990_1999","2000_2009","2010_later"],Ue={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",vap:"Voting age population by race",pop:"Population by race"},Fe=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],Ee=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],tt={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},tl={"Queens, Western":[250,320,400,350],Queens:[200,290,775,600],Chinatown:[80,500,300,220],"Chinatown Wide":[80,430,500,600],Brooklyn:[20,670,600,520],"All of NYC":[20,0,975,1220]};"49 47 45 41 51 48".split(" ").map(t=>+t),"AU AW AS AT AV AY AO".split(" "),"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),"20 17 23 22 19".split(" ").map(t=>+t),"G AA Q AC".split(" "),"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ");if(typeof window=="undefined"){const[t,e,s,l]=tl[Object.keys(tl)[0]];console.log(`${t},${e},${t+s},${e+l}`)}function sl(t,e,s){const l=t.slice();return l[20]=e[s],l[15]=s,l}function al(t,e,s){const l=t.slice();return l[20]=e[s],l[15]=s,l}function nl(t,e,s){const l=t.slice();return l[16]=e[s],l}function il(t,e,s){const l=t.slice();return l[16]=e[s],l[15]=s,l}function ol(t,e,s){const l=t.slice();return l[10]=e[s],l}function rl(t,e,s){const l=t.slice();return l[13]=e[s],l[15]=s,l}function wt(t){let e,s,l=t[9],a=[];for(let o=0;o<l.length;o+=1)a[o]=cl(al(t,l,o));let n=t[9],i=[];for(let o=0;o<n.length;o+=1)i[o]=fl(sl(t,n,o));return{c(){e=y("div");for(let o=0;o<a.length;o+=1)a[o].c();s=A();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0,style:!0});var c=D(e);for(let r=0;r<a.length;r+=1)a[r].l(c);s=S(c);for(let r=0;r<i.length;r+=1)i[r].l(c);c.forEach(p),this.h()},h(){N(e,"class","color-legend svelte-660ibp"),ie(e,"grid-template-columns","repeat("+(t[3].includes(t[4])?5:6)+", 2.9em)"),Xe(e,"pctasian",t[3].includes(t[4]))},m(o,c){j(o,e,c);for(let r=0;r<a.length;r+=1)a[r].m(e,null);h(e,s);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,c){if(c&536){l=o[9];let r;for(r=0;r<l.length;r+=1){const u=al(o,l,r);a[r]?a[r].p(u,c):(a[r]=cl(u),a[r].c(),a[r].m(e,s))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}if(c&536){n=o[9];let r;for(r=0;r<n.length;r+=1){const u=sl(o,n,r);i[r]?i[r].p(u,c):(i[r]=fl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}c&24&&ie(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.9em)"),c&24&&Xe(e,"pctasian",o[3].includes(o[4]))},d(o){o&&p(e),ae(a,o),ae(i,o)}}}function Pt(t){let e,s,l=t[8],a=[];for(let o=0;o<l.length;o+=1)a[o]=ul(il(t,l,o));let n=t[8],i=[];for(let o=0;o<n.length;o+=1)i[o]=_l(nl(t,n,o));return{c(){e=y("div");for(let o=0;o<a.length;o+=1)a[o].c();s=A();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0});var c=D(e);for(let r=0;r<a.length;r+=1)a[r].l(c);s=S(c);for(let r=0;r<i.length;r+=1)i[r].l(c);c.forEach(p),this.h()},h(){N(e,"class","color-legend plurality-legend svelte-660ibp")},m(o,c){j(o,e,c);for(let r=0;r<a.length;r+=1)a[r].m(e,null);h(e,s);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,c){if(c&256){l=o[8];let r;for(r=0;r<l.length;r+=1){const u=il(o,l,r);a[r]?a[r].p(u,c):(a[r]=ul(u),a[r].c(),a[r].m(e,s))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}if(c&256){n=o[8];let r;for(r=0;r<n.length;r+=1){const u=nl(o,n,r);i[r]?i[r].p(u,c):(i[r]=_l(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(o){o&&p(e),ae(a,o),ae(i,o)}}}function yt(t){let e,s,l,a,n,i,o,c,r,u,f,k,v=t[0],g=[];for(let w=0;w<v.length;w+=1)g[w]=pl(ol(t,v,w));return{c(){e=y("div");for(let w=0;w<g.length;w+=1)g[w].c();s=A(),l=y("p"),a=y("span"),n=R("Weak plurality"),i=A(),o=y("p"),c=A(),r=y("p"),u=R("Majority"),f=A(),k=y("p"),this.h()},l(w){e=E(w,"DIV",{class:!0});var T=D(e);for(let q=0;q<g.length;q+=1)g[q].l(T);s=S(T),l=E(T,"P",{class:!0});var d=D(l);a=E(d,"SPAN",{});var b=D(a);n=U(b,"Weak plurality"),b.forEach(p),d.forEach(p),i=S(T),o=E(T,"P",{class:!0}),D(o).forEach(p),c=S(T),r=E(T,"P",{class:!0});var O=D(r);u=U(O,"Majority"),O.forEach(p),f=S(T),k=E(T,"P",{class:!0}),D(k).forEach(p),T.forEach(p),this.h()},h(){N(l,"class","col-head svelte-660ibp"),N(o,"class","col-head svelte-660ibp"),N(r,"class","col-head svelte-660ibp"),N(k,"class","col-head svelte-660ibp"),N(e,"class","legend svelte-660ibp")},m(w,T){j(w,e,T);for(let d=0;d<g.length;d+=1)g[d].m(e,null);h(e,s),h(e,l),h(l,a),h(a,n),h(e,i),h(e,o),h(e,c),h(e,r),h(r,u),h(e,f),h(e,k)},p(w,T){if(T&7){v=w[0];let d;for(d=0;d<v.length;d+=1){const b=ol(w,v,d);g[d]?g[d].p(b,T):(g[d]=pl(b),g[d].c(),g[d].m(e,s))}for(;d<g.length;d+=1)g[d].d(1);g.length=v.length}},d(w){w&&p(e),ae(g,w)}}}function cl(t){let e;return{c(){e=y("div"),this.h()},l(s){e=E(s,"DIV",{style:!0}),D(e).forEach(p),this.h()},h(){ie(e,"background-color",t[3].includes(t[4])?Fe[t[15]]:Ee[t[15]])},m(s,l){j(s,e,l)},p(s,l){l&24&&ie(e,"background-color",s[3].includes(s[4])?Fe[s[15]]:Ee[s[15]])},d(s){s&&p(e)}}}function fl(t){let e,s,l=(t[9][t[9].length-1]<1?re(t[20],0):t[9][t[9].length-1]>1e3?Te(t[20]):t[20])+(t[3].includes(t[4])&&t[15]===t[9].length-1?"+ Asian":""),a;return{c(){e=y("p"),s=new ft,a=A(),this.h()},l(n){e=E(n,"P",{class:!0});var i=D(e);s=ut(i),a=S(i),i.forEach(p),this.h()},h(){s.a=a,N(e,"class","svelte-660ibp")},m(n,i){j(n,e,i),s.m(l,e),h(e,a)},p(n,i){i&536&&l!==(l=(n[9][n[9].length-1]<1?re(n[20],0):n[9][n[9].length-1]>1e3?Te(n[20]):n[20])+(n[3].includes(n[4])&&n[15]===n[9].length-1?"+ Asian":""))&&s.p(l)},d(n){n&&p(e)}}}function ul(t){let e;return{c(){e=y("div"),this.h()},l(s){e=E(s,"DIV",{style:!0}),D(e).forEach(p),this.h()},h(){ie(e,"background-color",Ee[t[15]])},m(s,l){j(s,e,l)},p:_e,d(s){s&&p(e)}}}function _l(t){let e,s=t[16].replace("_","-")+"",l;return{c(){e=y("p"),l=R(s),this.h()},l(a){e=E(a,"P",{class:!0});var n=D(e);l=U(n,s),n.forEach(p),this.h()},h(){N(e,"class","svelte-660ibp")},m(a,n){j(a,e,n),h(e,l)},p(a,n){n&256&&s!==(s=a[16].replace("_","-")+"")&&$(l,s)},d(a){a&&p(e)}}}function hl(t){let e;return{c(){e=y("div"),this.h()},l(s){e=E(s,"DIV",{style:!0}),D(e).forEach(p),this.h()},h(){ie(e,"background-color",t[2][t[10]][t[15]])},m(s,l){j(s,e,l)},p(s,l){l&5&&ie(e,"background-color",s[2][s[10]][s[15]])},d(s){s&&p(e)}}}function pl(t){let e,s,l=oe(t[10])+"",a,n=t[1],i=[];for(let o=0;o<n.length;o+=1)i[o]=hl(rl(t,n,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=A(),s=y("p"),a=R(l),this.h()},l(o){for(let r=0;r<i.length;r+=1)i[r].l(o);e=S(o),s=E(o,"P",{class:!0});var c=D(s);a=U(c,l),c.forEach(p),this.h()},h(){N(s,"class","row-label svelte-660ibp")},m(o,c){for(let r=0;r<i.length;r+=1)i[r].m(o,c);j(o,e,c),j(o,s,c),h(s,a)},p(o,c){if(c&7){n=o[1];let r;for(r=0;r<n.length;r+=1){const u=rl(o,n,r);i[r]?i[r].p(u,c):(i[r]=hl(u),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}c&1&&l!==(l=oe(o[10])+"")&&$(a,l)},d(o){ae(i,o),o&&p(e),o&&p(s)}}}function Et(t){let e,s,l;function a(o,c){return c&88&&(e=null),c&160&&(s=null),e==null&&(e=!!(o[3].includes(o[4])&&o[6])),e?yt:(s==null&&(s=!!o[7].includes(o[5])),s?Pt:wt)}let n=a(t,-1),i=n(t);return{c(){i.c(),l=ne()},l(o){i.l(o),l=ne()},m(o,c){i.m(o,c),j(o,l,c)},p(o,[c]){n===(n=a(o,c))&&i?i.p(o,c):(i.d(1),i=n(o),i&&(i.c(),i.m(l.parentNode,l)))},i:_e,o:_e,d(o){i.d(o),o&&p(l)}}}function Vt(t,e,s){let{groups:l,levels:a,colors:n,dynamicVars:i,variable:o,metric:c,showPluralities:r,pluralityVars:u,periods:f,breaks:k}=e;return t.$$set=v=>{"groups"in v&&s(0,l=v.groups),"levels"in v&&s(1,a=v.levels),"colors"in v&&s(2,n=v.colors),"dynamicVars"in v&&s(3,i=v.dynamicVars),"variable"in v&&s(4,o=v.variable),"metric"in v&&s(5,c=v.metric),"showPluralities"in v&&s(6,r=v.showPluralities),"pluralityVars"in v&&s(7,u=v.pluralityVars),"periods"in v&&s(8,f=v.periods),"breaks"in v&&s(9,k=v.breaks)},[l,a,n,i,o,c,r,u,f,k]}class Tt extends De{constructor(e){super();Ie(this,e,Vt,Et,Ne,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function dl(t,e,s){const l=t.slice();return l[20]=e[s].name,l[10]=e[s].stats,l[22]=s,l}function gl(t,e,s){const l=t.slice();return l[23]=e[s],l}function ml(t,e,s){const l=t.slice();return l[14]=e[s],l}function vl(t,e,s){const l=t.slice();return l[17]=e[s],l}function bl(t){let e;function s(n,i){if(n[9]==="districts")return It;if(n[9]==="community")return Dt}let l=s(t),a=l&&l(t);return{c(){a&&a.c(),e=ne()},l(n){a&&a.l(n),e=ne()},m(n,i){a&&a.m(n,i),j(n,e,i)},p(n,i){l===(l=s(n))&&a?a.p(n,i):(a&&a.d(1),a=l&&l(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){a&&a.d(n),n&&p(e)}}}function Dt(t){let e,s=t[7],l=[];for(let a=0;a<s.length;a+=1)l[a]=wl(dl(t,s,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<l.length;i+=1)l[i].m(a,n);j(a,e,n)},p(a,n){if(n&392){s=a[7];let i;for(i=0;i<s.length;i+=1){const o=dl(a,s,i);l[i]?l[i].p(o,n):(l[i]=wl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(a){ae(l,a),a&&p(e)}}}function It(t){let e,s=t[0],l=[];for(let a=0;a<s.length;a+=1)l[a]=Vl(ml(t,s,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<l.length;i+=1)l[i].m(a,n);j(a,e,n)},p(a,n){if(n&3199){s=a[0];let i;for(i=0;i<s.length;i+=1){const o=ml(a,s,i);l[i]?l[i].p(o,n):(l[i]=Vl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(a){ae(l,a),a&&p(e)}}}function kl(t){let e,s,l=oe(t[23])+"",a,n,i,o=re(t[10]["cvap19"+t[23]])+"",c,r,u,f=re(t[10]["pop20"+t[23]])+"",k,v;return{c(){e=y("tr"),s=y("td"),a=R(l),n=A(),i=y("td"),c=R(o),r=A(),u=y("td"),k=R(f),v=A(),this.h()},l(g){e=E(g,"TR",{class:!0});var w=D(e);s=E(w,"TD",{class:!0});var T=D(s);a=U(T,l),T.forEach(p),n=S(w),i=E(w,"TD",{class:!0});var d=D(i);c=U(d,o),d.forEach(p),r=S(w),u=E(w,"TD",{class:!0});var b=D(u);k=U(b,f),b.forEach(p),v=S(w),w.forEach(p),this.h()},h(){N(s,"class","svelte-16gulxs"),N(i,"class","svelte-16gulxs"),N(u,"class","svelte-16gulxs"),N(e,"class","svelte-16gulxs")},m(g,w){j(g,e,w),h(e,s),h(s,a),h(e,n),h(e,i),h(i,c),h(e,r),h(e,u),h(u,k),h(e,v)},p(g,w){w&8&&l!==(l=oe(g[23])+"")&&$(a,l),w&136&&o!==(o=re(g[10]["cvap19"+g[23]])+"")&&$(c,o),w&136&&f!==(f=re(g[10]["pop20"+g[23]])+"")&&$(k,f)},d(g){g&&p(e)}}}function wl(t){let e,s,l,a=(t[20]||"COI"+(t[22]+1))+"",n,i,o,c,r,u,f,k,v,g,w,T,d,b,O,q,H,F,M=Te(t[10].income)+"",m,P,V,_,L=re(t[10].hhlang)+"",C,Y,X,Q,B=re(t[10].benefits)+"",Z,we,Ce,Oe;function Be(){return t[13](t[22])}let he=t[3],ee=[];for(let x=0;x<he.length;x+=1)ee[x]=kl(gl(t,he,x));return{c(){e=y("div"),s=y("p"),l=y("i"),n=R(a),i=A(),o=y("button"),c=R("\u{1F5D1}"),r=A(),u=y("table"),f=y("tr"),k=y("th"),v=A(),g=y("th"),w=R("CVAP"),T=A(),d=y("th"),b=R("Pop."),O=A();for(let x=0;x<ee.length;x+=1)ee[x].c();q=A(),H=y("p"),F=R("Income: "),m=R(M),P=A(),V=y("p"),_=R("Asian and LEP: "),C=R(L),Y=A(),X=y("p"),Q=R("Pct. gov't benefits: "),Z=R(B),we=A(),this.h()},l(x){e=E(x,"DIV",{});var K=D(e);s=E(K,"P",{class:!0});var W=D(s);l=E(W,"I",{});var I=D(l);n=U(I,a),I.forEach(p),i=S(W),o=E(W,"BUTTON",{});var te=D(o);c=U(te,"\u{1F5D1}"),te.forEach(p),W.forEach(p),r=S(K),u=E(K,"TABLE",{class:!0});var G=D(u);f=E(G,"TR",{class:!0});var z=D(f);k=E(z,"TH",{class:!0}),D(k).forEach(p),v=S(z),g=E(z,"TH",{class:!0});var le=D(g);w=U(le,"CVAP"),le.forEach(p),T=S(z),d=E(z,"TH",{class:!0});var pe=D(d);b=U(pe,"Pop."),pe.forEach(p),z.forEach(p),O=S(G);for(let fe=0;fe<ee.length;fe+=1)ee[fe].l(G);G.forEach(p),q=S(K),H=E(K,"P",{class:!0});var ue=D(H);F=U(ue,"Income: "),m=U(ue,M),ue.forEach(p),P=S(K),V=E(K,"P",{class:!0});var de=D(V);_=U(de,"Asian and LEP: "),C=U(de,L),de.forEach(p),Y=S(K),X=E(K,"P",{class:!0});var Pe=D(X);Q=U(Pe,"Pct. gov't benefits: "),Z=U(Pe,B),Pe.forEach(p),we=S(K),K.forEach(p),this.h()},h(){N(s,"class","svelte-16gulxs"),N(k,"class","svelte-16gulxs"),N(g,"class","svelte-16gulxs"),N(d,"class","svelte-16gulxs"),N(f,"class","svelte-16gulxs"),N(u,"class","svelte-16gulxs"),N(H,"class","table-footer svelte-16gulxs"),N(V,"class","table-footer svelte-16gulxs"),N(X,"class","table-footer svelte-16gulxs")},m(x,K){j(x,e,K),h(e,s),h(s,l),h(l,n),h(s,i),h(s,o),h(o,c),h(e,r),h(e,u),h(u,f),h(f,k),h(f,v),h(f,g),h(g,w),h(f,T),h(f,d),h(d,b),h(u,O);for(let W=0;W<ee.length;W+=1)ee[W].m(u,null);h(e,q),h(e,H),h(H,F),h(H,m),h(e,P),h(e,V),h(V,_),h(V,C),h(e,Y),h(e,X),h(X,Q),h(X,Z),h(e,we),Ce||(Oe=ce(o,"click",Be),Ce=!0)},p(x,K){if(t=x,K&128&&a!==(a=(t[20]||"COI"+(t[22]+1))+"")&&$(n,a),K&136){he=t[3];let W;for(W=0;W<he.length;W+=1){const I=gl(t,he,W);ee[W]?ee[W].p(I,K):(ee[W]=kl(I),ee[W].c(),ee[W].m(u,null))}for(;W<ee.length;W+=1)ee[W].d(1);ee.length=he.length}K&128&&M!==(M=Te(t[10].income)+"")&&$(m,M),K&128&&L!==(L=re(t[10].hhlang)+"")&&$(C,L),K&128&&B!==(B=re(t[10].benefits)+"")&&$(Z,B)},d(x){x&&p(e),ae(ee,x),Ce=!1,Oe()}}}function Pl(t){let e,s,l,a=ll(t[14])+"",n,i,o,c,r,u,f,k=t[14].includes("_")?t[5]==="cvap"?"19":"20":"10",v,g,w,T,d,b,O,q;function H(){return t[12](t[14])}let F=t[3],M=[];for(let P=0;P<F.length;P+=1)M[P]=yl(vl(t,F,P));let m=t[4]&&t[2]in t[6]&&El(t);return{c(){e=y("div"),s=y("p"),l=y("i"),n=R(a),i=A(),o=y("p"),c=A(),r=y("p"),u=R(t[11]),f=R(" (20"),v=R(k),g=R(")"),w=A(),T=y("div");for(let P=0;P<M.length;P+=1)M[P].c();d=A(),m&&m.c(),b=A(),this.h()},l(P){e=E(P,"DIV",{class:!0});var V=D(e);s=E(V,"P",{class:!0});var _=D(s);l=E(_,"I",{});var L=D(l);n=U(L,a),L.forEach(p),_.forEach(p),i=S(V),o=E(V,"P",{class:!0}),D(o).forEach(p),c=S(V),r=E(V,"P",{class:!0});var C=D(r);u=U(C,t[11]),f=U(C," (20"),v=U(C,k),g=U(C,")"),C.forEach(p),w=S(V),T=E(V,"DIV",{class:!0});var Y=D(T);for(let X=0;X<M.length;X+=1)M[X].l(Y);Y.forEach(p),d=S(V),m&&m.l(V),b=S(V),V.forEach(p),this.h()},h(){N(s,"class","svelte-16gulxs"),N(o,"class","svelte-16gulxs"),N(r,"class","chart-title svelte-16gulxs"),N(T,"class","chart svelte-16gulxs"),N(e,"class","district-aggregate svelte-16gulxs")},m(P,V){j(P,e,V),h(e,s),h(s,l),h(l,n),h(e,i),h(e,o),h(e,c),h(e,r),h(r,u),h(r,f),h(r,v),h(r,g),h(e,w),h(e,T);for(let _=0;_<M.length;_+=1)M[_].m(T,null);h(e,d),m&&m.m(e,null),h(e,b),O||(q=ce(s,"click",H),O=!0)},p(P,V){if(t=P,V&1&&a!==(a=ll(t[14])+"")&&$(n,a),V&2048&&$(u,t[11]),V&33&&k!==(k=t[14].includes("_")?t[5]==="cvap"?"19":"20":"10")&&$(v,k),V&1065){F=t[3];let _;for(_=0;_<F.length;_+=1){const L=vl(t,F,_);M[_]?M[_].p(L,V):(M[_]=yl(L),M[_].c(),M[_].m(T,null))}for(;_<M.length;_+=1)M[_].d(1);M.length=F.length}t[4]&&t[2]in t[6]?m?m.p(t,V):(m=El(t),m.c(),m.m(e,b)):m&&(m.d(1),m=null)},d(P){P&&p(e),ae(M,P),m&&m.d(),O=!1,q()}}}function yl(t){let e,s=oe(t[17])+"",l,a,n,i,o=re(t[10][t[14]][t[5]+(t[14].includes("_")?t[5]==="cvap"?"19":"20":"10")+t[17]],t[17]==="asian")+"",c,r,u;return{c(){e=y("p"),l=R(s),a=A(),n=y("div"),i=y("p"),c=R(o),r=A(),this.h()},l(f){e=E(f,"P",{class:!0});var k=D(e);l=U(k,s),k.forEach(p),a=S(f),n=E(f,"DIV",{class:!0,style:!0});var v=D(n);i=E(v,"P",{class:!0});var g=D(i);c=U(g,o),g.forEach(p),r=S(v),v.forEach(p),this.h()},h(){N(e,"class","bar-label svelte-16gulxs"),N(i,"class","svelte-16gulxs"),N(n,"class",u="bar bar-"+t[17]+" svelte-16gulxs"),ie(n,"width",re(t[10][t[14]][t[5]+(t[14].includes("_")?t[5]==="cvap"?"19":"20":"10")+t[17]]))},m(f,k){j(f,e,k),h(e,l),j(f,a,k),j(f,n,k),h(n,i),h(i,c),h(n,r)},p(f,k){k&8&&s!==(s=oe(f[17])+"")&&$(l,s),k&1065&&o!==(o=re(f[10][f[14]][f[5]+(f[14].includes("_")?f[5]==="cvap"?"19":"20":"10")+f[17]],f[17]==="asian")+"")&&$(c,o),k&8&&u!==(u="bar bar-"+f[17]+" svelte-16gulxs")&&N(n,"class",u),k&1065&&ie(n,"width",re(f[10][f[14]][f[5]+(f[14].includes("_")?f[5]==="cvap"?"19":"20":"10")+f[17]]))},d(f){f&&p(e),f&&p(a),f&&p(n)}}}function El(t){let e,s,l=Te(t[10][t[14]].income)+(t[4]&&t[2]in t[6]?"; "+el(t[10][t[14]].pop20_total-t[6][t[2]]):""),a;return{c(){e=y("p"),s=R("Income: "),a=R(l),this.h()},l(n){e=E(n,"P",{class:!0});var i=D(e);s=U(i,"Income: "),a=U(i,l),i.forEach(p),this.h()},h(){N(e,"class","table-footer svelte-16gulxs")},m(n,i){j(n,e,i),h(e,s),h(e,a)},p(n,i){i&1109&&l!==(l=Te(n[10][n[14]].income)+(n[4]&&n[2]in n[6]?"; "+el(n[10][n[14]].pop20_total-n[6][n[2]]):""))&&$(a,l)},d(n){n&&p(e)}}}function Vl(t){let e=t[14].split(",")[0]===t[2],s,l=e&&Pl(t);return{c(){l&&l.c(),s=ne()},l(a){l&&l.l(a),s=ne()},m(a,n){l&&l.m(a,n),j(a,s,n)},p(a,n){n&5&&(e=a[14].split(",")[0]===a[2]),e?l?l.p(a,n):(l=Pl(a),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&p(s)}}}function Nt(t){let e,s=t[5]!==null&&bl(t);return{c(){s&&s.c(),e=ne()},l(l){s&&s.l(l),e=ne()},m(l,a){s&&s.m(l,a),j(l,e,a)},p(l,[a]){l[5]!==null?s?s.p(l,a):(s=bl(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:_e,o:_e,d(l){s&&s.d(l),l&&p(e)}}}function Lt(t,e,s){let l,{aggregates:a,handleLabelClick:n,plan:i,stats:o,groups:c,changingLines:r,variable:u,idealValues:f}=e,{drawings:k=[]}=e,{delDrawing:v=void 0}=e,{type:g="districts"}=e;const w=d=>n(d),T=d=>v(d);return t.$$set=d=>{"aggregates"in d&&s(0,a=d.aggregates),"handleLabelClick"in d&&s(1,n=d.handleLabelClick),"plan"in d&&s(2,i=d.plan),"stats"in d&&s(10,o=d.stats),"groups"in d&&s(3,c=d.groups),"changingLines"in d&&s(4,r=d.changingLines),"variable"in d&&s(5,u=d.variable),"idealValues"in d&&s(6,f=d.idealValues),"drawings"in d&&s(7,k=d.drawings),"delDrawing"in d&&s(8,v=d.delDrawing),"type"in d&&s(9,g=d.type)},t.$$.update=()=>{t.$$.dirty&32&&s(11,l={vap:"Voting-age population",pop:"Population"}[u])},[a,n,i,c,r,u,f,k,v,g,o,l,w,T]}class st extends De{constructor(e){super();Ie(this,e,Lt,Nt,Ne,{aggregates:0,handleLabelClick:1,plan:2,stats:10,groups:3,changingLines:4,variable:5,idealValues:6,drawings:7,delDrawing:8,type:9})}}const Ct=t=>({}),Tl=t=>({}),Ot=t=>({}),Dl=t=>({});function Il(t){let e,s,l,a;const n=t[5].body,i=Jl(n,t,t[4],Tl);return{c(){e=y("div"),i&&i.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var c=D(e);i&&i.l(c),c.forEach(p),this.h()},h(){N(e,"class","svelte-a3zm9u")},m(o,c){j(o,e,c),i&&i.m(e,null),a=!0},p(o,c){i&&i.p&&(!a||c&16)&&Xl(i,n,o,o[4],a?$l(n,o[4],c,Ct):Zl(o[4]),Tl)},i(o){a||(J(i,o),Le(()=>{l&&l.end(1),s=qe(e,je,{}),s.start()}),a=!0)},o(o){se(i,o),s&&s.invalidate(),l=We(e,je,{}),a=!1},d(o){o&&p(e),i&&i.d(o),o&&l&&l.end()}}}function At(t){let e,s,l,a=(t[3][t[2]]||oe(t[2]))+"",n,i,o=t[0].includes(t[2])?"\u2191":"\u2193",c,r,u,f=t[0].includes(t[2]),k,v,g;const w=t[5].title,T=Jl(w,t,t[4],Dl);let d=f&&Il(t);return{c(){e=y("div"),s=y("h3"),l=y("button"),n=R(a),i=A(),c=R(o),r=A(),T&&T.c(),u=A(),d&&d.c(),this.h()},l(b){e=E(b,"DIV",{class:!0});var O=D(e);s=E(O,"H3",{class:!0});var q=D(s);l=E(q,"BUTTON",{});var H=D(l);n=U(H,a),i=S(H),c=U(H,o),H.forEach(p),r=S(q),T&&T.l(q),q.forEach(p),u=S(O),d&&d.l(O),O.forEach(p),this.h()},h(){N(s,"class","svelte-a3zm9u"),N(e,"class","panel svelte-a3zm9u")},m(b,O){j(b,e,O),h(e,s),h(s,l),h(l,n),h(l,i),h(l,c),h(s,r),T&&T.m(s,null),h(e,u),d&&d.m(e,null),k=!0,v||(g=ce(l,"click",t[6]),v=!0)},p(b,[O]){(!k||O&4)&&a!==(a=(b[3][b[2]]||oe(b[2]))+"")&&$(n,a),(!k||O&5)&&o!==(o=b[0].includes(b[2])?"\u2191":"\u2193")&&$(c,o),T&&T.p&&(!k||O&16)&&Xl(T,w,b,b[4],k?$l(w,b[4],O,Ot):Zl(b[4]),Dl),O&5&&(f=b[0].includes(b[2])),f?d?(d.p(b,O),O&5&&J(d,1)):(d=Il(b),d.c(),J(d,1),d.m(e,null)):d&&(Me(),se(d,1,1,()=>{d=null}),Re())},i(b){k||(J(T,b),J(d),k=!0)},o(b){se(T,b),se(d),k=!1},d(b){b&&p(e),T&&T.d(b),d&&d.d(),v=!1,g()}}}function St(t,e,s){let{$$slots:l={},$$scope:a}=e,{panels:n,togglePanel:i,panelName:o}=e;const c={plan:"Districts",plan2:"Compare a district",views:"Views"},r=()=>i(o);return t.$$set=u=>{"panels"in u&&s(0,n=u.panels),"togglePanel"in u&&s(1,i=u.togglePanel),"panelName"in u&&s(2,o=u.panelName),"$$scope"in u&&s(4,a=u.$$scope)},[n,i,o,c,a,l,r]}class Nl extends De{constructor(e){super();Ie(this,e,St,At,Ne,{panels:0,togglePanel:1,panelName:2})}}function Ll(t){let e,s,l,a,n,i,o,c,r,u,f;return{c(){e=y("div"),s=y("a"),l=R("Click here"),a=R(` to see a video tutorial of this website.
    `),n=y("button"),i=R("Close message."),this.h()},l(k){e=E(k,"DIV",{class:!0});var v=D(e);s=E(v,"A",{href:!0,target:!0});var g=D(s);l=U(g,"Click here"),g.forEach(p),a=U(v,` to see a video tutorial of this website.
    `),n=E(v,"BUTTON",{class:!0});var w=D(n);i=U(w,"Close message."),w.forEach(p),v.forEach(p),this.h()},h(){N(s,"href","https://youtu.be/dU5a4PRSF14"),N(s,"target","_blank"),N(n,"class","svelte-a8zkqf"),N(e,"class","modal svelte-a8zkqf")},m(k,v){j(k,e,v),h(e,s),h(s,l),h(e,a),h(e,n),h(n,i),r=!0,u||(f=ce(n,"click",function(){_t(t[1])&&t[1].apply(this,arguments)}),u=!0)},p(k,v){t=k},i(k){r||(Le(()=>{c&&c.end(1),o=qe(e,Ze,{}),o.start()}),r=!0)},o(k){o&&o.invalidate(),c=We(e,Ze,{}),r=!1},d(k){k&&p(e),k&&c&&c.end(),u=!1,f()}}}function jt(t){let e,s,l=t[0]&&Ll(t);return{c(){l&&l.c(),e=ne()},l(a){l&&l.l(a),e=ne()},m(a,n){l&&l.m(a,n),j(a,e,n),s=!0},p(a,[n]){a[0]?l?(l.p(a,n),n&1&&J(l,1)):(l=Ll(a),l.c(),J(l,1),l.m(e.parentNode,e)):l&&(Me(),se(l,1,1,()=>{l=null}),Re())},i(a){s||(J(l),s=!0)},o(a){se(l),s=!1},d(a){l&&l.d(a),a&&p(e)}}}function Mt(t,e,s){let{showModal:l,closeModal:a}=e;return t.$$set=n=>{"showModal"in n&&s(0,l=n.showModal),"closeModal"in n&&s(1,a=n.closeModal)},[l,a]}class Rt extends De{constructor(e){super();Ie(this,e,Mt,jt,Ne,{showModal:0,closeModal:1})}}function Ut(t){let e,s,l,a,n;return{c(){e=y("link"),s=y("script"),a=A(),n=y("div"),this.h()},l(i){const o=ht('[data-svelte="svelte-1p75gtx"]',document.head);e=E(o,"LINK",{href:!0,rel:!0}),s=E(o,"SCRIPT",{src:!0});var c=D(s);c.forEach(p),o.forEach(p),a=S(i),n=E(i,"DIV",{id:!0,class:!0}),D(n).forEach(p),this.h()},h(){N(e,"href","https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css"),N(e,"rel","stylesheet"),pt(s.src,l="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js")||N(s,"src",l),N(n,"id","map"),N(n,"class","svelte-1b204ev")},m(i,o){h(document.head,e),h(document.head,s),j(i,a,o),j(i,n,o)},p:_e,i:_e,o:_e,d(i){p(e),p(s),i&&p(a),i&&p(n)}}}function Ft(t,e,s){let{census:l,plansTopo:a,color:n,showPluralities:i,metric:o,period:c,panels:r,plan:u,plan2:f,points:k,isolate:v,pointing:g,opacity:w,handleLabelClick:T,togglePointing:d}=e,b,O;const q=["assembly","assembly_letters","assembly_names","assembly_unity","assembly_latfor","senate","senate_letters","senate_names","senate_unity","senate_latfor"];function H(){if(o===null)return"rgba(0, 0, 0, 0)";const m=["match",["get","GEOID"]];return l.features.forEach(P=>{m.push(P.properties.GEOID,n(P))}),m.push("rgba(0, 0, 0, 0)"),m}const F=["case",["boolean",["feature-state","pointing"],!1],2.5,1.2];dt(()=>{mapboxgl.accessToken="pk.eyJ1IjoianNvbmthbyIsImEiOiJjanNvM2U4bXQwN2I3NDRydXQ3Z2kwbWQwIn0.JWAoBlcpDJwkzG-O5_r0ZA",s(15,b=new mapboxgl.Map({container:"map",style:"mapbox://styles/jsonkao/cl1f4e52k000t15p9pvoqwiwl/draft",center:[-73.967,40.72],zoom:11})),b.on("load",async()=>{b.addSource("census",{type:"geojson",data:l}),b.addLayer({id:"census",type:"fill",source:"census",paint:{"fill-color":H()}},"parks");const m={};q.forEach(P=>{const V=xl(a,a.objects[P]);m[P]={type:"FeatureCollection",features:V.features.map(_=>Je(Ke({},_),{id:_.properties[P]}))}}),q.forEach(P=>{b.addSource(P,{type:"geojson",data:m[P],promoteId:P}),b.addLayer({id:P+"_outline",type:"line",source:P,layout:{},paint:{"line-color":"#e2c169","line-width":F}},"road-label-small"),b.addLayer({id:P+"_fill",type:"fill",source:P,layout:{},paint:{"fill-color":"#000000","fill-opacity":0}}),b.addSource(P+"_labels",{type:"geojson",data:{type:"FeatureCollection",features:k.features.filter(V=>V.properties[P]).map(V=>({type:V.feature,id:V.properties[P],geometry:V.geometry,properties:V.properties}))}}),b.addLayer({id:P+"_labels",type:"symbol",source:P+"_labels",layout:{"text-justify":"auto","text-allow-overlap":!0,"text-variable-anchor":["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"text-radial-offset":1,"text-field":["format",["get",P],{"font-scale":1.2}]},paint:{"text-color":"#121212","text-halo-color":"#fff","text-halo-width":1.2}})}),s(16,O=!0),b.on("click",P=>{if(g){d();const V=b.queryRenderedFeatures(P.point).filter(_=>q.some(L=>L===_.source));s(17,M=V.map(_=>(b.setFeatureState({source:_.source,id:_.properties[_.source]},{pointing:!0}),T(`${_.source},${_.properties[_.source]}`,!0),{source:_.source,id:_.properties[_.source]})))}else b.queryRenderedFeatures(P.point).filter(_=>_.source.endsWith("_labels")).forEach(_=>{const L=_.source.replace("_labels",""),C={source:L,id:_.properties[L]};b.setFeatureState(C,{pointing:!b.getFeatureState(C).pointing}),T(`${L},${_.properties[L]}`)})})})});let M=[];return t.$$set=m=>{"census"in m&&s(0,l=m.census),"plansTopo"in m&&s(1,a=m.plansTopo),"color"in m&&s(2,n=m.color),"showPluralities"in m&&s(3,i=m.showPluralities),"metric"in m&&s(4,o=m.metric),"period"in m&&s(5,c=m.period),"panels"in m&&s(6,r=m.panels),"plan"in m&&s(7,u=m.plan),"plan2"in m&&s(8,f=m.plan2),"points"in m&&s(9,k=m.points),"isolate"in m&&s(10,v=m.isolate),"pointing"in m&&s(11,g=m.pointing),"opacity"in m&&s(12,w=m.opacity),"handleLabelClick"in m&&s(13,T=m.handleLabelClick),"togglePointing"in m&&s(14,d=m.togglePointing)},t.$$.update=()=>{if(t.$$.dirty&98752&&O&&q.forEach(m=>{const P=r.includes("plan2")&&m===f,V=r.includes("plan")&&m===u||P?"visible":"none";b.setLayoutProperty(`${m}_outline`,"visibility",V),b.setLayoutProperty(`${m}_fill`,"visibility",V),b.setLayoutProperty(`${m}_labels`,"visibility",V);const _="#e2c169";b.setPaintProperty(`${m}_outline`,"line-color",_),b.setPaintProperty(`${m}_labels`,"text-color","#121212")}),t.$$.dirty&239616&&O&&(b.getCanvas().style.cursor=g?"crosshair":"pointer",g&&M.length>0&&M.forEach(m=>{b.setFeatureState(m,{pointing:!1}),T(`${m.source},${m.id}`,!1,!0)})),t.$$.dirty&102848&&O)if(r.includes("plan2")){let m=V=>Math.max(0,Math.min(V,1));b.setPaintProperty(`${u}_outline`,"line-opacity",m(1-w)),b.setPaintProperty(`${f}_outline`,"line-opacity",m(w)),m=V=>Math.max(0,Math.min(V,1)),b.setPaintProperty(`${u}_labels`,"text-opacity",m(1-w)),b.setPaintProperty(`${f}_labels`,"text-opacity",m(w))}else b.setPaintProperty(`${u}_outline`,"line-opacity",1),b.setPaintProperty(`${f}_outline`,"line-opacity",1),b.setPaintProperty(`${u}_labels`,"text-opacity",1),b.setPaintProperty(`${f}_labels`,"text-opacity",1);if(t.$$.dirty&99776&&O){const m=[u];r.includes("plan2")&&m.push(f),m.forEach(P=>{b.setPaintProperty(`${P}_outline`,"line-width",v?["case",["boolean",["feature-state","pointing"],!1],2,0]:F)})}t.$$.dirty&98360&&O&&b.setPaintProperty("census","fill-color",H())},[l,a,n,i,o,c,r,u,f,k,v,g,w,T,d,b,O,M]}class Bt extends De{constructor(e){super();Ie(this,e,Ft,Ut,Ne,{census:0,plansTopo:1,color:2,showPluralities:3,metric:4,period:5,panels:6,plan:7,plan2:8,points:9,isolate:10,pointing:11,opacity:12,handleLabelClick:13,togglePointing:14})}}function Cl(t,e,s){const l=t.slice();return l[42]=e[s],l}function Ol(t,e,s){const l=t.slice();return l[45]=e[s],l}function Al(t,e,s){const l=t.slice();return l[42]=e[s],l}function Sl(t,e,s){const l=t.slice();return l[45]=e[s],l}function jl(t,e,s){const l=t.slice();return l[52]=e[s],l}function Ml(t,e,s){const l=t.slice();return l[55]=e[s],l}function Rl(t,e,s){const l=t.slice();return l[55]=e[s],l}function Ul(t){let e,s=(Ue[t[55]]||t[55])+"",l,a;return{c(){e=y("option"),l=R(s),this.h()},l(n){e=E(n,"OPTION",{});var i=D(e);l=U(i,s),i.forEach(p),this.h()},h(){e.__value=a=t[55],e.value=e.__value},m(n,i){j(n,e,i),h(e,l)},p(n,i){i[0]&4&&s!==(s=(Ue[n[55]]||n[55])+"")&&$(l,s),i[0]&4&&a!==(a=n[55])&&(e.__value=a,e.value=e.__value)},d(n){n&&p(e)}}}function Fl(t){let e,s=(Ue[t[55]]||t[55])+"",l,a;return{c(){e=y("option"),l=R(s),this.h()},l(n){e=E(n,"OPTION",{});var i=D(e);l=U(i,s),i.forEach(p),this.h()},h(){e.__value=a=t[55],e.value=e.__value},m(n,i){j(n,e,i),h(e,l)},p(n,i){i[0]&8&&s!==(s=(Ue[n[55]]||n[55])+"")&&$(l,s),i[0]&8&&a!==(a=n[55])&&(e.__value=a,e.value=e.__value)},d(n){n&&p(e)}}}function Bl(t){let e,s=t[2].includes(t[11]),l,a=t[2].includes(t[11]),n,i,o,c=s&&Gl(t),r=a&&ql(t);return{c(){e=y("div"),c&&c.c(),l=A(),r&&r.c()},l(u){e=E(u,"DIV",{});var f=D(e);c&&c.l(f),l=S(f),r&&r.l(f),f.forEach(p)},m(u,f){j(u,e,f),c&&c.m(e,null),h(e,l),r&&r.m(e,null),o=!0},p(u,f){f[0]&2052&&(s=u[2].includes(u[11])),s?c?c.p(u,f):(c=Gl(u),c.c(),c.m(e,l)):c&&(c.d(1),c=null),f[0]&2052&&(a=u[2].includes(u[11])),a?r?r.p(u,f):(r=ql(u),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(u){o||(Le(()=>{i&&i.end(1),n=qe(e,je,{}),n.start()}),o=!0)},o(u){n&&n.invalidate(),i=We(e,je,{}),o=!1},d(u){u&&p(e),c&&c.d(),r&&r.d(),u&&i&&i.end()}}}function Gl(t){let e,s=["past","present"],l=[];for(let a=0;a<2;a+=1)l[a]=Hl(jl(t,s,a));return{c(){for(let a=0;a<2;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<2;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<2;i+=1)l[i].m(a,n);j(a,e,n)},p(a,n){if(n[0]&1024){s=["past","present"];let i;for(i=0;i<2;i+=1){const o=jl(a,s,i);l[i]?l[i].p(o,n):(l[i]=Hl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<2;i+=1)l[i].d(1)}},d(a){ae(l,a),a&&p(e)}}}function Hl(t){let e,s,l,a=oe(t[52])+"",n,i,o,c;return{c(){e=y("label"),s=y("input"),l=A(),n=R(a),i=A(),this.h()},l(r){e=E(r,"LABEL",{});var u=D(e);s=E(u,"INPUT",{type:!0,name:!0}),l=S(u),n=U(u,a),i=S(u),u.forEach(p),this.h()},h(){N(s,"type","radio"),N(s,"name","period"),s.__value=t[52],s.value=s.__value,t[35][0].push(s)},m(r,u){j(r,e,u),h(e,s),s.checked=s.__value===t[10],h(e,l),h(e,n),h(e,i),o||(c=ce(s,"change",t[34]),o=!0)},p(r,u){u[0]&1024&&(s.checked=s.__value===r[10])},d(r){r&&p(e),t[35][0].splice(t[35][0].indexOf(s),1),o=!1,c()}}}function ql(t){let e,s,l=t[7]?"pct. asian":"all races and ethniticies",a,n,i;return{c(){e=y("button"),s=R("Show "),a=R(l),this.h()},l(o){e=E(o,"BUTTON",{class:!0});var c=D(e);s=U(c,"Show "),a=U(c,l),c.forEach(p),this.h()},h(){N(e,"class","plurality-toggle svelte-6e6jw4")},m(o,c){j(o,e,c),h(e,s),h(e,a),n||(i=ce(e,"click",t[36]),n=!0)},p(o,c){c[0]&128&&l!==(l=o[7]?"pct. asian":"all races and ethniticies")&&$(a,l)},d(o){o&&p(e),n=!1,i()}}}function Wl(t){let e,s;return e=new Tt({props:{groups:ye,levels:kt,colors:He,dynamicVars:t[2],variable:t[11],metric:t[12],showPluralities:t[7],pluralityVars:t[4],periods:Se,breaks:t[21]}}),{c(){me(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,a){be(e,l,a),s=!0},p(l,a){const n={};a[0]&4&&(n.dynamicVars=l[2]),a[0]&2048&&(n.variable=l[11]),a[0]&4096&&(n.metric=l[12]),a[0]&128&&(n.showPluralities=l[7]),a[0]&16&&(n.pluralityVars=l[4]),a[0]&2097152&&(n.breaks=l[21]),e.$set(n)},i(l){s||(J(e.$$.fragment,l),s=!0)},o(l){se(e.$$.fragment,l),s=!1},d(l){ke(e,l)}}}function zl(t){let e,s=lt(t[42]+t[45])+"",l,a,n;return{c(){e=y("option"),l=R(s),a=A(),this.h()},l(i){e=E(i,"OPTION",{});var o=D(e);l=U(o,s),a=S(o),o.forEach(p),this.h()},h(){e.__value=n=t[42]+t[45],e.value=e.__value},m(i,o){j(i,e,o),h(e,l),h(e,a)},p:_e,d(i){i&&p(e)}}}function Yl(t){let e,s,l=["","_letters","_names","_unity","_latfor"],a=[];for(let n=0;n<5;n+=1)a[n]=zl(Sl(t,l,n));return{c(){e=y("optgroup");for(let n=0;n<5;n+=1)a[n].c();this.h()},l(n){e=E(n,"OPTGROUP",{label:!0});var i=D(e);for(let o=0;o<5;o+=1)a[o].l(i);i.forEach(p),this.h()},h(){N(e,"label",s=oe(t[42]))},m(n,i){j(n,e,i);for(let o=0;o<5;o+=1)a[o].m(e,null)},p(n,i){if(i&0){l=["","_letters","_names","_unity","_latfor"];let o;for(o=0;o<5;o+=1){const c=Sl(n,l,o);a[o]?a[o].p(c,i):(a[o]=zl(c),a[o].c(),a[o].m(e,null))}for(;o<5;o+=1)a[o].d(1)}},d(n){n&&p(e),ae(a,n)}}}function Gt(t){let e,s,l,a,n,i,o,c,r=["assembly","senate"],u=[];for(let f=0;f<2;f+=1)u[f]=Yl(Al(t,r,f));return n=new st({props:{aggregates:t[6],handleLabelClick:t[26],plan:t[8],stats:t[16],groups:ye,changingLines:t[22],idealValues:tt,variable:t[11]}}),{c(){e=y("div"),s=y("div"),l=y("select");for(let f=0;f<2;f+=1)u[f].c();a=A(),me(n.$$.fragment),this.h()},l(f){e=E(f,"DIV",{slot:!0});var k=D(e);s=E(k,"DIV",{class:!0});var v=D(s);l=E(v,"SELECT",{class:!0});var g=D(l);for(let w=0;w<2;w+=1)u[w].l(g);g.forEach(p),v.forEach(p),a=S(k),ve(n.$$.fragment,k),k.forEach(p),this.h()},h(){N(l,"class","svelte-6e6jw4"),t[8]===void 0&&Le(()=>t[37].call(l)),N(s,"class","plan-selector svelte-6e6jw4"),N(e,"slot","body")},m(f,k){j(f,e,k),h(e,s),h(s,l);for(let v=0;v<2;v+=1)u[v].m(l,null);Ve(l,t[8]),h(e,a),be(n,e,null),i=!0,o||(c=ce(l,"change",t[37]),o=!0)},p(f,k){if(k&0){r=["assembly","senate"];let g;for(g=0;g<2;g+=1){const w=Al(f,r,g);u[g]?u[g].p(w,k):(u[g]=Yl(w),u[g].c(),u[g].m(l,null))}for(;g<2;g+=1)u[g].d(1)}k[0]&256&&Ve(l,f[8]);const v={};k[0]&64&&(v.aggregates=f[6]),k[0]&256&&(v.plan=f[8]),k[0]&65536&&(v.stats=f[16]),k[0]&2048&&(v.variable=f[11]),n.$set(v)},i(f){i||(J(n.$$.fragment,f),i=!0)},o(f){se(n.$$.fragment,f),i=!1},d(f){f&&p(e),ae(u,f),ke(n),o=!1,c()}}}function Ql(t){let e,s=lt(t[42]+t[45])+"",l,a,n;return{c(){e=y("option"),l=R(s),a=A(),this.h()},l(i){e=E(i,"OPTION",{});var o=D(e);l=U(o,s),a=S(o),o.forEach(p),this.h()},h(){e.__value=n=t[42]+t[45],e.value=e.__value},m(i,o){j(i,e,o),h(e,l),h(e,a)},p:_e,d(i){i&&p(e)}}}function Kl(t){let e,s,l=["","_letters","_names","_unity","_latfor"],a=[];for(let n=0;n<5;n+=1)a[n]=Ql(Ol(t,l,n));return{c(){e=y("optgroup");for(let n=0;n<5;n+=1)a[n].c();this.h()},l(n){e=E(n,"OPTGROUP",{label:!0});var i=D(e);for(let o=0;o<5;o+=1)a[o].l(i);i.forEach(p),this.h()},h(){N(e,"label",s=oe(t[42]))},m(n,i){j(n,e,i);for(let o=0;o<5;o+=1)a[o].m(e,null)},p(n,i){if(i&0){l=["","_letters","_names","_unity","_latfor"];let o;for(o=0;o<5;o+=1){const c=Ol(n,l,o);a[o]?a[o].p(c,i):(a[o]=Ql(c),a[o].c(),a[o].m(e,null))}for(;o<5;o+=1)a[o].d(1)}},d(n){n&&p(e),ae(a,n)}}}function Ht(t){let e,s,l,a,n,i,o,c,r,u,f,k=["assembly","senate"],v=[];for(let g=0;g<2;g+=1)v[g]=Kl(Cl(t,k,g));return c=new st({props:{aggregates:t[6],handleLabelClick:t[26],plan:t[9],stats:t[16],groups:ye,changingLines:t[22],idealValues:tt,variable:t[11]}}),{c(){e=y("div"),s=y("div"),l=y("input"),a=A(),n=y("div"),i=y("select");for(let g=0;g<2;g+=1)v[g].c();o=A(),me(c.$$.fragment),this.h()},l(g){e=E(g,"DIV",{slot:!0});var w=D(e);s=E(w,"DIV",{class:!0});var T=D(s);l=E(T,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),T.forEach(p),a=S(w),n=E(w,"DIV",{class:!0});var d=D(n);i=E(d,"SELECT",{class:!0});var b=D(i);for(let O=0;O<2;O+=1)v[O].l(b);b.forEach(p),d.forEach(p),o=S(w),ve(c.$$.fragment,w),w.forEach(p),this.h()},h(){N(l,"type","range"),N(l,"min","0"),N(l,"max","1.5"),N(l,"step","0.01"),N(l,"class","svelte-6e6jw4"),N(s,"class","slider svelte-6e6jw4"),N(i,"class","svelte-6e6jw4"),t[9]===void 0&&Le(()=>t[39].call(i)),N(n,"class","plan-selector svelte-6e6jw4"),N(e,"slot","body")},m(g,w){j(g,e,w),h(e,s),h(s,l),$e(l,t[19]),h(e,a),h(e,n),h(n,i);for(let T=0;T<2;T+=1)v[T].m(i,null);Ve(i,t[9]),h(e,o),be(c,e,null),r=!0,u||(f=[ce(l,"change",t[38]),ce(l,"input",t[38]),ce(i,"change",t[39])],u=!0)},p(g,w){if(w[0]&524288&&$e(l,g[19]),w&0){k=["assembly","senate"];let d;for(d=0;d<2;d+=1){const b=Cl(g,k,d);v[d]?v[d].p(b,w):(v[d]=Kl(b),v[d].c(),v[d].m(i,null))}for(;d<2;d+=1)v[d].d(1)}w[0]&512&&Ve(i,g[9]);const T={};w[0]&64&&(T.aggregates=g[6]),w[0]&512&&(T.plan=g[9]),w[0]&65536&&(T.stats=g[16]),w[0]&2048&&(T.variable=g[11]),c.$set(T)},i(g){r||(J(c.$$.fragment,g),r=!0)},o(g){se(c.$$.fragment,g),r=!1},d(g){g&&p(e),ae(v,g),ke(c),u=!1,et(f)}}}function qt(t){let e,s,l,a,n,i,o,c,r,u,f,k,v,g,w,T,d,b,O,q;e=new Rt({props:{showModal:t[13],closeModal:t[23]}});let H=t[2],F=[];for(let _=0;_<H.length;_+=1)F[_]=Ul(Rl(t,H,_));let M=t[3],m=[];for(let _=0;_<M.length;_+=1)m[_]=Fl(Ml(t,M,_));let P=t[14]&&Bl(t),V=t[12]!==null&&Wl(t);return v=new Nl({props:{panelName:"plan",panels:t[18],togglePanel:t[25],$$slots:{body:[Gt]},$$scope:{ctx:t}}}),w=new Nl({props:{panelName:"plan2",panels:t[18],togglePanel:t[25],$$slots:{body:[Ht]},$$scope:{ctx:t}}}),d=new Bt({props:{census:t[0],plansTopo:t[1],pointing:t[15],color:t[24],showPluralities:t[7],metric:t[12],opacity:t[19],period:t[10],panels:t[18],plan:t[8],plan2:t[9],points:t[5],togglePointing:t[27],handleLabelClick:t[26],isolate:t[17]}}),{c(){me(e.$$.fragment),s=A(),l=y("div"),a=y("div"),n=y("select"),i=y("option"),o=R("Select data"),c=y("optgroup");for(let _=0;_<F.length;_+=1)F[_].c();r=y("optgroup");for(let _=0;_<m.length;_+=1)m[_].c();u=A(),P&&P.c(),f=A(),V&&V.c(),k=A(),me(v.$$.fragment),g=A(),me(w.$$.fragment),T=A(),me(d.$$.fragment),this.h()},l(_){ve(e.$$.fragment,_),s=S(_),l=E(_,"DIV",{class:!0,style:!0});var L=D(l);a=E(L,"DIV",{class:!0});var C=D(a);n=E(C,"SELECT",{style:!0,class:!0});var Y=D(n);i=E(Y,"OPTION",{});var X=D(i);o=U(X,"Select data"),X.forEach(p),c=E(Y,"OPTGROUP",{label:!0});var Q=D(c);for(let Z=0;Z<F.length;Z+=1)F[Z].l(Q);Q.forEach(p),r=E(Y,"OPTGROUP",{label:!0});var B=D(r);for(let Z=0;Z<m.length;Z+=1)m[Z].l(B);B.forEach(p),Y.forEach(p),u=S(C),P&&P.l(C),f=S(C),V&&V.l(C),k=S(C),ve(v.$$.fragment,C),g=S(C),ve(w.$$.fragment,C),C.forEach(p),T=S(L),ve(d.$$.fragment,L),L.forEach(p),this.h()},h(){i.__value=null,i.value=i.__value,N(c,"label","Redistricting data"),N(r,"label","American Community Survey data"),ie(n,"width",t[3].includes(t[11])?"auto":"calc(var(--control-width) + 45px * 0)"),N(n,"class","svelte-6e6jw4"),t[11]===void 0&&Le(()=>t[33].call(n)),N(a,"class","controls svelte-6e6jw4"),N(l,"class","container svelte-6e6jw4"),ie(l,"--container-font",t[20]+"px"),ie(l,"--control-width",270+(t[20]-16)*10+"px")},m(_,L){be(e,_,L),j(_,s,L),j(_,l,L),h(l,a),h(a,n),h(n,i),h(i,o),h(n,c);for(let C=0;C<F.length;C+=1)F[C].m(c,null);h(n,r);for(let C=0;C<m.length;C+=1)m[C].m(r,null);Ve(n,t[11]),h(a,u),P&&P.m(a,null),h(a,f),V&&V.m(a,null),h(a,k),be(v,a,null),h(a,g),be(w,a,null),h(l,T),be(d,l,null),b=!0,O||(q=[ce(window,"keydown",t[28]),ce(n,"change",t[33])],O=!0)},p(_,L){const C={};if(L[0]&8192&&(C.showModal=_[13]),e.$set(C),L[0]&4){H=_[2];let B;for(B=0;B<H.length;B+=1){const Z=Rl(_,H,B);F[B]?F[B].p(Z,L):(F[B]=Ul(Z),F[B].c(),F[B].m(c,null))}for(;B<F.length;B+=1)F[B].d(1);F.length=H.length}if(L[0]&8){M=_[3];let B;for(B=0;B<M.length;B+=1){const Z=Ml(_,M,B);m[B]?m[B].p(Z,L):(m[B]=Fl(Z),m[B].c(),m[B].m(r,null))}for(;B<m.length;B+=1)m[B].d(1);m.length=M.length}(!b||L[0]&2056)&&ie(n,"width",_[3].includes(_[11])?"auto":"calc(var(--control-width) + 45px * 0)"),L[0]&2060&&Ve(n,_[11]),_[14]?P?(P.p(_,L),L[0]&16384&&J(P,1)):(P=Bl(_),P.c(),J(P,1),P.m(a,f)):P&&(Me(),se(P,1,1,()=>{P=null}),Re()),_[12]!==null?V?(V.p(_,L),L[0]&4096&&J(V,1)):(V=Wl(_),V.c(),J(V,1),V.m(a,k)):V&&(Me(),se(V,1,1,()=>{V=null}),Re());const Y={};L[0]&262144&&(Y.panels=_[18]),L[0]&67904|L[1]&536870912&&(Y.$$scope={dirty:L,ctx:_}),v.$set(Y);const X={};L[0]&262144&&(X.panels=_[18]),L[0]&592448|L[1]&536870912&&(X.$$scope={dirty:L,ctx:_}),w.$set(X);const Q={};L[0]&1&&(Q.census=_[0]),L[0]&2&&(Q.plansTopo=_[1]),L[0]&32768&&(Q.pointing=_[15]),L[0]&128&&(Q.showPluralities=_[7]),L[0]&4096&&(Q.metric=_[12]),L[0]&524288&&(Q.opacity=_[19]),L[0]&1024&&(Q.period=_[10]),L[0]&262144&&(Q.panels=_[18]),L[0]&256&&(Q.plan=_[8]),L[0]&512&&(Q.plan2=_[9]),L[0]&32&&(Q.points=_[5]),L[0]&131072&&(Q.isolate=_[17]),d.$set(Q),(!b||L[0]&1048576)&&ie(l,"--container-font",_[20]+"px"),(!b||L[0]&1048576)&&ie(l,"--control-width",270+(_[20]-16)*10+"px")},i(_){b||(J(e.$$.fragment,_),J(P),J(V),J(v.$$.fragment,_),J(w.$$.fragment,_),J(d.$$.fragment,_),b=!0)},o(_){se(e.$$.fragment,_),se(P),se(V),se(v.$$.fragment,_),se(w.$$.fragment,_),se(d.$$.fragment,_),b=!1},d(_){ke(e,_),_&&p(s),_&&p(l),ae(F,_),ae(m,_),P&&P.d(),V&&V.d(),ke(v),ke(w),ke(d),O=!1,et(q)}}}async function Kt({fetch:t}){const e=bt(await(await t(`${Ae}/data.csv`)).text()),s=await(await t(`${Ae}/output_census_wgs84.topojson`)).json(),l=vt(s.objects.census),a=xl(s,l),n=a.features,i=["pop","vap","cvap"],o=[...n.reduce((c,r)=>{const u=Object.keys(r.properties).filter(f=>[...i,"GEOID","senate","assembly"].every(k=>!f.includes(k))&&f===f.toLowerCase()).map(f=>f.split("_")[0]);return new Set([...c,...u])},[])];return{props:{censusData:e,data:n,dynamicVars:i,staticVars:o,pluralityVars:["asiaentry"],census:a,plansTopo:await(await t(`${Ae}/plans.topojson`)).json(),points:await(await t(`${Ae}/points.geojson`)).json()}}}function Wt(t,e,s){let l,a,n,{censusData:i,census:o,plansTopo:c,data:r,dynamicVars:u,staticVars:f,pluralityVars:k,points:v}=e,g,w=!0,T,d,b=[],O={},q=!1,H=!1,F=["plan"],M="assembly_latfor",m="assembly",P=.75,V=18;const _=()=>s(13,g=!1);let L="present",C="vap";const Y={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6],vap:[0,.1,.2,.4,.6]};function X({properties:I}){if(l===null)return console.trace(),null;if(!I.ALAND)return"rgba(0, 0, 0, 0)";const te=I[`${l}_total`];if(k.includes(l)){const G=le=>I[`${l}_${le}`];if(G(Se[0])===null)return"rgba(0, 0, 0, 0)";const z=[...Se].sort((le,pe)=>G(pe)-G(le));return Ee[Se.indexOf(z[0])]}else if(f.includes(l)){if(!xe(a(I))||te<=10)return"rgba(0, 0, 0, 0)";for(let G=1;G<n.length;G++)if(a(I)<n[G])return Ee[G];return Ee[n.length-1]}else{if(te<=10)return"rgba(0, 0, 0, 0)";const G=z=>I[`${l}_${z}`]/I[`${l}_total`];if(H){const z=ye.filter(ue=>G(ue)>.5)[0];if(z!==void 0)return He[z][te<130?0:te<200?1:2];const le=[...ye].sort((ue,de)=>G(de)-G(ue)),pe=G(le[0])-G(le[1]);return He[le[0]][pe<.093?0:1]}else{const z=Y[C];for(let le=1;le<z.length;le++)if(G("asian")<z[le])return Fe[le-1];return Fe[z.length-1]}}}function Q(I){const te=I,G=(fe,ge)=>te.reduce((at,ze)=>at+(ze[fe]||0)*(ge&&ze[ge]||1),0),z=(fe,ge)=>G(`${fe}_${ge}`)/G(`${fe}_total`);let le=G("pop10_asian"),pe=G("pop20_asian"),ue=G("cvap10_asian"),de=G("cvap19_asian");const Pe={pop20_total:G("pop20_total"),pct_increase:(pe-le)/le,pct_increase_cvap:(de-ue)/ue};return["pop20","vap20","cvap19","pop10","vap10","cvap10"].forEach(fe=>ye.forEach(ge=>Pe[fe+ge]=z(fe,ge))),Pe}const B=I=>s(18,F=F.includes(I)?F.filter(te=>te!==I):[...F,I]);function Z(I,te=!1,G=!1){b.includes(I)?te||s(6,b=b.filter(z=>z!==I)):G||s(6,b=[...b,I])}const we=()=>s(15,d=!d);function Ce({key:I}){I===" "&&we(),I==="i"&&s(17,q=!q),I==="="&&s(20,V+=2),I==="-"&&s(20,V-=2),I==="v"&&s(14,w=!w)}const Oe=[[]];function Be(){C=Ge(this),s(11,C),s(3,f),s(2,u)}function he(){L=this.__value,s(10,L)}const ee=()=>s(7,H=!H);function x(){M=Ge(this),s(8,M)}function K(){P=mt(this.value),s(19,P)}function W(){m=Ge(this),s(9,m)}return t.$$set=I=>{"censusData"in I&&s(29,i=I.censusData),"census"in I&&s(0,o=I.census),"plansTopo"in I&&s(1,c=I.plansTopo),"data"in I&&s(30,r=I.data),"dynamicVars"in I&&s(2,u=I.dynamicVars),"staticVars"in I&&s(3,f=I.staticVars),"pluralityVars"in I&&s(4,k=I.pluralityVars),"points"in I&&s(5,v=I.points)},t.$$.update=()=>{if(t.$$.dirty[0]&3080&&s(12,l=f.includes(C)?C:C&&C+(L==="past"?10:C==="cvap"?19:20)),t.$$.dirty[0]&4096&&s(32,a={income:I=>I[l],hhlang:I=>I[`${l}_asian`]/I[`${l}_total`],graduates:I=>(I[`${l}_hs_grad`]+I[`${l}_ba_above`])/I[`${l}_total`],families:I=>I[`${l}_benefits`]/I[`${l}_total`],workers:I=>I[`${l}_publictransport`]/I[`${l}_total`]}[l]),t.$$.dirty[0]&1073748108|t.$$.dirty[1]&3&&s(21,n=u.includes(C)&&!H?Y[C]:Y[l]||!f.includes(l)||l==="asiaentry"||s(31,Y[l]=gt(r.map(I=>a(I.properties)).filter(xe),6),Y)),t.$$.dirty[0]&536871744)for(let I=0;I<b.length;I++){const[te,G]=b[I].split(",");(te===M||te===m)&&s(16,O[b[I]]=Q(i.filter(z=>G===""+z[te])),O)}},[o,c,u,f,k,v,b,H,M,m,L,C,l,g,w,d,O,q,F,P,V,n,T,_,X,B,Z,we,Ce,i,r,Y,a,Be,he,Oe,ee,x,K,W]}class Jt extends De{constructor(e){super();Ie(this,e,Wt,qt,Ne,{censusData:29,census:0,plansTopo:1,data:30,dynamicVars:2,staticVars:3,pluralityVars:4,points:5},null,[-1,-1])}}export{Jt as default,Kt as load};

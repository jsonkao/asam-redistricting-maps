var nt=Object.defineProperty,it=Object.defineProperties;var ot=Object.getOwnPropertyDescriptors;var Qe=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Ke=(s,e,t)=>e in s?nt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Xe=(s,e)=>{for(var t in e||(e={}))rt.call(e,t)&&Ke(s,t,e[t]);if(Qe)for(var t of Qe(e))ct.call(e,t)&&Ke(s,t,e[t]);return s},Ze=(s,e)=>it(s,ot(e));import{S as Te,i as De,s as Le,l as ne,g as S,K as _e,d as p,e as w,c as V,a as T,f as ie,L as ft,k as j,M as ut,m as M,b as L,J as h,N as Ye,O as ae,t as R,h as U,j as $,P as re,F as Xl,G as Zl,H as Yl,I as $l,q as X,Q as Ne,R as He,T as Se,o as se,U as We,n as Ae,p as Re,V as _t,W as $e,X as ht,Y as pt,v as dt,Z as xl,w as me,x as ve,y as be,B as ke,_ as Ve,$ as et,a0 as gt,a1 as xe,a2 as Be,a3 as mt}from"../chunks/vendor-80ca69e6.js";import{b as je}from"../chunks/paths-4b3c6e7e.js";import{s as Ue,a as Ee,p as oe,m as Ie,c as fe,b as el,d as ll,h as vt,r as bt,u as kt,v as Fe,i as tl,g as we,l as qe,e as ze,f as Me,j as lt,k as tt}from"../chunks/constants-e490e4d1.js";function sl(s,e,t){const l=s.slice();return l[21]=e[t],l[20]=t,l}function al(s,e,t){const l=s.slice();return l[21]=e[t],l[20]=t,l}function nl(s,e,t){const l=s.slice();return l[16]=e[t],l}function il(s,e,t){const l=s.slice();return l[16]=e[t],l[20]=t,l}function ol(s,e,t){const l=s.slice();return l[10]=e[t],l}function rl(s,e,t){const l=s.slice();return l[13]=e[t],l}function yt(s){let e,t,l=s[9],a=[];for(let o=0;o<l.length;o+=1)a[o]=cl(al(s,l,o));let n=s[9],i=[];for(let o=0;o<n.length;o+=1)i[o]=fl(sl(s,n,o));return{c(){e=w("div");for(let o=0;o<a.length;o+=1)a[o].c();t=j();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0,style:!0});var c=T(e);for(let r=0;r<a.length;r+=1)a[r].l(c);t=M(c);for(let r=0;r<i.length;r+=1)i[r].l(c);c.forEach(p),this.h()},h(){L(e,"class","color-legend svelte-660ibp"),ie(e,"grid-template-columns","repeat("+(s[3].includes(s[4])?5:6)+", 2.9em)"),Ye(e,"pctasian",s[3].includes(s[4]))},m(o,c){S(o,e,c);for(let r=0;r<a.length;r+=1)a[r].m(e,null);h(e,t);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,c){if(c&536){l=o[9];let r;for(r=0;r<l.length;r+=1){const u=al(o,l,r);a[r]?a[r].p(u,c):(a[r]=cl(u),a[r].c(),a[r].m(e,t))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}if(c&536){n=o[9];let r;for(r=0;r<n.length;r+=1){const u=sl(o,n,r);i[r]?i[r].p(u,c):(i[r]=fl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}c&24&&ie(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.9em)"),c&24&&Ye(e,"pctasian",o[3].includes(o[4]))},d(o){o&&p(e),ae(a,o),ae(i,o)}}}function Pt(s){let e,t,l=s[8],a=[];for(let o=0;o<l.length;o+=1)a[o]=ul(il(s,l,o));let n=s[8],i=[];for(let o=0;o<n.length;o+=1)i[o]=_l(nl(s,n,o));return{c(){e=w("div");for(let o=0;o<a.length;o+=1)a[o].c();t=j();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var c=T(e);for(let r=0;r<a.length;r+=1)a[r].l(c);t=M(c);for(let r=0;r<i.length;r+=1)i[r].l(c);c.forEach(p),this.h()},h(){L(e,"class","color-legend plurality-legend svelte-660ibp")},m(o,c){S(o,e,c);for(let r=0;r<a.length;r+=1)a[r].m(e,null);h(e,t);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(o,c){if(c&256){l=o[8];let r;for(r=0;r<l.length;r+=1){const u=il(o,l,r);a[r]?a[r].p(u,c):(a[r]=ul(u),a[r].c(),a[r].m(e,t))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}if(c&256){n=o[8];let r;for(r=0;r<n.length;r+=1){const u=nl(o,n,r);i[r]?i[r].p(u,c):(i[r]=_l(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(o){o&&p(e),ae(a,o),ae(i,o)}}}function Et(s){let e,t,l,a,n,i,o,c,r,u,f,k,v=s[0],g=[];for(let y=0;y<v.length;y+=1)g[y]=pl(ol(s,v,y));return{c(){e=w("div");for(let y=0;y<g.length;y+=1)g[y].c();t=j(),l=w("p"),a=w("span"),n=R("Weak plurality"),i=j(),o=w("p"),c=j(),r=w("p"),u=R("Majority"),f=j(),k=w("p"),this.h()},l(y){e=V(y,"DIV",{class:!0});var I=T(e);for(let z=0;z<g.length;z+=1)g[z].l(I);t=M(I),l=V(I,"P",{class:!0});var d=T(l);a=V(d,"SPAN",{});var b=T(a);n=U(b,"Weak plurality"),b.forEach(p),d.forEach(p),i=M(I),o=V(I,"P",{class:!0}),T(o).forEach(p),c=M(I),r=V(I,"P",{class:!0});var C=T(r);u=U(C,"Majority"),C.forEach(p),f=M(I),k=V(I,"P",{class:!0}),T(k).forEach(p),I.forEach(p),this.h()},h(){L(l,"class","col-head svelte-660ibp"),L(o,"class","col-head svelte-660ibp"),L(r,"class","col-head svelte-660ibp"),L(k,"class","col-head svelte-660ibp"),L(e,"class","legend svelte-660ibp")},m(y,I){S(y,e,I);for(let d=0;d<g.length;d+=1)g[d].m(e,null);h(e,t),h(e,l),h(l,a),h(a,n),h(e,i),h(e,o),h(e,c),h(e,r),h(r,u),h(e,f),h(e,k)},p(y,I){if(I&7){v=y[0];let d;for(d=0;d<v.length;d+=1){const b=ol(y,v,d);g[d]?g[d].p(b,I):(g[d]=pl(b),g[d].c(),g[d].m(e,t))}for(;d<g.length;d+=1)g[d].d(1);g.length=v.length}},d(y){y&&p(e),ae(g,y)}}}function cl(s){let e;return{c(){e=w("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),T(e).forEach(p),this.h()},h(){ie(e,"background-color",s[3].includes(s[4])?Ue[s[20]]:Ee[s[20]])},m(t,l){S(t,e,l)},p(t,l){l&24&&ie(e,"background-color",t[3].includes(t[4])?Ue[t[20]]:Ee[t[20]])},d(t){t&&p(e)}}}function fl(s){let e,t,l=(s[9][s[9].length-1]<1?oe(s[21],0):s[9][s[9].length-1]>1e3?Ie(s[21]):s[21])+(s[3].includes(s[4])&&s[20]===s[9].length-1?"+ Asian":""),a;return{c(){e=w("p"),t=new ft,a=j(),this.h()},l(n){e=V(n,"P",{class:!0});var i=T(e);t=ut(i),a=M(i),i.forEach(p),this.h()},h(){t.a=a,L(e,"class","svelte-660ibp")},m(n,i){S(n,e,i),t.m(l,e),h(e,a)},p(n,i){i&536&&l!==(l=(n[9][n[9].length-1]<1?oe(n[21],0):n[9][n[9].length-1]>1e3?Ie(n[21]):n[21])+(n[3].includes(n[4])&&n[20]===n[9].length-1?"+ Asian":""))&&t.p(l)},d(n){n&&p(e)}}}function ul(s){let e;return{c(){e=w("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),T(e).forEach(p),this.h()},h(){ie(e,"background-color",Ee[s[20]])},m(t,l){S(t,e,l)},p:_e,d(t){t&&p(e)}}}function _l(s){let e,t=s[16].replace("_","-")+"",l;return{c(){e=w("p"),l=R(t),this.h()},l(a){e=V(a,"P",{class:!0});var n=T(e);l=U(n,t),n.forEach(p),this.h()},h(){L(e,"class","svelte-660ibp")},m(a,n){S(a,e,n),h(e,l)},p(a,n){n&256&&t!==(t=a[16].replace("_","-")+"")&&$(l,t)},d(a){a&&p(e)}}}function hl(s){let e;return{c(){e=w("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),T(e).forEach(p),this.h()},h(){ie(e,"background-color",s[2][s[10]]+s[13])},m(t,l){S(t,e,l)},p(t,l){l&7&&ie(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&p(e)}}}function pl(s){let e,t,l=fe(s[10])+"",a,n=s[1],i=[];for(let o=0;o<n.length;o+=1)i[o]=hl(rl(s,n,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=j(),t=w("p"),a=R(l),this.h()},l(o){for(let r=0;r<i.length;r+=1)i[r].l(o);e=M(o),t=V(o,"P",{class:!0});var c=T(t);a=U(c,l),c.forEach(p),this.h()},h(){L(t,"class","row-label svelte-660ibp")},m(o,c){for(let r=0;r<i.length;r+=1)i[r].m(o,c);S(o,e,c),S(o,t,c),h(t,a)},p(o,c){if(c&7){n=o[1];let r;for(r=0;r<n.length;r+=1){const u=rl(o,n,r);i[r]?i[r].p(u,c):(i[r]=hl(u),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}c&1&&l!==(l=fe(o[10])+"")&&$(a,l)},d(o){ae(i,o),o&&p(e),o&&p(t)}}}function wt(s){let e,t,l;function a(o,c){return c&88&&(e=null),c&160&&(t=null),e==null&&(e=!!(o[3].includes(o[4])&&o[6])),e?Et:(t==null&&(t=!!o[7].includes(o[5])),t?Pt:yt)}let n=a(s,-1),i=n(s);return{c(){i.c(),l=ne()},l(o){i.l(o),l=ne()},m(o,c){i.m(o,c),S(o,l,c)},p(o,[c]){n===(n=a(o,c))&&i?i.p(o,c):(i.d(1),i=n(o),i&&(i.c(),i.m(l.parentNode,l)))},i:_e,o:_e,d(o){i.d(o),o&&p(l)}}}function Vt(s,e,t){let{groups:l,levels:a,colors:n,dynamicVars:i,variable:o,metric:c,showPluralities:r,pluralityVars:u,periods:f,breaks:k}=e;return s.$$set=v=>{"groups"in v&&t(0,l=v.groups),"levels"in v&&t(1,a=v.levels),"colors"in v&&t(2,n=v.colors),"dynamicVars"in v&&t(3,i=v.dynamicVars),"variable"in v&&t(4,o=v.variable),"metric"in v&&t(5,c=v.metric),"showPluralities"in v&&t(6,r=v.showPluralities),"pluralityVars"in v&&t(7,u=v.pluralityVars),"periods"in v&&t(8,f=v.periods),"breaks"in v&&t(9,k=v.breaks)},[l,a,n,i,o,c,r,u,f,k]}class It extends Te{constructor(e){super();De(this,e,Vt,wt,Le,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function dl(s,e,t){const l=s.slice();return l[20]=e[t].name,l[10]=e[t].stats,l[22]=t,l}function gl(s,e,t){const l=s.slice();return l[23]=e[t],l}function ml(s,e,t){const l=s.slice();return l[14]=e[t],l}function vl(s,e,t){const l=s.slice();return l[17]=e[t],l}function bl(s){let e;function t(n,i){if(n[9]==="districts")return Dt;if(n[9]==="community")return Tt}let l=t(s),a=l&&l(s);return{c(){a&&a.c(),e=ne()},l(n){a&&a.l(n),e=ne()},m(n,i){a&&a.m(n,i),S(n,e,i)},p(n,i){l===(l=t(n))&&a?a.p(n,i):(a&&a.d(1),a=l&&l(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){a&&a.d(n),n&&p(e)}}}function Tt(s){let e,t=s[7],l=[];for(let a=0;a<t.length;a+=1)l[a]=yl(dl(s,t,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<l.length;i+=1)l[i].m(a,n);S(a,e,n)},p(a,n){if(n&392){t=a[7];let i;for(i=0;i<t.length;i+=1){const o=dl(a,t,i);l[i]?l[i].p(o,n):(l[i]=yl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(a){ae(l,a),a&&p(e)}}}function Dt(s){let e,t=s[0],l=[];for(let a=0;a<t.length;a+=1)l[a]=Vl(ml(s,t,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<l.length;i+=1)l[i].m(a,n);S(a,e,n)},p(a,n){if(n&3199){t=a[0];let i;for(i=0;i<t.length;i+=1){const o=ml(a,t,i);l[i]?l[i].p(o,n):(l[i]=Vl(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(a){ae(l,a),a&&p(e)}}}function kl(s){let e,t,l=fe(s[23])+"",a,n,i,o=oe(s[10]["cvap19"+s[23]])+"",c,r,u,f=oe(s[10]["pop20"+s[23]])+"",k,v;return{c(){e=w("tr"),t=w("td"),a=R(l),n=j(),i=w("td"),c=R(o),r=j(),u=w("td"),k=R(f),v=j(),this.h()},l(g){e=V(g,"TR",{class:!0});var y=T(e);t=V(y,"TD",{class:!0});var I=T(t);a=U(I,l),I.forEach(p),n=M(y),i=V(y,"TD",{class:!0});var d=T(i);c=U(d,o),d.forEach(p),r=M(y),u=V(y,"TD",{class:!0});var b=T(u);k=U(b,f),b.forEach(p),v=M(y),y.forEach(p),this.h()},h(){L(t,"class","svelte-16gulxs"),L(i,"class","svelte-16gulxs"),L(u,"class","svelte-16gulxs"),L(e,"class","svelte-16gulxs")},m(g,y){S(g,e,y),h(e,t),h(t,a),h(e,n),h(e,i),h(i,c),h(e,r),h(e,u),h(u,k),h(e,v)},p(g,y){y&8&&l!==(l=fe(g[23])+"")&&$(a,l),y&136&&o!==(o=oe(g[10]["cvap19"+g[23]])+"")&&$(c,o),y&136&&f!==(f=oe(g[10]["pop20"+g[23]])+"")&&$(k,f)},d(g){g&&p(e)}}}function yl(s){let e,t,l,a=(s[20]||"COI"+(s[22]+1))+"",n,i,o,c,r,u,f,k,v,g,y,I,d,b,C,z,q,F,A=Ie(s[10].income)+"",m,P,E,_,N=oe(s[10].hhlang)+"",O,J,Z,Q,G=oe(s[10].benefits)+"",Y,ye,Ce,Oe;function Ge(){return s[13](s[22])}let he=s[3],ee=[];for(let x=0;x<he.length;x+=1)ee[x]=kl(gl(s,he,x));return{c(){e=w("div"),t=w("p"),l=w("i"),n=R(a),i=j(),o=w("button"),c=R("\u{1F5D1}"),r=j(),u=w("table"),f=w("tr"),k=w("th"),v=j(),g=w("th"),y=R("CVAP"),I=j(),d=w("th"),b=R("Pop."),C=j();for(let x=0;x<ee.length;x+=1)ee[x].c();z=j(),q=w("p"),F=R("Income: "),m=R(A),P=j(),E=w("p"),_=R("Asian and LEP: "),O=R(N),J=j(),Z=w("p"),Q=R("Pct. gov't benefits: "),Y=R(G),ye=j(),this.h()},l(x){e=V(x,"DIV",{});var K=T(e);t=V(K,"P",{class:!0});var H=T(t);l=V(H,"I",{});var D=T(l);n=U(D,a),D.forEach(p),i=M(H),o=V(H,"BUTTON",{});var te=T(o);c=U(te,"\u{1F5D1}"),te.forEach(p),H.forEach(p),r=M(K),u=V(K,"TABLE",{class:!0});var B=T(u);f=V(B,"TR",{class:!0});var W=T(f);k=V(W,"TH",{class:!0}),T(k).forEach(p),v=M(W),g=V(W,"TH",{class:!0});var le=T(g);y=U(le,"CVAP"),le.forEach(p),I=M(W),d=V(W,"TH",{class:!0});var pe=T(d);b=U(pe,"Pop."),pe.forEach(p),W.forEach(p),C=M(B);for(let ce=0;ce<ee.length;ce+=1)ee[ce].l(B);B.forEach(p),z=M(K),q=V(K,"P",{class:!0});var ue=T(q);F=U(ue,"Income: "),m=U(ue,A),ue.forEach(p),P=M(K),E=V(K,"P",{class:!0});var de=T(E);_=U(de,"Asian and LEP: "),O=U(de,N),de.forEach(p),J=M(K),Z=V(K,"P",{class:!0});var Pe=T(Z);Q=U(Pe,"Pct. gov't benefits: "),Y=U(Pe,G),Pe.forEach(p),ye=M(K),K.forEach(p),this.h()},h(){L(t,"class","svelte-16gulxs"),L(k,"class","svelte-16gulxs"),L(g,"class","svelte-16gulxs"),L(d,"class","svelte-16gulxs"),L(f,"class","svelte-16gulxs"),L(u,"class","svelte-16gulxs"),L(q,"class","table-footer svelte-16gulxs"),L(E,"class","table-footer svelte-16gulxs"),L(Z,"class","table-footer svelte-16gulxs")},m(x,K){S(x,e,K),h(e,t),h(t,l),h(l,n),h(t,i),h(t,o),h(o,c),h(e,r),h(e,u),h(u,f),h(f,k),h(f,v),h(f,g),h(g,y),h(f,I),h(f,d),h(d,b),h(u,C);for(let H=0;H<ee.length;H+=1)ee[H].m(u,null);h(e,z),h(e,q),h(q,F),h(q,m),h(e,P),h(e,E),h(E,_),h(E,O),h(e,J),h(e,Z),h(Z,Q),h(Z,Y),h(e,ye),Ce||(Oe=re(o,"click",Ge),Ce=!0)},p(x,K){if(s=x,K&128&&a!==(a=(s[20]||"COI"+(s[22]+1))+"")&&$(n,a),K&136){he=s[3];let H;for(H=0;H<he.length;H+=1){const D=gl(s,he,H);ee[H]?ee[H].p(D,K):(ee[H]=kl(D),ee[H].c(),ee[H].m(u,null))}for(;H<ee.length;H+=1)ee[H].d(1);ee.length=he.length}K&128&&A!==(A=Ie(s[10].income)+"")&&$(m,A),K&128&&N!==(N=oe(s[10].hhlang)+"")&&$(O,N),K&128&&G!==(G=oe(s[10].benefits)+"")&&$(Y,G)},d(x){x&&p(e),ae(ee,x),Ce=!1,Oe()}}}function Pl(s){let e,t,l,a=el(s[14])+"",n,i,o,c,r,u,f,k=s[14].includes("_")?s[5]==="cvap"?"19":"20":"10",v,g,y,I,d,b,C,z;function q(){return s[12](s[14])}let F=s[3],A=[];for(let P=0;P<F.length;P+=1)A[P]=El(vl(s,F,P));let m=s[4]&&s[2]in s[6]&&wl(s);return{c(){e=w("div"),t=w("p"),l=w("i"),n=R(a),i=j(),o=w("p"),c=j(),r=w("p"),u=R(s[11]),f=R(" (20"),v=R(k),g=R(")"),y=j(),I=w("div");for(let P=0;P<A.length;P+=1)A[P].c();d=j(),m&&m.c(),b=j(),this.h()},l(P){e=V(P,"DIV",{class:!0});var E=T(e);t=V(E,"P",{class:!0});var _=T(t);l=V(_,"I",{});var N=T(l);n=U(N,a),N.forEach(p),_.forEach(p),i=M(E),o=V(E,"P",{class:!0}),T(o).forEach(p),c=M(E),r=V(E,"P",{class:!0});var O=T(r);u=U(O,s[11]),f=U(O," (20"),v=U(O,k),g=U(O,")"),O.forEach(p),y=M(E),I=V(E,"DIV",{class:!0});var J=T(I);for(let Z=0;Z<A.length;Z+=1)A[Z].l(J);J.forEach(p),d=M(E),m&&m.l(E),b=M(E),E.forEach(p),this.h()},h(){L(t,"class","svelte-16gulxs"),L(o,"class","svelte-16gulxs"),L(r,"class","chart-title svelte-16gulxs"),L(I,"class","chart svelte-16gulxs"),L(e,"class","district-aggregate svelte-16gulxs")},m(P,E){S(P,e,E),h(e,t),h(t,l),h(l,n),h(e,i),h(e,o),h(e,c),h(e,r),h(r,u),h(r,f),h(r,v),h(r,g),h(e,y),h(e,I);for(let _=0;_<A.length;_+=1)A[_].m(I,null);h(e,d),m&&m.m(e,null),h(e,b),C||(z=re(t,"click",q),C=!0)},p(P,E){if(s=P,E&1&&a!==(a=el(s[14])+"")&&$(n,a),E&2048&&$(u,s[11]),E&33&&k!==(k=s[14].includes("_")?s[5]==="cvap"?"19":"20":"10")&&$(v,k),E&1065){F=s[3];let _;for(_=0;_<F.length;_+=1){const N=vl(s,F,_);A[_]?A[_].p(N,E):(A[_]=El(N),A[_].c(),A[_].m(I,null))}for(;_<A.length;_+=1)A[_].d(1);A.length=F.length}s[4]&&s[2]in s[6]?m?m.p(s,E):(m=wl(s),m.c(),m.m(e,b)):m&&(m.d(1),m=null)},d(P){P&&p(e),ae(A,P),m&&m.d(),C=!1,z()}}}function El(s){let e,t=fe(s[17])+"",l,a,n,i,o=oe(s[10][s[14]][s[5]+(s[14].includes("_")?s[5]==="cvap"?"19":"20":"10")+s[17]],s[17]==="asian")+"",c,r,u;return{c(){e=w("p"),l=R(t),a=j(),n=w("div"),i=w("p"),c=R(o),r=j(),this.h()},l(f){e=V(f,"P",{class:!0});var k=T(e);l=U(k,t),k.forEach(p),a=M(f),n=V(f,"DIV",{class:!0,style:!0});var v=T(n);i=V(v,"P",{class:!0});var g=T(i);c=U(g,o),g.forEach(p),r=M(v),v.forEach(p),this.h()},h(){L(e,"class","bar-label svelte-16gulxs"),L(i,"class","svelte-16gulxs"),L(n,"class",u="bar bar-"+s[17]+" svelte-16gulxs"),ie(n,"width",oe(s[10][s[14]][s[5]+(s[14].includes("_")?s[5]==="cvap"?"19":"20":"10")+s[17]]))},m(f,k){S(f,e,k),h(e,l),S(f,a,k),S(f,n,k),h(n,i),h(i,c),h(n,r)},p(f,k){k&8&&t!==(t=fe(f[17])+"")&&$(l,t),k&1065&&o!==(o=oe(f[10][f[14]][f[5]+(f[14].includes("_")?f[5]==="cvap"?"19":"20":"10")+f[17]],f[17]==="asian")+"")&&$(c,o),k&8&&u!==(u="bar bar-"+f[17]+" svelte-16gulxs")&&L(n,"class",u),k&1065&&ie(n,"width",oe(f[10][f[14]][f[5]+(f[14].includes("_")?f[5]==="cvap"?"19":"20":"10")+f[17]]))},d(f){f&&p(e),f&&p(a),f&&p(n)}}}function wl(s){let e,t,l=Ie(s[10][s[14]].income)+(s[4]&&s[2]in s[6]?"; "+ll(s[10][s[14]].pop20_total-s[6][s[2]]):""),a;return{c(){e=w("p"),t=R("Income: "),a=R(l),this.h()},l(n){e=V(n,"P",{class:!0});var i=T(e);t=U(i,"Income: "),a=U(i,l),i.forEach(p),this.h()},h(){L(e,"class","table-footer svelte-16gulxs")},m(n,i){S(n,e,i),h(e,t),h(e,a)},p(n,i){i&1109&&l!==(l=Ie(n[10][n[14]].income)+(n[4]&&n[2]in n[6]?"; "+ll(n[10][n[14]].pop20_total-n[6][n[2]]):""))&&$(a,l)},d(n){n&&p(e)}}}function Vl(s){let e=s[14].split(",")[0]===s[2],t,l=e&&Pl(s);return{c(){l&&l.c(),t=ne()},l(a){l&&l.l(a),t=ne()},m(a,n){l&&l.m(a,n),S(a,t,n)},p(a,n){n&5&&(e=a[14].split(",")[0]===a[2]),e?l?l.p(a,n):(l=Pl(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&p(t)}}}function Lt(s){let e,t=s[5]!==null&&bl(s);return{c(){t&&t.c(),e=ne()},l(l){t&&t.l(l),e=ne()},m(l,a){t&&t.m(l,a),S(l,e,a)},p(l,[a]){l[5]!==null?t?t.p(l,a):(t=bl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:_e,o:_e,d(l){t&&t.d(l),l&&p(e)}}}function Nt(s,e,t){let l,{aggregates:a,handleLabelClick:n,plan:i,stats:o,groups:c,changingLines:r,variable:u,idealValues:f}=e,{drawings:k=[]}=e,{delDrawing:v=void 0}=e,{type:g="districts"}=e;const y=d=>n(d),I=d=>v(d);return s.$$set=d=>{"aggregates"in d&&t(0,a=d.aggregates),"handleLabelClick"in d&&t(1,n=d.handleLabelClick),"plan"in d&&t(2,i=d.plan),"stats"in d&&t(10,o=d.stats),"groups"in d&&t(3,c=d.groups),"changingLines"in d&&t(4,r=d.changingLines),"variable"in d&&t(5,u=d.variable),"idealValues"in d&&t(6,f=d.idealValues),"drawings"in d&&t(7,k=d.drawings),"delDrawing"in d&&t(8,v=d.delDrawing),"type"in d&&t(9,g=d.type)},s.$$.update=()=>{s.$$.dirty&32&&t(11,l={vap:"Voting-age population",pop:"Population"}[u]),s.$$.dirty&1024&&console.log(o)},[a,n,i,c,r,u,f,k,v,g,o,l,y,I]}class st extends Te{constructor(e){super();De(this,e,Nt,Lt,Le,{aggregates:0,handleLabelClick:1,plan:2,stats:10,groups:3,changingLines:4,variable:5,idealValues:6,drawings:7,delDrawing:8,type:9})}}const Ct=s=>({}),Il=s=>({}),Ot=s=>({}),Tl=s=>({});function Dl(s){let e,t,l,a;const n=s[5].body,i=Xl(n,s,s[4],Il);return{c(){e=w("div"),i&&i.c(),this.h()},l(o){e=V(o,"DIV",{class:!0});var c=T(e);i&&i.l(c),c.forEach(p),this.h()},h(){L(e,"class","svelte-a3zm9u")},m(o,c){S(o,e,c),i&&i.m(e,null),a=!0},p(o,c){i&&i.p&&(!a||c&16)&&Zl(i,n,o,o[4],a?$l(n,o[4],c,Ct):Yl(o[4]),Il)},i(o){a||(X(i,o),Ne(()=>{l&&l.end(1),t=He(e,Se,{}),t.start()}),a=!0)},o(o){se(i,o),t&&t.invalidate(),l=We(e,Se,{}),a=!1},d(o){o&&p(e),i&&i.d(o),o&&l&&l.end()}}}function jt(s){let e,t,l,a=(s[3][s[2]]||fe(s[2]))+"",n,i,o=s[0].includes(s[2])?"\u2191":"\u2193",c,r,u,f=s[0].includes(s[2]),k,v,g;const y=s[5].title,I=Xl(y,s,s[4],Tl);let d=f&&Dl(s);return{c(){e=w("div"),t=w("h3"),l=w("button"),n=R(a),i=j(),c=R(o),r=j(),I&&I.c(),u=j(),d&&d.c(),this.h()},l(b){e=V(b,"DIV",{class:!0});var C=T(e);t=V(C,"H3",{class:!0});var z=T(t);l=V(z,"BUTTON",{});var q=T(l);n=U(q,a),i=M(q),c=U(q,o),q.forEach(p),r=M(z),I&&I.l(z),z.forEach(p),u=M(C),d&&d.l(C),C.forEach(p),this.h()},h(){L(t,"class","svelte-a3zm9u"),L(e,"class","panel svelte-a3zm9u")},m(b,C){S(b,e,C),h(e,t),h(t,l),h(l,n),h(l,i),h(l,c),h(t,r),I&&I.m(t,null),h(e,u),d&&d.m(e,null),k=!0,v||(g=re(l,"click",s[6]),v=!0)},p(b,[C]){(!k||C&4)&&a!==(a=(b[3][b[2]]||fe(b[2]))+"")&&$(n,a),(!k||C&5)&&o!==(o=b[0].includes(b[2])?"\u2191":"\u2193")&&$(c,o),I&&I.p&&(!k||C&16)&&Zl(I,y,b,b[4],k?$l(y,b[4],C,Ot):Yl(b[4]),Tl),C&5&&(f=b[0].includes(b[2])),f?d?(d.p(b,C),C&5&&X(d,1)):(d=Dl(b),d.c(),X(d,1),d.m(e,null)):d&&(Ae(),se(d,1,1,()=>{d=null}),Re())},i(b){k||(X(I,b),X(d),k=!0)},o(b){se(I,b),se(d),k=!1},d(b){b&&p(e),I&&I.d(b),d&&d.d(),v=!1,g()}}}function Mt(s,e,t){let{$$slots:l={},$$scope:a}=e,{panels:n,togglePanel:i,panelName:o}=e;const c={plan:"Districts",plan2:"Compare a district",views:"Views"},r=()=>i(o);return s.$$set=u=>{"panels"in u&&t(0,n=u.panels),"togglePanel"in u&&t(1,i=u.togglePanel),"panelName"in u&&t(2,o=u.panelName),"$$scope"in u&&t(4,a=u.$$scope)},[n,i,o,c,a,l,r]}class Ll extends Te{constructor(e){super();De(this,e,Mt,jt,Le,{panels:0,togglePanel:1,panelName:2})}}function Nl(s){let e,t,l,a,n,i,o,c,r,u,f;return{c(){e=w("div"),t=w("a"),l=R("Click here"),a=R(` to see a video tutorial of this website.
    `),n=w("button"),i=R("Close message."),this.h()},l(k){e=V(k,"DIV",{class:!0});var v=T(e);t=V(v,"A",{href:!0,target:!0});var g=T(t);l=U(g,"Click here"),g.forEach(p),a=U(v,` to see a video tutorial of this website.
    `),n=V(v,"BUTTON",{class:!0});var y=T(n);i=U(y,"Close message."),y.forEach(p),v.forEach(p),this.h()},h(){L(t,"href","https://youtu.be/dU5a4PRSF14"),L(t,"target","_blank"),L(n,"class","svelte-a8zkqf"),L(e,"class","modal svelte-a8zkqf")},m(k,v){S(k,e,v),h(e,t),h(t,l),h(e,a),h(e,n),h(n,i),r=!0,u||(f=re(n,"click",function(){_t(s[1])&&s[1].apply(this,arguments)}),u=!0)},p(k,v){s=k},i(k){r||(Ne(()=>{c&&c.end(1),o=He(e,$e,{}),o.start()}),r=!0)},o(k){o&&o.invalidate(),c=We(e,$e,{}),r=!1},d(k){k&&p(e),k&&c&&c.end(),u=!1,f()}}}function St(s){let e,t,l=s[0]&&Nl(s);return{c(){l&&l.c(),e=ne()},l(a){l&&l.l(a),e=ne()},m(a,n){l&&l.m(a,n),S(a,e,n),t=!0},p(a,[n]){a[0]?l?(l.p(a,n),n&1&&X(l,1)):(l=Nl(a),l.c(),X(l,1),l.m(e.parentNode,e)):l&&(Ae(),se(l,1,1,()=>{l=null}),Re())},i(a){t||(X(l),t=!0)},o(a){se(l),t=!1},d(a){l&&l.d(a),a&&p(e)}}}function At(s,e,t){let{showModal:l,closeModal:a}=e;return s.$$set=n=>{"showModal"in n&&t(0,l=n.showModal),"closeModal"in n&&t(1,a=n.closeModal)},[l,a]}class Rt extends Te{constructor(e){super();De(this,e,At,St,Le,{showModal:0,closeModal:1})}}function Ut(s){let e,t,l,a,n;return{c(){e=w("link"),t=w("script"),a=j(),n=w("div"),this.h()},l(i){const o=ht('[data-svelte="svelte-1p75gtx"]',document.head);e=V(o,"LINK",{href:!0,rel:!0}),t=V(o,"SCRIPT",{src:!0});var c=T(t);c.forEach(p),o.forEach(p),a=M(i),n=V(i,"DIV",{id:!0,class:!0}),T(n).forEach(p),this.h()},h(){L(e,"href","https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css"),L(e,"rel","stylesheet"),pt(t.src,l="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js")||L(t,"src",l),L(n,"id","map"),L(n,"class","svelte-1b204ev")},m(i,o){h(document.head,e),h(document.head,t),S(i,a,o),S(i,n,o)},p:_e,i:_e,o:_e,d(i){p(e),p(t),i&&p(a),i&&p(n)}}}function Ft(s,e,t){let{census:l,plansTopo:a,color:n,showPluralities:i,metric:o,period:c,panels:r,plan:u,plan2:f,points:k,isolate:v,pointing:g,opacity:y,handleLabelClick:I,togglePointing:d}=e,b,C;const z=["assembly","assembly_letters","assembly_names","assembly_unity","assembly_latfor","senate","senate_letters","senate_names","senate_unity","senate_latfor"];function q(){if(o===null)return"rgba(0, 0, 0, 0)";const m=["match",["get","GEOID"]];return l.features.forEach(P=>{m.push(P.properties.GEOID,vt(n(P)))}),m.push("rgba(0, 0, 0, 0)"),m}const F=["case",["boolean",["feature-state","pointing"],!1],2.5,1.2];dt(()=>{mapboxgl.accessToken="pk.eyJ1IjoianNvbmthbyIsImEiOiJjanNvM2U4bXQwN2I3NDRydXQ3Z2kwbWQwIn0.JWAoBlcpDJwkzG-O5_r0ZA",t(15,b=new mapboxgl.Map({container:"map",style:"mapbox://styles/jsonkao/ckvnu5tpy6coj14uizvyf1wuf/draft",center:[-73.967,40.72],zoom:11})),b.on("load",async()=>{b.addSource("census",{type:"geojson",data:l}),b.addLayer({id:"census",type:"fill",source:"census",paint:{"fill-color":q()}},"parks");const m={};z.forEach(P=>{const E=xl(a,a.objects[P]);m[P]={type:"FeatureCollection",features:E.features.map(_=>Ze(Xe({},_),{id:_.properties[P]}))}}),z.forEach(P=>{b.addSource(P,{type:"geojson",data:m[P],promoteId:P}),b.addLayer({id:P+"_outline",type:"line",source:P,layout:{},paint:{"line-color":"#121212","line-width":F}},"road-label-small"),b.addLayer({id:P+"_fill",type:"fill",source:P,layout:{},paint:{"fill-color":"#000000","fill-opacity":0}}),b.addSource(P+"_labels",{type:"geojson",data:{type:"FeatureCollection",features:k.features.filter(E=>E.properties[P]).map(E=>({type:E.feature,id:E.properties[P],geometry:E.geometry,properties:E.properties}))}}),b.addLayer({id:P+"_labels",type:"symbol",source:P+"_labels",layout:{"text-justify":"auto","text-allow-overlap":!0,"text-variable-anchor":["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"text-radial-offset":1,"text-field":["format",["get",P],{"font-scale":1.2}]},paint:{"text-color":"#121212","text-halo-color":"#fff","text-halo-width":1.2}})}),t(16,C=!0),b.on("click",P=>{if(g){d();const E=b.queryRenderedFeatures(P.point).filter(_=>z.some(N=>N===_.source));console.log(E),t(17,A=E.map(_=>(console.log(m[_.source]),b.setFeatureState({source:_.source,id:_.properties[_.source]},{pointing:!0}),I(`${_.source},${_.properties[_.source]}`,!0),{source:_.source,id:_.properties[_.source]})))}else b.queryRenderedFeatures(P.point).filter(_=>_.source.endsWith("_labels")).forEach(_=>{const N=_.source.replace("_labels","");b.setFeatureState({source:N,id:_.properties[N]},{pointing:!0}),I(`${N},${_.properties[N]}`)})})})});let A=[];return s.$$set=m=>{"census"in m&&t(0,l=m.census),"plansTopo"in m&&t(1,a=m.plansTopo),"color"in m&&t(2,n=m.color),"showPluralities"in m&&t(3,i=m.showPluralities),"metric"in m&&t(4,o=m.metric),"period"in m&&t(5,c=m.period),"panels"in m&&t(6,r=m.panels),"plan"in m&&t(7,u=m.plan),"plan2"in m&&t(8,f=m.plan2),"points"in m&&t(9,k=m.points),"isolate"in m&&t(10,v=m.isolate),"pointing"in m&&t(11,g=m.pointing),"opacity"in m&&t(12,y=m.opacity),"handleLabelClick"in m&&t(13,I=m.handleLabelClick),"togglePointing"in m&&t(14,d=m.togglePointing)},s.$$.update=()=>{if(s.$$.dirty&98752&&C&&z.forEach(m=>{const P=r.includes("plan2")&&m===f,E=r.includes("plan")&&m===u||P?"visible":"none";b.setLayoutProperty(`${m}_outline`,"visibility",E),b.setLayoutProperty(`${m}_fill`,"visibility",E),b.setLayoutProperty(`${m}_labels`,"visibility",E);const _="#121212";b.setPaintProperty(`${m}_outline`,"line-color",_),b.setPaintProperty(`${m}_labels`,"text-color",_)}),s.$$.dirty&239616&&C&&(b.getCanvas().style.cursor=g?"crosshair":"pointer",g&&A.length>0&&A.forEach(m=>{b.setFeatureState(m,{pointing:!1}),I(`${m.source},${m.id}`,!1,!0)})),s.$$.dirty&102848&&C)if(r.includes("plan2")){let m=E=>Math.max(0,Math.min(E,1));b.setPaintProperty(`${u}_outline`,"line-opacity",m(1-y)),b.setPaintProperty(`${f}_outline`,"line-opacity",m(y)),m=E=>Math.max(0,Math.min(E,1)),b.setPaintProperty(`${u}_labels`,"text-opacity",m(1-y)),b.setPaintProperty(`${f}_labels`,"text-opacity",m(y))}else b.setPaintProperty(`${u}_outline`,"line-opacity",1),b.setPaintProperty(`${f}_outline`,"line-opacity",1),b.setPaintProperty(`${u}_labels`,"text-opacity",1),b.setPaintProperty(`${f}_labels`,"text-opacity",1);if(s.$$.dirty&99776&&C){const m=[u];r.includes("plan2")&&m.push(f),m.forEach(P=>{b.setPaintProperty(`${P}_outline`,"line-width",v?["case",["boolean",["feature-state","pointing"],!1],2,0]:F)})}s.$$.dirty&98360&&C&&b.setPaintProperty("census","fill-color",q())},[l,a,n,i,o,c,r,u,f,k,v,g,y,I,d,b,C,A]}class Gt extends Te{constructor(e){super();De(this,e,Ft,Ut,Le,{census:0,plansTopo:1,color:2,showPluralities:3,metric:4,period:5,panels:6,plan:7,plan2:8,points:9,isolate:10,pointing:11,opacity:12,handleLabelClick:13,togglePointing:14})}}function Cl(s,e,t){const l=s.slice();return l[42]=e[t],l}function Ol(s,e,t){const l=s.slice();return l[45]=e[t],l}function jl(s,e,t){const l=s.slice();return l[42]=e[t],l}function Ml(s,e,t){const l=s.slice();return l[45]=e[t],l}function Sl(s,e,t){const l=s.slice();return l[52]=e[t],l}function Al(s,e,t){const l=s.slice();return l[55]=e[t],l}function Rl(s,e,t){const l=s.slice();return l[55]=e[t],l}function Ul(s){let e,t=(Fe[s[55]]||s[55])+"",l,a;return{c(){e=w("option"),l=R(t),this.h()},l(n){e=V(n,"OPTION",{});var i=T(e);l=U(i,t),i.forEach(p),this.h()},h(){e.__value=a=s[55],e.value=e.__value},m(n,i){S(n,e,i),h(e,l)},p(n,i){i[0]&4&&t!==(t=(Fe[n[55]]||n[55])+"")&&$(l,t),i[0]&4&&a!==(a=n[55])&&(e.__value=a,e.value=e.__value)},d(n){n&&p(e)}}}function Fl(s){let e,t=(Fe[s[55]]||s[55])+"",l,a;return{c(){e=w("option"),l=R(t),this.h()},l(n){e=V(n,"OPTION",{});var i=T(e);l=U(i,t),i.forEach(p),this.h()},h(){e.__value=a=s[55],e.value=e.__value},m(n,i){S(n,e,i),h(e,l)},p(n,i){i[0]&8&&t!==(t=(Fe[n[55]]||n[55])+"")&&$(l,t),i[0]&8&&a!==(a=n[55])&&(e.__value=a,e.value=e.__value)},d(n){n&&p(e)}}}function Gl(s){let e,t=s[2].includes(s[11]),l,a=s[2].includes(s[11]),n,i,o,c=t&&Bl(s),r=a&&zl(s);return{c(){e=w("div"),c&&c.c(),l=j(),r&&r.c()},l(u){e=V(u,"DIV",{});var f=T(e);c&&c.l(f),l=M(f),r&&r.l(f),f.forEach(p)},m(u,f){S(u,e,f),c&&c.m(e,null),h(e,l),r&&r.m(e,null),o=!0},p(u,f){f[0]&2052&&(t=u[2].includes(u[11])),t?c?c.p(u,f):(c=Bl(u),c.c(),c.m(e,l)):c&&(c.d(1),c=null),f[0]&2052&&(a=u[2].includes(u[11])),a?r?r.p(u,f):(r=zl(u),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(u){o||(Ne(()=>{i&&i.end(1),n=He(e,Se,{}),n.start()}),o=!0)},o(u){n&&n.invalidate(),i=We(e,Se,{}),o=!1},d(u){u&&p(e),c&&c.d(),r&&r.d(),u&&i&&i.end()}}}function Bl(s){let e,t=["past","present"],l=[];for(let a=0;a<2;a+=1)l[a]=ql(Sl(s,t,a));return{c(){for(let a=0;a<2;a+=1)l[a].c();e=ne()},l(a){for(let n=0;n<2;n+=1)l[n].l(a);e=ne()},m(a,n){for(let i=0;i<2;i+=1)l[i].m(a,n);S(a,e,n)},p(a,n){if(n[0]&1024){t=["past","present"];let i;for(i=0;i<2;i+=1){const o=Sl(a,t,i);l[i]?l[i].p(o,n):(l[i]=ql(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<2;i+=1)l[i].d(1)}},d(a){ae(l,a),a&&p(e)}}}function ql(s){let e,t,l,a=fe(s[52])+"",n,i,o,c;return{c(){e=w("label"),t=w("input"),l=j(),n=R(a),i=j(),this.h()},l(r){e=V(r,"LABEL",{});var u=T(e);t=V(u,"INPUT",{type:!0,name:!0}),l=M(u),n=U(u,a),i=M(u),u.forEach(p),this.h()},h(){L(t,"type","radio"),L(t,"name","period"),t.__value=s[52],t.value=t.__value,s[35][0].push(t)},m(r,u){S(r,e,u),h(e,t),t.checked=t.__value===s[10],h(e,l),h(e,n),h(e,i),o||(c=re(t,"change",s[34]),o=!0)},p(r,u){u[0]&1024&&(t.checked=t.__value===r[10])},d(r){r&&p(e),s[35][0].splice(s[35][0].indexOf(t),1),o=!1,c()}}}function zl(s){let e,t,l=s[7]?"pct. asian":"all races and ethniticies",a,n,i;return{c(){e=w("button"),t=R("Show "),a=R(l),this.h()},l(o){e=V(o,"BUTTON",{class:!0});var c=T(e);t=U(c,"Show "),a=U(c,l),c.forEach(p),this.h()},h(){L(e,"class","plurality-toggle svelte-18y91b1")},m(o,c){S(o,e,c),h(e,t),h(e,a),n||(i=re(e,"click",s[36]),n=!0)},p(o,c){c[0]&128&&l!==(l=o[7]?"pct. asian":"all races and ethniticies")&&$(a,l)},d(o){o&&p(e),n=!1,i()}}}function Hl(s){let e,t;return e=new It({props:{groups:we,levels:qe,colors:ze,dynamicVars:s[2],variable:s[11],metric:s[12],showPluralities:s[7],pluralityVars:s[4],periods:Me,breaks:s[21]}}),{c(){me(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,a){be(e,l,a),t=!0},p(l,a){const n={};a[0]&4&&(n.dynamicVars=l[2]),a[0]&2048&&(n.variable=l[11]),a[0]&4096&&(n.metric=l[12]),a[0]&128&&(n.showPluralities=l[7]),a[0]&16&&(n.pluralityVars=l[4]),a[0]&2097152&&(n.breaks=l[21]),e.$set(n)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){se(e.$$.fragment,l),t=!1},d(l){ke(e,l)}}}function Wl(s){let e,t=tt(s[42]+s[45])+"",l,a,n;return{c(){e=w("option"),l=R(t),a=j(),this.h()},l(i){e=V(i,"OPTION",{});var o=T(e);l=U(o,t),a=M(o),o.forEach(p),this.h()},h(){e.__value=n=s[42]+s[45],e.value=e.__value},m(i,o){S(i,e,o),h(e,l),h(e,a)},p:_e,d(i){i&&p(e)}}}function Jl(s){let e,t,l=["","_letters","_names","_unity","_latfor"],a=[];for(let n=0;n<5;n+=1)a[n]=Wl(Ml(s,l,n));return{c(){e=w("optgroup");for(let n=0;n<5;n+=1)a[n].c();this.h()},l(n){e=V(n,"OPTGROUP",{label:!0});var i=T(e);for(let o=0;o<5;o+=1)a[o].l(i);i.forEach(p),this.h()},h(){L(e,"label",t=fe(s[42]))},m(n,i){S(n,e,i);for(let o=0;o<5;o+=1)a[o].m(e,null)},p(n,i){if(i&0){l=["","_letters","_names","_unity","_latfor"];let o;for(o=0;o<5;o+=1){const c=Ml(n,l,o);a[o]?a[o].p(c,i):(a[o]=Wl(c),a[o].c(),a[o].m(e,null))}for(;o<5;o+=1)a[o].d(1)}},d(n){n&&p(e),ae(a,n)}}}function Bt(s){let e,t,l,a,n,i,o,c,r=["assembly","senate"],u=[];for(let f=0;f<2;f+=1)u[f]=Jl(jl(s,r,f));return n=new st({props:{aggregates:s[6],handleLabelClick:s[26],plan:s[8],stats:s[16],groups:we,changingLines:s[22],idealValues:lt,variable:s[11]}}),{c(){e=w("div"),t=w("div"),l=w("select");for(let f=0;f<2;f+=1)u[f].c();a=j(),me(n.$$.fragment),this.h()},l(f){e=V(f,"DIV",{slot:!0});var k=T(e);t=V(k,"DIV",{class:!0});var v=T(t);l=V(v,"SELECT",{class:!0});var g=T(l);for(let y=0;y<2;y+=1)u[y].l(g);g.forEach(p),v.forEach(p),a=M(k),ve(n.$$.fragment,k),k.forEach(p),this.h()},h(){L(l,"class","svelte-18y91b1"),s[8]===void 0&&Ne(()=>s[37].call(l)),L(t,"class","plan-selector svelte-18y91b1"),L(e,"slot","body")},m(f,k){S(f,e,k),h(e,t),h(t,l);for(let v=0;v<2;v+=1)u[v].m(l,null);Ve(l,s[8]),h(e,a),be(n,e,null),i=!0,o||(c=re(l,"change",s[37]),o=!0)},p(f,k){if(k&0){r=["assembly","senate"];let g;for(g=0;g<2;g+=1){const y=jl(f,r,g);u[g]?u[g].p(y,k):(u[g]=Jl(y),u[g].c(),u[g].m(l,null))}for(;g<2;g+=1)u[g].d(1)}k[0]&256&&Ve(l,f[8]);const v={};k[0]&64&&(v.aggregates=f[6]),k[0]&256&&(v.plan=f[8]),k[0]&65536&&(v.stats=f[16]),k[0]&2048&&(v.variable=f[11]),n.$set(v)},i(f){i||(X(n.$$.fragment,f),i=!0)},o(f){se(n.$$.fragment,f),i=!1},d(f){f&&p(e),ae(u,f),ke(n),o=!1,c()}}}function Ql(s){let e,t=tt(s[42]+s[45])+"",l,a,n;return{c(){e=w("option"),l=R(t),a=j(),this.h()},l(i){e=V(i,"OPTION",{});var o=T(e);l=U(o,t),a=M(o),o.forEach(p),this.h()},h(){e.__value=n=s[42]+s[45],e.value=e.__value},m(i,o){S(i,e,o),h(e,l),h(e,a)},p:_e,d(i){i&&p(e)}}}function Kl(s){let e,t,l=["","_letters","_names","_unity","_latfor"],a=[];for(let n=0;n<5;n+=1)a[n]=Ql(Ol(s,l,n));return{c(){e=w("optgroup");for(let n=0;n<5;n+=1)a[n].c();this.h()},l(n){e=V(n,"OPTGROUP",{label:!0});var i=T(e);for(let o=0;o<5;o+=1)a[o].l(i);i.forEach(p),this.h()},h(){L(e,"label",t=fe(s[42]))},m(n,i){S(n,e,i);for(let o=0;o<5;o+=1)a[o].m(e,null)},p(n,i){if(i&0){l=["","_letters","_names","_unity","_latfor"];let o;for(o=0;o<5;o+=1){const c=Ol(n,l,o);a[o]?a[o].p(c,i):(a[o]=Ql(c),a[o].c(),a[o].m(e,null))}for(;o<5;o+=1)a[o].d(1)}},d(n){n&&p(e),ae(a,n)}}}function qt(s){let e,t,l,a,n,i,o,c,r,u,f,k=["assembly","senate"],v=[];for(let g=0;g<2;g+=1)v[g]=Kl(Cl(s,k,g));return c=new st({props:{aggregates:s[6],handleLabelClick:s[26],plan:s[9],stats:s[16],groups:we,changingLines:s[22],idealValues:lt,variable:s[11]}}),{c(){e=w("div"),t=w("div"),l=w("input"),a=j(),n=w("div"),i=w("select");for(let g=0;g<2;g+=1)v[g].c();o=j(),me(c.$$.fragment),this.h()},l(g){e=V(g,"DIV",{slot:!0});var y=T(e);t=V(y,"DIV",{class:!0});var I=T(t);l=V(I,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),I.forEach(p),a=M(y),n=V(y,"DIV",{class:!0});var d=T(n);i=V(d,"SELECT",{class:!0});var b=T(i);for(let C=0;C<2;C+=1)v[C].l(b);b.forEach(p),d.forEach(p),o=M(y),ve(c.$$.fragment,y),y.forEach(p),this.h()},h(){L(l,"type","range"),L(l,"min","0"),L(l,"max","1.5"),L(l,"step","0.01"),L(l,"class","svelte-18y91b1"),L(t,"class","slider svelte-18y91b1"),L(i,"class","svelte-18y91b1"),s[9]===void 0&&Ne(()=>s[39].call(i)),L(n,"class","plan-selector svelte-18y91b1"),L(e,"slot","body")},m(g,y){S(g,e,y),h(e,t),h(t,l),xe(l,s[19]),h(e,a),h(e,n),h(n,i);for(let I=0;I<2;I+=1)v[I].m(i,null);Ve(i,s[9]),h(e,o),be(c,e,null),r=!0,u||(f=[re(l,"change",s[38]),re(l,"input",s[38]),re(i,"change",s[39])],u=!0)},p(g,y){if(y[0]&524288&&xe(l,g[19]),y&0){k=["assembly","senate"];let d;for(d=0;d<2;d+=1){const b=Cl(g,k,d);v[d]?v[d].p(b,y):(v[d]=Kl(b),v[d].c(),v[d].m(i,null))}for(;d<2;d+=1)v[d].d(1)}y[0]&512&&Ve(i,g[9]);const I={};y[0]&64&&(I.aggregates=g[6]),y[0]&512&&(I.plan=g[9]),y[0]&65536&&(I.stats=g[16]),y[0]&2048&&(I.variable=g[11]),c.$set(I)},i(g){r||(X(c.$$.fragment,g),r=!0)},o(g){se(c.$$.fragment,g),r=!1},d(g){g&&p(e),ae(v,g),ke(c),u=!1,et(f)}}}function zt(s){let e,t,l,a,n,i,o,c,r,u,f,k,v,g,y,I,d,b,C,z;e=new Rt({props:{showModal:s[13],closeModal:s[23]}});let q=s[2],F=[];for(let _=0;_<q.length;_+=1)F[_]=Ul(Rl(s,q,_));let A=s[3],m=[];for(let _=0;_<A.length;_+=1)m[_]=Fl(Al(s,A,_));let P=s[14]&&Gl(s),E=s[12]!==null&&Hl(s);return v=new Ll({props:{panelName:"plan",panels:s[18],togglePanel:s[25],$$slots:{body:[Bt]},$$scope:{ctx:s}}}),y=new Ll({props:{panelName:"plan2",panels:s[18],togglePanel:s[25],$$slots:{body:[qt]},$$scope:{ctx:s}}}),d=new Gt({props:{census:s[0],plansTopo:s[1],pointing:s[15],color:s[24],showPluralities:s[7],metric:s[12],opacity:s[19],period:s[10],panels:s[18],plan:s[8],plan2:s[9],points:s[5],togglePointing:s[27],handleLabelClick:s[26],isolate:s[17]}}),{c(){me(e.$$.fragment),t=j(),l=w("div"),a=w("div"),n=w("select"),i=w("option"),o=R("Select data"),c=w("optgroup");for(let _=0;_<F.length;_+=1)F[_].c();r=w("optgroup");for(let _=0;_<m.length;_+=1)m[_].c();u=j(),P&&P.c(),f=j(),E&&E.c(),k=j(),me(v.$$.fragment),g=j(),me(y.$$.fragment),I=j(),me(d.$$.fragment),this.h()},l(_){ve(e.$$.fragment,_),t=M(_),l=V(_,"DIV",{class:!0,style:!0});var N=T(l);a=V(N,"DIV",{class:!0});var O=T(a);n=V(O,"SELECT",{style:!0,class:!0});var J=T(n);i=V(J,"OPTION",{});var Z=T(i);o=U(Z,"Select data"),Z.forEach(p),c=V(J,"OPTGROUP",{label:!0});var Q=T(c);for(let Y=0;Y<F.length;Y+=1)F[Y].l(Q);Q.forEach(p),r=V(J,"OPTGROUP",{label:!0});var G=T(r);for(let Y=0;Y<m.length;Y+=1)m[Y].l(G);G.forEach(p),J.forEach(p),u=M(O),P&&P.l(O),f=M(O),E&&E.l(O),k=M(O),ve(v.$$.fragment,O),g=M(O),ve(y.$$.fragment,O),O.forEach(p),I=M(N),ve(d.$$.fragment,N),N.forEach(p),this.h()},h(){i.__value=null,i.value=i.__value,L(c,"label","Redistricting data"),L(r,"label","American Community Survey data"),ie(n,"width",s[3].includes(s[11])?"auto":"calc(var(--control-width) + 45px * 0)"),L(n,"class","svelte-18y91b1"),s[11]===void 0&&Ne(()=>s[33].call(n)),L(a,"class","controls svelte-18y91b1"),L(l,"class","container svelte-18y91b1"),ie(l,"--container-font",s[20]+"px"),ie(l,"--control-width",270+(s[20]-16)*10+"px")},m(_,N){be(e,_,N),S(_,t,N),S(_,l,N),h(l,a),h(a,n),h(n,i),h(i,o),h(n,c);for(let O=0;O<F.length;O+=1)F[O].m(c,null);h(n,r);for(let O=0;O<m.length;O+=1)m[O].m(r,null);Ve(n,s[11]),h(a,u),P&&P.m(a,null),h(a,f),E&&E.m(a,null),h(a,k),be(v,a,null),h(a,g),be(y,a,null),h(l,I),be(d,l,null),b=!0,C||(z=[re(window,"keydown",s[28]),re(n,"change",s[33])],C=!0)},p(_,N){const O={};if(N[0]&8192&&(O.showModal=_[13]),e.$set(O),N[0]&4){q=_[2];let G;for(G=0;G<q.length;G+=1){const Y=Rl(_,q,G);F[G]?F[G].p(Y,N):(F[G]=Ul(Y),F[G].c(),F[G].m(c,null))}for(;G<F.length;G+=1)F[G].d(1);F.length=q.length}if(N[0]&8){A=_[3];let G;for(G=0;G<A.length;G+=1){const Y=Al(_,A,G);m[G]?m[G].p(Y,N):(m[G]=Fl(Y),m[G].c(),m[G].m(r,null))}for(;G<m.length;G+=1)m[G].d(1);m.length=A.length}(!b||N[0]&2056)&&ie(n,"width",_[3].includes(_[11])?"auto":"calc(var(--control-width) + 45px * 0)"),N[0]&2060&&Ve(n,_[11]),_[14]?P?(P.p(_,N),N[0]&16384&&X(P,1)):(P=Gl(_),P.c(),X(P,1),P.m(a,f)):P&&(Ae(),se(P,1,1,()=>{P=null}),Re()),_[12]!==null?E?(E.p(_,N),N[0]&4096&&X(E,1)):(E=Hl(_),E.c(),X(E,1),E.m(a,k)):E&&(Ae(),se(E,1,1,()=>{E=null}),Re());const J={};N[0]&262144&&(J.panels=_[18]),N[0]&67904|N[1]&536870912&&(J.$$scope={dirty:N,ctx:_}),v.$set(J);const Z={};N[0]&262144&&(Z.panels=_[18]),N[0]&592448|N[1]&536870912&&(Z.$$scope={dirty:N,ctx:_}),y.$set(Z);const Q={};N[0]&1&&(Q.census=_[0]),N[0]&2&&(Q.plansTopo=_[1]),N[0]&32768&&(Q.pointing=_[15]),N[0]&128&&(Q.showPluralities=_[7]),N[0]&4096&&(Q.metric=_[12]),N[0]&524288&&(Q.opacity=_[19]),N[0]&1024&&(Q.period=_[10]),N[0]&262144&&(Q.panels=_[18]),N[0]&256&&(Q.plan=_[8]),N[0]&512&&(Q.plan2=_[9]),N[0]&32&&(Q.points=_[5]),N[0]&131072&&(Q.isolate=_[17]),d.$set(Q),(!b||N[0]&1048576)&&ie(l,"--container-font",_[20]+"px"),(!b||N[0]&1048576)&&ie(l,"--control-width",270+(_[20]-16)*10+"px")},i(_){b||(X(e.$$.fragment,_),X(P),X(E),X(v.$$.fragment,_),X(y.$$.fragment,_),X(d.$$.fragment,_),b=!0)},o(_){se(e.$$.fragment,_),se(P),se(E),se(v.$$.fragment,_),se(y.$$.fragment,_),se(d.$$.fragment,_),b=!1},d(_){ke(e,_),_&&p(t),_&&p(l),ae(F,_),ae(m,_),P&&P.d(),E&&E.d(),ke(v),ke(y),ke(d),C=!1,et(z)}}}async function Xt({fetch:s}){const e=bt(await(await s(`${je}/data.csv`)).text()),t=await(await s(`${je}/output_census_wgs84.topojson`)).json(),l=kt(t.objects.census),a=xl(t,l),n=a.features,i=["pop","vap","cvap"],o=[...n.reduce((c,r)=>{const u=Object.keys(r.properties).filter(f=>[...i,"GEOID","senate","assembly"].every(k=>!f.includes(k))&&f===f.toLowerCase()).map(f=>f.split("_")[0]);return new Set([...c,...u])},[])];return{props:{censusData:e,data:n,dynamicVars:i,staticVars:o,pluralityVars:["asiaentry"],census:a,plansTopo:await(await s(`${je}/plans.topojson`)).json(),points:await(await s(`${je}/points.geojson`)).json()}}}function Ht(s,e,t){let l,a,n,{censusData:i,census:o,plansTopo:c,data:r,dynamicVars:u,staticVars:f,pluralityVars:k,points:v}=e,g,y=!0,I,d,b=[],C={},z=!1,q,F=["plan"],A="senate_letters",m="senate_unity",P=.75,E=18;const _=()=>t(13,g=!1);let N="present",O="vap";const J={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6],vap:[0,.1,.2,.4,.6]};function Z({properties:D}){if(l===null)return console.trace(),null;if(!D.ALAND)return"rgba(0, 0, 0, 0)";const te=D[`${l}_total`];if(k.includes(l)){const B=le=>D[`${l}_${le}`];if(B(Me[0])===null)return"rgba(0, 0, 0, 0)";const W=[...Me].sort((le,pe)=>B(pe)-B(le));return Ee[Me.indexOf(W[0])]}else if(f.includes(l)){if(!tl(a(D))||te<=10)return"rgba(0, 0, 0, 0)";for(let B=1;B<n.length;B++)if(a(D)<n[B])return Ee[B];return Ee[n.length-1]}else{if(te<=10)return"rgba(0, 0, 0, 0)";const B=W=>D[`${l}_${W}`]/D[`${l}_total`];if(q){const W=we.filter(ue=>B(ue)>.5)[0];if(W!==void 0)return ze[W]+qe[te<130?0:te<200?1:2];const le=[...we].sort((ue,de)=>B(de)-B(ue)),pe=B(le[0])-B(le[1]);return ze[le[0]]+qe[pe<.093?0:1]}else{const W=J[O];for(let le=1;le<W.length;le++)if(B("asian")<W[le])return Ue[le-1];return Ue[W.length-1]}}}function Q(D){const te=D,B=(ce,ge)=>te.reduce((at,Je)=>at+(Je[ce]||0)*(ge&&Je[ge]||1),0),W=(ce,ge)=>B(`${ce}_${ge}`)/B(`${ce}_total`);let le=B("pop10_asian"),pe=B("pop20_asian"),ue=B("cvap10_asian"),de=B("cvap19_asian");const Pe={pop20_total:B("pop20_total"),pct_increase:(pe-le)/le,pct_increase_cvap:(de-ue)/ue};return["pop20","vap20","cvap19","pop10","vap10","cvap10"].forEach(ce=>we.forEach(ge=>Pe[ce+ge]=W(ce,ge))),Pe}const G=D=>t(18,F=F.includes(D)?F.filter(te=>te!==D):[...F,D]);function Y(D,te=!1,B=!1){b.includes(D)?te||t(6,b=b.filter(W=>W!==D)):B||t(6,b=[...b,D])}const ye=()=>t(15,d=!d);function Ce({key:D}){D===" "&&ye(),D==="i"&&t(17,z=!z),D==="="&&t(20,E+=2),D==="-"&&t(20,E-=2),D==="v"&&t(14,y=!y)}const Oe=[[]];function Ge(){O=Be(this),t(11,O),t(3,f),t(2,u)}function he(){N=this.__value,t(10,N)}const ee=()=>t(7,q=!q);function x(){A=Be(this),t(8,A)}function K(){P=mt(this.value),t(19,P)}function H(){m=Be(this),t(9,m)}return s.$$set=D=>{"censusData"in D&&t(29,i=D.censusData),"census"in D&&t(0,o=D.census),"plansTopo"in D&&t(1,c=D.plansTopo),"data"in D&&t(30,r=D.data),"dynamicVars"in D&&t(2,u=D.dynamicVars),"staticVars"in D&&t(3,f=D.staticVars),"pluralityVars"in D&&t(4,k=D.pluralityVars),"points"in D&&t(5,v=D.points)},s.$$.update=()=>{if(s.$$.dirty[0]&3080&&t(12,l=f.includes(O)?O:O&&O+(N==="past"?10:O==="cvap"?19:20)),s.$$.dirty[0]&4096&&t(32,a={income:D=>D[l],hhlang:D=>D[`${l}_asian`]/D[`${l}_total`],graduates:D=>(D[`${l}_hs_grad`]+D[`${l}_ba_above`])/D[`${l}_total`],families:D=>D[`${l}_benefits`]/D[`${l}_total`],workers:D=>D[`${l}_publictransport`]/D[`${l}_total`]}[l]),s.$$.dirty[0]&1073748108|s.$$.dirty[1]&3&&t(21,n=u.includes(O)&&!q?J[O]:J[l]||!f.includes(l)||l==="asiaentry"||t(31,J[l]=gt(r.map(D=>a(D.properties)).filter(tl),6),J)),s.$$.dirty[0]&536871744)for(let D=0;D<b.length;D++){const[te,B]=b[D].split(",");(te===A||te===m)&&t(16,C[b[D]]=Q(i.filter(W=>B===""+W[te])),C)}},[o,c,u,f,k,v,b,q,A,m,N,O,l,g,y,d,C,z,F,P,E,n,I,_,Z,G,Y,ye,Ce,i,r,J,a,Ge,he,Oe,ee,x,K,H]}class Zt extends Te{constructor(e){super();De(this,e,Ht,zt,Le,{censusData:29,census:0,plansTopo:1,data:30,dynamicVars:2,staticVars:3,pluralityVars:4,points:5},null,[-1,-1])}}export{Zt as default,Xt as load};

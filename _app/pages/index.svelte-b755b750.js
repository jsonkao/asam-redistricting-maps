var $t=Object.defineProperty,xt=Object.defineProperties;var es=Object.getOwnPropertyDescriptors;var Il=Object.getOwnPropertySymbols;var ls=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable;var Ll=(l,e,t)=>e in l?$t(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Nl=(l,e)=>{for(var t in e||(e={}))ls.call(e,t)&&Ll(l,t,e[t]);if(Il)for(var t of Il(e))ts.call(e,t)&&Ll(l,t,e[t]);return l},Bl=(l,e)=>xt(l,es(e));import{S as Ke,i as Qe,s as Je,e as V,t as F,c as T,a as E,g as U,d as _,b as v,J as ie,f as O,H as h,h as oe,l as X,K as ke,L as we,M as Ie,N as ce,O as Dl,P as il,Q as Se,R as Fe,T as Ae,U as Ue,V as pe,x as K,r as Be,u as te,w as je,W as al,k as N,n as B,X as Vl,Y as ss,Z as ns,I as Ye,_ as is,$ as as,D as jl,E as zl,F as Rl,G as Hl,a0 as vl,a1 as os,a2 as rs,j as Xe,m as Ze,o as $e,a3 as xe,a4 as fs,v as el,A as cs,a5 as hs,a6 as us,a7 as _s,a8 as ds,a9 as Tl}from"../chunks/vendor-10aa861a.js";import{b as Ml}from"../chunks/paths-28a87002.js";import{i as Ce,D as Fl,p as he,m as ll,c as qe,a as Ul,d as ql,u as gs,r as Gl,b as bl,e as Wl,x as ms,g as ps,f as vs,h as bs,j as ks,k as ws}from"../chunks/utils-afdfe145.js";const yl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},Sl=["44","99","ee"],ol=["asian","black","hispanic","white"],kl=["1990_earlier","1990_1999","2000_2009","2010_later"],wl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race / \u4EBA\u53E3\u5212\u5206\uFF1A\u5404\u79CD\u65CF\u7FA4"},El=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],tl=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],Es={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},sl={Chinatown:[80,500,300,220],"Chinatown Wide":[80,430,500,600],Brooklyn:[20,670,600,520],Queens:[200,290,775,600],"All of NYC":[20,0,975,1220]},Ps={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};if(typeof window=="undefined"){const[l,e,t,s]=sl[Object.keys(sl)[0]];console.log(`${l},${e},${l+t},${e+s}`)}function Yl(l,e,t){const s=l.slice();return s[49]=e[t],s}function Kl(l,e,t){const s=l.slice();return s[52]=e[t].properties,s[53]=e[t].geometry.coordinates[0],s[54]=e[t].geometry.coordinates[1],s}function Ql(l,e,t){const s=l.slice();return s[57]=e[t].outline,s}function Jl(l,e,t){const s=l.slice();return s[49]=e[t],s[61]=t,s}function Xl(l){let e,t=l[35].label+"",s;return{c(){e=V("p"),s=F(t),this.h()},l(n){e=T(n,"P",{class:!0,style:!0});var i=E(e);s=U(i,t),i.forEach(_),this.h()},h(){v(e,"class","street-inspector svelte-12yd007"),ie(e,"left",l[35].x+"px"),ie(e,"top","calc("+l[35].y+"px - 1.2em)")},m(n,i){O(n,e,i),h(e,s)},p(n,i){i[1]&16&&t!==(t=n[35].label+"")&&oe(s,t),i[1]&16&&ie(e,"left",n[35].x+"px"),i[1]&16&&ie(e,"top","calc("+n[35].y+"px - 1.2em)")},d(n){n&&_(e)}}}function Zl(l){let e,t,s,n,i;function a(){return l[39](l[61])}function o(){return l[40](l[49])}function f(){return l[41](l[49])}return{c(){e=ke("path"),this.h()},l(r){e=we(r,"path",{d:!0,fill:!0,class:!0}),E(e).forEach(_),this.h()},h(){v(e,"d",t=l[5](l[49])),v(e,"fill",s=l[6](l[49],l[10],l[11],l[9])),v(e,"class","svelte-12yd007"),Ie(e,"head",l[3][0]===Ce(l[49]))},m(r,c){O(r,e,c),n||(i=[ce(e,"click",a),ce(e,"contextmenu",Dl(o)),ce(e,"mousemove",Dl(f))],n=!0)},p(r,c){l=r,c[0]&48&&t!==(t=l[5](l[49]))&&v(e,"d",t),c[0]&3664&&s!==(s=l[6](l[49],l[10],l[11],l[9]))&&v(e,"fill",s),c[0]&24&&Ie(e,"head",l[3][0]===Ce(l[49]))},d(r){r&&_(e),n=!1,il(i)}}}function $l(l,e){let t,s,n=e[61]<e[27]&&Zl(e);return{key:l,first:null,c(){t=X(),n&&n.c(),s=X(),this.h()},l(i){t=X(),n&&n.l(i),s=X(),this.h()},h(){this.first=t},m(i,a){O(i,t,a),n&&n.m(i,a),O(i,s,a)},p(i,a){e=i,e[61]<e[27]?n?n.p(e,a):(n=Zl(e),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(i){i&&_(t),n&&n.d(i),i&&_(s)}}}function xl(l){let e,t;return{c(){e=ke("path"),this.h()},l(s){e=we(s,"path",{class:!0,d:!0}),E(e).forEach(_),this.h()},h(){v(e,"class","mesh-bg svelte-12yd007"),v(e,"d",t=l[12].includes(l[10])?l[17]:l[18])},m(s,n){O(s,e,n)},p(s,n){n[0]&398336&&t!==(t=s[12].includes(s[10])?s[17]:s[18])&&v(e,"d",t)},d(s){s&&_(e)}}}function et(l){let e,t,s,n,i=l[13],a=[];for(let o=0;o<i.length;o+=1)a[o]=lt(Ql(l,i,o));return{c(){e=ke("g");for(let o=0;o<a.length;o+=1)a[o].c()},l(o){e=we(o,"g",{});var f=E(e);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(_)},m(o,f){O(o,e,f);for(let r=0;r<a.length;r+=1)a[r].m(e,null);n=!0},p(o,f){if(f[0]&8192){i=o[13];let r;for(r=0;r<i.length;r+=1){const c=Ql(o,i,r);a[r]?a[r].p(c,f):(a[r]=lt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i(o){n||(Se(()=>{s&&s.end(1),t=Fe(e,Ae,{}),t.start()}),n=!0)},o(o){t&&t.invalidate(),s=Ue(e,Ae,{}),n=!1},d(o){o&&_(e),pe(a,o),o&&s&&s.end()}}}function lt(l){let e,t;return{c(){e=ke("path"),this.h()},l(s){e=we(s,"path",{class:!0,d:!0}),E(e).forEach(_),this.h()},h(){v(e,"class","mesh-community svelte-12yd007"),v(e,"d",t=l[57])},m(s,n){O(s,e,n)},p(s,n){n[0]&8192&&t!==(t=s[57])&&v(e,"d",t)},d(s){s&&_(e)}}}function tt(l){let e,t,s,n,i,a;return{c(){e=ke("g"),t=ke("path"),this.h()},l(o){e=we(o,"g",{});var f=E(e);t=we(f,"path",{class:!0,d:!0}),E(t).forEach(_),f.forEach(_),this.h()},h(){v(t,"class","mesh-district svelte-12yd007"),v(t,"d",s=l[37](l[15],l[23],l[22],l[28])),Ie(t,"showPluralities",l[9])},m(o,f){O(o,e,f),h(e,t),a=!0},p(o,f){(!a||f[0]&281051136&&s!==(s=o[37](o[15],o[23],o[22],o[28])))&&v(t,"d",s),f[0]&512&&Ie(t,"showPluralities",o[9])},i(o){a||(Se(()=>{i&&i.end(1),n=Fe(e,Ae,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=Ue(e,Ae,{}),a=!1},d(o){o&&_(e),o&&i&&i.end()}}}function st(l){let e,t,s,n,i,a;return{c(){e=ke("g"),t=ke("path"),this.h()},l(o){e=we(o,"g",{});var f=E(e);t=we(f,"path",{class:!0,d:!0}),E(t).forEach(_),f.forEach(_),this.h()},h(){v(t,"class","mesh-district svelte-12yd007"),v(t,"d",s=l[5](l[19](l[42],l[0])))},m(o,f){O(o,e,f),h(e,t),a=!0},p(o,f){(!a||f[0]&557089&&s!==(s=o[5](o[19](o[42],o[0]))))&&v(t,"d",s)},i(o){a||(Se(()=>{i&&i.end(1),n=Fe(e,Ae,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=Ue(e,Ae,{}),a=!1},d(o){o&&_(e),o&&i&&i.end()}}}function nt(l){let e,t,s,n,i,a=l[16],o=[];for(let c=0;c<a.length;c+=1)o[c]=at(Kl(l,a,c));const f=c=>te(o[c],1,1,()=>{o[c]=null});let r=l[34]&&ot(l);return{c(){e=ke("g");for(let c=0;c<o.length;c+=1)o[c].c();t=X(),r&&r.c(),this.h()},l(c){e=we(c,"g",{class:!0});var d=E(e);for(let g=0;g<o.length;g+=1)o[g].l(d);t=X(),r&&r.l(d),d.forEach(_),this.h()},h(){v(e,"class","labels svelte-12yd007")},m(c,d){O(c,e,d);for(let g=0;g<o.length;g+=1)o[g].m(e,null);h(e,t),r&&r.m(e,null),i=!0},p(c,d){if(d[0]&3244032|d[1]&44){a=c[16];let g;for(g=0;g<a.length;g+=1){const m=Kl(c,a,g);o[g]?(o[g].p(m,d),K(o[g],1)):(o[g]=at(m),o[g].c(),K(o[g],1),o[g].m(e,t))}for(Be(),g=a.length;g<o.length;g+=1)f(g);je()}c[34]?r?r.p(c,d):(r=ot(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){if(!i){for(let d=0;d<a.length;d+=1)K(o[d]);Se(()=>{n&&n.end(1),s=Fe(e,Ae,{}),s.start()}),i=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)te(o[d]);s&&s.invalidate(),n=Ue(e,Ae,{}),i=!1},d(c){c&&_(e),pe(o,c),r&&r.d(),c&&n&&n.end()}}}function it(l){let e,t=l[52][l[15]]+"",s,n,i,a,o,f,r,c;function d(){return l[43](l[52])}function g(){return l[44](l[52])}return{c(){e=ke("text"),s=F(t),this.h()},l(m){e=we(m,"text",{x:!0,y:!0,class:!0});var p=E(e);s=U(p,t),p.forEach(_),this.h()},h(){v(e,"x",n=l[53]),v(e,"y",i=l[54]),v(e,"class","svelte-12yd007"),Ie(e,"chosen",l[20].includes(`${l[15]},${l[52][l[15]]}`))},m(m,p){O(m,e,p),h(e,s),f=!0,r||(c=[ce(e,"click",d),ce(e,"mousemove",g),ce(e,"mouseout",l[45]),ce(e,"blur",void 0)],r=!0)},p(m,p){l=m,(!f||p[0]&98304)&&t!==(t=l[52][l[15]]+"")&&oe(s,t),(!f||p[0]&65536&&n!==(n=l[53]))&&v(e,"x",n),(!f||p[0]&65536&&i!==(i=l[54]))&&v(e,"y",i),p[0]&1146880&&Ie(e,"chosen",l[20].includes(`${l[15]},${l[52][l[15]]}`))},i(m){f||(Se(()=>{o&&o.end(1),a=Fe(e,Ae,{}),a.start()}),f=!0)},o(m){a&&a.invalidate(),o=Ue(e,Ae,{}),f=!1},d(m){m&&_(e),m&&o&&o.end(),r=!1,il(c)}}}function at(l){let e=l[15]in l[52]&&(!l[36]||l[36]&&l[33].includes(l[52][l[15]])),t,s,n=e&&it(l);return{c(){n&&n.c(),t=X()},l(i){n&&n.l(i),t=X()},m(i,a){n&&n.m(i,a),O(i,t,a),s=!0},p(i,a){a[0]&98304|a[1]&36&&(e=i[15]in i[52]&&(!i[36]||i[36]&&i[33].includes(i[52][i[15]]))),e?n?(n.p(i,a),a[0]&98304|a[1]&36&&K(n,1)):(n=it(i),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(Be(),te(n,1,1,()=>{n=null}),je())},i(i){s||(K(n),s=!0)},o(i){te(n),s=!1},d(i){n&&n.d(i),i&&_(t)}}}function ot(l){let e,t;return{c(){e=ke("path"),this.h()},l(s){e=we(s,"path",{class:!0,d:!0}),E(e).forEach(_),this.h()},h(){v(e,"class","mesh-onhover mesh-district svelte-12yd007"),v(e,"d",t=l[0]&&l[5](al(l[32],{type:l[0].type,geometries:l[0].geometries.filter(l[46])})))},m(s,n){O(s,e,n)},p(s,n){n[0]&32801|n[1]&10&&t!==(t=s[0]&&s[5](al(s[32],{type:s[0].type,geometries:s[0].geometries.filter(s[46])})))&&v(e,"d",t)},d(s){s&&_(e)}}}function rt(l){let e,t,s,n=l[31],i=[];for(let a=0;a<n.length;a+=1)i[a]=ft(Yl(l,n,a));return{c(){e=ke("g");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=we(a,"g",{class:!0});var o=E(e);for(let f=0;f<i.length;f+=1)i[f].l(o);o.forEach(_),this.h()},h(){v(e,"class","streets svelte-12yd007"),Ie(e,"showStreets",l[29])},m(a,o){O(a,e,o);for(let f=0;f<i.length;f+=1)i[f].m(e,null);t||(s=ce(e,"mousemove",l[48]),t=!0)},p(a,o){if(o[0]&536870944|o[1]&129){n=a[31];let f;for(f=0;f<n.length;f+=1){const r=Yl(a,n,f);i[f]?i[f].p(r,o):(i[f]=ft(r),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=n.length}o[0]&536870912&&Ie(e,"showStreets",a[29])},d(a){a&&_(e),pe(i,a),t=!1,s()}}}function ft(l){let e,t,s,n;function i(...a){return l[47](l[49],...a)}return{c(){e=ke("path"),this.h()},l(a){e=we(a,"path",{d:!0,class:!0}),E(e).forEach(_),this.h()},h(){v(e,"d",t=l[5](l[49])),v(e,"class","svelte-12yd007")},m(a,o){O(a,e,o),s||(n=ce(e,"click",Dl(i)),s=!0)},p(a,o){l=a,o[0]&32|o[1]&1&&t!==(t=l[5](l[49]))&&v(e,"d",t)},d(a){a&&_(e),s=!1,n()}}}function Ds(l){let e,t,s,n=[],i=new Map,a,o,f=l[14].includes("communities"),r,c=l[14].includes("plans")&&!l[7],d,g,m=l[14].includes("plans")||l[7],p,b,y,D,A,I=l[35]&&Xl(l),j=l[4];const Q=R=>Ce(R[49]);for(let R=0;R<j.length;R+=1){let u=Jl(l,j,R),P=Q(u);i.set(P,n[R]=$l(P,u))}let Y=l[18]&&xl(l),G=f&&et(l),C=c&&tt(l),L=l[7]&&st(l),M=m&&nt(l),S=l[31]&&rt(l);return{c(){I&&I.c(),e=N(),t=ke("svg"),s=ke("g");for(let R=0;R<n.length;R+=1)n[R].c();a=ke("g"),Y&&Y.c(),o=X(),G&&G.c(),r=X(),C&&C.c(),d=X(),L&&L.c(),g=X(),M&&M.c(),p=X(),S&&S.c(),this.h()},l(R){I&&I.l(R),e=B(R),t=we(R,"svg",{viewBox:!0,style:!0,class:!0});var u=E(t);s=we(u,"g",{class:!0});var P=E(s);for(let Z=0;Z<n.length;Z+=1)n[Z].l(P);P.forEach(_),a=we(u,"g",{class:!0});var z=E(a);Y&&Y.l(z),o=X(),G&&G.l(z),r=X(),C&&C.l(z),d=X(),L&&L.l(z),g=X(),M&&M.l(z),p=X(),S&&S.l(z),z.forEach(_),u.forEach(_),this.h()},h(){v(s,"class","block-groups svelte-12yd007"),v(a,"class","meshes svelte-12yd007"),v(t,"viewBox",b=l[1].join(" ")),ie(t,"--font-size",(l[2]||.8)+"em"),ie(t,"--mesh-thin",l[30]?.6:.2),ie(t,"--mesh-thick",l[30]?2.2:1.1),v(t,"class","svelte-12yd007")},m(R,u){I&&I.m(R,u),O(R,e,u),O(R,t,u),h(t,s);for(let P=0;P<n.length;P+=1)n[P].m(s,null);h(t,a),Y&&Y.m(a,null),h(a,o),G&&G.m(a,null),h(a,r),C&&C.m(a,null),h(a,d),L&&L.m(a,null),h(a,g),M&&M.m(a,null),h(a,p),S&&S.m(a,null),y=!0,D||(A=[ce(t,"mousedown",function(){Vl(l[24])&&l[24].apply(this,arguments)}),ce(t,"mouseup",function(){Vl(l[25])&&l[25].apply(this,arguments)})],D=!0)},p(R,u){l=R,l[35]?I?I.p(l,u):(I=Xl(l),I.c(),I.m(e.parentNode,e)):I&&(I.d(1),I=null),u[0]&201363448&&(j=l[4],n=ss(n,u,Q,1,l,j,i,s,ns,$l,null,Jl)),l[18]?Y?Y.p(l,u):(Y=xl(l),Y.c(),Y.m(a,o)):Y&&(Y.d(1),Y=null),u[0]&16384&&(f=l[14].includes("communities")),f?G?(G.p(l,u),u[0]&16384&&K(G,1)):(G=et(l),G.c(),K(G,1),G.m(a,r)):G&&(Be(),te(G,1,1,()=>{G=null}),je()),u[0]&16512&&(c=l[14].includes("plans")&&!l[7]),c?C?(C.p(l,u),u[0]&16512&&K(C,1)):(C=tt(l),C.c(),K(C,1),C.m(a,d)):C&&(Be(),te(C,1,1,()=>{C=null}),je()),l[7]?L?(L.p(l,u),u[0]&128&&K(L,1)):(L=st(l),L.c(),K(L,1),L.m(a,g)):L&&(Be(),te(L,1,1,()=>{L=null}),je()),u[0]&16512&&(m=l[14].includes("plans")||l[7]),m?M?(M.p(l,u),u[0]&16512&&K(M,1)):(M=nt(l),M.c(),K(M,1),M.m(a,p)):M&&(Be(),te(M,1,1,()=>{M=null}),je()),l[31]?S?S.p(l,u):(S=rt(l),S.c(),S.m(a,null)):S&&(S.d(1),S=null),(!y||u[0]&2&&b!==(b=l[1].join(" ")))&&v(t,"viewBox",b),(!y||u[0]&4)&&ie(t,"--font-size",(l[2]||.8)+"em"),(!y||u[0]&1073741824)&&ie(t,"--mesh-thin",l[30]?.6:.2),(!y||u[0]&1073741824)&&ie(t,"--mesh-thick",l[30]?2.2:1.1)},i(R){y||(K(G),K(C),K(L),K(M),y=!0)},o(R){te(G),te(C),te(L),te(M),y=!1},d(R){I&&I.d(R),R&&_(e),R&&_(t);for(let u=0;u<n.length;u+=1)n[u].d();Y&&Y.d(),G&&G.d(),C&&C.d(),L&&L.d(),M&&M.d(),S&&S.d(),D=!1,il(A)}}}function Vs(l,e,t){let s,n,i,{viewBox:a,labelSize:o,draggedBgs:f,data:r,path:c,color:d,changingLines:g,neighbor:m,showPluralities:p,metric:b,period:y,tractVars:D,drawings:A,panels:I,plan:j,points:Q=[],tractMesh:Y,bgMesh:G,mesh:C,aggregates:L,obj:M,handleLabelClick:S,congressPlans:R,plans:u,startDrag:P,endDrag:z,handleMouseMove:Z,viewCutoff:se,showOnlyFocusDistricts:ne,showStreets:H,presentationMode:W,streets:re}=e;function Me(){if(!!i)return c(n?al(i,{type:M.type,geometries:M.geometries.filter(w=>s.includes(w.properties[j]))}):al(i,M,(w,de)=>Fl(w)!==Fl(de)))}let ue,ee;function J({pageX:w,pageY:de},{properties:{Label:Ge}}){t(35,ee={x:w,y:de,label:Ge})}const $=w=>g&&j.includes("_")&&m(w),x=w=>console.log(w.properties),Pe=w=>Z(w),De=(w,de)=>w.properties[j]!==de.properties[j],ve=w=>S(`${j},${w[j]}`),ae=w=>t(34,ue=w[j]),Ee=()=>t(34,ue=null),be=w=>ue===w.properties[j],Ve=(w,de)=>H&&J(de,w),ye=()=>t(35,ee=null);return l.$$set=w=>{"viewBox"in w&&t(1,a=w.viewBox),"labelSize"in w&&t(2,o=w.labelSize),"draggedBgs"in w&&t(3,f=w.draggedBgs),"data"in w&&t(4,r=w.data),"path"in w&&t(5,c=w.path),"color"in w&&t(6,d=w.color),"changingLines"in w&&t(7,g=w.changingLines),"neighbor"in w&&t(8,m=w.neighbor),"showPluralities"in w&&t(9,p=w.showPluralities),"metric"in w&&t(10,b=w.metric),"period"in w&&t(11,y=w.period),"tractVars"in w&&t(12,D=w.tractVars),"drawings"in w&&t(13,A=w.drawings),"panels"in w&&t(14,I=w.panels),"plan"in w&&t(15,j=w.plan),"points"in w&&t(16,Q=w.points),"tractMesh"in w&&t(17,Y=w.tractMesh),"bgMesh"in w&&t(18,G=w.bgMesh),"mesh"in w&&t(19,C=w.mesh),"aggregates"in w&&t(20,L=w.aggregates),"obj"in w&&t(0,M=w.obj),"handleLabelClick"in w&&t(21,S=w.handleLabelClick),"congressPlans"in w&&t(22,R=w.congressPlans),"plans"in w&&t(23,u=w.plans),"startDrag"in w&&t(24,P=w.startDrag),"endDrag"in w&&t(25,z=w.endDrag),"handleMouseMove"in w&&t(26,Z=w.handleMouseMove),"viewCutoff"in w&&t(27,se=w.viewCutoff),"showOnlyFocusDistricts"in w&&t(28,ne=w.showOnlyFocusDistricts),"showStreets"in w&&t(29,H=w.showStreets),"presentationMode"in w&&t(30,W=w.presentationMode),"streets"in w&&t(31,re=w.streets)},l.$$.update=()=>{l.$$.dirty[0]&32768&&t(33,s=Ps[j]),l.$$.dirty[0]&268435456|l.$$.dirty[1]&4&&t(36,n=ne&&s),l.$$.dirty[0]&12615680&&t(32,i=j.startsWith("congress")?R:u),l.$$.dirty[0]&32768|l.$$.dirty[1]&2&&t(0,M=i?i.objects[j]:void 0)},[M,a,o,f,r,c,d,g,m,p,b,y,D,A,I,j,Q,Y,G,C,L,S,R,u,P,z,Z,se,ne,H,W,re,i,s,ue,ee,n,Me,J,$,x,Pe,De,ve,ae,Ee,be,Ve,ye]}class Ts extends Ke{constructor(e){super();Qe(this,e,Vs,Ds,Je,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,drawings:13,panels:14,plan:15,points:16,tractMesh:17,bgMesh:18,mesh:19,aggregates:20,obj:0,handleLabelClick:21,congressPlans:22,plans:23,startDrag:24,endDrag:25,handleMouseMove:26,viewCutoff:27,showOnlyFocusDistricts:28,showStreets:29,presentationMode:30,streets:31},null,[-1,-1])}}function ct(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ht(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ut(l,e,t){const s=l.slice();return s[16]=e[t],s}function _t(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function dt(l,e,t){const s=l.slice();return s[10]=e[t],s}function gt(l,e,t){const s=l.slice();return s[13]=e[t],s}function Ms(l){let e,t,s=l[9],n=[];for(let o=0;o<s.length;o+=1)n[o]=mt(ht(l,s,o));let i=l[9],a=[];for(let o=0;o<i.length;o+=1)a[o]=pt(ct(l,i,o));return{c(){e=V("div");for(let o=0;o<n.length;o+=1)n[o].c();t=N();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0,style:!0});var f=E(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=B(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(_),this.h()},h(){v(e,"class","color-legend svelte-6sr79v"),ie(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.9em)"),Ie(e,"pctasian",l[3].includes(l[4]))},m(o,f){O(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);h(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const c=ht(o,s,r);n[r]?n[r].p(c,f):(n[r]=mt(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&536){i=o[9];let r;for(r=0;r<i.length;r+=1){const c=ct(o,i,r);a[r]?a[r].p(c,f):(a[r]=pt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&24&&ie(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.9em)"),f&24&&Ie(e,"pctasian",o[3].includes(o[4]))},d(o){o&&_(e),pe(n,o),pe(a,o)}}}function ys(l){let e,t,s=l[8],n=[];for(let o=0;o<s.length;o+=1)n[o]=vt(_t(l,s,o));let i=l[8],a=[];for(let o=0;o<i.length;o+=1)a[o]=bt(ut(l,i,o));return{c(){e=V("div");for(let o=0;o<n.length;o+=1)n[o].c();t=N();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=B(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(_),this.h()},h(){v(e,"class","color-legend plurality-legend svelte-6sr79v")},m(o,f){O(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);h(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const c=_t(o,s,r);n[r]?n[r].p(c,f):(n[r]=vt(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&256){i=o[8];let r;for(r=0;r<i.length;r+=1){const c=ut(o,i,r);a[r]?a[r].p(c,f):(a[r]=bt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},d(o){o&&_(e),pe(n,o),pe(a,o)}}}function Ss(l){let e,t,s,n,i,a,o,f,r,c,d,g,m=l[0],p=[];for(let b=0;b<m.length;b+=1)p[b]=wt(dt(l,m,b));return{c(){e=V("div");for(let b=0;b<p.length;b+=1)p[b].c();t=N(),s=V("p"),n=V("span"),i=F("Weak plurality"),a=N(),o=V("p"),f=N(),r=V("p"),c=F("Majority"),d=N(),g=V("p"),this.h()},l(b){e=T(b,"DIV",{class:!0});var y=E(e);for(let j=0;j<p.length;j+=1)p[j].l(y);t=B(y),s=T(y,"P",{class:!0});var D=E(s);n=T(D,"SPAN",{});var A=E(n);i=U(A,"Weak plurality"),A.forEach(_),D.forEach(_),a=B(y),o=T(y,"P",{class:!0}),E(o).forEach(_),f=B(y),r=T(y,"P",{class:!0});var I=E(r);c=U(I,"Majority"),I.forEach(_),d=B(y),g=T(y,"P",{class:!0}),E(g).forEach(_),y.forEach(_),this.h()},h(){v(s,"class","col-head svelte-6sr79v"),v(o,"class","col-head svelte-6sr79v"),v(r,"class","col-head svelte-6sr79v"),v(g,"class","col-head svelte-6sr79v"),v(e,"class","legend svelte-6sr79v")},m(b,y){O(b,e,y);for(let D=0;D<p.length;D+=1)p[D].m(e,null);h(e,t),h(e,s),h(s,n),h(n,i),h(e,a),h(e,o),h(e,f),h(e,r),h(r,c),h(e,d),h(e,g)},p(b,y){if(y&7){m=b[0];let D;for(D=0;D<m.length;D+=1){const A=dt(b,m,D);p[D]?p[D].p(A,y):(p[D]=wt(A),p[D].c(),p[D].m(e,t))}for(;D<p.length;D+=1)p[D].d(1);p.length=m.length}},d(b){b&&_(e),pe(p,b)}}}function mt(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),E(e).forEach(_),this.h()},h(){ie(e,"background-color",l[3].includes(l[4])?El[l[20]]:tl[l[20]])},m(t,s){O(t,e,s)},p(t,s){s&24&&ie(e,"background-color",t[3].includes(t[4])?El[t[20]]:tl[t[20]])},d(t){t&&_(e)}}}function pt(l){let e,t,s=(l[9][l[9].length-1]<1?he(l[21],0):l[9][l[9].length-1]>1e3?ll(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?"+ Asian <br/>(\u4E9A\u88D4\u4EBA\u53E3)":"")+"",n;return{c(){e=V("p"),t=new is,n=N(),this.h()},l(i){e=T(i,"P",{class:!0});var a=E(e);t=as(a),n=B(a),a.forEach(_),this.h()},h(){t.a=n,v(e,"class","svelte-6sr79v")},m(i,a){O(i,e,a),t.m(s,e),h(e,n)},p(i,a){a&536&&s!==(s=(i[9][i[9].length-1]<1?he(i[21],0):i[9][i[9].length-1]>1e3?ll(i[21]):i[21])+(i[3].includes(i[4])&&i[20]===i[9].length-1?"+ Asian <br/>(\u4E9A\u88D4\u4EBA\u53E3)":"")+"")&&t.p(s)},d(i){i&&_(e)}}}function vt(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),E(e).forEach(_),this.h()},h(){ie(e,"background-color",tl[l[20]])},m(t,s){O(t,e,s)},p:Ye,d(t){t&&_(e)}}}function bt(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=V("p"),s=F(t),this.h()},l(n){e=T(n,"P",{class:!0});var i=E(e);s=U(i,t),i.forEach(_),this.h()},h(){v(e,"class","svelte-6sr79v")},m(n,i){O(n,e,i),h(e,s)},p(n,i){i&256&&t!==(t=n[16].replace("_","-")+"")&&oe(s,t)},d(n){n&&_(e)}}}function kt(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),E(e).forEach(_),this.h()},h(){ie(e,"background-color",l[2][l[10]]+l[13])},m(t,s){O(t,e,s)},p(t,s){s&7&&ie(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&_(e)}}}function wt(l){let e,t,s=qe(l[10])+"",n,i=l[1],a=[];for(let o=0;o<i.length;o+=1)a[o]=kt(gt(l,i,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=N(),t=V("p"),n=F(s),this.h()},l(o){for(let r=0;r<a.length;r+=1)a[r].l(o);e=B(o),t=T(o,"P",{class:!0});var f=E(t);n=U(f,s),f.forEach(_),this.h()},h(){v(t,"class","row-label svelte-6sr79v")},m(o,f){for(let r=0;r<a.length;r+=1)a[r].m(o,f);O(o,e,f),O(o,t,f),h(t,n)},p(o,f){if(f&7){i=o[1];let r;for(r=0;r<i.length;r+=1){const c=gt(o,i,r);a[r]?a[r].p(c,f):(a[r]=kt(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&1&&s!==(s=qe(o[10])+"")&&oe(n,s)},d(o){pe(a,o),o&&_(e),o&&_(t)}}}function As(l){let e,t,s;function n(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?Ss:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?ys:Ms)}let i=n(l,-1),a=i(l);return{c(){a.c(),s=X()},l(o){a.l(o),s=X()},m(o,f){a.m(o,f),O(o,s,f)},p(o,[f]){i===(i=n(o,f))&&a?a.p(o,f):(a.d(1),a=i(o),a&&(a.c(),a.m(s.parentNode,s)))},i:Ye,o:Ye,d(o){a.d(o),o&&_(s)}}}function Cs(l,e,t){let{groups:s,levels:n,colors:i,dynamicVars:a,variable:o,metric:f,showPluralities:r,pluralityVars:c,periods:d,breaks:g}=e;return l.$$set=m=>{"groups"in m&&t(0,s=m.groups),"levels"in m&&t(1,n=m.levels),"colors"in m&&t(2,i=m.colors),"dynamicVars"in m&&t(3,a=m.dynamicVars),"variable"in m&&t(4,o=m.variable),"metric"in m&&t(5,f=m.metric),"showPluralities"in m&&t(6,r=m.showPluralities),"pluralityVars"in m&&t(7,c=m.pluralityVars),"periods"in m&&t(8,d=m.periods),"breaks"in m&&t(9,g=m.breaks)},[s,n,i,a,o,f,r,c,d,g]}class Os extends Ke{constructor(e){super();Qe(this,e,Cs,As,Je,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function Et(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function Pt(l,e,t){const s=l.slice();return s[18]=e[t],s}function Dt(l,e,t){const s=l.slice();return s[12]=e[t],s}function Is(l){let e,t=l[6],s=[];for(let n=0;n<t.length;n+=1)s[n]=Tt(Et(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=X()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=X()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);O(n,e,i)},p(n,i){if(i&200){t=n[6];let a;for(a=0;a<t.length;a+=1){const o=Et(n,t,a);s[a]?s[a].p(o,i):(s[a]=Tt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){pe(s,n),n&&_(e)}}}function Ls(l){let e,t=l[0],s=[];for(let n=0;n<t.length;n+=1)s[n]=St(Dt(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=X()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=X()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);O(n,e,i)},p(n,i){if(i&567){t=n[0];let a;for(a=0;a<t.length;a+=1){const o=Dt(n,t,a);s[a]?s[a].p(o,i):(s[a]=St(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){pe(s,n),n&&_(e)}}}function Vt(l){let e,t,s=qe(l[18])+"",n,i,a,o=he(l[9]["cvap19"+l[18]])+"",f,r,c,d=he(l[9]["pop20"+l[18]])+"",g,m;return{c(){e=V("tr"),t=V("td"),n=F(s),i=N(),a=V("td"),f=F(o),r=N(),c=V("td"),g=F(d),m=N(),this.h()},l(p){e=T(p,"TR",{class:!0});var b=E(e);t=T(b,"TD",{class:!0});var y=E(t);n=U(y,s),y.forEach(_),i=B(b),a=T(b,"TD",{class:!0});var D=E(a);f=U(D,o),D.forEach(_),r=B(b),c=T(b,"TD",{class:!0});var A=E(c);g=U(A,d),A.forEach(_),m=B(b),b.forEach(_),this.h()},h(){v(t,"class","svelte-1avkicx"),v(a,"class","svelte-1avkicx"),v(c,"class","svelte-1avkicx"),v(e,"class","svelte-1avkicx")},m(p,b){O(p,e,b),h(e,t),h(t,n),h(e,i),h(e,a),h(a,f),h(e,r),h(e,c),h(c,g),h(e,m)},p(p,b){b&8&&s!==(s=qe(p[18])+"")&&oe(n,s),b&72&&o!==(o=he(p[9]["cvap19"+p[18]])+"")&&oe(f,o),b&72&&d!==(d=he(p[9]["pop20"+p[18]])+"")&&oe(g,d)},d(p){p&&_(e)}}}function Tt(l){let e,t,s,n=(l[15]||"COI"+(l[17]+1))+"",i,a,o,f,r,c,d,g,m,p,b,y,D,A,I,j,Q,Y,G=ll(l[9].income)+"",C,L,M,S,R=he(l[9].hhlang)+"",u,P,z,Z,se=he(l[9].benefits)+"",ne,H,W,re;function Me(){return l[11](l[17])}let ue=l[3],ee=[];for(let J=0;J<ue.length;J+=1)ee[J]=Vt(Pt(l,ue,J));return{c(){e=V("div"),t=V("p"),s=V("i"),i=F(n),a=N(),o=V("button"),f=F("\u{1F5D1}"),r=N(),c=V("table"),d=V("tr"),g=V("th"),m=N(),p=V("th"),b=F("CVAP"),y=N(),D=V("th"),A=F("Pop."),I=N();for(let J=0;J<ee.length;J+=1)ee[J].c();j=N(),Q=V("p"),Y=F("Income: "),C=F(G),L=N(),M=V("p"),S=F("Asian and LEP: "),u=F(R),P=N(),z=V("p"),Z=F("Pct. gov't benefits: "),ne=F(se),H=N(),this.h()},l(J){e=T(J,"DIV",{});var $=E(e);t=T($,"P",{class:!0});var x=E(t);s=T(x,"I",{});var Pe=E(s);i=U(Pe,n),Pe.forEach(_),a=B(x),o=T(x,"BUTTON",{});var De=E(o);f=U(De,"\u{1F5D1}"),De.forEach(_),x.forEach(_),r=B($),c=T($,"TABLE",{class:!0});var ve=E(c);d=T(ve,"TR",{class:!0});var ae=E(d);g=T(ae,"TH",{class:!0}),E(g).forEach(_),m=B(ae),p=T(ae,"TH",{class:!0});var Ee=E(p);b=U(Ee,"CVAP"),Ee.forEach(_),y=B(ae),D=T(ae,"TH",{class:!0});var be=E(D);A=U(be,"Pop."),be.forEach(_),ae.forEach(_),I=B(ve);for(let de=0;de<ee.length;de+=1)ee[de].l(ve);ve.forEach(_),j=B($),Q=T($,"P",{class:!0});var Ve=E(Q);Y=U(Ve,"Income: "),C=U(Ve,G),Ve.forEach(_),L=B($),M=T($,"P",{class:!0});var ye=E(M);S=U(ye,"Asian and LEP: "),u=U(ye,R),ye.forEach(_),P=B($),z=T($,"P",{class:!0});var w=E(z);Z=U(w,"Pct. gov't benefits: "),ne=U(w,se),w.forEach(_),H=B($),$.forEach(_),this.h()},h(){v(t,"class","svelte-1avkicx"),v(g,"class","svelte-1avkicx"),v(p,"class","svelte-1avkicx"),v(D,"class","svelte-1avkicx"),v(d,"class","svelte-1avkicx"),v(c,"class","svelte-1avkicx"),v(Q,"class","table-footer svelte-1avkicx"),v(M,"class","table-footer svelte-1avkicx"),v(z,"class","table-footer svelte-1avkicx")},m(J,$){O(J,e,$),h(e,t),h(t,s),h(s,i),h(t,a),h(t,o),h(o,f),h(e,r),h(e,c),h(c,d),h(d,g),h(d,m),h(d,p),h(p,b),h(d,y),h(d,D),h(D,A),h(c,I);for(let x=0;x<ee.length;x+=1)ee[x].m(c,null);h(e,j),h(e,Q),h(Q,Y),h(Q,C),h(e,L),h(e,M),h(M,S),h(M,u),h(e,P),h(e,z),h(z,Z),h(z,ne),h(e,H),W||(re=ce(o,"click",Me),W=!0)},p(J,$){if(l=J,$&64&&n!==(n=(l[15]||"COI"+(l[17]+1))+"")&&oe(i,n),$&72){ue=l[3];let x;for(x=0;x<ue.length;x+=1){const Pe=Pt(l,ue,x);ee[x]?ee[x].p(Pe,$):(ee[x]=Vt(Pe),ee[x].c(),ee[x].m(c,null))}for(;x<ee.length;x+=1)ee[x].d(1);ee.length=ue.length}$&64&&G!==(G=ll(l[9].income)+"")&&oe(C,G),$&64&&R!==(R=he(l[9].hhlang)+"")&&oe(u,R),$&64&&se!==(se=he(l[9].benefits)+"")&&oe(ne,se)},d(J){J&&_(e),pe(ee,J),W=!1,re()}}}function Mt(l){let e,t,s,n=Ul(l[12])+"",i,a,o,f,r,c,d,g,m,p,b,y,D,A,I,j,Q,Y=he(l[9][l[12]].cvap10asian)+"",G,C,L,M=he(l[9][l[12]].pop10asian)+"",S,R,u,P,z,Z,se,ne=he(l[9][l[12]].cvap19asian)+"",H,W,re,Me=he(l[9][l[12]].pop20asian)+"",ue,ee,J,$,x,Pe,De,ve=he(l[9][l[12]].pct_increase)+"",ae,Ee,be,Ve=he(l[9][l[12]].pct_increase_cvap)+"",ye,w,de,Ge,rl;function Pl(){return l[10](l[12])}let me=l[4]&&l[2]in l[5]&&yt(l);return{c(){e=V("div"),t=V("p"),s=V("i"),i=F(n),a=N(),o=V("table"),f=V("tr"),r=V("th"),c=N(),d=V("th"),g=F("CVAP"),m=N(),p=V("th"),b=F("Pop."),y=N(),D=V("tr"),A=V("td"),I=F("Asians in 2010"),j=N(),Q=V("td"),G=F(Y),C=N(),L=V("td"),S=F(M),R=N(),u=V("tr"),P=V("td"),z=F("Asians now"),Z=N(),se=V("td"),H=F(ne),W=N(),re=V("td"),ue=F(Me),ee=N(),J=V("tr"),$=V("td"),x=F("Asian increase"),Pe=N(),De=V("td"),ae=F(ve),Ee=N(),be=V("td"),ye=F(Ve),w=N(),me&&me.c(),de=N(),this.h()},l(Le){e=T(Le,"DIV",{class:!0});var ge=E(e);t=T(ge,"P",{class:!0});var fl=E(t);s=T(fl,"I",{});var cl=E(s);i=U(cl,n),cl.forEach(_),fl.forEach(_),a=B(ge),o=T(ge,"TABLE",{class:!0});var Oe=E(o);f=T(Oe,"TR",{class:!0});var ze=E(f);r=T(ze,"TH",{class:!0}),E(r).forEach(_),c=B(ze),d=T(ze,"TH",{class:!0});var hl=E(d);g=U(hl,"CVAP"),hl.forEach(_),m=B(ze),p=T(ze,"TH",{class:!0});var ul=E(p);b=U(ul,"Pop."),ul.forEach(_),ze.forEach(_),y=B(Oe),D=T(Oe,"TR",{class:!0});var Re=E(D);A=T(Re,"TD",{class:!0});var _l=E(A);I=U(_l,"Asians in 2010"),_l.forEach(_),j=B(Re),Q=T(Re,"TD",{class:!0});var dl=E(Q);G=U(dl,Y),dl.forEach(_),C=B(Re),L=T(Re,"TD",{class:!0});var gl=E(L);S=U(gl,M),gl.forEach(_),Re.forEach(_),R=B(Oe),u=T(Oe,"TR",{class:!0});var He=E(u);P=T(He,"TD",{class:!0});var ml=E(P);z=U(ml,"Asians now"),ml.forEach(_),Z=B(He),se=T(He,"TD",{class:!0});var k=E(se);H=U(k,ne),k.forEach(_),W=B(He),re=T(He,"TD",{class:!0});var le=E(re);ue=U(le,Me),le.forEach(_),He.forEach(_),ee=B(Oe),J=T(Oe,"TR",{class:!0});var q=E(J);$=T(q,"TD",{class:!0});var fe=E($);x=U(fe,"Asian increase"),fe.forEach(_),Pe=B(q),De=T(q,"TD",{class:!0});var _e=E(De);ae=U(_e,ve),_e.forEach(_),Ee=B(q),be=T(q,"TD",{class:!0});var Ne=E(be);ye=U(Ne,Ve),Ne.forEach(_),q.forEach(_),Oe.forEach(_),w=B(ge),me&&me.l(ge),de=B(ge),ge.forEach(_),this.h()},h(){v(t,"class","svelte-1avkicx"),v(r,"class","svelte-1avkicx"),v(d,"class","svelte-1avkicx"),v(p,"class","svelte-1avkicx"),v(f,"class","svelte-1avkicx"),v(A,"class","svelte-1avkicx"),v(Q,"class","svelte-1avkicx"),v(L,"class","svelte-1avkicx"),v(D,"class","svelte-1avkicx"),v(P,"class","svelte-1avkicx"),v(se,"class","svelte-1avkicx"),v(re,"class","svelte-1avkicx"),v(u,"class","svelte-1avkicx"),v($,"class","svelte-1avkicx"),v(De,"class","svelte-1avkicx"),v(be,"class","svelte-1avkicx"),v(J,"class","svelte-1avkicx"),v(o,"class","svelte-1avkicx"),v(e,"class","district-aggregate svelte-1avkicx")},m(Le,ge){O(Le,e,ge),h(e,t),h(t,s),h(s,i),h(e,a),h(e,o),h(o,f),h(f,r),h(f,c),h(f,d),h(d,g),h(f,m),h(f,p),h(p,b),h(o,y),h(o,D),h(D,A),h(A,I),h(D,j),h(D,Q),h(Q,G),h(D,C),h(D,L),h(L,S),h(o,R),h(o,u),h(u,P),h(P,z),h(u,Z),h(u,se),h(se,H),h(u,W),h(u,re),h(re,ue),h(o,ee),h(o,J),h(J,$),h($,x),h(J,Pe),h(J,De),h(De,ae),h(J,Ee),h(J,be),h(be,ye),h(e,w),me&&me.m(e,null),h(e,de),Ge||(rl=ce(t,"click",Pl),Ge=!0)},p(Le,ge){l=Le,ge&1&&n!==(n=Ul(l[12])+"")&&oe(i,n),ge&513&&Y!==(Y=he(l[9][l[12]].cvap10asian)+"")&&oe(G,Y),ge&513&&M!==(M=he(l[9][l[12]].pop10asian)+"")&&oe(S,M),ge&513&&ne!==(ne=he(l[9][l[12]].cvap19asian)+"")&&oe(H,ne),ge&513&&Me!==(Me=he(l[9][l[12]].pop20asian)+"")&&oe(ue,Me),ge&513&&ve!==(ve=he(l[9][l[12]].pct_increase)+"")&&oe(ae,ve),ge&513&&Ve!==(Ve=he(l[9][l[12]].pct_increase_cvap)+"")&&oe(ye,Ve),l[4]&&l[2]in l[5]?me?me.p(l,ge):(me=yt(l),me.c(),me.m(e,de)):me&&(me.d(1),me=null)},d(Le){Le&&_(e),me&&me.d(),Ge=!1,rl()}}}function yt(l){let e,t,s=ll(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+ql(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",n;return{c(){e=V("p"),t=F("Income: "),n=F(s),this.h()},l(i){e=T(i,"P",{class:!0});var a=E(e);t=U(a,"Income: "),n=U(a,s),a.forEach(_),this.h()},h(){v(e,"class","table-footer svelte-1avkicx")},m(i,a){O(i,e,a),h(e,t),h(e,n)},p(i,a){a&565&&s!==(s=ll(i[9][i[12]].income)+(i[4]&&i[2]in i[5]?"; "+ql(i[9][i[12]].pop20_total-i[5][i[2]]):"")+"")&&oe(n,s)},d(i){i&&_(e)}}}function St(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&Mt(l);return{c(){s&&s.c(),t=X()},l(n){s&&s.l(n),t=X()},m(n,i){s&&s.m(n,i),O(n,t,i)},p(n,i){i&5&&(e=n[12].split(",")[0].split("_")[0]===n[2].split("_")[0]),e?s?s.p(n,i):(s=Mt(n),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&_(t)}}}function Ns(l){let e;function t(i,a){if(i[8]==="districts")return Ls;if(i[8]==="community")return Is}let s=t(l),n=s&&s(l);return{c(){n&&n.c(),e=X()},l(i){n&&n.l(i),e=X()},m(i,a){n&&n.m(i,a),O(i,e,a)},p(i,[a]){s===(s=t(i))&&n?n.p(i,a):(n&&n.d(1),n=s&&s(i),n&&(n.c(),n.m(e.parentNode,e)))},i:Ye,o:Ye,d(i){n&&n.d(i),i&&_(e)}}}function Bs(l,e,t){let{aggregates:s,handleLabelClick:n,plan:i,stats:a,groups:o,changingLines:f,idealValues:r}=e,{drawings:c=[]}=e,{delDrawing:d=void 0}=e,{type:g="districts"}=e;const m=b=>n(b),p=b=>d(b);return l.$$set=b=>{"aggregates"in b&&t(0,s=b.aggregates),"handleLabelClick"in b&&t(1,n=b.handleLabelClick),"plan"in b&&t(2,i=b.plan),"stats"in b&&t(9,a=b.stats),"groups"in b&&t(3,o=b.groups),"changingLines"in b&&t(4,f=b.changingLines),"idealValues"in b&&t(5,r=b.idealValues),"drawings"in b&&t(6,c=b.drawings),"delDrawing"in b&&t(7,d=b.delDrawing),"type"in b&&t(8,g=b.type)},[s,n,i,o,f,r,c,d,g,a,m,p]}class js extends Ke{constructor(e){super();Qe(this,e,Bs,Ns,Je,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}const zs=l=>({}),At=l=>({}),Rs=l=>({}),Ct=l=>({});function Ot(l){let e,t,s,n;const i=l[4].body,a=jl(i,l,l[3],At);return{c(){e=V("div"),a&&a.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var f=E(e);a&&a.l(f),f.forEach(_),this.h()},h(){v(e,"class","svelte-a3zm9u")},m(o,f){O(o,e,f),a&&a.m(e,null),n=!0},p(o,f){a&&a.p&&(!n||f&8)&&zl(a,i,o,o[3],n?Hl(i,o[3],f,zs):Rl(o[3]),At)},i(o){n||(K(a,o),Se(()=>{s&&s.end(1),t=Fe(e,vl,{}),t.start()}),n=!0)},o(o){te(a,o),t&&t.invalidate(),s=Ue(e,vl,{}),n=!1},d(o){o&&_(e),a&&a.d(o),o&&s&&s.end()}}}function Hs(l){let e,t,s,n=(l[2]==="plans"?"Districts / \u533A\u57DF\u5212\u5206":l[2]==="views"?"Views / \u9009\u62E9\u533A":qe(l[2]))+"",i,a,o=(l[0].includes(l[2])?"\u2191":"\u2193")+"",f,r,c,d=l[0].includes(l[2]),g,m,p;const b=l[4].title,y=jl(b,l,l[3],Ct);let D=d&&Ot(l);return{c(){e=V("div"),t=V("h3"),s=V("button"),i=F(n),a=N(),f=F(o),r=N(),y&&y.c(),c=N(),D&&D.c(),this.h()},l(A){e=T(A,"DIV",{class:!0});var I=E(e);t=T(I,"H3",{class:!0});var j=E(t);s=T(j,"BUTTON",{});var Q=E(s);i=U(Q,n),a=B(Q),f=U(Q,o),Q.forEach(_),r=B(j),y&&y.l(j),j.forEach(_),c=B(I),D&&D.l(I),I.forEach(_),this.h()},h(){v(t,"class","svelte-a3zm9u"),v(e,"class","panel svelte-a3zm9u")},m(A,I){O(A,e,I),h(e,t),h(t,s),h(s,i),h(s,a),h(s,f),h(t,r),y&&y.m(t,null),h(e,c),D&&D.m(e,null),g=!0,m||(p=ce(s,"click",l[5]),m=!0)},p(A,[I]){(!g||I&4)&&n!==(n=(A[2]==="plans"?"Districts / \u533A\u57DF\u5212\u5206":A[2]==="views"?"Views / \u9009\u62E9\u533A":qe(A[2]))+"")&&oe(i,n),(!g||I&5)&&o!==(o=(A[0].includes(A[2])?"\u2191":"\u2193")+"")&&oe(f,o),y&&y.p&&(!g||I&8)&&zl(y,b,A,A[3],g?Hl(b,A[3],I,Rs):Rl(A[3]),Ct),I&5&&(d=A[0].includes(A[2])),d?D?(D.p(A,I),I&5&&K(D,1)):(D=Ot(A),D.c(),K(D,1),D.m(e,null)):D&&(Be(),te(D,1,1,()=>{D=null}),je())},i(A){g||(K(y,A),K(D),g=!0)},o(A){te(y,A),te(D),g=!1},d(A){A&&_(e),y&&y.d(A),D&&D.d(),m=!1,p()}}}function Fs(l,e,t){let{$$slots:s={},$$scope:n}=e,{panels:i,togglePanel:a,panelName:o}=e;const f=()=>a(o);return l.$$set=r=>{"panels"in r&&t(0,i=r.panels),"togglePanel"in r&&t(1,a=r.togglePanel),"panelName"in r&&t(2,o=r.panelName),"$$scope"in r&&t(3,n=r.$$scope)},[i,a,o,n,s,f]}class It extends Ke{constructor(e){super();Qe(this,e,Fs,Hs,Je,{panels:0,togglePanel:1,panelName:2})}}function Lt(l){let e,t,s,n,i,a,o,f,r,c,d;return{c(){e=V("div"),t=V("a"),s=F("Click here"),n=F(` to see a video tutorial of this website.
    `),i=V("button"),a=F("Close message."),this.h()},l(g){e=T(g,"DIV",{class:!0});var m=E(e);t=T(m,"A",{href:!0,target:!0});var p=E(t);s=U(p,"Click here"),p.forEach(_),n=U(m,` to see a video tutorial of this website.
    `),i=T(m,"BUTTON",{class:!0});var b=E(i);a=U(b,"Close message."),b.forEach(_),m.forEach(_),this.h()},h(){v(t,"href","https://youtu.be/dU5a4PRSF14"),v(t,"target","_blank"),v(i,"class","svelte-a8zkqf"),v(e,"class","modal svelte-a8zkqf")},m(g,m){O(g,e,m),h(e,t),h(t,s),h(e,n),h(e,i),h(i,a),r=!0,c||(d=ce(i,"click",function(){Vl(l[1])&&l[1].apply(this,arguments)}),c=!0)},p(g,m){l=g},i(g){r||(Se(()=>{f&&f.end(1),o=Fe(e,Ae,{}),o.start()}),r=!0)},o(g){o&&o.invalidate(),f=Ue(e,Ae,{}),r=!1},d(g){g&&_(e),g&&f&&f.end(),c=!1,d()}}}function Us(l){let e,t,s=l[0]&&Lt(l);return{c(){s&&s.c(),e=X()},l(n){s&&s.l(n),e=X()},m(n,i){s&&s.m(n,i),O(n,e,i),t=!0},p(n,[i]){n[0]?s?(s.p(n,i),i&1&&K(s,1)):(s=Lt(n),s.c(),K(s,1),s.m(e.parentNode,e)):s&&(Be(),te(s,1,1,()=>{s=null}),je())},i(n){t||(K(s),t=!0)},o(n){te(s),t=!1},d(n){s&&s.d(n),n&&_(e)}}}function qs(l,e,t){let{showModal:s,closeModal:n}=e;return l.$$set=i=>{"showModal"in i&&t(0,s=i.showModal),"closeModal"in i&&t(1,n=i.closeModal)},[s,n]}class Gs extends Ke{constructor(e){super();Qe(this,e,qs,Us,Je,{showModal:0,closeModal:1})}}function Nt(l,e,t){const s=l.slice();return s[69]=e[t],s}function Bt(l,e,t){const s=l.slice();return s[72]=e[t],s}function jt(l,e,t){const s=l.slice();return s[75]=e[t],s}function zt(l,e,t){const s=l.slice();return s[78]=e[t],s}function Rt(l,e,t){const s=l.slice();return s[69]=e[t],s}function Ht(l,e,t){const s=l.slice();return s[69]=e[t],s}function Ft(l){let e,t=(wl[l[69]]||l[69])+"",s,n;return{c(){e=V("option"),s=F(t),this.h()},l(i){e=T(i,"OPTION",{});var a=E(e);s=U(a,t),a.forEach(_),this.h()},h(){e.__value=n=l[69],e.value=e.__value},m(i,a){O(i,e,a),h(e,s)},p(i,a){a[0]&4&&t!==(t=(wl[i[69]]||i[69])+"")&&oe(s,t),a[0]&4&&n!==(n=i[69])&&(e.__value=n,e.value=e.__value)},d(i){i&&_(e)}}}function Ut(l){let e,t=(wl[l[69]]||l[69])+"",s,n;return{c(){e=V("option"),s=F(t),this.h()},l(i){e=T(i,"OPTION",{});var a=E(e);s=U(a,t),a.forEach(_),this.h()},h(){e.__value=n=l[69],e.value=e.__value},m(i,a){O(i,e,a),h(e,s)},p(i,a){a[0]&8&&t!==(t=(wl[i[69]]||i[69])+"")&&oe(s,t),a[0]&8&&n!==(n=i[69])&&(e.__value=n,e.value=e.__value)},d(i){i&&_(e)}}}function qt(l){let e,t=l[2].includes(l[17]),s,n=l[2].includes(l[17]),i,a,o,f=t&&Gt(l),r=n&&Yt(l);return{c(){e=V("div"),f&&f.c(),s=N(),r&&r.c()},l(c){e=T(c,"DIV",{});var d=E(e);f&&f.l(d),s=B(d),r&&r.l(d),d.forEach(_)},m(c,d){O(c,e,d),f&&f.m(e,null),h(e,s),r&&r.m(e,null),o=!0},p(c,d){d[0]&131076&&(t=c[2].includes(c[17])),t?f?f.p(c,d):(f=Gt(c),f.c(),f.m(e,s)):f&&(f.d(1),f=null),d[0]&131076&&(n=c[2].includes(c[17])),n?r?r.p(c,d):(r=Yt(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){o||(Se(()=>{a&&a.end(1),i=Fe(e,vl,{}),i.start()}),o=!0)},o(c){i&&i.invalidate(),a=Ue(e,vl,{}),o=!1},d(c){c&&_(e),f&&f.d(),r&&r.d(),c&&a&&a.end()}}}function Gt(l){let e,t=["past","present"],s=[];for(let n=0;n<2;n+=1)s[n]=Wt(zt(l,t,n));return{c(){for(let n=0;n<2;n+=1)s[n].c();e=X()},l(n){for(let i=0;i<2;i+=1)s[i].l(n);e=X()},m(n,i){for(let a=0;a<2;a+=1)s[a].m(n,i);O(n,e,i)},p(n,i){if(i[0]&65536){t=["past","present"];let a;for(a=0;a<2;a+=1){const o=zt(n,t,a);s[a]?s[a].p(o,i):(s[a]=Wt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<2;a+=1)s[a].d(1)}},d(n){pe(s,n),n&&_(e)}}}function Wt(l){let e,t,s,n=qe(l[78])+"",i,a,o,f;return{c(){e=V("label"),t=V("input"),s=N(),i=F(n),a=N(),this.h()},l(r){e=T(r,"LABEL",{});var c=E(e);t=T(c,"INPUT",{type:!0,name:!0}),s=B(c),i=U(c,n),a=B(c),c.forEach(_),this.h()},h(){v(t,"type","radio"),v(t,"name","period"),t.__value=l[78],t.value=t.__value,l[56][0].push(t)},m(r,c){O(r,e,c),h(e,t),t.checked=t.__value===l[16],h(e,s),h(e,i),h(e,a),o||(f=ce(t,"change",l[55]),o=!0)},p(r,c){c[0]&65536&&(t.checked=t.__value===r[16])},d(r){r&&_(e),l[56][0].splice(l[56][0].indexOf(t),1),o=!1,f()}}}function Yt(l){let e,t,s=(l[18]?"pct. asian":"pluralities")+"",n,i,a;return{c(){e=V("button"),t=F("Show "),n=F(s),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var f=E(e);t=U(f,"Show "),n=U(f,s),f.forEach(_),this.h()},h(){v(e,"class","plurality-toggle svelte-1fv06xq")},m(o,f){O(o,e,f),h(e,t),h(e,n),i||(a=ce(e,"click",l[57]),i=!0)},p(o,f){f[0]&262144&&s!==(s=(o[18]?"pct. asian":"pluralities")+"")&&oe(n,s)},d(o){o&&_(e),i=!1,a()}}}function Kt(l){let e,t=ks(l[72]+l[75])+(l[72]+l[75]==="senate_unity"||l[72]+l[75]==="congress_unity"?" (soon)":"")+"",s,n,i,a;return{c(){e=V("option"),s=F(t),n=N(),this.h()},l(o){e=T(o,"OPTION",{});var f=E(e);s=U(f,t),n=B(f),f.forEach(_),this.h()},h(){e.__value=i=l[72]+l[75],e.value=e.__value,e.disabled=a=l[72]+l[75]==="senate_unity"||l[72]+l[75]==="congress_unity"},m(o,f){O(o,e,f),h(e,s),h(e,n)},p:Ye,d(o){o&&_(e)}}}function Qt(l){let e,t,s=["","_letters","_names","_unity"],n=[];for(let i=0;i<4;i+=1)n[i]=Kt(jt(l,s,i));return{c(){e=V("optgroup");for(let i=0;i<4;i+=1)n[i].c();this.h()},l(i){e=T(i,"OPTGROUP",{label:!0});var a=E(e);for(let o=0;o<4;o+=1)n[o].l(a);a.forEach(_),this.h()},h(){v(e,"label",t=qe(l[72]))},m(i,a){O(i,e,a);for(let o=0;o<4;o+=1)n[o].m(e,null)},p(i,a){if(a&0){s=["","_letters","_names","_unity"];let o;for(o=0;o<4;o+=1){const f=jt(i,s,o);n[o]?n[o].p(f,a):(n[o]=Kt(f),n[o].c(),n[o].m(e,null))}for(;o<4;o+=1)n[o].d(1)}},d(i){i&&_(e),pe(n,i)}}}function Ws(l){let e,t,s,n,i,a,o,f,r=["assembly","senate","congress"],c=[];for(let d=0;d<3;d+=1)c[d]=Qt(Bt(l,r,d));return i=new js({props:{aggregates:l[9],handleLabelClick:l[42],plan:l[11],stats:l[25],groups:ol,changingLines:l[33],idealValues:Es}}),{c(){e=V("div"),t=V("div"),s=V("select");for(let d=0;d<3;d+=1)c[d].c();n=N(),Xe(i.$$.fragment),this.h()},l(d){e=T(d,"DIV",{slot:!0});var g=E(e);t=T(g,"DIV",{class:!0});var m=E(t);s=T(m,"SELECT",{class:!0});var p=E(s);for(let b=0;b<3;b+=1)c[b].l(p);p.forEach(_),m.forEach(_),n=B(g),Ze(i.$$.fragment,g),g.forEach(_),this.h()},h(){v(s,"class","svelte-1fv06xq"),l[11]===void 0&&Se(()=>l[58].call(s)),v(t,"class","plan-selector svelte-1fv06xq"),v(e,"slot","body")},m(d,g){O(d,e,g),h(e,t),h(t,s);for(let m=0;m<3;m+=1)c[m].m(s,null);xe(s,l[11]),h(e,n),$e(i,e,null),a=!0,o||(f=ce(s,"change",l[58]),o=!0)},p(d,g){if(g&0){r=["assembly","senate","congress"];let p;for(p=0;p<3;p+=1){const b=Bt(d,r,p);c[p]?c[p].p(b,g):(c[p]=Qt(b),c[p].c(),c[p].m(s,null))}for(;p<3;p+=1)c[p].d(1)}g[0]&2048&&xe(s,d[11]);const m={};g[0]&512&&(m.aggregates=d[9]),g[0]&2048&&(m.plan=d[11]),g[0]&33554432&&(m.stats=d[25]),i.$set(m)},i(d){a||(K(i.$$.fragment,d),a=!0)},o(d){te(i.$$.fragment,d),a=!1},d(d){d&&_(e),pe(c,d),el(i),o=!1,f()}}}function Jt(l){let e,t=l[69]+"",s,n;return{c(){e=V("option"),s=F(t),this.h()},l(i){e=T(i,"OPTION",{});var a=E(e);s=U(a,t),a.forEach(_),this.h()},h(){e.__value=n=l[69],e.value=e.__value},m(i,a){O(i,e,a),h(e,s)},p:Ye,d(i){i&&_(e)}}}function Ys(l){let e,t,s,n,i,a,o,f,r=Object.keys(sl),c=[];for(let d=0;d<r.length;d+=1)c[d]=Jt(Nt(l,r,d));return{c(){e=V("div"),t=V("select");for(let d=0;d<c.length;d+=1)c[d].c();s=N(),n=V("label"),i=V("input"),a=F(`
					Inspect streets`),this.h()},l(d){e=T(d,"DIV",{slot:!0,class:!0});var g=E(e);t=T(g,"SELECT",{class:!0});var m=E(t);for(let b=0;b<c.length;b+=1)c[b].l(m);m.forEach(_),s=B(g),n=T(g,"LABEL",{class:!0});var p=E(n);i=T(p,"INPUT",{type:!0}),a=U(p,`
					Inspect streets`),p.forEach(_),g.forEach(_),this.h()},h(){v(t,"class","svelte-1fv06xq"),l[15]===void 0&&Se(()=>l[59].call(t)),v(i,"type","checkbox"),v(n,"class","svelte-1fv06xq"),v(e,"slot","body"),v(e,"class","views svelte-1fv06xq")},m(d,g){O(d,e,g),h(e,t);for(let m=0;m<c.length;m+=1)c[m].m(t,null);xe(t,l[15]),h(e,s),h(e,n),h(n,i),i.checked=l[6],h(n,a),o||(f=[ce(t,"change",l[59]),ce(i,"change",l[60])],o=!0)},p(d,g){if(g&0){r=Object.keys(sl);let m;for(m=0;m<r.length;m+=1){const p=Nt(d,r,m);c[m]?c[m].p(p,g):(c[m]=Jt(p),c[m].c(),c[m].m(t,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=r.length}g[0]&32768&&xe(t,d[15]),g[0]&64&&(i.checked=d[6])},d(d){d&&_(e),pe(c,d),o=!1,il(f)}}}function Ks(l){let e,t,s,n,i,a,o,f,r,c,d,g,m,p,b,y,D,A,I,j,Q,Y;e=new Gs({props:{showModal:l[21],closeModal:l[36]}});let G=l[2],C=[];for(let u=0;u<G.length;u+=1)C[u]=Ft(Ht(l,G,u));let L=l[3],M=[];for(let u=0;u<L.length;u+=1)M[u]=Ut(Rt(l,L,u));let S=l[22]&&qt(l);c=new Os({props:{groups:ol,levels:Sl,colors:yl,dynamicVars:l[2],variable:l[17],metric:l[20],showPluralities:l[18],pluralityVars:l[5],periods:kl,breaks:l[32]}}),g=new It({props:{panelName:"plans",panels:l[10],togglePanel:l[41],$$slots:{body:[Ws]},$$scope:{ctx:l}}}),p=new It({props:{panelName:"views",panels:l[10],togglePanel:l[41],$$slots:{body:[Ys]},$$scope:{ctx:l}}});let R=!Al;return D=new Ts({props:{viewBox:l[19],labelSize:l[31],draggedBgs:l[7],data:l[1],path:bl,color:l[38],changingLines:l[33],neighbor:l[37],showPluralities:l[18],metric:l[20],period:l[16],tractVars:l[4],panels:l[10],drawings:l[8],plan:l[11],points:l[27],tractMesh:l[35],bgMesh:l[26],mesh:l[34],aggregates:l[9],obj:l[0],handleLabelClick:l[42],congressPlans:l[12],plans:l[28],startDrag:l[43],endDrag:l[44],handleMouseMove:l[45],viewCutoff:l[30],showOnlyFocusDistricts:l[23],showStreets:l[6],streets:l[13],presentationMode:Al}}),{c(){Xe(e.$$.fragment),t=N(),s=V("div"),n=V("div"),i=V("select"),a=V("optgroup");for(let u=0;u<C.length;u+=1)C[u].c();o=V("optgroup");for(let u=0;u<M.length;u+=1)M[u].c();f=N(),S&&S.c(),r=N(),Xe(c.$$.fragment),d=N(),Xe(g.$$.fragment),m=N(),Xe(p.$$.fragment),b=N(),y=N(),Xe(D.$$.fragment),A=N(),this.h()},l(u){Ze(e.$$.fragment,u),t=B(u),s=T(u,"DIV",{class:!0,style:!0});var P=E(s);n=T(P,"DIV",{class:!0});var z=E(n);i=T(z,"SELECT",{style:!0,class:!0});var Z=E(i);a=T(Z,"OPTGROUP",{label:!0});var se=E(a);for(let H=0;H<C.length;H+=1)C[H].l(se);se.forEach(_),o=T(Z,"OPTGROUP",{label:!0});var ne=E(o);for(let H=0;H<M.length;H+=1)M[H].l(ne);ne.forEach(_),Z.forEach(_),f=B(z),S&&S.l(z),r=B(z),Ze(c.$$.fragment,z),d=B(z),Ze(g.$$.fragment,z),m=B(z),Ze(p.$$.fragment,z),b=B(z),z.forEach(_),y=B(P),Ze(D.$$.fragment,P),A=B(P),P.forEach(_),this.h()},h(){v(a,"label","Redistricting data"),v(o,"label","American Community Survey data"),ie(i,"width",l[3].includes(l[17])?"auto":"calc(var(--control-width) + 45px)"),v(i,"class","svelte-1fv06xq"),l[17]===void 0&&Se(()=>l[54].call(i)),v(n,"class","controls svelte-1fv06xq"),v(s,"class","container svelte-1fv06xq"),ie(s,"cursor",l[24]?"crosshair":"auto"),ie(s,"--container-font",l[29]+"px"),ie(s,"--control-width",270+(l[29]-16)*10+"px"),Se(()=>l[62].call(s))},m(u,P){$e(e,u,P),O(u,t,P),O(u,s,P),h(s,n),h(n,i),h(i,a);for(let z=0;z<C.length;z+=1)C[z].m(a,null);h(i,o);for(let z=0;z<M.length;z+=1)M[z].m(o,null);xe(i,l[17]),h(n,f),S&&S.m(n,null),h(n,r),$e(c,n,null),h(n,d),$e(g,n,null),h(n,m),$e(p,n,null),h(n,b),h(s,y),$e(D,s,null),h(s,A),I=fs(s,l[62].bind(s)),j=!0,Q||(Y=[ce(window,"keydown",l[46]),ce(i,"change",l[54])],Q=!0)},p(u,P){const z={};if(P[0]&2097152&&(z.showModal=u[21]),e.$set(z),P[0]&4){G=u[2];let W;for(W=0;W<G.length;W+=1){const re=Ht(u,G,W);C[W]?C[W].p(re,P):(C[W]=Ft(re),C[W].c(),C[W].m(a,null))}for(;W<C.length;W+=1)C[W].d(1);C.length=G.length}if(P[0]&8){L=u[3];let W;for(W=0;W<L.length;W+=1){const re=Rt(u,L,W);M[W]?M[W].p(re,P):(M[W]=Ut(re),M[W].c(),M[W].m(o,null))}for(;W<M.length;W+=1)M[W].d(1);M.length=L.length}(!j||P[0]&131080)&&ie(i,"width",u[3].includes(u[17])?"auto":"calc(var(--control-width) + 45px)"),P[0]&131084&&xe(i,u[17]),u[22]?S?(S.p(u,P),P[0]&4194304&&K(S,1)):(S=qt(u),S.c(),K(S,1),S.m(n,r)):S&&(Be(),te(S,1,1,()=>{S=null}),je());const Z={};P[0]&4&&(Z.dynamicVars=u[2]),P[0]&131072&&(Z.variable=u[17]),P[0]&1048576&&(Z.metric=u[20]),P[0]&262144&&(Z.showPluralities=u[18]),P[0]&32&&(Z.pluralityVars=u[5]),P[1]&2&&(Z.breaks=u[32]),c.$set(Z);const se={};P[0]&1024&&(se.panels=u[10]),P[0]&33556992|P[2]&8388608&&(se.$$scope={dirty:P,ctx:u}),g.$set(se);const ne={};P[0]&1024&&(ne.panels=u[10]),P[0]&32832|P[2]&8388608&&(ne.$$scope={dirty:P,ctx:u}),p.$set(ne);const H={};P[0]&524288&&(H.viewBox=u[19]),P[1]&1&&(H.labelSize=u[31]),P[0]&128&&(H.draggedBgs=u[7]),P[0]&2&&(H.data=u[1]),P[0]&262144&&(H.showPluralities=u[18]),P[0]&1048576&&(H.metric=u[20]),P[0]&65536&&(H.period=u[16]),P[0]&16&&(H.tractVars=u[4]),P[0]&1024&&(H.panels=u[10]),P[0]&256&&(H.drawings=u[8]),P[0]&2048&&(H.plan=u[11]),P[0]&134217728&&(H.points=u[27]),P[0]&67108864&&(H.bgMesh=u[26]),P[0]&512&&(H.aggregates=u[9]),P[0]&1&&(H.obj=u[0]),P[0]&4096&&(H.congressPlans=u[12]),P[0]&268435456&&(H.plans=u[28]),P[0]&1073741824&&(H.viewCutoff=u[30]),P[0]&8388608&&(H.showOnlyFocusDistricts=u[23]),P[0]&64&&(H.showStreets=u[6]),P[0]&8192&&(H.streets=u[13]),D.$set(H),(!j||P[0]&16777216)&&ie(s,"cursor",u[24]?"crosshair":"auto"),(!j||P[0]&536870912)&&ie(s,"--container-font",u[29]+"px"),(!j||P[0]&536870912)&&ie(s,"--control-width",270+(u[29]-16)*10+"px")},i(u){j||(K(e.$$.fragment,u),K(S),K(c.$$.fragment,u),K(g.$$.fragment,u),K(p.$$.fragment,u),K(R),K(D.$$.fragment,u),j=!0)},o(u){te(e.$$.fragment,u),te(S),te(c.$$.fragment,u),te(g.$$.fragment,u),te(p.$$.fragment,u),te(R),te(D.$$.fragment,u),j=!1},d(u){el(e,u),u&&_(t),u&&_(s),pe(C,u),pe(M,u),S&&S.d(),el(c),el(g),el(p),el(D),I(),Q=!1,il(Y)}}}async function xs({fetch:l}){const e=await(await l(`${Ml}/output_census.topojson`)).json(),t=gs(e.objects.census),s=os(e,t).features.map(Gl),n=["pop","cvap"],i=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(c=>[...n,"GEOID","senate","assembly","congress"].every(d=>!c.includes(d))&&c===c.toLowerCase()).map(c=>c.split("_")[0]);return new Set([...o,...r])},[])],a=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:rs(t.geometries),dynamicVars:n,staticVars:i,idToIndex:a,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}let Al=!0;function Qs(l,e,t){let s,n,i,a,o,{topoData:f,obj:r,neighbors:c,data:d,dynamicVars:g,staticVars:m,tractVars:p,pluralityVars:b,idToIndex:y}=e,D,A,I=!0,j=!1,Q,Y,G,C,L=[],M=[],S=[],R={},u=["plans"],P="assembly",z,Z,se,ne,H,W=24,re,Me=870,ue=Object.keys(sl)[0];const ee=k=>al(f,r,k),J=bl(ee((k,le)=>Ce(k).substring(0,11)!==Ce(le).substring(0,11))),$=()=>t(21,A=!1);cs(async()=>{t(26,z=bl(Gl(ee((le,q)=>Ce(le)!==Ce(q)))));const k=await Promise.all([ps(),vs()]);t(28,H=k[0]),t(27,se=k[1]),t(30,Me=d.length),t(21,A=!Al)});let x;const Pe=k=>d[k].properties[P];function De(k){const le=Pe(k),q=new Set(c[k].map(Pe).filter(fe=>fe!==le));if(q.size===1)t(0,r.geometries[k].properties[P]=x=q.values().next().value,r);else if(q.has(x))t(0,r.geometries[k].properties[P]=x,r);else return;t(0,r)}let ve="present",ae="pop";const Ee={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let be=!1;function Ve({properties:k}){if(!k.ALAND)return"#fff";const le=k[`${n}_total`];if(b.includes(n)){const q=_e=>k[`${n}_${_e}`];if(q(kl[0])===null)return"#eee";const fe=[...kl].sort((_e,Ne)=>q(Ne)-q(_e));return tl[kl.indexOf(fe[0])]}else if(m.includes(n)){if(!Wl(i(k)))return"#eee";if(le<=10)return"#fff";for(let q=1;q<a.length;q++)if(i(k)<a[q])return tl[q];return tl[a.length-1]}else{if(le<=10)return"#fff";const q=fe=>k[`${n}_${fe}`]/k[`${n}_total`];if(be){const fe=ol.filter(nl=>q(nl)>.5)[0];if(fe!==void 0)return yl[fe]+Sl[le<130?0:le<200?1:2];const _e=[...ol].sort((nl,pl)=>q(pl)-q(nl)),Ne=q(_e[0])-q(_e[1]);return yl[_e[0]]+Sl[Ne<.093?0:1]}else{const fe=Ee[ae];for(let _e=1;_e<fe.length;_e++)if(q("asian")<fe[_e])return El[_e-1];return El[fe.length-1]}}}const ye=async()=>t(12,Z=await bs()),w=async()=>t(13,ne=await ws());function de(k){const le=typeof k[0]=="string"?k.map(Te=>d[y[Te]].properties):k.map(Te=>Te.properties),q=(Te,We)=>le.reduce((Zt,Ol)=>Zt+(Ol[Te]||0)*(We&&Ol[We]||1),0),fe=Te=>q(Te,"pop20_total")/q("pop20_total"),_e=(Te,We)=>q(`${Te}_${We}`)/q(`${Te}_total`);let Ne=q("pop10_asian"),nl=q("pop20_asian"),pl=q("cvap10_asian"),Xt=q("cvap19_asian");const Cl={income:fe("income"),hhlang:_e("hhlang","asian"),benefits:_e("families","benefits"),pop20_total:q("pop20_total"),pct_increase:(nl-Ne)/Ne,pct_increase_cvap:(Xt-pl)/pl};return["pop20","cvap19","pop10","cvap10"].forEach(Te=>ol.forEach(We=>Cl[Te+We]=_e(Te,We))),Cl}const Ge=k=>t(8,M=M.filter((le,q)=>q!==k));async function rl(){try{await fetch(`${Ml}/data.json`,{method:"POST",body:JSON.stringify(M)})}catch(k){console.error(k)}}async function Pl(){try{const k=await fetch(`${Ml}/data.json`);t(8,M=(await k.json()).map(le=>Bl(Nl({},le),{stats:de(le.ids)})))}catch(k){console.error(k)}}const me=k=>t(10,u=u.includes(k)?u.filter(le=>le!==k):[...u,k]);function Le(k){S.includes(k)?t(9,S=S.filter(le=>le!==k)):t(9,S=[...S,k])}const ge=()=>t(50,Y=!0),fl=()=>t(50,Y=t(24,Q=!1)),cl=k=>Q&&Y&&(L.length===0?t(7,L=[Ce(k)]):L.push(Ce(k)));function Oe({key:k}){k==="="&&t(29,W+=2),k==="-"&&t(29,W-=2),k==="v"&&t(22,I=!I),k==="f"&&t(23,j=!j),k==="s"&&t(23,j=!j)}const ze=[[]];function hl(){ae=Tl(this),t(17,ae),t(3,m),t(2,g)}function ul(){ve=this.__value,t(16,ve)}const Re=()=>t(18,be=!be);function _l(){P=Tl(this),t(11,P)}function dl(){ue=Tl(this),t(15,ue)}function gl(){D=this.checked,t(6,D)}const He=()=>t(24,Q=!0);function ml(){re=this.clientWidth,t(14,re)}return l.$$set=k=>{"topoData"in k&&t(47,f=k.topoData),"obj"in k&&t(0,r=k.obj),"neighbors"in k&&t(48,c=k.neighbors),"data"in k&&t(1,d=k.data),"dynamicVars"in k&&t(2,g=k.dynamicVars),"staticVars"in k&&t(3,m=k.staticVars),"tractVars"in k&&t(4,p=k.tractVars),"pluralityVars"in k&&t(5,b=k.pluralityVars),"idToIndex"in k&&t(49,y=k.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&32768&&t(19,s=sl[ue]),l.$$.dirty[0]&196616&&t(20,n=m.includes(ae)?ae:ae+(ve==="past"?10:ae==="cvap"?19:20)),l.$$.dirty[0]&1048576&&t(53,i={income:k=>k[n],hhlang:k=>k[`${n}_asian`]/k[`${n}_total`],graduates:k=>(k[`${n}_hs_grad`]+k[`${n}_ba_above`])/k[`${n}_total`],families:k=>k[`${n}_benefits`]/k[`${n}_total`],workers:k=>k[`${n}_publictransport`]/k[`${n}_total`]}[n]),l.$$.dirty[0]&1441806|l.$$.dirty[1]&6291456&&t(32,a=g.includes(ae)&&!be?Ee[ae]:Ee[n]||!m.includes(n)||n==="asiaentry"||t(52,Ee[n]=hs(d.map(k=>i(k.properties)).filter(Wl),6),Ee)),l.$$.dirty[0]&386|l.$$.dirty[1]&524288&&!Y&&L.length>0){if(L[0]===L[L.length-1]){const k=new Set(L),le=us(ee((fe,_e)=>ms(k.has(Ce(fe)),k.has(Ce(_e)))).coordinates.flat()),q=d.filter(fe=>_s(ds(fe.geometry.coordinates[0]),le)).map(Ce);t(8,M=[...M,{outline:bl({type:"LineString",coordinates:le}),ids:q,stats:de(q)}])}t(7,L=[])}if(l.$$.dirty[0]&6144&&P.startsWith("congress")&&Z===void 0&&ye(),l.$$.dirty[0]&8256&&D&&ne===void 0&&w(),l.$$.dirty[0]&1024|l.$$.dirty[1]&1048576&&u.includes("communities")&&!C&&(Pl(),t(51,C=!0)),l.$$.dirty[0]&542720&&t(31,o=(P.endsWith("_names")?.9:1.1)/((re-410)/s[2])*1.24),l.$$.dirty[0]&2561)for(let k=0;k<S.length;k++){const[le,q]=S[k].split(",");le===P&&t(25,R[S[k]]=de(r.geometries.filter(({properties:fe})=>q===""+fe[P])),R)}},[r,d,g,m,p,b,D,L,M,S,u,P,Z,ne,re,ue,ve,ae,be,s,n,A,I,j,Q,R,z,se,H,W,Me,o,a,G,ee,J,$,De,Ve,Ge,rl,me,Le,ge,fl,cl,Oe,f,c,y,Y,C,Ee,i,hl,ul,ze,Re,_l,dl,gl,He,ml]}class en extends Ke{constructor(e){super();Qe(this,e,Qs,Ks,Je,{topoData:47,obj:0,neighbors:48,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:49},null,[-1,-1,-1])}}export{en as default,xs as load};

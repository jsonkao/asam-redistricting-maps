var Ft=Object.defineProperty,Gt=Object.defineProperties;var Wt=Object.getOwnPropertyDescriptors;var vl=Object.getOwnPropertySymbols;var Yt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable;var pl=(l,e,t)=>e in l?Ft(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,bl=(l,e)=>{for(var t in e||(e={}))Yt.call(e,t)&&pl(l,t,e[t]);if(vl)for(var t of vl(e))Kt.call(e,t)&&pl(l,t,e[t]);return l},kl=(l,e)=>Gt(l,Wt(e));import{S as xe,i as el,s as ll,e as V,t as W,c as T,a as w,g as Y,d as u,b,J as ce,f as z,H as h,h as he,l as le,K as De,L as Ve,M as Ce,N as se,O as ul,P as tl,Q as Ae,R as Ne,T as Me,U as ye,V as we,x as $,r as Le,u as ne,w as je,W as Qe,k as R,n as U,X as wl,Y as qt,Z as Jt,I as Fe,_ as Qt,$ as Xt,j as sl,m as il,a0 as nl,o as al,v as ol,a1 as Zt,A as $t,a2 as xt,a3 as es,a4 as ls,a5 as ts,a6 as Ge,a7 as El}from"../chunks/vendor-9292600a.js";import{b as _l}from"../chunks/paths-28a87002.js";import{i as Be,D as Pl,p as Ee,m as We,c as Ye,a as Dl,d as Vl,u as ss,r as Tl,b as rl,e as Sl,x as is,f as ns,g as as,h as os,j as rs,k as fs}from"../chunks/utils-c2025bed.js";const gl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},dl=["44","99","ee"],Ke=["asian","black","hispanic","white"],fl=["1990_earlier","1990_1999","2000_2009","2010_later"],cl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},hl=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],qe=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],cs={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},Je={Brooklyn:[35,670,650,520],Chinatown:[80,430,500,600],"All of NYC":[0,0,975,1420]},hs={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};function Cl(l,e,t){const s=l.slice();return s[49]=e[t],s}function Ol(l,e,t){const s=l.slice();return s[52]=e[t].properties,s[53]=e[t].geometry.coordinates[0],s[54]=e[t].geometry.coordinates[1],s}function Al(l,e,t){const s=l.slice();return s[57]=e[t].outline,s}function Ml(l,e,t){const s=l.slice();return s[49]=e[t],s[61]=t,s}function Bl(l){let e,t=l[35].label+"",s;return{c(){e=V("p"),s=W(t),this.h()},l(i){e=T(i,"P",{class:!0,style:!0});var a=w(e);s=Y(a,t),a.forEach(u),this.h()},h(){b(e,"class","street-inspector svelte-1i7628d"),ce(e,"left",l[35].x+"px"),ce(e,"top","calc("+l[35].y+"px - 1em)")},m(i,a){z(i,e,a),h(e,s)},p(i,a){a[1]&16&&t!==(t=i[35].label+"")&&he(s,t),a[1]&16&&ce(e,"left",i[35].x+"px"),a[1]&16&&ce(e,"top","calc("+i[35].y+"px - 1em)")},d(i){i&&u(e)}}}function Ll(l){let e,t,s,i,a;function n(){return l[39](l[61])}function o(){return l[40](l[49])}function f(){return l[41](l[49])}return{c(){e=De("path"),this.h()},l(r){e=Ve(r,"path",{d:!0,fill:!0,class:!0}),w(e).forEach(u),this.h()},h(){b(e,"d",t=l[5](l[49])),b(e,"fill",s=l[6](l[49],l[10],l[11],l[9])),b(e,"class","svelte-1i7628d"),Ce(e,"head",l[3][0]===Be(l[49]))},m(r,c){z(r,e,c),i||(a=[se(e,"click",n),se(e,"contextmenu",ul(o)),se(e,"mousemove",ul(f))],i=!0)},p(r,c){l=r,c[0]&48&&t!==(t=l[5](l[49]))&&b(e,"d",t),c[0]&3664&&s!==(s=l[6](l[49],l[10],l[11],l[9]))&&b(e,"fill",s),c[0]&24&&Ce(e,"head",l[3][0]===Be(l[49]))},d(r){r&&u(e),i=!1,tl(a)}}}function jl(l,e){let t,s,i=e[61]<e[28]&&Ll(e);return{key:l,first:null,c(){t=le(),i&&i.c(),s=le(),this.h()},l(a){t=le(),i&&i.l(a),s=le(),this.h()},h(){this.first=t},m(a,n){z(a,t,n),i&&i.m(a,n),z(a,s,n)},p(a,n){e=a,e[61]<e[28]?i?i.p(e,n):(i=Ll(e),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(a){a&&u(t),i&&i.d(a),a&&u(s)}}}function Il(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),w(e).forEach(u),this.h()},h(){b(e,"class","mesh-bg svelte-1i7628d"),b(e,"d",t=l[12].includes(l[10])?l[18]:l[19])},m(s,i){z(s,e,i)},p(s,i){i[0]&791552&&t!==(t=s[12].includes(s[10])?s[18]:s[19])&&b(e,"d",t)},d(s){s&&u(e)}}}function Nl(l){let e,t,s,i,a=l[14],n=[];for(let o=0;o<a.length;o+=1)n[o]=yl(Al(l,a,o));return{c(){e=De("g");for(let o=0;o<n.length;o+=1)n[o].c()},l(o){e=Ve(o,"g",{});var f=w(e);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u)},m(o,f){z(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);i=!0},p(o,f){if(f[0]&16384){a=o[14];let r;for(r=0;r<a.length;r+=1){const c=Al(o,a,r);n[r]?n[r].p(c,f):(n[r]=yl(c),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},i(o){i||(Ae(()=>{s&&s.end(1),t=Ne(e,Me,{}),t.start()}),i=!0)},o(o){t&&t.invalidate(),s=ye(e,Me,{}),i=!1},d(o){o&&u(e),we(n,o),o&&s&&s.end()}}}function yl(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),w(e).forEach(u),this.h()},h(){b(e,"class","mesh-community svelte-1i7628d"),b(e,"d",t=l[57])},m(s,i){z(s,e,i)},p(s,i){i[0]&16384&&t!==(t=s[57])&&b(e,"d",t)},d(s){s&&u(e)}}}function Rl(l){let e,t,s,i,a,n;return{c(){e=De("g"),t=De("path"),this.h()},l(o){e=Ve(o,"g",{});var f=w(e);t=Ve(f,"path",{class:!0,d:!0}),w(t).forEach(u),f.forEach(u),this.h()},h(){b(t,"class","mesh-district svelte-1i7628d"),b(t,"d",s=l[37](l[16],l[24],l[23],l[29])),Ce(t,"showPluralities",l[9])},m(o,f){z(o,e,f),h(e,t),n=!0},p(o,f){(!n||f[0]&562102272&&s!==(s=o[37](o[16],o[24],o[23],o[29])))&&b(t,"d",s),f[0]&512&&Ce(t,"showPluralities",o[9])},i(o){n||(Ae(()=>{a&&a.end(1),i=Ne(e,Me,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=ye(e,Me,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function Ul(l){let e,t,s,i,a,n;return{c(){e=De("g"),t=De("path"),this.h()},l(o){e=Ve(o,"g",{});var f=w(e);t=Ve(f,"path",{class:!0,d:!0}),w(t).forEach(u),f.forEach(u),this.h()},h(){b(t,"class","mesh-district svelte-1i7628d"),b(t,"d",s=l[5](l[20](l[42],l[0])))},m(o,f){z(o,e,f),h(e,t),n=!0},p(o,f){(!n||f[0]&1114145&&s!==(s=o[5](o[20](o[42],o[0]))))&&b(t,"d",s)},i(o){n||(Ae(()=>{a&&a.end(1),i=Ne(e,Me,{}),i.start()}),n=!0)},o(o){i&&i.invalidate(),a=ye(e,Me,{}),n=!1},d(o){o&&u(e),o&&a&&a.end()}}}function Hl(l){let e,t,s,i,a,n=l[17],o=[];for(let c=0;c<n.length;c+=1)o[c]=Fl(Ol(l,n,c));const f=c=>ne(o[c],1,1,()=>{o[c]=null});let r=l[34]&&Gl(l);return{c(){e=De("g");for(let c=0;c<o.length;c+=1)o[c].c();t=le(),r&&r.c(),this.h()},l(c){e=Ve(c,"g",{class:!0});var v=w(e);for(let d=0;d<o.length;d+=1)o[d].l(v);t=le(),r&&r.l(v),v.forEach(u),this.h()},h(){b(e,"class","labels svelte-1i7628d")},m(c,v){z(c,e,v);for(let d=0;d<o.length;d+=1)o[d].m(e,null);h(e,t),r&&r.m(e,null),a=!0},p(c,v){if(v[0]&6488064|v[1]&44){n=c[17];let d;for(d=0;d<n.length;d+=1){const _=Ol(c,n,d);o[d]?(o[d].p(_,v),$(o[d],1)):(o[d]=Fl(_),o[d].c(),$(o[d],1),o[d].m(e,t))}for(Le(),d=n.length;d<o.length;d+=1)f(d);je()}c[34]?r?r.p(c,v):(r=Gl(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){if(!a){for(let v=0;v<n.length;v+=1)$(o[v]);Ae(()=>{i&&i.end(1),s=Ne(e,Me,{}),s.start()}),a=!0}},o(c){o=o.filter(Boolean);for(let v=0;v<o.length;v+=1)ne(o[v]);s&&s.invalidate(),i=ye(e,Me,{}),a=!1},d(c){c&&u(e),we(o,c),r&&r.d(),c&&i&&i.end()}}}function zl(l){let e,t=l[52][l[16]]+"",s,i,a,n,o,f,r,c;function v(){return l[43](l[52])}function d(){return l[44](l[52])}return{c(){e=De("text"),s=W(t),this.h()},l(_){e=Ve(_,"text",{x:!0,y:!0,class:!0});var k=w(e);s=Y(k,t),k.forEach(u),this.h()},h(){b(e,"x",i=l[53]),b(e,"y",a=l[54]),b(e,"class","svelte-1i7628d"),Ce(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},m(_,k){z(_,e,k),h(e,s),f=!0,r||(c=[se(e,"click",v),se(e,"mousemove",d),se(e,"mouseout",l[45]),se(e,"blur",void 0)],r=!0)},p(_,k){l=_,(!f||k[0]&196608)&&t!==(t=l[52][l[16]]+"")&&he(s,t),(!f||k[0]&131072&&i!==(i=l[53]))&&b(e,"x",i),(!f||k[0]&131072&&a!==(a=l[54]))&&b(e,"y",a),k[0]&2293760&&Ce(e,"chosen",l[21].includes(`${l[16]},${l[52][l[16]]}`))},i(_){f||(Ae(()=>{o&&o.end(1),n=Ne(e,Me,{}),n.start()}),f=!0)},o(_){n&&n.invalidate(),o=ye(e,Me,{}),f=!1},d(_){_&&u(e),_&&o&&o.end(),r=!1,tl(c)}}}function Fl(l){let e=l[16]in l[52]&&(!l[36]||l[36]&&l[33].includes(l[52][l[16]])),t,s,i=e&&zl(l);return{c(){i&&i.c(),t=le()},l(a){i&&i.l(a),t=le()},m(a,n){i&&i.m(a,n),z(a,t,n),s=!0},p(a,n){n[0]&196608|n[1]&36&&(e=a[16]in a[52]&&(!a[36]||a[36]&&a[33].includes(a[52][a[16]]))),e?i?(i.p(a,n),n[0]&196608|n[1]&36&&$(i,1)):(i=zl(a),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(Le(),ne(i,1,1,()=>{i=null}),je())},i(a){s||($(i),s=!0)},o(a){ne(i),s=!1},d(a){i&&i.d(a),a&&u(t)}}}function Gl(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),w(e).forEach(u),this.h()},h(){b(e,"class","mesh-onhover mesh-district svelte-1i7628d"),b(e,"d",t=l[0]&&l[5](Qe(l[32],{type:l[0].type,geometries:l[0].geometries.filter(l[46])})))},m(s,i){z(s,e,i)},p(s,i){i[0]&65569|i[1]&10&&t!==(t=s[0]&&s[5](Qe(s[32],{type:s[0].type,geometries:s[0].geometries.filter(s[46])})))&&b(e,"d",t)},d(s){s&&u(e)}}}function Wl(l){let e,t,s,i=l[31],a=[];for(let n=0;n<i.length;n+=1)a[n]=Yl(Cl(l,i,n));return{c(){e=De("g");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=Ve(n,"g",{class:!0});var o=w(e);for(let f=0;f<a.length;f+=1)a[f].l(o);o.forEach(u),this.h()},h(){b(e,"class","streets svelte-1i7628d"),Ce(e,"showStreets",l[30])},m(n,o){z(n,e,o);for(let f=0;f<a.length;f+=1)a[f].m(e,null);t||(s=se(e,"mousemove",l[48]),t=!0)},p(n,o){if(o[0]&32|o[1]&129){i=n[31];let f;for(f=0;f<i.length;f+=1){const r=Cl(n,i,f);a[f]?a[f].p(r,o):(a[f]=Yl(r),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}o[0]&1073741824&&Ce(e,"showStreets",n[30])},d(n){n&&u(e),we(a,n),t=!1,s()}}}function Yl(l){let e,t,s,i;function a(...n){return l[47](l[49],...n)}return{c(){e=De("path"),this.h()},l(n){e=Ve(n,"path",{d:!0,class:!0}),w(e).forEach(u),this.h()},h(){b(e,"d",t=l[5](l[49])),b(e,"class","svelte-1i7628d")},m(n,o){z(n,e,o),s||(i=se(e,"click",ul(a)),s=!0)},p(n,o){l=n,o[0]&32|o[1]&1&&t!==(t=l[5](l[49]))&&b(e,"d",t)},d(n){n&&u(e),s=!1,i()}}}function us(l){let e,t,s,i=[],a=new Map,n,o,f,r,c,v,d,_,k,m,P=l[35]&&Bl(l),D=l[4];const H=L=>Be(L[49]);for(let L=0;L<D.length;L+=1){let A=Ml(l,D,L),Q=H(A);a.set(Q,i[L]=jl(Q,A))}let B=l[19]&&Il(l),j=l[13]&&Nl(l),C=l[15]&&!l[7]&&Rl(l),G=l[7]&&Ul(l),q=(l[15]||l[7])&&Hl(l),X=l[31]&&Wl(l);return{c(){P&&P.c(),e=R(),t=De("svg"),s=De("g");for(let L=0;L<i.length;L+=1)i[L].c();n=De("g"),B&&B.c(),o=le(),j&&j.c(),f=le(),C&&C.c(),r=le(),G&&G.c(),c=le(),q&&q.c(),v=le(),X&&X.c(),this.h()},l(L){P&&P.l(L),e=U(L),t=Ve(L,"svg",{viewBox:!0,style:!0,class:!0});var A=w(t);s=Ve(A,"g",{class:!0});var Q=w(s);for(let K=0;K<i.length;K+=1)i[K].l(Q);Q.forEach(u),n=Ve(A,"g",{class:!0});var te=w(n);B&&B.l(te),o=le(),j&&j.l(te),f=le(),C&&C.l(te),r=le(),G&&G.l(te),c=le(),q&&q.l(te),v=le(),X&&X.l(te),te.forEach(u),A.forEach(u),this.h()},h(){b(s,"class","block-groups svelte-1i7628d"),b(n,"class","meshes svelte-1i7628d"),b(t,"viewBox",d=l[1].join(" ")),ce(t,"--font-size",(l[2]||.8)+"em"),b(t,"class","svelte-1i7628d")},m(L,A){P&&P.m(L,A),z(L,e,A),z(L,t,A),h(t,s);for(let Q=0;Q<i.length;Q+=1)i[Q].m(s,null);h(t,n),B&&B.m(n,null),h(n,o),j&&j.m(n,null),h(n,f),C&&C.m(n,null),h(n,r),G&&G.m(n,null),h(n,c),q&&q.m(n,null),h(n,v),X&&X.m(n,null),_=!0,k||(m=[se(t,"mousedown",function(){wl(l[25])&&l[25].apply(this,arguments)}),se(t,"mouseup",function(){wl(l[26])&&l[26].apply(this,arguments)})],k=!0)},p(L,A){l=L,l[35]?P?P.p(l,A):(P=Bl(l),P.c(),P.m(e.parentNode,e)):P&&(P.d(1),P=null),A[0]&402722808&&(D=l[4],i=qt(i,A,H,1,l,D,a,s,Jt,jl,null,Ml)),l[19]?B?B.p(l,A):(B=Il(l),B.c(),B.m(n,o)):B&&(B.d(1),B=null),l[13]?j?(j.p(l,A),A[0]&8192&&$(j,1)):(j=Nl(l),j.c(),$(j,1),j.m(n,f)):j&&(Le(),ne(j,1,1,()=>{j=null}),je()),l[15]&&!l[7]?C?(C.p(l,A),A[0]&32896&&$(C,1)):(C=Rl(l),C.c(),$(C,1),C.m(n,r)):C&&(Le(),ne(C,1,1,()=>{C=null}),je()),l[7]?G?(G.p(l,A),A[0]&128&&$(G,1)):(G=Ul(l),G.c(),$(G,1),G.m(n,c)):G&&(Le(),ne(G,1,1,()=>{G=null}),je()),l[15]||l[7]?q?(q.p(l,A),A[0]&32896&&$(q,1)):(q=Hl(l),q.c(),$(q,1),q.m(n,v)):q&&(Le(),ne(q,1,1,()=>{q=null}),je()),l[31]?X?X.p(l,A):(X=Wl(l),X.c(),X.m(n,null)):X&&(X.d(1),X=null),(!_||A[0]&2&&d!==(d=l[1].join(" ")))&&b(t,"viewBox",d),(!_||A[0]&4)&&ce(t,"--font-size",(l[2]||.8)+"em")},i(L){_||($(j),$(C),$(G),$(q),_=!0)},o(L){ne(j),ne(C),ne(G),ne(q),_=!1},d(L){P&&P.d(L),L&&u(e),L&&u(t);for(let A=0;A<i.length;A+=1)i[A].d();B&&B.d(),j&&j.d(),C&&C.d(),G&&G.d(),q&&q.d(),X&&X.d(),k=!1,tl(m)}}}function _s(l,e,t){let s,i,a,{viewBox:n,labelSize:o,draggedBgs:f,data:r,path:c,color:v,changingLines:d,neighbor:_,showPluralities:k,metric:m,period:P,tractVars:D,showComms:H,drawings:B,showPlans:j,plan:C,points:G=[],tractMesh:q,bgMesh:X,mesh:L,aggregates:A,obj:Q,handleLabelClick:te,congressPlans:K,plans:ue,startDrag:ge,endDrag:ie,handleMouseMove:ae,viewCutoff:de,showOnlyFocusDistricts:fe,showStreets:x,streets:oe}=e;function ee(){if(!!a)return c(i?Qe(a,{type:Q.type,geometries:Q.geometries.filter(p=>s.includes(p.properties[C]))}):Qe(a,Q,(p,_e)=>Pl(p)!==Pl(_e)))}let J,F;function I({pageX:p,pageY:_e},{properties:{Label:Te}}){t(35,F={x:p,y:_e,label:Te})}const N=p=>d&&C.includes("_")&&_(p),g=p=>console.log(p.properties),S=p=>ae(p),M=(p,_e)=>p.properties[C]!==_e.properties[C],y=p=>te(`${C},${p[C]}`),O=p=>t(34,J=p[C]),be=()=>t(34,J=null),Se=p=>J===p.properties[C],ve=(p,_e)=>I(_e,p),pe=()=>t(35,F=null);return l.$$set=p=>{"viewBox"in p&&t(1,n=p.viewBox),"labelSize"in p&&t(2,o=p.labelSize),"draggedBgs"in p&&t(3,f=p.draggedBgs),"data"in p&&t(4,r=p.data),"path"in p&&t(5,c=p.path),"color"in p&&t(6,v=p.color),"changingLines"in p&&t(7,d=p.changingLines),"neighbor"in p&&t(8,_=p.neighbor),"showPluralities"in p&&t(9,k=p.showPluralities),"metric"in p&&t(10,m=p.metric),"period"in p&&t(11,P=p.period),"tractVars"in p&&t(12,D=p.tractVars),"showComms"in p&&t(13,H=p.showComms),"drawings"in p&&t(14,B=p.drawings),"showPlans"in p&&t(15,j=p.showPlans),"plan"in p&&t(16,C=p.plan),"points"in p&&t(17,G=p.points),"tractMesh"in p&&t(18,q=p.tractMesh),"bgMesh"in p&&t(19,X=p.bgMesh),"mesh"in p&&t(20,L=p.mesh),"aggregates"in p&&t(21,A=p.aggregates),"obj"in p&&t(0,Q=p.obj),"handleLabelClick"in p&&t(22,te=p.handleLabelClick),"congressPlans"in p&&t(23,K=p.congressPlans),"plans"in p&&t(24,ue=p.plans),"startDrag"in p&&t(25,ge=p.startDrag),"endDrag"in p&&t(26,ie=p.endDrag),"handleMouseMove"in p&&t(27,ae=p.handleMouseMove),"viewCutoff"in p&&t(28,de=p.viewCutoff),"showOnlyFocusDistricts"in p&&t(29,fe=p.showOnlyFocusDistricts),"showStreets"in p&&t(30,x=p.showStreets),"streets"in p&&t(31,oe=p.streets)},l.$$.update=()=>{l.$$.dirty[0]&65536&&t(33,s=hs[C]),l.$$.dirty[0]&536870912|l.$$.dirty[1]&4&&t(36,i=fe&&s),l.$$.dirty[0]&25231360&&t(32,a=C.startsWith("congress")?K:ue),l.$$.dirty[0]&65536|l.$$.dirty[1]&2&&t(0,Q=a?a.objects[C]:void 0)},[Q,n,o,f,r,c,v,d,_,k,m,P,D,H,B,j,C,G,q,X,L,A,te,K,ue,ge,ie,ae,de,fe,x,oe,a,s,J,F,i,ee,I,N,g,S,M,y,O,be,Se,ve,pe]}class gs extends xe{constructor(e){super();el(this,e,_s,us,ll,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,showComms:13,drawings:14,showPlans:15,plan:16,points:17,tractMesh:18,bgMesh:19,mesh:20,aggregates:21,obj:0,handleLabelClick:22,congressPlans:23,plans:24,startDrag:25,endDrag:26,handleMouseMove:27,viewCutoff:28,showOnlyFocusDistricts:29,showStreets:30,streets:31},null,[-1,-1])}}function Kl(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ql(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function Jl(l,e,t){const s=l.slice();return s[16]=e[t],s}function Ql(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function Xl(l,e,t){const s=l.slice();return s[10]=e[t],s}function Zl(l,e,t){const s=l.slice();return s[13]=e[t],s}function ds(l){let e,t,s=l[9],i=[];for(let o=0;o<s.length;o+=1)i[o]=$l(ql(l,s,o));let a=l[9],n=[];for(let o=0;o<a.length;o+=1)n[o]=xl(Kl(l,a,o));return{c(){e=V("div");for(let o=0;o<i.length;o+=1)i[o].c();t=R();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0,style:!0});var f=w(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=U(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){b(e,"class","color-legend svelte-lnhifj"),ce(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.5em)"),Ce(e,"pctasian",l[3].includes(l[4]))},m(o,f){z(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);h(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const c=ql(o,s,r);i[r]?i[r].p(c,f):(i[r]=$l(c),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&536){a=o[9];let r;for(r=0;r<a.length;r+=1){const c=Kl(o,a,r);n[r]?n[r].p(c,f):(n[r]=xl(c),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&24&&ce(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.5em)"),f&24&&Ce(e,"pctasian",o[3].includes(o[4]))},d(o){o&&u(e),we(i,o),we(n,o)}}}function ms(l){let e,t,s=l[8],i=[];for(let o=0;o<s.length;o+=1)i[o]=et(Ql(l,s,o));let a=l[8],n=[];for(let o=0;o<a.length;o+=1)n[o]=lt(Jl(l,a,o));return{c(){e=V("div");for(let o=0;o<i.length;o+=1)i[o].c();t=R();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var f=w(e);for(let r=0;r<i.length;r+=1)i[r].l(f);t=U(f);for(let r=0;r<n.length;r+=1)n[r].l(f);f.forEach(u),this.h()},h(){b(e,"class","color-legend plurality-legend svelte-lnhifj")},m(o,f){z(o,e,f);for(let r=0;r<i.length;r+=1)i[r].m(e,null);h(e,t);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const c=Ql(o,s,r);i[r]?i[r].p(c,f):(i[r]=et(c),i[r].c(),i[r].m(e,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}if(f&256){a=o[8];let r;for(r=0;r<a.length;r+=1){const c=Jl(o,a,r);n[r]?n[r].p(c,f):(n[r]=lt(c),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}},d(o){o&&u(e),we(i,o),we(n,o)}}}function vs(l){let e,t,s,i,a,n,o,f,r,c,v,d,_=l[0],k=[];for(let m=0;m<_.length;m+=1)k[m]=st(Xl(l,_,m));return{c(){e=V("div");for(let m=0;m<k.length;m+=1)k[m].c();t=R(),s=V("p"),i=V("span"),a=W("Weak plurality"),n=R(),o=V("p"),f=R(),r=V("p"),c=W("Majority"),v=R(),d=V("p"),this.h()},l(m){e=T(m,"DIV",{class:!0});var P=w(e);for(let j=0;j<k.length;j+=1)k[j].l(P);t=U(P),s=T(P,"P",{class:!0});var D=w(s);i=T(D,"SPAN",{});var H=w(i);a=Y(H,"Weak plurality"),H.forEach(u),D.forEach(u),n=U(P),o=T(P,"P",{class:!0}),w(o).forEach(u),f=U(P),r=T(P,"P",{class:!0});var B=w(r);c=Y(B,"Majority"),B.forEach(u),v=U(P),d=T(P,"P",{class:!0}),w(d).forEach(u),P.forEach(u),this.h()},h(){b(s,"class","col-head svelte-lnhifj"),b(o,"class","col-head svelte-lnhifj"),b(r,"class","col-head svelte-lnhifj"),b(d,"class","col-head svelte-lnhifj"),b(e,"class","legend svelte-lnhifj")},m(m,P){z(m,e,P);for(let D=0;D<k.length;D+=1)k[D].m(e,null);h(e,t),h(e,s),h(s,i),h(i,a),h(e,n),h(e,o),h(e,f),h(e,r),h(r,c),h(e,v),h(e,d)},p(m,P){if(P&7){_=m[0];let D;for(D=0;D<_.length;D+=1){const H=Xl(m,_,D);k[D]?k[D].p(H,P):(k[D]=st(H),k[D].c(),k[D].m(e,t))}for(;D<k.length;D+=1)k[D].d(1);k.length=_.length}},d(m){m&&u(e),we(k,m)}}}function $l(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),w(e).forEach(u),this.h()},h(){ce(e,"background-color",l[3].includes(l[4])?hl[l[20]]:qe[l[20]])},m(t,s){z(t,e,s)},p(t,s){s&24&&ce(e,"background-color",t[3].includes(t[4])?hl[t[20]]:qe[t[20]])},d(t){t&&u(e)}}}function xl(l){let e,t=(l[9][l[9].length-1]<1?Ee(l[21],0):l[9][l[9].length-1]>1e3?We(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?" Asian":"")+"",s,i;return{c(){e=V("p"),s=W(t),i=R(),this.h()},l(a){e=T(a,"P",{class:!0});var n=w(e);s=Y(n,t),i=U(n),n.forEach(u),this.h()},h(){b(e,"class","svelte-lnhifj")},m(a,n){z(a,e,n),h(e,s),h(e,i)},p(a,n){n&536&&t!==(t=(a[9][a[9].length-1]<1?Ee(a[21],0):a[9][a[9].length-1]>1e3?We(a[21]):a[21])+(a[3].includes(a[4])&&a[20]===a[9].length-1?" Asian":"")+"")&&he(s,t)},d(a){a&&u(e)}}}function et(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),w(e).forEach(u),this.h()},h(){ce(e,"background-color",qe[l[20]])},m(t,s){z(t,e,s)},p:Fe,d(t){t&&u(e)}}}function lt(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=V("p"),s=W(t),this.h()},l(i){e=T(i,"P",{class:!0});var a=w(e);s=Y(a,t),a.forEach(u),this.h()},h(){b(e,"class","svelte-lnhifj")},m(i,a){z(i,e,a),h(e,s)},p(i,a){a&256&&t!==(t=i[16].replace("_","-")+"")&&he(s,t)},d(i){i&&u(e)}}}function tt(l){let e;return{c(){e=V("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),w(e).forEach(u),this.h()},h(){ce(e,"background-color",l[2][l[10]]+l[13])},m(t,s){z(t,e,s)},p(t,s){s&7&&ce(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&u(e)}}}function st(l){let e,t,s=Ye(l[10])+"",i,a=l[1],n=[];for(let o=0;o<a.length;o+=1)n[o]=tt(Zl(l,a,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=R(),t=V("p"),i=W(s),this.h()},l(o){for(let r=0;r<n.length;r+=1)n[r].l(o);e=U(o),t=T(o,"P",{class:!0});var f=w(t);i=Y(f,s),f.forEach(u),this.h()},h(){b(t,"class","row-label svelte-lnhifj")},m(o,f){for(let r=0;r<n.length;r+=1)n[r].m(o,f);z(o,e,f),z(o,t,f),h(t,i)},p(o,f){if(f&7){a=o[1];let r;for(r=0;r<a.length;r+=1){const c=Zl(o,a,r);n[r]?n[r].p(c,f):(n[r]=tt(c),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=a.length}f&1&&s!==(s=Ye(o[10])+"")&&he(i,s)},d(o){we(n,o),o&&u(e),o&&u(t)}}}function ps(l){let e,t,s;function i(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?vs:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?ms:ds)}let a=i(l,-1),n=a(l);return{c(){n.c(),s=le()},l(o){n.l(o),s=le()},m(o,f){n.m(o,f),z(o,s,f)},p(o,[f]){a===(a=i(o,f))&&n?n.p(o,f):(n.d(1),n=a(o),n&&(n.c(),n.m(s.parentNode,s)))},i:Fe,o:Fe,d(o){n.d(o),o&&u(s)}}}function bs(l,e,t){let{groups:s,levels:i,colors:a,dynamicVars:n,variable:o,metric:f,showPluralities:r,pluralityVars:c,periods:v,breaks:d}=e;return l.$$set=_=>{"groups"in _&&t(0,s=_.groups),"levels"in _&&t(1,i=_.levels),"colors"in _&&t(2,a=_.colors),"dynamicVars"in _&&t(3,n=_.dynamicVars),"variable"in _&&t(4,o=_.variable),"metric"in _&&t(5,f=_.metric),"showPluralities"in _&&t(6,r=_.showPluralities),"pluralityVars"in _&&t(7,c=_.pluralityVars),"periods"in _&&t(8,v=_.periods),"breaks"in _&&t(9,d=_.breaks)},[s,i,a,n,o,f,r,c,v,d]}class ks extends xe{constructor(e){super();el(this,e,bs,ps,ll,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function it(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function nt(l,e,t){const s=l.slice();return s[18]=e[t],s}function at(l,e,t){const s=l.slice();return s[12]=e[t],s}function ws(l){let e,t=l[6],s=[];for(let i=0;i<t.length;i+=1)s[i]=rt(it(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);z(i,e,a)},p(i,a){if(a&200){t=i[6];let n;for(n=0;n<t.length;n+=1){const o=it(i,t,n);s[n]?s[n].p(o,a):(s[n]=rt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){we(s,i),i&&u(e)}}}function Es(l){let e,t=l[0],s=[];for(let i=0;i<t.length;i+=1)s[i]=ht(at(l,t,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<s.length;n+=1)s[n].m(i,a);z(i,e,a)},p(i,a){if(a&567){t=i[0];let n;for(n=0;n<t.length;n+=1){const o=at(i,t,n);s[n]?s[n].p(o,a):(s[n]=ht(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(i){we(s,i),i&&u(e)}}}function ot(l){let e,t,s=Ye(l[18])+"",i,a,n,o=Ee(l[9]["cvap19"+l[18]])+"",f,r,c,v=Ee(l[9]["pop20"+l[18]])+"",d,_;return{c(){e=V("tr"),t=V("td"),i=W(s),a=R(),n=V("td"),f=W(o),r=R(),c=V("td"),d=W(v),_=R(),this.h()},l(k){e=T(k,"TR",{class:!0});var m=w(e);t=T(m,"TD",{class:!0});var P=w(t);i=Y(P,s),P.forEach(u),a=U(m),n=T(m,"TD",{class:!0});var D=w(n);f=Y(D,o),D.forEach(u),r=U(m),c=T(m,"TD",{class:!0});var H=w(c);d=Y(H,v),H.forEach(u),_=U(m),m.forEach(u),this.h()},h(){b(t,"class","svelte-1avkicx"),b(n,"class","svelte-1avkicx"),b(c,"class","svelte-1avkicx"),b(e,"class","svelte-1avkicx")},m(k,m){z(k,e,m),h(e,t),h(t,i),h(e,a),h(e,n),h(n,f),h(e,r),h(e,c),h(c,d),h(e,_)},p(k,m){m&8&&s!==(s=Ye(k[18])+"")&&he(i,s),m&72&&o!==(o=Ee(k[9]["cvap19"+k[18]])+"")&&he(f,o),m&72&&v!==(v=Ee(k[9]["pop20"+k[18]])+"")&&he(d,v)},d(k){k&&u(e)}}}function rt(l){let e,t,s,i=(l[15]||"COI"+(l[17]+1))+"",a,n,o,f,r,c,v,d,_,k,m,P,D,H,B,j,C,G,q=We(l[9].income)+"",X,L,A,Q,te=Ee(l[9].hhlang)+"",K,ue,ge,ie,ae=Ee(l[9].benefits)+"",de,fe,x,oe;function ee(){return l[11](l[17])}let J=l[3],F=[];for(let I=0;I<J.length;I+=1)F[I]=ot(nt(l,J,I));return{c(){e=V("div"),t=V("p"),s=V("i"),a=W(i),n=R(),o=V("button"),f=W("\u{1F5D1}"),r=R(),c=V("table"),v=V("tr"),d=V("th"),_=R(),k=V("th"),m=W("CVAP"),P=R(),D=V("th"),H=W("Pop."),B=R();for(let I=0;I<F.length;I+=1)F[I].c();j=R(),C=V("p"),G=W("Income: "),X=W(q),L=R(),A=V("p"),Q=W("Asian and LEP: "),K=W(te),ue=R(),ge=V("p"),ie=W("Pct. gov't benefits: "),de=W(ae),fe=R(),this.h()},l(I){e=T(I,"DIV",{});var N=w(e);t=T(N,"P",{class:!0});var g=w(t);s=T(g,"I",{});var S=w(s);a=Y(S,i),S.forEach(u),n=U(g),o=T(g,"BUTTON",{});var M=w(o);f=Y(M,"\u{1F5D1}"),M.forEach(u),g.forEach(u),r=U(N),c=T(N,"TABLE",{class:!0});var y=w(c);v=T(y,"TR",{class:!0});var O=w(v);d=T(O,"TH",{class:!0}),w(d).forEach(u),_=U(O),k=T(O,"TH",{class:!0});var be=w(k);m=Y(be,"CVAP"),be.forEach(u),P=U(O),D=T(O,"TH",{class:!0});var Se=w(D);H=Y(Se,"Pop."),Se.forEach(u),O.forEach(u),B=U(y);for(let _e=0;_e<F.length;_e+=1)F[_e].l(y);y.forEach(u),j=U(N),C=T(N,"P",{class:!0});var ve=w(C);G=Y(ve,"Income: "),X=Y(ve,q),ve.forEach(u),L=U(N),A=T(N,"P",{class:!0});var pe=w(A);Q=Y(pe,"Asian and LEP: "),K=Y(pe,te),pe.forEach(u),ue=U(N),ge=T(N,"P",{class:!0});var p=w(ge);ie=Y(p,"Pct. gov't benefits: "),de=Y(p,ae),p.forEach(u),fe=U(N),N.forEach(u),this.h()},h(){b(t,"class","svelte-1avkicx"),b(d,"class","svelte-1avkicx"),b(k,"class","svelte-1avkicx"),b(D,"class","svelte-1avkicx"),b(v,"class","svelte-1avkicx"),b(c,"class","svelte-1avkicx"),b(C,"class","table-footer svelte-1avkicx"),b(A,"class","table-footer svelte-1avkicx"),b(ge,"class","table-footer svelte-1avkicx")},m(I,N){z(I,e,N),h(e,t),h(t,s),h(s,a),h(t,n),h(t,o),h(o,f),h(e,r),h(e,c),h(c,v),h(v,d),h(v,_),h(v,k),h(k,m),h(v,P),h(v,D),h(D,H),h(c,B);for(let g=0;g<F.length;g+=1)F[g].m(c,null);h(e,j),h(e,C),h(C,G),h(C,X),h(e,L),h(e,A),h(A,Q),h(A,K),h(e,ue),h(e,ge),h(ge,ie),h(ge,de),h(e,fe),x||(oe=se(o,"click",ee),x=!0)},p(I,N){if(l=I,N&64&&i!==(i=(l[15]||"COI"+(l[17]+1))+"")&&he(a,i),N&72){J=l[3];let g;for(g=0;g<J.length;g+=1){const S=nt(l,J,g);F[g]?F[g].p(S,N):(F[g]=ot(S),F[g].c(),F[g].m(c,null))}for(;g<F.length;g+=1)F[g].d(1);F.length=J.length}N&64&&q!==(q=We(l[9].income)+"")&&he(X,q),N&64&&te!==(te=Ee(l[9].hhlang)+"")&&he(K,te),N&64&&ae!==(ae=Ee(l[9].benefits)+"")&&he(de,ae)},d(I){I&&u(e),we(F,I),x=!1,oe()}}}function ft(l){let e,t,s,i=Dl(l[12])+"",a,n,o,f,r,c,v,d,_,k,m,P,D,H,B,j,C,G=Ee(l[9][l[12]].cvap10asian)+"",q,X,L,A=Ee(l[9][l[12]].pop10asian)+"",Q,te,K,ue,ge,ie,ae,de=Ee(l[9][l[12]].cvap19asian)+"",fe,x,oe,ee=Ee(l[9][l[12]].pop20asian)+"",J,F,I,N,g;function S(){return l[10](l[12])}let M=l[4]&&l[2]in l[5]&&ct(l);return{c(){e=V("div"),t=V("p"),s=V("i"),a=W(i),n=R(),o=V("table"),f=V("tr"),r=V("th"),c=R(),v=V("th"),d=W("CVAP"),_=R(),k=V("th"),m=W("Pop."),P=R(),D=V("tr"),H=V("td"),B=W("Asians in 2010"),j=R(),C=V("td"),q=W(G),X=R(),L=V("td"),Q=W(A),te=R(),K=V("tr"),ue=V("td"),ge=W("Asians now"),ie=R(),ae=V("td"),fe=W(de),x=R(),oe=V("td"),J=W(ee),F=R(),M&&M.c(),I=R(),this.h()},l(y){e=T(y,"DIV",{class:!0});var O=w(e);t=T(O,"P",{class:!0});var be=w(t);s=T(be,"I",{});var Se=w(s);a=Y(Se,i),Se.forEach(u),be.forEach(u),n=U(O),o=T(O,"TABLE",{class:!0});var ve=w(o);f=T(ve,"TR",{class:!0});var pe=w(f);r=T(pe,"TH",{class:!0}),w(r).forEach(u),c=U(pe),v=T(pe,"TH",{class:!0});var p=w(v);d=Y(p,"CVAP"),p.forEach(u),_=U(pe),k=T(pe,"TH",{class:!0});var _e=w(k);m=Y(_e,"Pop."),_e.forEach(u),pe.forEach(u),P=U(ve),D=T(ve,"TR",{class:!0});var Te=w(D);H=T(Te,"TD",{class:!0});var Ue=w(H);B=Y(Ue,"Asians in 2010"),Ue.forEach(u),j=U(Te),C=T(Te,"TD",{class:!0});var He=w(C);q=Y(He,G),He.forEach(u),X=U(Te),L=T(Te,"TD",{class:!0});var Oe=w(L);Q=Y(Oe,A),Oe.forEach(u),Te.forEach(u),te=U(ve),K=T(ve,"TR",{class:!0});var Re=w(K);ue=T(Re,"TD",{class:!0});var Xe=w(ue);ge=Y(Xe,"Asians now"),Xe.forEach(u),ie=U(Re),ae=T(Re,"TD",{class:!0});var Ze=w(ae);fe=Y(Ze,de),Ze.forEach(u),x=U(Re),oe=T(Re,"TD",{class:!0});var $e=w(oe);J=Y($e,ee),$e.forEach(u),Re.forEach(u),ve.forEach(u),F=U(O),M&&M.l(O),I=U(O),O.forEach(u),this.h()},h(){b(t,"class","svelte-1avkicx"),b(r,"class","svelte-1avkicx"),b(v,"class","svelte-1avkicx"),b(k,"class","svelte-1avkicx"),b(f,"class","svelte-1avkicx"),b(H,"class","svelte-1avkicx"),b(C,"class","svelte-1avkicx"),b(L,"class","svelte-1avkicx"),b(D,"class","svelte-1avkicx"),b(ue,"class","svelte-1avkicx"),b(ae,"class","svelte-1avkicx"),b(oe,"class","svelte-1avkicx"),b(K,"class","svelte-1avkicx"),b(o,"class","svelte-1avkicx"),b(e,"class","district-aggregate svelte-1avkicx")},m(y,O){z(y,e,O),h(e,t),h(t,s),h(s,a),h(e,n),h(e,o),h(o,f),h(f,r),h(f,c),h(f,v),h(v,d),h(f,_),h(f,k),h(k,m),h(o,P),h(o,D),h(D,H),h(H,B),h(D,j),h(D,C),h(C,q),h(D,X),h(D,L),h(L,Q),h(o,te),h(o,K),h(K,ue),h(ue,ge),h(K,ie),h(K,ae),h(ae,fe),h(K,x),h(K,oe),h(oe,J),h(e,F),M&&M.m(e,null),h(e,I),N||(g=se(t,"click",S),N=!0)},p(y,O){l=y,O&1&&i!==(i=Dl(l[12])+"")&&he(a,i),O&513&&G!==(G=Ee(l[9][l[12]].cvap10asian)+"")&&he(q,G),O&513&&A!==(A=Ee(l[9][l[12]].pop10asian)+"")&&he(Q,A),O&513&&de!==(de=Ee(l[9][l[12]].cvap19asian)+"")&&he(fe,de),O&513&&ee!==(ee=Ee(l[9][l[12]].pop20asian)+"")&&he(J,ee),l[4]&&l[2]in l[5]?M?M.p(l,O):(M=ct(l),M.c(),M.m(e,I)):M&&(M.d(1),M=null)},d(y){y&&u(e),M&&M.d(),N=!1,g()}}}function ct(l){let e,t,s=We(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+Vl(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",i;return{c(){e=V("p"),t=W("Income: "),i=W(s),this.h()},l(a){e=T(a,"P",{class:!0});var n=w(e);t=Y(n,"Income: "),i=Y(n,s),n.forEach(u),this.h()},h(){b(e,"class","table-footer svelte-1avkicx")},m(a,n){z(a,e,n),h(e,t),h(e,i)},p(a,n){n&565&&s!==(s=We(a[9][a[12]].income)+(a[4]&&a[2]in a[5]?"; "+Vl(a[9][a[12]].pop20_total-a[5][a[2]]):"")+"")&&he(i,s)},d(a){a&&u(e)}}}function ht(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&ft(l);return{c(){s&&s.c(),t=le()},l(i){s&&s.l(i),t=le()},m(i,a){s&&s.m(i,a),z(i,t,a)},p(i,a){a&5&&(e=i[12].split(",")[0].split("_")[0]===i[2].split("_")[0]),e?s?s.p(i,a):(s=ft(i),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(i){s&&s.d(i),i&&u(t)}}}function Ps(l){let e;function t(a,n){if(a[8]==="districts")return Es;if(a[8]==="community")return ws}let s=t(l),i=s&&s(l);return{c(){i&&i.c(),e=le()},l(a){i&&i.l(a),e=le()},m(a,n){i&&i.m(a,n),z(a,e,n)},p(a,[n]){s===(s=t(a))&&i?i.p(a,n):(i&&i.d(1),i=s&&s(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Fe,o:Fe,d(a){i&&i.d(a),a&&u(e)}}}function Ds(l,e,t){let{aggregates:s,handleLabelClick:i,plan:a,stats:n,groups:o,changingLines:f,idealValues:r,drawings:c,delDrawing:v}=e,{type:d="districts"}=e;const _=m=>i(m),k=m=>v(m);return l.$$set=m=>{"aggregates"in m&&t(0,s=m.aggregates),"handleLabelClick"in m&&t(1,i=m.handleLabelClick),"plan"in m&&t(2,a=m.plan),"stats"in m&&t(9,n=m.stats),"groups"in m&&t(3,o=m.groups),"changingLines"in m&&t(4,f=m.changingLines),"idealValues"in m&&t(5,r=m.idealValues),"drawings"in m&&t(6,c=m.drawings),"delDrawing"in m&&t(7,v=m.delDrawing),"type"in m&&t(8,d=m.type)},[s,i,a,o,f,r,c,v,d,n,_,k]}class ut extends xe{constructor(e){super();el(this,e,Ds,Ps,ll,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}function _t(l,e,t){const s=l.slice();return s[69]=e[t],s}function gt(l,e,t){const s=l.slice();return s[72]=e[t],s}function dt(l,e,t){const s=l.slice();return s[75]=e[t],s}function mt(l,e,t){const s=l.slice();return s[78]=e[t],s}function vt(l,e,t){const s=l.slice();return s[69]=e[t],s}function pt(l,e,t){const s=l.slice();return s[69]=e[t],s}function bt(l){let e,t=(cl[l[69]]||l[69])+"",s,i;return{c(){e=V("option"),s=W(t),this.h()},l(a){e=T(a,"OPTION",{});var n=w(e);s=Y(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[69],e.value=e.__value},m(a,n){z(a,e,n),h(e,s)},p(a,n){n[0]&4&&t!==(t=(cl[a[69]]||a[69])+"")&&he(s,t),n[0]&4&&i!==(i=a[69])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function kt(l){let e,t=(cl[l[69]]||l[69])+"",s,i;return{c(){e=V("option"),s=W(t),this.h()},l(a){e=T(a,"OPTION",{});var n=w(e);s=Y(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[69],e.value=e.__value},m(a,n){z(a,e,n),h(e,s)},p(a,n){n[0]&8&&t!==(t=(cl[a[69]]||a[69])+"")&&he(s,t),n[0]&8&&i!==(i=a[69])&&(e.__value=i,e.value=e.__value)},d(a){a&&u(e)}}}function wt(l){let e,t=l[2].includes(l[17]),s,i=l[2].includes(l[17]),a,n,o,f=t&&Et(l),r=i&&Dt(l);return{c(){e=V("div"),f&&f.c(),s=R(),r&&r.c()},l(c){e=T(c,"DIV",{});var v=w(e);f&&f.l(v),s=U(v),r&&r.l(v),v.forEach(u)},m(c,v){z(c,e,v),f&&f.m(e,null),h(e,s),r&&r.m(e,null),o=!0},p(c,v){v[0]&131076&&(t=c[2].includes(c[17])),t?f?f.p(c,v):(f=Et(c),f.c(),f.m(e,s)):f&&(f.d(1),f=null),v[0]&131076&&(i=c[2].includes(c[17])),i?r?r.p(c,v):(r=Dt(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){o||(Ae(()=>{n&&n.end(1),a=Ne(e,Ge,{}),a.start()}),o=!0)},o(c){a&&a.invalidate(),n=ye(e,Ge,{}),o=!1},d(c){c&&u(e),f&&f.d(),r&&r.d(),c&&n&&n.end()}}}function Et(l){let e,t=["past","present"],s=[];for(let i=0;i<2;i+=1)s[i]=Pt(mt(l,t,i));return{c(){for(let i=0;i<2;i+=1)s[i].c();e=le()},l(i){for(let a=0;a<2;a+=1)s[a].l(i);e=le()},m(i,a){for(let n=0;n<2;n+=1)s[n].m(i,a);z(i,e,a)},p(i,a){if(a[0]&65536){t=["past","present"];let n;for(n=0;n<2;n+=1){const o=mt(i,t,n);s[n]?s[n].p(o,a):(s[n]=Pt(o),s[n].c(),s[n].m(e.parentNode,e))}for(;n<2;n+=1)s[n].d(1)}},d(i){we(s,i),i&&u(e)}}}function Pt(l){let e,t,s,i=Ye(l[78])+"",a,n,o,f;return{c(){e=V("label"),t=V("input"),s=R(),a=W(i),n=R(),this.h()},l(r){e=T(r,"LABEL",{});var c=w(e);t=T(c,"INPUT",{type:!0,name:!0}),s=U(c),a=Y(c,i),n=U(c),c.forEach(u),this.h()},h(){b(t,"type","radio"),b(t,"name","period"),t.__value=l[78],t.value=t.__value,l[53][0].push(t)},m(r,c){z(r,e,c),h(e,t),t.checked=t.__value===l[16],h(e,s),h(e,a),h(e,n),o||(f=se(t,"change",l[52]),o=!0)},p(r,c){c[0]&65536&&(t.checked=t.__value===r[16])},d(r){r&&u(e),l[53][0].splice(l[53][0].indexOf(t),1),o=!1,f()}}}function Dt(l){let e,t,s=(l[18]?"pct. asian":"pluralities")+"",i,a,n;return{c(){e=V("button"),t=W("Show "),i=W(s),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var f=w(e);t=Y(f,"Show "),i=Y(f,s),f.forEach(u),this.h()},h(){b(e,"class","plurality-toggle svelte-115161l")},m(o,f){z(o,e,f),h(e,t),h(e,i),a||(n=se(e,"click",l[54]),a=!0)},p(o,f){f[0]&262144&&s!==(s=(o[18]?"pct. asian":"pluralities")+"")&&he(i,s)},d(o){o&&u(e),a=!1,n()}}}function Vt(l){let e,t,s,i,a,n,o,f,r,c,v=["assembly","senate","congress"],d=[];for(let _=0;_<3;_+=1)d[_]=St(gt(l,v,_));return a=new ut({props:{aggregates:l[10],handleLabelClick:l[39],plan:l[11],stats:l[25],groups:Ke,changingLines:l[24],idealValues:cs}}),{c(){e=V("div"),t=V("div"),s=V("select");for(let _=0;_<3;_+=1)d[_].c();i=R(),sl(a.$$.fragment),this.h()},l(_){e=T(_,"DIV",{class:!0});var k=w(e);t=T(k,"DIV",{class:!0});var m=w(t);s=T(m,"SELECT",{class:!0});var P=w(s);for(let D=0;D<3;D+=1)d[D].l(P);P.forEach(u),m.forEach(u),i=U(k),il(a.$$.fragment,k),k.forEach(u),this.h()},h(){b(s,"class","svelte-115161l"),l[11]===void 0&&Ae(()=>l[57].call(s)),b(t,"class","plan-selector svelte-115161l"),b(e,"class","svelte-115161l")},m(_,k){z(_,e,k),h(e,t),h(t,s);for(let m=0;m<3;m+=1)d[m].m(s,null);nl(s,l[11]),h(e,i),al(a,e,null),f=!0,r||(c=se(s,"change",l[57]),r=!0)},p(_,k){if(k&0){v=["assembly","senate","congress"];let P;for(P=0;P<3;P+=1){const D=gt(_,v,P);d[P]?d[P].p(D,k):(d[P]=St(D),d[P].c(),d[P].m(s,null))}for(;P<3;P+=1)d[P].d(1)}k[0]&2048&&nl(s,_[11]);const m={};k[0]&1024&&(m.aggregates=_[10]),k[0]&2048&&(m.plan=_[11]),k[0]&33554432&&(m.stats=_[25]),k[0]&16777216&&(m.changingLines=_[24]),a.$set(m)},i(_){f||($(a.$$.fragment,_),Ae(()=>{o&&o.end(1),n=Ne(e,Ge,{}),n.start()}),f=!0)},o(_){ne(a.$$.fragment,_),n&&n.invalidate(),o=ye(e,Ge,{}),f=!1},d(_){_&&u(e),we(d,_),ol(a),_&&o&&o.end(),r=!1,c()}}}function Tt(l){let e,t=ns(l[72]+l[75])+"",s,i;return{c(){e=V("option"),s=W(t),this.h()},l(a){e=T(a,"OPTION",{});var n=w(e);s=Y(n,t),n.forEach(u),this.h()},h(){e.__value=i=l[72]+l[75],e.value=e.__value},m(a,n){z(a,e,n),h(e,s)},p:Fe,d(a){a&&u(e)}}}function St(l){let e,t=["","_letters","_names"],s=[];for(let i=0;i<3;i+=1)s[i]=Tt(dt(l,t,i));return{c(){e=V("optgroup");for(let i=0;i<3;i+=1)s[i].c();this.h()},l(i){e=T(i,"OPTGROUP",{label:!0});var a=w(e);for(let n=0;n<3;n+=1)s[n].l(a);a.forEach(u),this.h()},h(){b(e,"label",Ye(l[72]))},m(i,a){z(i,e,a);for(let n=0;n<3;n+=1)s[n].m(e,null)},p(i,a){if(a&0){t=["","_letters","_names"];let n;for(n=0;n<3;n+=1){const o=dt(i,t,n);s[n]?s[n].p(o,a):(s[n]=Tt(o),s[n].c(),s[n].m(e,null))}for(;n<3;n+=1)s[n].d(1)}},d(i){i&&u(e),we(s,i)}}}function Ct(l){let e,t,s,i,a,n,o,f,r,c,v;return t=new ut({props:{type:"community",drawings:l[9],delDrawing:l[37],groups:Ke,stats:l[25]}}),{c(){e=V("div"),sl(t.$$.fragment),s=R(),i=V("button"),a=V("b"),n=W("[SAVE]"),this.h()},l(d){e=T(d,"DIV",{class:!0});var _=w(e);il(t.$$.fragment,_),s=U(_),i=T(_,"BUTTON",{style:!0});var k=w(i);a=T(k,"B",{});var m=w(a);n=Y(m,"[SAVE]"),m.forEach(u),k.forEach(u),_.forEach(u),this.h()},h(){ce(i,"font-size","13px"),b(e,"class","community svelte-115161l")},m(d,_){z(d,e,_),al(t,e,null),h(e,s),h(e,i),h(i,a),h(a,n),r=!0,c||(v=se(i,"click",l[38]),c=!0)},p(d,_){const k={};_[0]&512&&(k.drawings=d[9]),_[0]&33554432&&(k.stats=d[25]),t.$set(k)},i(d){r||($(t.$$.fragment,d),Ae(()=>{f&&f.end(1),o=Ne(e,Ge,{}),o.start()}),r=!0)},o(d){ne(t.$$.fragment,d),o&&o.invalidate(),f=ye(e,Ge,{}),r=!1},d(d){d&&u(e),ol(t),d&&f&&f.end(),c=!1,v()}}}function Ot(l){let e,t,s,i,a,n,o,f,r,c,v,d,_,k,m=Object.keys(Je),P=[];for(let D=0;D<m.length;D+=1)P[D]=At(_t(l,m,D));return{c(){e=V("div"),t=V("h3"),s=W("Views"),i=R();for(let D=0;D<P.length;D+=1)P[D].c();a=R(),n=V("br"),o=R(),f=V("button"),r=W("See Streets"),this.h()},l(D){e=T(D,"DIV",{class:!0});var H=w(e);t=T(H,"H3",{class:!0});var B=w(t);s=Y(B,"Views"),B.forEach(u),i=U(H);for(let C=0;C<P.length;C+=1)P[C].l(H);a=U(H),n=T(H,"BR",{}),o=U(H),f=T(H,"BUTTON",{class:!0});var j=w(f);r=Y(j,"See Streets"),j.forEach(u),H.forEach(u),this.h()},h(){b(t,"class","svelte-115161l"),b(f,"class","svelte-115161l"),Ce(f,"view-selected",l[7]),b(e,"class","views svelte-115161l")},m(D,H){z(D,e,H),h(e,t),h(t,s),h(e,i);for(let B=0;B<P.length;B+=1)P[B].m(e,null);h(e,a),h(e,n),h(e,o),h(e,f),h(f,r),d=!0,_||(k=se(f,"click",l[61]),_=!0)},p(D,H){if(H[0]&536887296){m=Object.keys(Je);let B;for(B=0;B<m.length;B+=1){const j=_t(D,m,B);P[B]?P[B].p(j,H):(P[B]=At(j),P[B].c(),P[B].m(e,a))}for(;B<P.length;B+=1)P[B].d(1);P.length=m.length}H[0]&128&&Ce(f,"view-selected",D[7])},i(D){d||(Ae(()=>{v&&v.end(1),c=Ne(e,Me,{}),c.start()}),d=!0)},o(D){c&&c.invalidate(),v=ye(e,Me,{}),d=!1},d(D){D&&u(e),we(P,D),D&&v&&v.end(),_=!1,k()}}}function At(l){let e,t=l[69]+"",s,i,a;function n(){return l[60](l[69])}return{c(){e=V("button"),s=W(t),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var f=w(e);s=Y(f,t),f.forEach(u),this.h()},h(){b(e,"class","svelte-115161l"),Ce(e,"view-selected",l[14]===Je[l[69]])},m(o,f){z(o,e,f),h(e,s),i||(a=se(e,"click",n),i=!0)},p(o,f){l=o,f[0]&16384&&Ce(e,"view-selected",l[14]===Je[l[69]])},d(o){o&&u(e),i=!1,a()}}}function Vs(l){let e,t,s,i,a,n,o,f,r,c,v,d,_,k,m,P=(l[24]?"Original":"Modify")+"",D,H,B,j,C,G,q,X,L,A,Q,te,K,ue,ge,ie,ae,de,fe=l[2],x=[];for(let g=0;g<fe.length;g+=1)x[g]=bt(pt(l,fe,g));let oe=l[3],ee=[];for(let g=0;g<oe.length;g+=1)ee[g]=kt(vt(l,oe,g));let J=l[21]&&wt(l);f=new ks({props:{groups:Ke,levels:dl,colors:gl,dynamicVars:l[2],variable:l[17],metric:l[19],showPluralities:l[18],pluralityVars:l[5],periods:fl,breaks:l[32]}});let F=l[20]&&Vt(l),I=l[6]&&Ct(l);K=new gs({props:{viewBox:l[14],labelSize:l[31],draggedBgs:l[8],data:l[1],path:rl,color:l[36],changingLines:l[24],neighbor:l[35],showPluralities:l[18],metric:l[19],period:l[16],tractVars:l[4],showComms:l[6],drawings:l[9],showPlans:l[20],plan:l[11],points:l[28],tractMesh:l[34],bgMesh:l[26],mesh:l[33],aggregates:l[10],obj:l[0],handleLabelClick:l[39],congressPlans:l[12],plans:l[27],startDrag:l[40],endDrag:l[41],handleMouseMove:l[42],viewCutoff:l[29],showOnlyFocusDistricts:l[22],showStreets:l[7],streets:l[13]}});let N=l[21]&&Ot(l);return{c(){e=V("div"),t=V("div"),s=V("select"),i=V("optgroup");for(let g=0;g<x.length;g+=1)x[g].c();a=V("optgroup");for(let g=0;g<ee.length;g+=1)ee[g].c();n=R(),J&&J.c(),o=R(),sl(f.$$.fragment),r=R(),c=V("div"),v=V("h3"),d=V("button"),_=W("Plans \u2193"),k=R(),m=V("button"),D=W(P),H=R(),F&&F.c(),B=R(),j=V("div"),C=V("h3"),G=V("button"),q=W("Communities \u2193"),X=R(),L=V("button"),A=W("+"),Q=R(),I&&I.c(),te=R(),sl(K.$$.fragment),ue=R(),N&&N.c(),this.h()},l(g){e=T(g,"DIV",{class:!0,style:!0});var S=w(e);t=T(S,"DIV",{class:!0});var M=w(t);s=T(M,"SELECT",{style:!0,class:!0});var y=w(s);i=T(y,"OPTGROUP",{label:!0});var O=w(i);for(let Oe=0;Oe<x.length;Oe+=1)x[Oe].l(O);O.forEach(u),a=T(y,"OPTGROUP",{label:!0});var be=w(a);for(let Oe=0;Oe<ee.length;Oe+=1)ee[Oe].l(be);be.forEach(u),y.forEach(u),n=U(M),J&&J.l(M),o=U(M),il(f.$$.fragment,M),r=U(M),c=T(M,"DIV",{class:!0});var Se=w(c);v=T(Se,"H3",{class:!0});var ve=w(v);d=T(ve,"BUTTON",{});var pe=w(d);_=Y(pe,"Plans \u2193"),pe.forEach(u),k=U(ve),m=T(ve,"BUTTON",{class:!0});var p=w(m);D=Y(p,P),p.forEach(u),ve.forEach(u),H=U(Se),F&&F.l(Se),Se.forEach(u),B=U(M),j=T(M,"DIV",{class:!0});var _e=w(j);C=T(_e,"H3",{class:!0});var Te=w(C);G=T(Te,"BUTTON",{});var Ue=w(G);q=Y(Ue,"Communities \u2193"),Ue.forEach(u),X=U(Te),L=T(Te,"BUTTON",{});var He=w(L);A=Y(He,"+"),He.forEach(u),Te.forEach(u),Q=U(_e),I&&I.l(_e),_e.forEach(u),M.forEach(u),te=U(S),il(K.$$.fragment,S),ue=U(S),N&&N.l(S),S.forEach(u),this.h()},h(){b(i,"label","Redistricting data"),b(a,"label","American Community Survey data"),ce(s,"width",l[3].includes(l[17])?"auto":"calc(var(--control-width) - 20px)"),b(s,"class","svelte-115161l"),l[17]===void 0&&Ae(()=>l[51].call(s)),b(m,"class","subbutton svelte-115161l"),b(v,"class","svelte-115161l"),b(c,"class","stats svelte-115161l"),b(C,"class","svelte-115161l"),b(j,"class","stats svelte-115161l"),b(t,"class","controls svelte-115161l"),b(e,"class","container svelte-115161l"),ce(e,"cursor",l[23]?"crosshair":"auto"),ce(e,"--container-font",l[30]+"px"),ce(e,"--control-width",270+(l[30]-16)*10+"px"),Ae(()=>l[62].call(e))},m(g,S){z(g,e,S),h(e,t),h(t,s),h(s,i);for(let M=0;M<x.length;M+=1)x[M].m(i,null);h(s,a);for(let M=0;M<ee.length;M+=1)ee[M].m(a,null);nl(s,l[17]),h(t,n),J&&J.m(t,null),h(t,o),al(f,t,null),h(t,r),h(t,c),h(c,v),h(v,d),h(d,_),h(v,k),h(v,m),h(m,D),h(c,H),F&&F.m(c,null),h(t,B),h(t,j),h(j,C),h(C,G),h(G,q),h(C,X),h(C,L),h(L,A),h(j,Q),I&&I.m(j,null),h(e,te),al(K,e,null),h(e,ue),N&&N.m(e,null),ge=Zt(e,l[62].bind(e)),ie=!0,ae||(de=[se(window,"keydown",l[43]),se(s,"change",l[51]),se(d,"click",l[55]),se(m,"click",l[56]),se(G,"click",l[58]),se(L,"click",l[59])],ae=!0)},p(g,S){if(S[0]&4){fe=g[2];let O;for(O=0;O<fe.length;O+=1){const be=pt(g,fe,O);x[O]?x[O].p(be,S):(x[O]=bt(be),x[O].c(),x[O].m(i,null))}for(;O<x.length;O+=1)x[O].d(1);x.length=fe.length}if(S[0]&8){oe=g[3];let O;for(O=0;O<oe.length;O+=1){const be=vt(g,oe,O);ee[O]?ee[O].p(be,S):(ee[O]=kt(be),ee[O].c(),ee[O].m(a,null))}for(;O<ee.length;O+=1)ee[O].d(1);ee.length=oe.length}(!ie||S[0]&131080)&&ce(s,"width",g[3].includes(g[17])?"auto":"calc(var(--control-width) - 20px)"),S[0]&131084&&nl(s,g[17]),g[21]?J?(J.p(g,S),S[0]&2097152&&$(J,1)):(J=wt(g),J.c(),$(J,1),J.m(t,o)):J&&(Le(),ne(J,1,1,()=>{J=null}),je());const M={};S[0]&4&&(M.dynamicVars=g[2]),S[0]&131072&&(M.variable=g[17]),S[0]&524288&&(M.metric=g[19]),S[0]&262144&&(M.showPluralities=g[18]),S[0]&32&&(M.pluralityVars=g[5]),S[1]&2&&(M.breaks=g[32]),f.$set(M),(!ie||S[0]&16777216)&&P!==(P=(g[24]?"Original":"Modify")+"")&&he(D,P),g[20]?F?(F.p(g,S),S[0]&1048576&&$(F,1)):(F=Vt(g),F.c(),$(F,1),F.m(c,null)):F&&(Le(),ne(F,1,1,()=>{F=null}),je()),g[6]?I?(I.p(g,S),S[0]&64&&$(I,1)):(I=Ct(g),I.c(),$(I,1),I.m(j,null)):I&&(Le(),ne(I,1,1,()=>{I=null}),je());const y={};S[0]&16384&&(y.viewBox=g[14]),S[1]&1&&(y.labelSize=g[31]),S[0]&256&&(y.draggedBgs=g[8]),S[0]&2&&(y.data=g[1]),S[0]&16777216&&(y.changingLines=g[24]),S[0]&262144&&(y.showPluralities=g[18]),S[0]&524288&&(y.metric=g[19]),S[0]&65536&&(y.period=g[16]),S[0]&16&&(y.tractVars=g[4]),S[0]&64&&(y.showComms=g[6]),S[0]&512&&(y.drawings=g[9]),S[0]&1048576&&(y.showPlans=g[20]),S[0]&2048&&(y.plan=g[11]),S[0]&268435456&&(y.points=g[28]),S[0]&67108864&&(y.bgMesh=g[26]),S[0]&1024&&(y.aggregates=g[10]),S[0]&1&&(y.obj=g[0]),S[0]&4096&&(y.congressPlans=g[12]),S[0]&134217728&&(y.plans=g[27]),S[0]&536870912&&(y.viewCutoff=g[29]),S[0]&4194304&&(y.showOnlyFocusDistricts=g[22]),S[0]&128&&(y.showStreets=g[7]),S[0]&8192&&(y.streets=g[13]),K.$set(y),g[21]?N?(N.p(g,S),S[0]&2097152&&$(N,1)):(N=Ot(g),N.c(),$(N,1),N.m(e,null)):N&&(Le(),ne(N,1,1,()=>{N=null}),je()),(!ie||S[0]&8388608)&&ce(e,"cursor",g[23]?"crosshair":"auto"),(!ie||S[0]&1073741824)&&ce(e,"--container-font",g[30]+"px"),(!ie||S[0]&1073741824)&&ce(e,"--control-width",270+(g[30]-16)*10+"px")},i(g){ie||($(J),$(f.$$.fragment,g),$(F),$(I),$(K.$$.fragment,g),$(N),ie=!0)},o(g){ne(J),ne(f.$$.fragment,g),ne(F),ne(I),ne(K.$$.fragment,g),ne(N),ie=!1},d(g){g&&u(e),we(x,g),we(ee,g),J&&J.d(),ol(f),F&&F.d(),I&&I.d(),ol(K),N&&N.d(),ge(),ae=!1,tl(de)}}}async function Ms({fetch:l}){const e=await(await l(`${_l}/output_census.topojson`)).json(),t=ss(e.objects.census),s=Qt(e,t).features.map(Tl),i=["pop","cvap"],a=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(c=>[...i,"GEOID","senate","assembly","congress"].every(v=>!c.includes(v))&&c===c.toLowerCase()).map(c=>c.split("_")[0]);return new Set([...o,...r])},[])],n=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:Xt(t.geometries),dynamicVars:i,staticVars:a,idToIndex:n,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function Ts(l,e,t){let s,i,a,n,{topoData:o,obj:f,neighbors:r,data:c,dynamicVars:v,staticVars:d,tractVars:_,pluralityVars:k,idToIndex:m}=e,P,D,H,B,j=!0,C,G,q,X,L=[],A=[],Q=[],te={},K="assembly",ue,ge,ie,ae,de,fe=2183,x=Je.Brooklyn,oe=18,ee;const J=E=>Qe(o,f,E),F=rl(J((E,re)=>Be(E).substring(0,11)!==Be(re).substring(0,11)));$t(async()=>{t(26,ue=rl(Tl(J((re,Z)=>Be(re)!==Be(Z)))));const E=await Promise.all([as(),os()]);t(27,ge=E[0]),t(28,ae=E[1])});let I;const N=E=>c[E].properties[K];function g(E){const re=N(E),Z=new Set(r[E].map(N).filter(me=>me!==re));if(Z.size===1)t(0,f.geometries[E].properties[K]=I=Z.values().next().value,f);else if(Z.has(I))t(0,f.geometries[E].properties[K]=I,f);else return;t(0,f)}let S="present",M="pop";const y={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let O=!1;function be({properties:E}){if(!E.ALAND)return"#fff";const re=E[`${s}_total`];if(k.includes(s)){const Z=ke=>E[`${s}_${ke}`];if(Z(fl[0])===null)return"#eee";const me=[...fl].sort((ke,ze)=>Z(ze)-Z(ke));return qe[fl.indexOf(me[0])]}else if(d.includes(s)){if(!Sl(i(E)))return"#eee";if(re<=10)return"#fff";for(let Z=1;Z<a.length;Z++)if(i(E)<a[Z])return qe[Z];return qe[a.length-1]}else{if(re<=10)return"#fff";const Z=me=>E[`${s}_${me}`]/E[`${s}_total`];if(O){const me=Ke.filter(Pe=>Z(Pe)>.5)[0];if(me!==void 0)return gl[me]+dl[re<130?0:re<200?1:2];const ke=[...Ke].sort((Pe,Ie)=>Z(Ie)-Z(Pe)),ze=Z(ke[0])-Z(ke[1]);return gl[ke[0]]+dl[ze<.093?0:1]}else{const me=y[M];for(let ke=1;ke<me.length;ke++)if(Z("asian")<me[ke])return hl[ke-1];return hl[me.length-1]}}}const Se=async()=>t(12,ie=await rs()),ve=async()=>t(13,de=await fs());function pe(E){const re=typeof E[0]=="string"?E.map(Pe=>c[m[Pe]].properties):E.map(Pe=>Pe.properties),Z=(Pe,Ie)=>re.reduce((zt,ml)=>zt+(ml[Pe]||0)*(Ie&&ml[Ie]||1),0),me=Pe=>Z(Pe,"pop20_total")/Z("pop20_total"),ke=(Pe,Ie)=>Z(`${Pe}_${Ie}`)/Z(`${Pe}_total`),ze={income:me("income"),hhlang:ke("hhlang","asian"),benefits:ke("families","benefits"),pop20_total:Z("pop20_total")};return["pop20","cvap19","pop10","cvap10"].forEach(Pe=>Ke.forEach(Ie=>ze[Pe+Ie]=ke(Pe,Ie))),ze}const p=E=>t(9,A=A.filter((re,Z)=>Z!==E));async function _e(){try{await fetch(`${_l}/data.json`,{method:"POST",body:JSON.stringify(A)})}catch(E){console.error(E)}}async function Te(){try{const E=await fetch(`${_l}/data.json`);t(9,A=(await E.json()).map(re=>kl(bl({},re),{stats:pe(re.ids)})))}catch(E){console.error(E)}}function Ue(E){Q.includes(E)?t(10,Q=Q.filter(re=>re!==E)):t(10,Q=[...Q,E])}const He=()=>t(47,G=!0),Oe=()=>t(47,G=t(23,C=!1)),Re=E=>C&&G&&(L.length===0?t(8,L=[Be(E)]):L.push(Be(E)));function Xe({key:E}){E==="="&&t(30,oe+=2),E==="-"&&t(30,oe-=2),E==="v"&&t(21,B=!B),E==="f"&&t(22,j=!j)}const Ze=[[]];function $e(){M=El(this),t(17,M),t(3,d),t(2,v)}function Mt(){S=this.__value,t(16,S)}const Bt=()=>t(18,O=!O),Lt=()=>{t(20,P=!P),t(6,D=!1)},jt=()=>t(24,q=!q);function It(){K=El(this),t(11,K)}const Nt=()=>{t(6,D=!D),t(20,P=!1)},yt=()=>t(23,C=!0),Rt=E=>{t(14,x=Je[E]),t(29,fe=6e3)},Ut=()=>t(7,H=!H);function Ht(){ee=this.clientWidth,t(15,ee)}return l.$$set=E=>{"topoData"in E&&t(44,o=E.topoData),"obj"in E&&t(0,f=E.obj),"neighbors"in E&&t(45,r=E.neighbors),"data"in E&&t(1,c=E.data),"dynamicVars"in E&&t(2,v=E.dynamicVars),"staticVars"in E&&t(3,d=E.staticVars),"tractVars"in E&&t(4,_=E.tractVars),"pluralityVars"in E&&t(5,k=E.pluralityVars),"idToIndex"in E&&t(46,m=E.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&196616&&t(19,s=d.includes(M)?M:M+(S==="past"?10:M==="cvap"?19:20)),l.$$.dirty[0]&524288&&t(50,i={income:E=>E[s],hhlang:E=>E[`${s}_asian`]/E[`${s}_total`],graduates:E=>(E[`${s}_hs_grad`]+E[`${s}_ba_above`])/E[`${s}_total`],families:E=>E[`${s}_benefits`]/E[`${s}_total`],workers:E=>E[`${s}_publictransport`]/E[`${s}_total`]}[s]),l.$$.dirty[0]&917518|l.$$.dirty[1]&786432&&t(32,a=v.includes(M)&&!O?y[M]:y[s]||!d.includes(s)||s==="asiaentry"||t(49,y[s]=xt(c.map(E=>i(E.properties)).filter(Sl),6),y)),l.$$.dirty[0]&770|l.$$.dirty[1]&65536&&!G&&L.length>0){if(L[0]===L[L.length-1]){const E=new Set(L),re=es(J((me,ke)=>is(E.has(Be(me)),E.has(Be(ke)))).coordinates.flat()),Z=c.filter(me=>ls(ts(me.geometry.coordinates[0]),re)).map(Be);t(9,A=[...A,{outline:rl({type:"LineString",coordinates:re}),ids:Z,stats:pe(Z)}])}t(8,L=[])}if(l.$$.dirty[0]&6144&&K.startsWith("congress")&&ie===void 0&&Se(),l.$$.dirty[0]&8320&&H&&de===void 0&&ve(),l.$$.dirty[0]&64|l.$$.dirty[1]&131072&&D&&!X&&(Te(),t(48,X=!0)),l.$$.dirty[0]&51200&&t(31,n=(K.endsWith("_names")?.9:1.1)/((ee-410)/x[2])),l.$$.dirty[0]&3073)for(let E=0;E<Q.length;E++){const[re,Z]=Q[E].split(",");re===K&&t(25,te[Q[E]]=pe(f.geometries.filter(({properties:me})=>Z===""+me[K])),te)}},[f,c,v,d,_,k,D,H,L,A,Q,K,ie,de,x,ee,S,M,O,s,P,B,j,C,q,te,ue,ge,ae,fe,oe,n,a,J,F,g,be,p,_e,Ue,He,Oe,Re,Xe,o,r,m,G,X,y,i,$e,Mt,Ze,Bt,Lt,jt,It,Nt,yt,Rt,Ut,Ht]}class Bs extends xe{constructor(e){super();el(this,e,Ts,Vs,ll,{topoData:44,obj:0,neighbors:45,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:46},null,[-1,-1,-1])}}export{Bs as default,Ms as load};

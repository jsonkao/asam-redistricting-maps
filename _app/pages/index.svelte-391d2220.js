var It=Object.defineProperty,St=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var ml=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var vl=(l,e,t)=>e in l?It(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,pl=(l,e)=>{for(var t in e||(e={}))yt.call(e,t)&&vl(l,t,e[t]);if(ml)for(var t of ml(e))Rt.call(e,t)&&vl(l,t,e[t]);return l},bl=(l,e)=>St(l,Nt(e));import{S as $e,i as el,s as ll,l as $,f as U,J as De,K as Ve,a as E,d as u,b as w,L as Le,M as ce,N as kl,O as tl,P as Ae,Q as ye,R as Oe,T as Re,U as ke,H as h,x as K,t as z,g as H,h as he,r as Be,u as ie,w as Ie,V as Qe,W as me,X as wl,Y as Ut,Z as zt,I as Fe,e as D,c as V,k as N,n as y,_ as Ht,$ as Ft,j as sl,m as nl,a0 as il,o as al,v as ol,a1 as Gt,A as Wt,a2 as Yt,a3 as Kt,a4 as qt,a5 as Jt,a6 as Ge,a7 as El}from"../chunks/vendor-b5d01dd2.js";import{b as ul}from"../chunks/paths-28a87002.js";import{i as Me,D as Pl,p as ve,m as We,c as Ye,a as Dl,d as Vl,u as Qt,r as Tl,b as rl,e as Cl,x as Xt,f as Zt,g as xt,h as $t,j as es}from"../chunks/utils-22b41f2c.js";const _l={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},gl=["44","99","ee"],Ke=["asian","black","hispanic","white"],fl=["1990_earlier","1990_1999","2000_2009","2010_later"],cl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},hl=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],qe=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],ls={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},Je={Brooklyn:[35,670,650,550],Chinatown:[80,430,500,600],"All of NYC":[0,0,975,1420]},ts={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};function Al(l,e,t){const s=l.slice();return s[43]=e[t].properties,s[44]=e[t].geometry.coordinates[0],s[45]=e[t].geometry.coordinates[1],s}function Ol(l,e,t){const s=l.slice();return s[48]=e[t].outline,s}function Ml(l,e,t){const s=l.slice();return s[51]=e[t],s[53]=t,s}function jl(l){let e,t,s,n,i;function a(){return l[35](l[53])}function o(){return l[36](l[51])}function f(){return l[37](l[51])}return{c(){e=De("path"),this.h()},l(r){e=Ve(r,"path",{d:!0,fill:!0,class:!0}),E(e).forEach(u),this.h()},h(){w(e,"d",t=l[5](l[51])),w(e,"fill",s=l[6](l[51],l[10],l[11],l[9])),w(e,"class","svelte-1angmxg"),Le(e,"head",l[3][0]===Me(l[51]))},m(r,c){U(r,e,c),n||(i=[ce(e,"click",a),ce(e,"contextmenu",kl(o)),ce(e,"mousemove",kl(f))],n=!0)},p(r,c){l=r,c[0]&48&&t!==(t=l[5](l[51]))&&w(e,"d",t),c[0]&3664&&s!==(s=l[6](l[51],l[10],l[11],l[9]))&&w(e,"fill",s),c[0]&24&&Le(e,"head",l[3][0]===Me(l[51]))},d(r){r&&u(e),n=!1,tl(i)}}}function Ll(l,e){let t,s,n=e[53]<e[28]&&jl(e);return{key:l,first:null,c(){t=$(),n&&n.c(),s=$(),this.h()},l(i){t=$(),n&&n.l(i),s=$(),this.h()},h(){this.first=t},m(i,a){U(i,t,a),n&&n.m(i,a),U(i,s,a)},p(i,a){e=i,e[53]<e[28]?n?n.p(e,a):(n=jl(e),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(i){i&&u(t),n&&n.d(i),i&&u(s)}}}function Bl(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),E(e).forEach(u),this.h()},h(){w(e,"class","mesh-bg svelte-1angmxg"),w(e,"d",t=l[12].includes(l[10])?l[18]:l[19])},m(s,n){U(s,e,n)},p(s,n){n[0]&791552&&t!==(t=s[12].includes(s[10])?s[18]:s[19])&&w(e,"d",t)},d(s){s&&u(e)}}}function Il(l){let e,t,s,n,i=l[14],a=[];for(let o=0;o<i.length;o+=1)a[o]=Sl(Ol(l,i,o));return{c(){e=De("g");for(let o=0;o<a.length;o+=1)a[o].c()},l(o){e=Ve(o,"g",{});var f=E(e);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(u)},m(o,f){U(o,e,f);for(let r=0;r<a.length;r+=1)a[r].m(e,null);n=!0},p(o,f){if(f[0]&16384){i=o[14];let r;for(r=0;r<i.length;r+=1){const c=Ol(o,i,r);a[r]?a[r].p(c,f):(a[r]=Sl(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i(o){n||(Ae(()=>{s&&s.end(1),t=ye(e,Oe,{}),t.start()}),n=!0)},o(o){t&&t.invalidate(),s=Re(e,Oe,{}),n=!1},d(o){o&&u(e),ke(a,o),o&&s&&s.end()}}}function Sl(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),E(e).forEach(u),this.h()},h(){w(e,"class","mesh-community svelte-1angmxg"),w(e,"d",t=l[48])},m(s,n){U(s,e,n)},p(s,n){n[0]&16384&&t!==(t=s[48])&&w(e,"d",t)},d(s){s&&u(e)}}}function Nl(l){let e,t,s,n,i,a;return{c(){e=De("g"),t=De("path"),this.h()},l(o){e=Ve(o,"g",{});var f=E(e);t=Ve(f,"path",{class:!0,d:!0}),E(t).forEach(u),f.forEach(u),this.h()},h(){w(t,"class","mesh-district svelte-1angmxg"),w(t,"d",s=l[34](l[16],l[24],l[23],l[29])),Le(t,"showPluralities",l[9])},m(o,f){U(o,e,f),h(e,t),a=!0},p(o,f){(!a||f[0]&562102272&&s!==(s=o[34](o[16],o[24],o[23],o[29])))&&w(t,"d",s),f[0]&512&&Le(t,"showPluralities",o[9])},i(o){a||(Ae(()=>{i&&i.end(1),n=ye(e,Oe,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=Re(e,Oe,{}),a=!1},d(o){o&&u(e),o&&i&&i.end()}}}function yl(l){let e,t,s,n,i,a;return{c(){e=De("g"),t=De("path"),this.h()},l(o){e=Ve(o,"g",{});var f=E(e);t=Ve(f,"path",{class:!0,d:!0}),E(t).forEach(u),f.forEach(u),this.h()},h(){w(t,"class","mesh-district svelte-1angmxg"),w(t,"d",s=l[5](l[20](l[38],l[0])))},m(o,f){U(o,e,f),h(e,t),a=!0},p(o,f){(!a||f[0]&1114145&&s!==(s=o[5](o[20](o[38],o[0]))))&&w(t,"d",s)},i(o){a||(Ae(()=>{i&&i.end(1),n=ye(e,Oe,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=Re(e,Oe,{}),a=!1},d(o){o&&u(e),o&&i&&i.end()}}}function Rl(l){let e,t,s,n,i,a=l[17],o=[];for(let c=0;c<a.length;c+=1)o[c]=zl(Al(l,a,c));const f=c=>ie(o[c],1,1,()=>{o[c]=null});let r=l[32]&&Hl(l);return{c(){e=De("g");for(let c=0;c<o.length;c+=1)o[c].c();t=$(),r&&r.c(),this.h()},l(c){e=Ve(c,"g",{class:!0});var v=E(e);for(let g=0;g<o.length;g+=1)o[g].l(v);t=$(),r&&r.l(v),v.forEach(u),this.h()},h(){w(e,"class","labels svelte-1angmxg")},m(c,v){U(c,e,v);for(let g=0;g<o.length;g+=1)o[g].m(e,null);h(e,t),r&&r.m(e,null),i=!0},p(c,v){if(v[0]&6488064|v[1]&7){a=c[17];let g;for(g=0;g<a.length;g+=1){const d=Al(c,a,g);o[g]?(o[g].p(d,v),K(o[g],1)):(o[g]=zl(d),o[g].c(),K(o[g],1),o[g].m(e,t))}for(Be(),g=a.length;g<o.length;g+=1)f(g);Ie()}c[32]?r?r.p(c,v):(r=Hl(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){if(!i){for(let v=0;v<a.length;v+=1)K(o[v]);Ae(()=>{n&&n.end(1),s=ye(e,Oe,{}),s.start()}),i=!0}},o(c){o=o.filter(Boolean);for(let v=0;v<o.length;v+=1)ie(o[v]);s&&s.invalidate(),n=Re(e,Oe,{}),i=!1},d(c){c&&u(e),ke(o,c),r&&r.d(),c&&n&&n.end()}}}function Ul(l){let e,t=l[43][l[16]]+"",s,n,i,a,o,f,r,c;function v(){return l[39](l[43])}function g(){return l[40](l[43])}return{c(){e=De("text"),s=z(t),this.h()},l(d){e=Ve(d,"text",{x:!0,y:!0,class:!0});var b=E(e);s=H(b,t),b.forEach(u),this.h()},h(){w(e,"x",n=l[44]),w(e,"y",i=l[45]),w(e,"class","text-label svelte-1angmxg"),Le(e,"chosen",l[21].includes(`${l[16]},${l[43][l[16]]}`))},m(d,b){U(d,e,b),h(e,s),f=!0,r||(c=[ce(e,"click",v),ce(e,"mousemove",g),ce(e,"mouseout",l[41])],r=!0)},p(d,b){l=d,(!f||b[0]&196608)&&t!==(t=l[43][l[16]]+"")&&he(s,t),(!f||b[0]&131072&&n!==(n=l[44]))&&w(e,"x",n),(!f||b[0]&131072&&i!==(i=l[45]))&&w(e,"y",i),b[0]&2293760&&Le(e,"chosen",l[21].includes(`${l[16]},${l[43][l[16]]}`))},i(d){f||(Ae(()=>{o&&o.end(1),a=ye(e,Oe,{}),a.start()}),f=!0)},o(d){a&&a.invalidate(),o=Re(e,Oe,{}),f=!1},d(d){d&&u(e),d&&o&&o.end(),r=!1,tl(c)}}}function zl(l){let e=l[16]in l[43]&&(!l[33]||l[33]&&l[31].includes(l[43][l[16]])),t,s,n=e&&Ul(l);return{c(){n&&n.c(),t=$()},l(i){n&&n.l(i),t=$()},m(i,a){n&&n.m(i,a),U(i,t,a),s=!0},p(i,a){a[0]&196608|a[1]&5&&(e=i[16]in i[43]&&(!i[33]||i[33]&&i[31].includes(i[43][i[16]]))),e?n?(n.p(i,a),a[0]&196608|a[1]&5&&K(n,1)):(n=Ul(i),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(Be(),ie(n,1,1,()=>{n=null}),Ie())},i(i){s||(K(n),s=!0)},o(i){ie(n),s=!1},d(i){n&&n.d(i),i&&u(t)}}}function Hl(l){let e,t;return{c(){e=De("path"),this.h()},l(s){e=Ve(s,"path",{class:!0,d:!0}),E(e).forEach(u),this.h()},h(){w(e,"class","mesh-onhover mesh-district svelte-1angmxg"),w(e,"d",t=l[0]&&l[5](Qe(l[30],{type:l[0].type,geometries:l[0].geometries.filter(l[42])})))},m(s,n){U(s,e,n)},p(s,n){n[0]&1073807393|n[1]&2&&t!==(t=s[0]&&s[5](Qe(s[30],{type:s[0].type,geometries:s[0].geometries.filter(s[42])})))&&w(e,"d",t)},d(s){s&&u(e)}}}function ss(l){let e,t,s=[],n=new Map,i,a,o,f,r,c,v,g,d,b=l[4];const p=O=>Me(O[51]);for(let O=0;O<b.length;O+=1){let B=Ml(l,b,O),J=p(B);n.set(J,s[O]=Ll(J,B))}let T=l[19]&&Bl(l),P=l[13]&&Il(l),L=l[15]&&!l[7]&&Nl(l),F=l[7]&&yl(l),I=(l[15]||l[7])&&Rl(l);return{c(){e=De("svg"),t=De("g");for(let O=0;O<s.length;O+=1)s[O].c();i=De("g"),T&&T.c(),a=$(),P&&P.c(),o=$(),L&&L.c(),f=$(),F&&F.c(),r=$(),I&&I.c(),this.h()},l(O){e=Ve(O,"svg",{viewBox:!0,style:!0,class:!0});var B=E(e);t=Ve(B,"g",{class:!0});var J=E(t);for(let Z=0;Z<s.length;Z+=1)s[Z].l(J);J.forEach(u),i=Ve(B,"g",{class:!0});var ne=E(i);T&&T.l(ne),a=$(),P&&P.l(ne),o=$(),L&&L.l(ne),f=$(),F&&F.l(ne),r=$(),I&&I.l(ne),ne.forEach(u),B.forEach(u),this.h()},h(){w(t,"class","block-groups svelte-1angmxg"),w(i,"class","meshes svelte-1angmxg"),w(e,"viewBox",c=l[1].join(" ")),me(e,"--font-size",(l[2]||.8)+"em"),w(e,"class","svelte-1angmxg")},m(O,B){U(O,e,B),h(e,t);for(let J=0;J<s.length;J+=1)s[J].m(t,null);h(e,i),T&&T.m(i,null),h(i,a),P&&P.m(i,null),h(i,o),L&&L.m(i,null),h(i,f),F&&F.m(i,null),h(i,r),I&&I.m(i,null),v=!0,g||(d=[ce(e,"mousedown",function(){wl(l[25])&&l[25].apply(this,arguments)}),ce(e,"mouseup",function(){wl(l[26])&&l[26].apply(this,arguments)})],g=!0)},p(O,B){l=O,B[0]&402722808&&(b=l[4],s=Ut(s,B,p,1,l,b,n,t,zt,Ll,null,Ml)),l[19]?T?T.p(l,B):(T=Bl(l),T.c(),T.m(i,a)):T&&(T.d(1),T=null),l[13]?P?(P.p(l,B),B[0]&8192&&K(P,1)):(P=Il(l),P.c(),K(P,1),P.m(i,o)):P&&(Be(),ie(P,1,1,()=>{P=null}),Ie()),l[15]&&!l[7]?L?(L.p(l,B),B[0]&32896&&K(L,1)):(L=Nl(l),L.c(),K(L,1),L.m(i,f)):L&&(Be(),ie(L,1,1,()=>{L=null}),Ie()),l[7]?F?(F.p(l,B),B[0]&128&&K(F,1)):(F=yl(l),F.c(),K(F,1),F.m(i,r)):F&&(Be(),ie(F,1,1,()=>{F=null}),Ie()),l[15]||l[7]?I?(I.p(l,B),B[0]&32896&&K(I,1)):(I=Rl(l),I.c(),K(I,1),I.m(i,null)):I&&(Be(),ie(I,1,1,()=>{I=null}),Ie()),(!v||B[0]&2&&c!==(c=l[1].join(" ")))&&w(e,"viewBox",c),(!v||B[0]&4)&&me(e,"--font-size",(l[2]||.8)+"em")},i(O){v||(K(P),K(L),K(F),K(I),v=!0)},o(O){ie(P),ie(L),ie(F),ie(I),v=!1},d(O){O&&u(e);for(let B=0;B<s.length;B+=1)s[B].d();T&&T.d(),P&&P.d(),L&&L.d(),F&&F.d(),I&&I.d(),g=!1,tl(d)}}}function ns(l,e,t){let s,n,i,{viewBox:a,labelSize:o,draggedBgs:f,data:r,path:c,color:v,changingLines:g,neighbor:d,showPluralities:b,metric:p,period:T,tractVars:P,showComms:L,drawings:F,showPlans:I,plan:O,points:B=[],tractMesh:J,bgMesh:ne,mesh:Z,aggregates:q,obj:ee,handleLabelClick:ae,congressPlans:Q,plans:oe,startDrag:re,endDrag:te,handleMouseMove:le,viewCutoff:ue,showOnlyFocusDistricts:X}=e;function W(){if(!!i)return c(n?Qe(i,{type:ee.type,geometries:ee.geometries.filter(_=>s.includes(_.properties[O]))}):Qe(i,ee,(_,A)=>Pl(_)!==Pl(A)))}let se;const x=_=>g&&O.includes("_")&&d(_),G=_=>console.log(_.properties),R=_=>le(_),S=(_,A)=>_.properties[O]!==A.properties[O],j=_=>ae(`${O},${_[O]}`),m=_=>t(32,se=_[O]),C=()=>t(32,se=null),M=_=>se===_.properties[O];return l.$$set=_=>{"viewBox"in _&&t(1,a=_.viewBox),"labelSize"in _&&t(2,o=_.labelSize),"draggedBgs"in _&&t(3,f=_.draggedBgs),"data"in _&&t(4,r=_.data),"path"in _&&t(5,c=_.path),"color"in _&&t(6,v=_.color),"changingLines"in _&&t(7,g=_.changingLines),"neighbor"in _&&t(8,d=_.neighbor),"showPluralities"in _&&t(9,b=_.showPluralities),"metric"in _&&t(10,p=_.metric),"period"in _&&t(11,T=_.period),"tractVars"in _&&t(12,P=_.tractVars),"showComms"in _&&t(13,L=_.showComms),"drawings"in _&&t(14,F=_.drawings),"showPlans"in _&&t(15,I=_.showPlans),"plan"in _&&t(16,O=_.plan),"points"in _&&t(17,B=_.points),"tractMesh"in _&&t(18,J=_.tractMesh),"bgMesh"in _&&t(19,ne=_.bgMesh),"mesh"in _&&t(20,Z=_.mesh),"aggregates"in _&&t(21,q=_.aggregates),"obj"in _&&t(0,ee=_.obj),"handleLabelClick"in _&&t(22,ae=_.handleLabelClick),"congressPlans"in _&&t(23,Q=_.congressPlans),"plans"in _&&t(24,oe=_.plans),"startDrag"in _&&t(25,re=_.startDrag),"endDrag"in _&&t(26,te=_.endDrag),"handleMouseMove"in _&&t(27,le=_.handleMouseMove),"viewCutoff"in _&&t(28,ue=_.viewCutoff),"showOnlyFocusDistricts"in _&&t(29,X=_.showOnlyFocusDistricts)},l.$$.update=()=>{l.$$.dirty[0]&65536&&t(31,s=ts[O]),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(33,n=X&&s),l.$$.dirty[0]&25231360&&t(30,i=O.startsWith("congress")?Q:oe),l.$$.dirty[0]&1073807360&&t(0,ee=i?i.objects[O]:void 0)},[ee,a,o,f,r,c,v,g,d,b,p,T,P,L,F,I,O,B,J,ne,Z,q,ae,Q,oe,re,te,le,ue,X,i,s,se,n,W,x,G,R,S,j,m,C,M]}class is extends $e{constructor(e){super();el(this,e,ns,ss,ll,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,showComms:13,drawings:14,showPlans:15,plan:16,points:17,tractMesh:18,bgMesh:19,mesh:20,aggregates:21,obj:0,handleLabelClick:22,congressPlans:23,plans:24,startDrag:25,endDrag:26,handleMouseMove:27,viewCutoff:28,showOnlyFocusDistricts:29},null,[-1,-1])}}function Fl(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function Gl(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function Wl(l,e,t){const s=l.slice();return s[16]=e[t],s}function Yl(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function Kl(l,e,t){const s=l.slice();return s[10]=e[t],s}function ql(l,e,t){const s=l.slice();return s[13]=e[t],s}function as(l){let e,t,s=l[9],n=[];for(let o=0;o<s.length;o+=1)n[o]=Jl(Gl(l,s,o));let i=l[9],a=[];for(let o=0;o<i.length;o+=1)a[o]=Ql(Fl(l,i,o));return{c(){e=D("div");for(let o=0;o<n.length;o+=1)n[o].c();t=N();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0,style:!0});var f=E(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=y(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(u),this.h()},h(){w(e,"class","color-legend svelte-lnhifj"),me(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.5em)"),Le(e,"pctasian",l[3].includes(l[4]))},m(o,f){U(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);h(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const c=Gl(o,s,r);n[r]?n[r].p(c,f):(n[r]=Jl(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&536){i=o[9];let r;for(r=0;r<i.length;r+=1){const c=Fl(o,i,r);a[r]?a[r].p(c,f):(a[r]=Ql(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&24&&me(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.5em)"),f&24&&Le(e,"pctasian",o[3].includes(o[4]))},d(o){o&&u(e),ke(n,o),ke(a,o)}}}function os(l){let e,t,s=l[8],n=[];for(let o=0;o<s.length;o+=1)n[o]=Xl(Yl(l,s,o));let i=l[8],a=[];for(let o=0;o<i.length;o+=1)a[o]=Zl(Wl(l,i,o));return{c(){e=D("div");for(let o=0;o<n.length;o+=1)n[o].c();t=N();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var f=E(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=y(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(u),this.h()},h(){w(e,"class","color-legend plurality-legend svelte-lnhifj")},m(o,f){U(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);h(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const c=Yl(o,s,r);n[r]?n[r].p(c,f):(n[r]=Xl(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&256){i=o[8];let r;for(r=0;r<i.length;r+=1){const c=Wl(o,i,r);a[r]?a[r].p(c,f):(a[r]=Zl(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},d(o){o&&u(e),ke(n,o),ke(a,o)}}}function rs(l){let e,t,s,n,i,a,o,f,r,c,v,g,d=l[0],b=[];for(let p=0;p<d.length;p+=1)b[p]=$l(Kl(l,d,p));return{c(){e=D("div");for(let p=0;p<b.length;p+=1)b[p].c();t=N(),s=D("p"),n=D("span"),i=z("Weak plurality"),a=N(),o=D("p"),f=N(),r=D("p"),c=z("Majority"),v=N(),g=D("p"),this.h()},l(p){e=V(p,"DIV",{class:!0});var T=E(e);for(let I=0;I<b.length;I+=1)b[I].l(T);t=y(T),s=V(T,"P",{class:!0});var P=E(s);n=V(P,"SPAN",{});var L=E(n);i=H(L,"Weak plurality"),L.forEach(u),P.forEach(u),a=y(T),o=V(T,"P",{class:!0}),E(o).forEach(u),f=y(T),r=V(T,"P",{class:!0});var F=E(r);c=H(F,"Majority"),F.forEach(u),v=y(T),g=V(T,"P",{class:!0}),E(g).forEach(u),T.forEach(u),this.h()},h(){w(s,"class","col-head svelte-lnhifj"),w(o,"class","col-head svelte-lnhifj"),w(r,"class","col-head svelte-lnhifj"),w(g,"class","col-head svelte-lnhifj"),w(e,"class","legend svelte-lnhifj")},m(p,T){U(p,e,T);for(let P=0;P<b.length;P+=1)b[P].m(e,null);h(e,t),h(e,s),h(s,n),h(n,i),h(e,a),h(e,o),h(e,f),h(e,r),h(r,c),h(e,v),h(e,g)},p(p,T){if(T&7){d=p[0];let P;for(P=0;P<d.length;P+=1){const L=Kl(p,d,P);b[P]?b[P].p(L,T):(b[P]=$l(L),b[P].c(),b[P].m(e,t))}for(;P<b.length;P+=1)b[P].d(1);b.length=d.length}},d(p){p&&u(e),ke(b,p)}}}function Jl(l){let e;return{c(){e=D("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),E(e).forEach(u),this.h()},h(){me(e,"background-color",l[3].includes(l[4])?hl[l[20]]:qe[l[20]])},m(t,s){U(t,e,s)},p(t,s){s&24&&me(e,"background-color",t[3].includes(t[4])?hl[t[20]]:qe[t[20]])},d(t){t&&u(e)}}}function Ql(l){let e,t=(l[9][l[9].length-1]<1?ve(l[21],0):l[9][l[9].length-1]>1e3?We(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?" Asian":"")+"",s,n;return{c(){e=D("p"),s=z(t),n=N(),this.h()},l(i){e=V(i,"P",{class:!0});var a=E(e);s=H(a,t),n=y(a),a.forEach(u),this.h()},h(){w(e,"class","svelte-lnhifj")},m(i,a){U(i,e,a),h(e,s),h(e,n)},p(i,a){a&536&&t!==(t=(i[9][i[9].length-1]<1?ve(i[21],0):i[9][i[9].length-1]>1e3?We(i[21]):i[21])+(i[3].includes(i[4])&&i[20]===i[9].length-1?" Asian":"")+"")&&he(s,t)},d(i){i&&u(e)}}}function Xl(l){let e;return{c(){e=D("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),E(e).forEach(u),this.h()},h(){me(e,"background-color",qe[l[20]])},m(t,s){U(t,e,s)},p:Fe,d(t){t&&u(e)}}}function Zl(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=D("p"),s=z(t),this.h()},l(n){e=V(n,"P",{class:!0});var i=E(e);s=H(i,t),i.forEach(u),this.h()},h(){w(e,"class","svelte-lnhifj")},m(n,i){U(n,e,i),h(e,s)},p(n,i){i&256&&t!==(t=n[16].replace("_","-")+"")&&he(s,t)},d(n){n&&u(e)}}}function xl(l){let e;return{c(){e=D("div"),this.h()},l(t){e=V(t,"DIV",{style:!0}),E(e).forEach(u),this.h()},h(){me(e,"background-color",l[2][l[10]]+l[13])},m(t,s){U(t,e,s)},p(t,s){s&7&&me(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&u(e)}}}function $l(l){let e,t,s=Ye(l[10])+"",n,i=l[1],a=[];for(let o=0;o<i.length;o+=1)a[o]=xl(ql(l,i,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=N(),t=D("p"),n=z(s),this.h()},l(o){for(let r=0;r<a.length;r+=1)a[r].l(o);e=y(o),t=V(o,"P",{class:!0});var f=E(t);n=H(f,s),f.forEach(u),this.h()},h(){w(t,"class","row-label svelte-lnhifj")},m(o,f){for(let r=0;r<a.length;r+=1)a[r].m(o,f);U(o,e,f),U(o,t,f),h(t,n)},p(o,f){if(f&7){i=o[1];let r;for(r=0;r<i.length;r+=1){const c=ql(o,i,r);a[r]?a[r].p(c,f):(a[r]=xl(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&1&&s!==(s=Ye(o[10])+"")&&he(n,s)},d(o){ke(a,o),o&&u(e),o&&u(t)}}}function fs(l){let e,t,s;function n(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?rs:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?os:as)}let i=n(l,-1),a=i(l);return{c(){a.c(),s=$()},l(o){a.l(o),s=$()},m(o,f){a.m(o,f),U(o,s,f)},p(o,[f]){i===(i=n(o,f))&&a?a.p(o,f):(a.d(1),a=i(o),a&&(a.c(),a.m(s.parentNode,s)))},i:Fe,o:Fe,d(o){a.d(o),o&&u(s)}}}function cs(l,e,t){let{groups:s,levels:n,colors:i,dynamicVars:a,variable:o,metric:f,showPluralities:r,pluralityVars:c,periods:v,breaks:g}=e;return l.$$set=d=>{"groups"in d&&t(0,s=d.groups),"levels"in d&&t(1,n=d.levels),"colors"in d&&t(2,i=d.colors),"dynamicVars"in d&&t(3,a=d.dynamicVars),"variable"in d&&t(4,o=d.variable),"metric"in d&&t(5,f=d.metric),"showPluralities"in d&&t(6,r=d.showPluralities),"pluralityVars"in d&&t(7,c=d.pluralityVars),"periods"in d&&t(8,v=d.periods),"breaks"in d&&t(9,g=d.breaks)},[s,n,i,a,o,f,r,c,v,g]}class hs extends $e{constructor(e){super();el(this,e,cs,fs,ll,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function et(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function lt(l,e,t){const s=l.slice();return s[18]=e[t],s}function tt(l,e,t){const s=l.slice();return s[12]=e[t],s}function us(l){let e,t=l[6],s=[];for(let n=0;n<t.length;n+=1)s[n]=nt(et(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=$()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=$()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);U(n,e,i)},p(n,i){if(i&200){t=n[6];let a;for(a=0;a<t.length;a+=1){const o=et(n,t,a);s[a]?s[a].p(o,i):(s[a]=nt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){ke(s,n),n&&u(e)}}}function _s(l){let e,t=l[0],s=[];for(let n=0;n<t.length;n+=1)s[n]=ot(tt(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=$()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=$()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);U(n,e,i)},p(n,i){if(i&567){t=n[0];let a;for(a=0;a<t.length;a+=1){const o=tt(n,t,a);s[a]?s[a].p(o,i):(s[a]=ot(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){ke(s,n),n&&u(e)}}}function st(l){let e,t,s=Ye(l[18])+"",n,i,a,o=ve(l[9]["cvap19"+l[18]])+"",f,r,c,v=ve(l[9]["pop20"+l[18]])+"",g,d;return{c(){e=D("tr"),t=D("td"),n=z(s),i=N(),a=D("td"),f=z(o),r=N(),c=D("td"),g=z(v),d=N(),this.h()},l(b){e=V(b,"TR",{class:!0});var p=E(e);t=V(p,"TD",{class:!0});var T=E(t);n=H(T,s),T.forEach(u),i=y(p),a=V(p,"TD",{class:!0});var P=E(a);f=H(P,o),P.forEach(u),r=y(p),c=V(p,"TD",{class:!0});var L=E(c);g=H(L,v),L.forEach(u),d=y(p),p.forEach(u),this.h()},h(){w(t,"class","svelte-1avkicx"),w(a,"class","svelte-1avkicx"),w(c,"class","svelte-1avkicx"),w(e,"class","svelte-1avkicx")},m(b,p){U(b,e,p),h(e,t),h(t,n),h(e,i),h(e,a),h(a,f),h(e,r),h(e,c),h(c,g),h(e,d)},p(b,p){p&8&&s!==(s=Ye(b[18])+"")&&he(n,s),p&72&&o!==(o=ve(b[9]["cvap19"+b[18]])+"")&&he(f,o),p&72&&v!==(v=ve(b[9]["pop20"+b[18]])+"")&&he(g,v)},d(b){b&&u(e)}}}function nt(l){let e,t,s,n=(l[15]||"COI"+(l[17]+1))+"",i,a,o,f,r,c,v,g,d,b,p,T,P,L,F,I,O,B,J=We(l[9].income)+"",ne,Z,q,ee,ae=ve(l[9].hhlang)+"",Q,oe,re,te,le=ve(l[9].benefits)+"",ue,X,W,se;function x(){return l[11](l[17])}let G=l[3],R=[];for(let S=0;S<G.length;S+=1)R[S]=st(lt(l,G,S));return{c(){e=D("div"),t=D("p"),s=D("i"),i=z(n),a=N(),o=D("button"),f=z("\u{1F5D1}"),r=N(),c=D("table"),v=D("tr"),g=D("th"),d=N(),b=D("th"),p=z("CVAP"),T=N(),P=D("th"),L=z("Pop."),F=N();for(let S=0;S<R.length;S+=1)R[S].c();I=N(),O=D("p"),B=z("Income: "),ne=z(J),Z=N(),q=D("p"),ee=z("Asian and LEP: "),Q=z(ae),oe=N(),re=D("p"),te=z("Pct. gov't benefits: "),ue=z(le),X=N(),this.h()},l(S){e=V(S,"DIV",{});var j=E(e);t=V(j,"P",{class:!0});var m=E(t);s=V(m,"I",{});var C=E(s);i=H(C,n),C.forEach(u),a=y(m),o=V(m,"BUTTON",{});var M=E(o);f=H(M,"\u{1F5D1}"),M.forEach(u),m.forEach(u),r=y(j),c=V(j,"TABLE",{class:!0});var _=E(c);v=V(_,"TR",{class:!0});var A=E(v);g=V(A,"TH",{class:!0}),E(g).forEach(u),d=y(A),b=V(A,"TH",{class:!0});var ge=E(b);p=H(ge,"CVAP"),ge.forEach(u),T=y(A),P=V(A,"TH",{class:!0});var Te=E(P);L=H(Te,"Pop."),Te.forEach(u),A.forEach(u),F=y(_);for(let Ee=0;Ee<R.length;Ee+=1)R[Ee].l(_);_.forEach(u),I=y(j),O=V(j,"P",{class:!0});var pe=E(O);B=H(pe,"Income: "),ne=H(pe,J),pe.forEach(u),Z=y(j),q=V(j,"P",{class:!0});var we=E(q);ee=H(we,"Asian and LEP: "),Q=H(we,ae),we.forEach(u),oe=y(j),re=V(j,"P",{class:!0});var je=E(re);te=H(je,"Pct. gov't benefits: "),ue=H(je,le),je.forEach(u),X=y(j),j.forEach(u),this.h()},h(){w(t,"class","svelte-1avkicx"),w(g,"class","svelte-1avkicx"),w(b,"class","svelte-1avkicx"),w(P,"class","svelte-1avkicx"),w(v,"class","svelte-1avkicx"),w(c,"class","svelte-1avkicx"),w(O,"class","table-footer svelte-1avkicx"),w(q,"class","table-footer svelte-1avkicx"),w(re,"class","table-footer svelte-1avkicx")},m(S,j){U(S,e,j),h(e,t),h(t,s),h(s,i),h(t,a),h(t,o),h(o,f),h(e,r),h(e,c),h(c,v),h(v,g),h(v,d),h(v,b),h(b,p),h(v,T),h(v,P),h(P,L),h(c,F);for(let m=0;m<R.length;m+=1)R[m].m(c,null);h(e,I),h(e,O),h(O,B),h(O,ne),h(e,Z),h(e,q),h(q,ee),h(q,Q),h(e,oe),h(e,re),h(re,te),h(re,ue),h(e,X),W||(se=ce(o,"click",x),W=!0)},p(S,j){if(l=S,j&64&&n!==(n=(l[15]||"COI"+(l[17]+1))+"")&&he(i,n),j&72){G=l[3];let m;for(m=0;m<G.length;m+=1){const C=lt(l,G,m);R[m]?R[m].p(C,j):(R[m]=st(C),R[m].c(),R[m].m(c,null))}for(;m<R.length;m+=1)R[m].d(1);R.length=G.length}j&64&&J!==(J=We(l[9].income)+"")&&he(ne,J),j&64&&ae!==(ae=ve(l[9].hhlang)+"")&&he(Q,ae),j&64&&le!==(le=ve(l[9].benefits)+"")&&he(ue,le)},d(S){S&&u(e),ke(R,S),W=!1,se()}}}function it(l){let e,t,s,n=Dl(l[12])+"",i,a,o,f,r,c,v,g,d,b,p,T,P,L,F,I,O,B=ve(l[9][l[12]].cvap10asian)+"",J,ne,Z,q=ve(l[9][l[12]].pop10asian)+"",ee,ae,Q,oe,re,te,le,ue=ve(l[9][l[12]].cvap19asian)+"",X,W,se,x=ve(l[9][l[12]].pop20asian)+"",G,R,S,j,m;function C(){return l[10](l[12])}let M=l[4]&&l[2]in l[5]&&at(l);return{c(){e=D("div"),t=D("p"),s=D("i"),i=z(n),a=N(),o=D("table"),f=D("tr"),r=D("th"),c=N(),v=D("th"),g=z("CVAP"),d=N(),b=D("th"),p=z("Pop."),T=N(),P=D("tr"),L=D("td"),F=z("Asians in 2010"),I=N(),O=D("td"),J=z(B),ne=N(),Z=D("td"),ee=z(q),ae=N(),Q=D("tr"),oe=D("td"),re=z("Asians now"),te=N(),le=D("td"),X=z(ue),W=N(),se=D("td"),G=z(x),R=N(),M&&M.c(),S=N(),this.h()},l(_){e=V(_,"DIV",{class:!0});var A=E(e);t=V(A,"P",{class:!0});var ge=E(t);s=V(ge,"I",{});var Te=E(s);i=H(Te,n),Te.forEach(u),ge.forEach(u),a=y(A),o=V(A,"TABLE",{class:!0});var pe=E(o);f=V(pe,"TR",{class:!0});var we=E(f);r=V(we,"TH",{class:!0}),E(r).forEach(u),c=y(we),v=V(we,"TH",{class:!0});var je=E(v);g=H(je,"CVAP"),je.forEach(u),d=y(we),b=V(we,"TH",{class:!0});var Ee=E(b);p=H(Ee,"Pop."),Ee.forEach(u),we.forEach(u),T=y(pe),P=V(pe,"TR",{class:!0});var Pe=E(P);L=V(Pe,"TD",{class:!0});var Se=E(L);F=H(Se,"Asians in 2010"),Se.forEach(u),I=y(Pe),O=V(Pe,"TD",{class:!0});var ze=E(O);J=H(ze,B),ze.forEach(u),ne=y(Pe),Z=V(Pe,"TD",{class:!0});var Ce=E(Z);ee=H(Ce,q),Ce.forEach(u),Pe.forEach(u),ae=y(pe),Q=V(pe,"TR",{class:!0});var Ue=E(Q);oe=V(Ue,"TD",{class:!0});var Xe=E(oe);re=H(Xe,"Asians now"),Xe.forEach(u),te=y(Ue),le=V(Ue,"TD",{class:!0});var Ze=E(le);X=H(Ze,ue),Ze.forEach(u),W=y(Ue),se=V(Ue,"TD",{class:!0});var xe=E(se);G=H(xe,x),xe.forEach(u),Ue.forEach(u),pe.forEach(u),R=y(A),M&&M.l(A),S=y(A),A.forEach(u),this.h()},h(){w(t,"class","svelte-1avkicx"),w(r,"class","svelte-1avkicx"),w(v,"class","svelte-1avkicx"),w(b,"class","svelte-1avkicx"),w(f,"class","svelte-1avkicx"),w(L,"class","svelte-1avkicx"),w(O,"class","svelte-1avkicx"),w(Z,"class","svelte-1avkicx"),w(P,"class","svelte-1avkicx"),w(oe,"class","svelte-1avkicx"),w(le,"class","svelte-1avkicx"),w(se,"class","svelte-1avkicx"),w(Q,"class","svelte-1avkicx"),w(o,"class","svelte-1avkicx"),w(e,"class","district-aggregate svelte-1avkicx")},m(_,A){U(_,e,A),h(e,t),h(t,s),h(s,i),h(e,a),h(e,o),h(o,f),h(f,r),h(f,c),h(f,v),h(v,g),h(f,d),h(f,b),h(b,p),h(o,T),h(o,P),h(P,L),h(L,F),h(P,I),h(P,O),h(O,J),h(P,ne),h(P,Z),h(Z,ee),h(o,ae),h(o,Q),h(Q,oe),h(oe,re),h(Q,te),h(Q,le),h(le,X),h(Q,W),h(Q,se),h(se,G),h(e,R),M&&M.m(e,null),h(e,S),j||(m=ce(t,"click",C),j=!0)},p(_,A){l=_,A&1&&n!==(n=Dl(l[12])+"")&&he(i,n),A&513&&B!==(B=ve(l[9][l[12]].cvap10asian)+"")&&he(J,B),A&513&&q!==(q=ve(l[9][l[12]].pop10asian)+"")&&he(ee,q),A&513&&ue!==(ue=ve(l[9][l[12]].cvap19asian)+"")&&he(X,ue),A&513&&x!==(x=ve(l[9][l[12]].pop20asian)+"")&&he(G,x),l[4]&&l[2]in l[5]?M?M.p(l,A):(M=at(l),M.c(),M.m(e,S)):M&&(M.d(1),M=null)},d(_){_&&u(e),M&&M.d(),j=!1,m()}}}function at(l){let e,t,s=We(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+Vl(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",n;return{c(){e=D("p"),t=z("Income: "),n=z(s),this.h()},l(i){e=V(i,"P",{class:!0});var a=E(e);t=H(a,"Income: "),n=H(a,s),a.forEach(u),this.h()},h(){w(e,"class","table-footer svelte-1avkicx")},m(i,a){U(i,e,a),h(e,t),h(e,n)},p(i,a){a&565&&s!==(s=We(i[9][i[12]].income)+(i[4]&&i[2]in i[5]?"; "+Vl(i[9][i[12]].pop20_total-i[5][i[2]]):"")+"")&&he(n,s)},d(i){i&&u(e)}}}function ot(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&it(l);return{c(){s&&s.c(),t=$()},l(n){s&&s.l(n),t=$()},m(n,i){s&&s.m(n,i),U(n,t,i)},p(n,i){i&5&&(e=n[12].split(",")[0].split("_")[0]===n[2].split("_")[0]),e?s?s.p(n,i):(s=it(n),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&u(t)}}}function gs(l){let e;function t(i,a){if(i[8]==="districts")return _s;if(i[8]==="community")return us}let s=t(l),n=s&&s(l);return{c(){n&&n.c(),e=$()},l(i){n&&n.l(i),e=$()},m(i,a){n&&n.m(i,a),U(i,e,a)},p(i,[a]){s===(s=t(i))&&n?n.p(i,a):(n&&n.d(1),n=s&&s(i),n&&(n.c(),n.m(e.parentNode,e)))},i:Fe,o:Fe,d(i){n&&n.d(i),i&&u(e)}}}function ds(l,e,t){let{aggregates:s,handleLabelClick:n,plan:i,stats:a,groups:o,changingLines:f,idealValues:r,drawings:c,delDrawing:v}=e,{type:g="districts"}=e;const d=p=>n(p),b=p=>v(p);return l.$$set=p=>{"aggregates"in p&&t(0,s=p.aggregates),"handleLabelClick"in p&&t(1,n=p.handleLabelClick),"plan"in p&&t(2,i=p.plan),"stats"in p&&t(9,a=p.stats),"groups"in p&&t(3,o=p.groups),"changingLines"in p&&t(4,f=p.changingLines),"idealValues"in p&&t(5,r=p.idealValues),"drawings"in p&&t(6,c=p.drawings),"delDrawing"in p&&t(7,v=p.delDrawing),"type"in p&&t(8,g=p.type)},[s,n,i,o,f,r,c,v,g,a,d,b]}class rt extends $e{constructor(e){super();el(this,e,ds,gs,ll,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}function ft(l,e,t){const s=l.slice();return s[65]=e[t],s}function ct(l,e,t){const s=l.slice();return s[68]=e[t],s}function ht(l,e,t){const s=l.slice();return s[71]=e[t],s}function ut(l,e,t){const s=l.slice();return s[74]=e[t],s}function _t(l,e,t){const s=l.slice();return s[65]=e[t],s}function gt(l,e,t){const s=l.slice();return s[65]=e[t],s}function dt(l){let e,t=(cl[l[65]]||l[65])+"",s,n;return{c(){e=D("option"),s=z(t),this.h()},l(i){e=V(i,"OPTION",{});var a=E(e);s=H(a,t),a.forEach(u),this.h()},h(){e.__value=n=l[65],e.value=e.__value},m(i,a){U(i,e,a),h(e,s)},p(i,a){a[0]&4&&t!==(t=(cl[i[65]]||i[65])+"")&&he(s,t),a[0]&4&&n!==(n=i[65])&&(e.__value=n,e.value=e.__value)},d(i){i&&u(e)}}}function mt(l){let e,t=(cl[l[65]]||l[65])+"",s,n;return{c(){e=D("option"),s=z(t),this.h()},l(i){e=V(i,"OPTION",{});var a=E(e);s=H(a,t),a.forEach(u),this.h()},h(){e.__value=n=l[65],e.value=e.__value},m(i,a){U(i,e,a),h(e,s)},p(i,a){a[0]&8&&t!==(t=(cl[i[65]]||i[65])+"")&&he(s,t),a[0]&8&&n!==(n=i[65])&&(e.__value=n,e.value=e.__value)},d(i){i&&u(e)}}}function vt(l){let e,t=l[2].includes(l[7]),s,n=l[2].includes(l[7]),i,a,o,f=t&&pt(l),r=n&&kt(l);return{c(){e=D("div"),f&&f.c(),s=N(),r&&r.c()},l(c){e=V(c,"DIV",{});var v=E(e);f&&f.l(v),s=y(v),r&&r.l(v),v.forEach(u)},m(c,v){U(c,e,v),f&&f.m(e,null),h(e,s),r&&r.m(e,null),o=!0},p(c,v){v[0]&132&&(t=c[2].includes(c[7])),t?f?f.p(c,v):(f=pt(c),f.c(),f.m(e,s)):f&&(f.d(1),f=null),v[0]&132&&(n=c[2].includes(c[7])),n?r?r.p(c,v):(r=kt(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){o||(Ae(()=>{a&&a.end(1),i=ye(e,Ge,{}),i.start()}),o=!0)},o(c){i&&i.invalidate(),a=Re(e,Ge,{}),o=!1},d(c){c&&u(e),f&&f.d(),r&&r.d(),c&&a&&a.end()}}}function pt(l){let e,t=["past","present"],s=[];for(let n=0;n<2;n+=1)s[n]=bt(ut(l,t,n));return{c(){for(let n=0;n<2;n+=1)s[n].c();e=$()},l(n){for(let i=0;i<2;i+=1)s[i].l(n);e=$()},m(n,i){for(let a=0;a<2;a+=1)s[a].m(n,i);U(n,e,i)},p(n,i){if(i[0]&64){t=["past","present"];let a;for(a=0;a<2;a+=1){const o=ut(n,t,a);s[a]?s[a].p(o,i):(s[a]=bt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<2;a+=1)s[a].d(1)}},d(n){ke(s,n),n&&u(e)}}}function bt(l){let e,t,s,n=Ye(l[74])+"",i,a,o,f;return{c(){e=D("label"),t=D("input"),s=N(),i=z(n),a=N(),this.h()},l(r){e=V(r,"LABEL",{});var c=E(e);t=V(c,"INPUT",{type:!0,name:!0}),s=y(c),i=H(c,n),a=y(c),c.forEach(u),this.h()},h(){w(t,"type","radio"),w(t,"name","period"),t.__value=l[74],t.value=t.__value,l[51][0].push(t)},m(r,c){U(r,e,c),h(e,t),t.checked=t.__value===l[6],h(e,s),h(e,i),h(e,a),o||(f=ce(t,"change",l[50]),o=!0)},p(r,c){c[0]&64&&(t.checked=t.__value===r[6])},d(r){r&&u(e),l[51][0].splice(l[51][0].indexOf(t),1),o=!1,f()}}}function kt(l){let e,t,s=(l[8]?"pct. asian":"pluralities")+"",n,i,a;return{c(){e=D("button"),t=z("Show "),n=z(s),this.h()},l(o){e=V(o,"BUTTON",{class:!0});var f=E(e);t=H(f,"Show "),n=H(f,s),f.forEach(u),this.h()},h(){w(e,"class","plurality-toggle svelte-115161l")},m(o,f){U(o,e,f),h(e,t),h(e,n),i||(a=ce(e,"click",l[52]),i=!0)},p(o,f){f[0]&256&&s!==(s=(o[8]?"pct. asian":"pluralities")+"")&&he(n,s)},d(o){o&&u(e),i=!1,a()}}}function wt(l){let e,t,s,n,i,a,o,f,r,c,v=["assembly","senate","congress"],g=[];for(let d=0;d<3;d+=1)g[d]=Pt(ct(l,v,d));return i=new rt({props:{aggregates:l[16],handleLabelClick:l[37],plan:l[15],stats:l[25],groups:Ke,changingLines:l[24],idealValues:ls}}),{c(){e=D("div"),t=D("div"),s=D("select");for(let d=0;d<3;d+=1)g[d].c();n=N(),sl(i.$$.fragment),this.h()},l(d){e=V(d,"DIV",{class:!0});var b=E(e);t=V(b,"DIV",{class:!0});var p=E(t);s=V(p,"SELECT",{class:!0});var T=E(s);for(let P=0;P<3;P+=1)g[P].l(T);T.forEach(u),p.forEach(u),n=y(b),nl(i.$$.fragment,b),b.forEach(u),this.h()},h(){w(s,"class","svelte-115161l"),l[15]===void 0&&Ae(()=>l[55].call(s)),w(t,"class","plan-selector svelte-115161l"),w(e,"class","svelte-115161l")},m(d,b){U(d,e,b),h(e,t),h(t,s);for(let p=0;p<3;p+=1)g[p].m(s,null);il(s,l[15]),h(e,n),al(i,e,null),f=!0,r||(c=ce(s,"change",l[55]),r=!0)},p(d,b){if(b&0){v=["assembly","senate","congress"];let T;for(T=0;T<3;T+=1){const P=ct(d,v,T);g[T]?g[T].p(P,b):(g[T]=Pt(P),g[T].c(),g[T].m(s,null))}for(;T<3;T+=1)g[T].d(1)}b[0]&32768&&il(s,d[15]);const p={};b[0]&65536&&(p.aggregates=d[16]),b[0]&32768&&(p.plan=d[15]),b[0]&33554432&&(p.stats=d[25]),b[0]&16777216&&(p.changingLines=d[24]),i.$set(p)},i(d){f||(K(i.$$.fragment,d),Ae(()=>{o&&o.end(1),a=ye(e,Ge,{}),a.start()}),f=!0)},o(d){ie(i.$$.fragment,d),a&&a.invalidate(),o=Re(e,Ge,{}),f=!1},d(d){d&&u(e),ke(g,d),ol(i),d&&o&&o.end(),r=!1,c()}}}function Et(l){let e,t=Zt(l[68]+l[71])+"",s,n;return{c(){e=D("option"),s=z(t),this.h()},l(i){e=V(i,"OPTION",{});var a=E(e);s=H(a,t),a.forEach(u),this.h()},h(){e.__value=n=l[68]+l[71],e.value=e.__value},m(i,a){U(i,e,a),h(e,s)},p:Fe,d(i){i&&u(e)}}}function Pt(l){let e,t=["","_letters","_names"],s=[];for(let n=0;n<3;n+=1)s[n]=Et(ht(l,t,n));return{c(){e=D("optgroup");for(let n=0;n<3;n+=1)s[n].c();this.h()},l(n){e=V(n,"OPTGROUP",{label:!0});var i=E(e);for(let a=0;a<3;a+=1)s[a].l(i);i.forEach(u),this.h()},h(){w(e,"label",Ye(l[68]))},m(n,i){U(n,e,i);for(let a=0;a<3;a+=1)s[a].m(e,null)},p(n,i){if(i&0){t=["","_letters","_names"];let a;for(a=0;a<3;a+=1){const o=ht(n,t,a);s[a]?s[a].p(o,i):(s[a]=Et(o),s[a].c(),s[a].m(e,null))}for(;a<3;a+=1)s[a].d(1)}},d(n){n&&u(e),ke(s,n)}}}function Dt(l){let e,t,s,n,i,a,o,f,r,c,v;return t=new rt({props:{type:"community",drawings:l[11],delDrawing:l[35],groups:Ke,stats:l[25]}}),{c(){e=D("div"),sl(t.$$.fragment),s=N(),n=D("button"),i=D("b"),a=z("[SAVE]"),this.h()},l(g){e=V(g,"DIV",{class:!0});var d=E(e);nl(t.$$.fragment,d),s=y(d),n=V(d,"BUTTON",{style:!0});var b=E(n);i=V(b,"B",{});var p=E(i);a=H(p,"[SAVE]"),p.forEach(u),b.forEach(u),d.forEach(u),this.h()},h(){me(n,"font-size","13px"),w(e,"class","community svelte-115161l")},m(g,d){U(g,e,d),al(t,e,null),h(e,s),h(e,n),h(n,i),h(i,a),r=!0,c||(v=ce(n,"click",l[36]),c=!0)},p(g,d){const b={};d[0]&2048&&(b.drawings=g[11]),d[0]&33554432&&(b.stats=g[25]),t.$set(b)},i(g){r||(K(t.$$.fragment,g),Ae(()=>{f&&f.end(1),o=ye(e,Ge,{}),o.start()}),r=!0)},o(g){ie(t.$$.fragment,g),o&&o.invalidate(),f=Re(e,Ge,{}),r=!1},d(g){g&&u(e),ol(t),g&&f&&f.end(),c=!1,v()}}}function Vt(l){let e,t,s,n,i,a,o,f=Object.keys(Je),r=[];for(let c=0;c<f.length;c+=1)r[c]=Tt(ft(l,f,c));return{c(){e=D("div"),t=D("h3"),s=z("Views"),n=N();for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=V(c,"DIV",{class:!0});var v=E(e);t=V(v,"H3",{class:!0});var g=E(t);s=H(g,"Views"),g.forEach(u),n=y(v);for(let d=0;d<r.length;d+=1)r[d].l(v);v.forEach(u),this.h()},h(){w(t,"class","svelte-115161l"),w(e,"class","views svelte-115161l")},m(c,v){U(c,e,v),h(e,t),h(t,s),h(e,n);for(let g=0;g<r.length;g+=1)r[g].m(e,null);o=!0},p(c,v){if(v[0]&8192){f=Object.keys(Je);let g;for(g=0;g<f.length;g+=1){const d=ft(c,f,g);r[g]?r[g].p(d,v):(r[g]=Tt(d),r[g].c(),r[g].m(e,null))}for(;g<r.length;g+=1)r[g].d(1);r.length=f.length}},i(c){o||(Ae(()=>{a&&a.end(1),i=ye(e,Oe,{}),i.start()}),o=!0)},o(c){i&&i.invalidate(),a=Re(e,Oe,{}),o=!1},d(c){c&&u(e),ke(r,c),c&&a&&a.end()}}}function Tt(l){let e,t=l[65]+"",s,n,i;function a(){return l[58](l[65])}return{c(){e=D("button"),s=z(t),this.h()},l(o){e=V(o,"BUTTON",{class:!0});var f=E(e);s=H(f,t),f.forEach(u),this.h()},h(){w(e,"class","svelte-115161l"),Le(e,"view-selected",l[13]===Je[l[65]])},m(o,f){U(o,e,f),h(e,s),n||(i=ce(e,"click",a),n=!0)},p(o,f){l=o,f[0]&8192&&Le(e,"view-selected",l[13]===Je[l[65]])},d(o){o&&u(e),n=!1,i()}}}function ms(l){let e,t,s,n,i,a,o,f,r,c,v,g,d,b,p,T=(l[24]?"Original":"Modify")+"",P,L,F,I,O,B,J,ne,Z,q,ee,ae,Q,oe,re,te,le,ue,X=l[2],W=[];for(let m=0;m<X.length;m+=1)W[m]=dt(gt(l,X,m));let se=l[3],x=[];for(let m=0;m<se.length;m+=1)x[m]=mt(_t(l,se,m));let G=l[27]&&vt(l);f=new hs({props:{groups:Ke,levels:gl,colors:_l,dynamicVars:l[2],variable:l[7],metric:l[17],showPluralities:l[8],pluralityVars:l[5],periods:fl,breaks:l[30]}});let R=l[22]&&wt(l),S=l[9]&&Dt(l);Q=new is({props:{viewBox:l[13],labelSize:l[29],draggedBgs:l[10],data:l[1],path:rl,color:l[34],changingLines:l[24],neighbor:l[33],showPluralities:l[8],metric:l[17],period:l[6],tractVars:l[4],showComms:l[9],drawings:l[11],showPlans:l[22],plan:l[15],points:l[21],tractMesh:l[32],bgMesh:l[20],mesh:l[31],aggregates:l[16],obj:l[0],handleLabelClick:l[37],congressPlans:l[12],plans:l[19],startDrag:l[38],endDrag:l[39],handleMouseMove:l[40],viewCutoff:l[18],showOnlyFocusDistricts:l[28]}});let j=l[27]&&Vt(l);return{c(){e=D("div"),t=D("div"),s=D("select"),n=D("optgroup");for(let m=0;m<W.length;m+=1)W[m].c();i=D("optgroup");for(let m=0;m<x.length;m+=1)x[m].c();a=N(),G&&G.c(),o=N(),sl(f.$$.fragment),r=N(),c=D("div"),v=D("h3"),g=D("button"),d=z("Plans \u2193"),b=N(),p=D("button"),P=z(T),L=N(),R&&R.c(),F=N(),I=D("div"),O=D("h3"),B=D("button"),J=z("Communities \u2193"),ne=N(),Z=D("button"),q=z("+"),ee=N(),S&&S.c(),ae=N(),sl(Q.$$.fragment),oe=N(),j&&j.c(),this.h()},l(m){e=V(m,"DIV",{class:!0,style:!0});var C=E(e);t=V(C,"DIV",{class:!0});var M=E(t);s=V(M,"SELECT",{style:!0,class:!0});var _=E(s);n=V(_,"OPTGROUP",{label:!0});var A=E(n);for(let Ce=0;Ce<W.length;Ce+=1)W[Ce].l(A);A.forEach(u),i=V(_,"OPTGROUP",{label:!0});var ge=E(i);for(let Ce=0;Ce<x.length;Ce+=1)x[Ce].l(ge);ge.forEach(u),_.forEach(u),a=y(M),G&&G.l(M),o=y(M),nl(f.$$.fragment,M),r=y(M),c=V(M,"DIV",{class:!0});var Te=E(c);v=V(Te,"H3",{class:!0});var pe=E(v);g=V(pe,"BUTTON",{});var we=E(g);d=H(we,"Plans \u2193"),we.forEach(u),b=y(pe),p=V(pe,"BUTTON",{class:!0});var je=E(p);P=H(je,T),je.forEach(u),pe.forEach(u),L=y(Te),R&&R.l(Te),Te.forEach(u),F=y(M),I=V(M,"DIV",{class:!0});var Ee=E(I);O=V(Ee,"H3",{class:!0});var Pe=E(O);B=V(Pe,"BUTTON",{});var Se=E(B);J=H(Se,"Communities \u2193"),Se.forEach(u),ne=y(Pe),Z=V(Pe,"BUTTON",{});var ze=E(Z);q=H(ze,"+"),ze.forEach(u),Pe.forEach(u),ee=y(Ee),S&&S.l(Ee),Ee.forEach(u),M.forEach(u),ae=y(C),nl(Q.$$.fragment,C),oe=y(C),j&&j.l(C),C.forEach(u),this.h()},h(){w(n,"label","Redistricting data"),w(i,"label","American Community Survey data"),me(s,"width",l[3].includes(l[7])?"auto":"calc(var(--control-width) - 20px)"),w(s,"class","svelte-115161l"),l[7]===void 0&&Ae(()=>l[49].call(s)),w(p,"class","subbutton svelte-115161l"),w(v,"class","svelte-115161l"),w(c,"class","stats svelte-115161l"),w(O,"class","svelte-115161l"),w(I,"class","stats svelte-115161l"),w(t,"class","controls svelte-115161l"),w(e,"class","container svelte-115161l"),me(e,"cursor",l[23]?"crosshair":"auto"),me(e,"--container-font",l[26]+"px"),me(e,"--control-width",270+(l[26]-16)*10+"px"),Ae(()=>l[59].call(e))},m(m,C){U(m,e,C),h(e,t),h(t,s),h(s,n);for(let M=0;M<W.length;M+=1)W[M].m(n,null);h(s,i);for(let M=0;M<x.length;M+=1)x[M].m(i,null);il(s,l[7]),h(t,a),G&&G.m(t,null),h(t,o),al(f,t,null),h(t,r),h(t,c),h(c,v),h(v,g),h(g,d),h(v,b),h(v,p),h(p,P),h(c,L),R&&R.m(c,null),h(t,F),h(t,I),h(I,O),h(O,B),h(B,J),h(O,ne),h(O,Z),h(Z,q),h(I,ee),S&&S.m(I,null),h(e,ae),al(Q,e,null),h(e,oe),j&&j.m(e,null),re=Gt(e,l[59].bind(e)),te=!0,le||(ue=[ce(window,"keydown",l[41]),ce(s,"change",l[49]),ce(g,"click",l[53]),ce(p,"click",l[54]),ce(B,"click",l[56]),ce(Z,"click",l[57])],le=!0)},p(m,C){if(C[0]&4){X=m[2];let A;for(A=0;A<X.length;A+=1){const ge=gt(m,X,A);W[A]?W[A].p(ge,C):(W[A]=dt(ge),W[A].c(),W[A].m(n,null))}for(;A<W.length;A+=1)W[A].d(1);W.length=X.length}if(C[0]&8){se=m[3];let A;for(A=0;A<se.length;A+=1){const ge=_t(m,se,A);x[A]?x[A].p(ge,C):(x[A]=mt(ge),x[A].c(),x[A].m(i,null))}for(;A<x.length;A+=1)x[A].d(1);x.length=se.length}(!te||C[0]&136)&&me(s,"width",m[3].includes(m[7])?"auto":"calc(var(--control-width) - 20px)"),C[0]&140&&il(s,m[7]),m[27]?G?(G.p(m,C),C[0]&134217728&&K(G,1)):(G=vt(m),G.c(),K(G,1),G.m(t,o)):G&&(Be(),ie(G,1,1,()=>{G=null}),Ie());const M={};C[0]&4&&(M.dynamicVars=m[2]),C[0]&128&&(M.variable=m[7]),C[0]&131072&&(M.metric=m[17]),C[0]&256&&(M.showPluralities=m[8]),C[0]&32&&(M.pluralityVars=m[5]),C[0]&1073741824&&(M.breaks=m[30]),f.$set(M),(!te||C[0]&16777216)&&T!==(T=(m[24]?"Original":"Modify")+"")&&he(P,T),m[22]?R?(R.p(m,C),C[0]&4194304&&K(R,1)):(R=wt(m),R.c(),K(R,1),R.m(c,null)):R&&(Be(),ie(R,1,1,()=>{R=null}),Ie()),m[9]?S?(S.p(m,C),C[0]&512&&K(S,1)):(S=Dt(m),S.c(),K(S,1),S.m(I,null)):S&&(Be(),ie(S,1,1,()=>{S=null}),Ie());const _={};C[0]&8192&&(_.viewBox=m[13]),C[0]&536870912&&(_.labelSize=m[29]),C[0]&1024&&(_.draggedBgs=m[10]),C[0]&2&&(_.data=m[1]),C[0]&16777216&&(_.changingLines=m[24]),C[0]&256&&(_.showPluralities=m[8]),C[0]&131072&&(_.metric=m[17]),C[0]&64&&(_.period=m[6]),C[0]&16&&(_.tractVars=m[4]),C[0]&512&&(_.showComms=m[9]),C[0]&2048&&(_.drawings=m[11]),C[0]&4194304&&(_.showPlans=m[22]),C[0]&32768&&(_.plan=m[15]),C[0]&2097152&&(_.points=m[21]),C[0]&1048576&&(_.bgMesh=m[20]),C[0]&65536&&(_.aggregates=m[16]),C[0]&1&&(_.obj=m[0]),C[0]&4096&&(_.congressPlans=m[12]),C[0]&524288&&(_.plans=m[19]),C[0]&262144&&(_.viewCutoff=m[18]),C[0]&268435456&&(_.showOnlyFocusDistricts=m[28]),Q.$set(_),m[27]?j?(j.p(m,C),C[0]&134217728&&K(j,1)):(j=Vt(m),j.c(),K(j,1),j.m(e,null)):j&&(Be(),ie(j,1,1,()=>{j=null}),Ie()),(!te||C[0]&8388608)&&me(e,"cursor",m[23]?"crosshair":"auto"),(!te||C[0]&67108864)&&me(e,"--container-font",m[26]+"px"),(!te||C[0]&67108864)&&me(e,"--control-width",270+(m[26]-16)*10+"px")},i(m){te||(K(G),K(f.$$.fragment,m),K(R),K(S),K(Q.$$.fragment,m),K(j),te=!0)},o(m){ie(G),ie(f.$$.fragment,m),ie(R),ie(S),ie(Q.$$.fragment,m),ie(j),te=!1},d(m){m&&u(e),ke(W,m),ke(x,m),G&&G.d(),ol(f),R&&R.d(),S&&S.d(),ol(Q),j&&j.d(),re(),le=!1,tl(ue)}}}async function Es({fetch:l}){const e=await(await l(`${ul}/output_census.topojson`)).json(),t=Qt(e.objects.census),s=Ht(e,t).features.map(Tl),n=["pop","cvap"],i=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(c=>[...n,"GEOID","senate","assembly","congress"].every(v=>!c.includes(v))&&c===c.toLowerCase()).map(c=>c.split("_")[0]);return new Set([...o,...r])},[])],a=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:Ft(t.geometries),dynamicVars:n,staticVars:i,idToIndex:a,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function vs(l,e,t){let s,n,i,a,{topoData:o,obj:f,neighbors:r,data:c,dynamicVars:v,staticVars:g,tractVars:d,pluralityVars:b,idToIndex:p}=e;const T=k=>Qe(o,f,k),P=rl(T((k,fe)=>Me(k).substring(0,11)!==Me(fe).substring(0,11)));let L=2765,F,I,O;Wt(async()=>{t(20,I=rl(Tl(T((fe,Y)=>Me(fe)!==Me(Y))))),t(18,L=6e3);const k=await Promise.all([xt(),$t()]);t(19,F=k[0]),t(21,O=k[1])});let B;const J=k=>c[k].properties[_];function ne(k){const fe=J(k),Y=new Set(r[k].map(J).filter(_e=>_e!==fe));if(Y.size===1)t(0,f.geometries[k].properties[_]=B=Y.values().next().value,f);else if(Y.has(B))t(0,f.geometries[k].properties[_]=B,f);else return;t(0,f)}let Z="present",q="pop";const ee={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let ae=!1;function Q({properties:k}){if(!k.ALAND)return"#fff";const fe=k[`${s}_total`];if(b.includes(s)){const Y=de=>k[`${s}_${de}`];if(Y(fl[0])===null)return"#eee";const _e=[...fl].sort((de,He)=>Y(He)-Y(de));return qe[fl.indexOf(_e[0])]}else if(g.includes(s)){if(!Cl(n(k)))return"#eee";if(fe<=10)return"#fff";for(let Y=1;Y<i.length;Y++)if(n(k)<i[Y])return qe[Y];return qe[i.length-1]}else{if(fe<=10)return"#fff";const Y=_e=>k[`${s}_${_e}`]/k[`${s}_total`];if(ae){const _e=Ke.filter(be=>Y(be)>.5)[0];if(_e!==void 0)return _l[_e]+gl[fe<130?0:fe<200?1:2];const de=[...Ke].sort((be,Ne)=>Y(Ne)-Y(be)),He=Y(de[0])-Y(de[1]);return _l[de[0]]+gl[He<.093?0:1]}else{const _e=ee[q];for(let de=1;de<_e.length;de++)if(Y("asian")<_e[de])return hl[de-1];return hl[_e.length-1]}}}let oe=!0,re,te,le,ue,X=[],W=[],se;const x=async()=>t(12,se=await es());function G(k){const fe=typeof k[0]=="string"?k.map(be=>c[p[be]].properties):k.map(be=>be.properties),Y=(be,Ne)=>fe.reduce((Bt,dl)=>Bt+(dl[be]||0)*(Ne&&dl[Ne]||1),0),_e=be=>Y(be,"pop20_total")/Y("pop20_total"),de=(be,Ne)=>Y(`${be}_${Ne}`)/Y(`${be}_total`),He={income:_e("income"),hhlang:de("hhlang","asian"),benefits:de("families","benefits"),pop20_total:Y("pop20_total")};return["pop20","cvap19","pop10","cvap10"].forEach(be=>Ke.forEach(Ne=>He[be+Ne]=de(be,Ne))),He}const R=k=>t(11,W=W.filter((fe,Y)=>Y!==k));async function S(){try{await fetch(`${ul}/data.json`,{method:"POST",body:JSON.stringify(W)})}catch(k){console.error(k)}}let j;async function m(){try{const k=await fetch(`${ul}/data.json`);t(11,W=(await k.json()).map(fe=>bl(pl({},fe),{stats:G(fe.ids)})))}catch(k){console.error(k)}}let C=Je.Brooklyn,M,_="assembly",A=[],ge={};function Te(k){A.includes(k)?t(16,A=A.filter(fe=>fe!==k)):t(16,A=[...A,k])}const pe=()=>t(46,le=!0),we=()=>t(46,le=t(23,te=!1)),je=k=>te&&le&&(X.length===0?t(10,X=[Me(k)]):X.push(Me(k)));let Ee=18,Pe=!0,Se=!0;function ze({key:k}){k==="="&&t(26,Ee+=2),k==="-"&&t(26,Ee-=2),k==="v"&&t(27,Pe=!Pe),k==="f"&&t(28,Se=!Se)}const Ce=[[]];function Ue(){q=El(this),t(7,q),t(3,g),t(2,v)}function Xe(){Z=this.__value,t(6,Z)}const Ze=()=>t(8,ae=!ae),xe=()=>{t(22,oe=!oe),t(9,re=!1)},Ct=()=>t(24,ue=!ue);function At(){_=El(this),t(15,_)}const Ot=()=>{t(9,re=!re),t(22,oe=!1)},Mt=()=>t(23,te=!0),jt=k=>t(13,C=Je[k]);function Lt(){M=this.clientWidth,t(14,M)}return l.$$set=k=>{"topoData"in k&&t(42,o=k.topoData),"obj"in k&&t(0,f=k.obj),"neighbors"in k&&t(43,r=k.neighbors),"data"in k&&t(1,c=k.data),"dynamicVars"in k&&t(2,v=k.dynamicVars),"staticVars"in k&&t(3,g=k.staticVars),"tractVars"in k&&t(4,d=k.tractVars),"pluralityVars"in k&&t(5,b=k.pluralityVars),"idToIndex"in k&&t(44,p=k.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&200&&t(17,s=g.includes(q)?q:q+(Z==="past"?10:q==="cvap"?19:20)),l.$$.dirty[0]&131072&&t(48,n={income:k=>k[s],hhlang:k=>k[`${s}_asian`]/k[`${s}_total`],graduates:k=>(k[`${s}_hs_grad`]+k[`${s}_ba_above`])/k[`${s}_total`],families:k=>k[`${s}_benefits`]/k[`${s}_total`],workers:k=>k[`${s}_publictransport`]/k[`${s}_total`]}[s]),l.$$.dirty[0]&131470|l.$$.dirty[1]&147456&&t(30,i=v.includes(q)&&!ae?ee[q]:ee[s]||!g.includes(s)||s==="asiaentry"||t(45,ee[s]=Yt(c.map(k=>n(k.properties)).filter(Cl),6),ee)),l.$$.dirty[0]&3074|l.$$.dirty[1]&32768&&!le&&X.length>0){if(X[0]===X[X.length-1]){const k=new Set(X),fe=Kt(T((_e,de)=>Xt(k.has(Me(_e)),k.has(Me(de)))).coordinates.flat()),Y=c.filter(_e=>qt(Jt(_e.geometry.coordinates[0]),fe)).map(Me);t(11,W=[...W,{outline:rl({type:"LineString",coordinates:fe}),ids:Y,stats:G(Y)}])}t(10,X=[])}if(l.$$.dirty[0]&36864&&_.startsWith("congress")&&se===void 0&&x(),l.$$.dirty[0]&512|l.$$.dirty[1]&65536&&re&&!j&&(m(),t(47,j=!0)),l.$$.dirty[0]&57344&&t(29,a=(_.endsWith("_names")?.9:1.1)/((M-410)/C[2])),l.$$.dirty[0]&98305)for(let k=0;k<A.length;k++){const[fe,Y]=A[k].split(",");fe===_&&t(25,ge[A[k]]=G(f.geometries.filter(({properties:_e})=>Y===""+_e[_])),ge)}},[f,c,v,g,d,b,Z,q,ae,re,X,W,se,C,M,_,A,s,L,F,I,O,oe,te,ue,ge,Ee,Pe,Se,a,i,T,P,ne,Q,R,S,Te,pe,we,je,ze,o,r,p,ee,le,j,n,Ue,Xe,Ce,Ze,xe,Ct,At,Ot,Mt,jt,Lt]}class Ps extends $e{constructor(e){super();el(this,e,vs,ms,ll,{topoData:42,obj:0,neighbors:43,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:44},null,[-1,-1,-1])}}export{Ps as default,Es as load};

import{S as M,i as I,s as w,e as h,c as d,a as y,d as u,b as f,f as m,k as b,t as P,n as g,g as T,H as v,M as q,U as J,l as L,a9 as S,aa as N,I as D,A as C,Z as W}from"../chunks/vendor-b1986be3.js";import{e as A}from"../chunks/utils-eca50613.js";function k(c,a,t){const o=c.slice();return o[7]=a[t],o}function x(c){let a,t=c[2],o=[];for(let l=0;l<t.length;l+=1)o[l]=E(k(c,t,l));return{c(){a=h("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){a=d(l,"DIV",{class:!0});var n=y(a);for(let s=0;s<o.length;s+=1)o[s].l(n);n.forEach(u),this.h()},h(){f(a,"class","controls svelte-1ve7sum")},m(l,n){m(l,a,n);for(let s=0;s<o.length;s+=1)o[s].m(a,null)},p(l,n){if(n&6){t=l[2];let s;for(s=0;s<t.length;s+=1){const p=k(l,t,s);o[s]?o[s].p(p,n):(o[s]=E(p),o[s].c(),o[s].m(a,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=t.length}},d(l){l&&u(a),J(o,l)}}}function E(c){let a,t,o,l=A(c[7])+"",n,s,p,r;return{c(){a=h("label"),t=h("input"),o=b(),n=P(l),s=b(),this.h()},l(i){a=d(i,"LABEL",{class:!0});var e=y(a);t=d(e,"INPUT",{type:!0,name:!0}),o=g(e),n=T(e,l),s=g(e),e.forEach(u),this.h()},h(){f(t,"type","radio"),f(t,"name","plans"),t.__value=c[7],t.value=t.__value,c[6][0].push(t),f(a,"class","svelte-1ve7sum")},m(i,e){m(i,a,e),v(a,t),t.checked=t.__value===c[1],v(a,o),v(a,n),v(a,s),p||(r=q(t,"change",c[5]),p=!0)},p(i,e){e&2&&(t.checked=t.__value===i[1])},d(i){i&&u(a),c[6][0].splice(c[6][0].indexOf(t),1),p=!1,r()}}}function F(c){let a,t,o,l,n,s,p,r=c[0]&&x(c);return{c(){a=h("link"),t=h("script"),l=b(),n=h("div"),s=b(),r&&r.c(),p=L(),this.h()},l(i){const e=S('[data-svelte="svelte-1p75gtx"]',document.head);a=d(e,"LINK",{href:!0,rel:!0}),t=d(e,"SCRIPT",{src:!0});var _=y(t);_.forEach(u),e.forEach(u),l=g(i),n=d(i,"DIV",{id:!0,class:!0}),y(n).forEach(u),s=g(i),r&&r.l(i),p=L(),this.h()},h(){f(a,"href","https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css"),f(a,"rel","stylesheet"),N(t.src,o="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js")||f(t,"src",o),f(n,"id","map"),f(n,"class","svelte-1ve7sum")},m(i,e){v(document.head,a),v(document.head,t),m(i,l,e),m(i,n,e),m(i,s,e),r&&r.m(i,e),m(i,p,e)},p(i,[e]){i[0]?r?r.p(i,e):(r=x(i),r.c(),r.m(p.parentNode,p)):r&&(r.d(1),r=null)},i:D,o:D,d(i){u(a),u(t),i&&u(l),i&&u(n),i&&u(s),r&&r.d(i),i&&u(p)}}}async function U({fetch:c}){return{props:{topoData:await(await c("/plans.topojson")).json()}}}function G(c,a,t){let{topoData:o}=a,l,n;const s=["assembly","assembly_letters","assembly_names","senate","senate_letters","senate_names"];C(()=>{mapboxgl.accessToken="pk.eyJ1IjoiaGFvaGFvbTEiLCJhIjoiY2tlenMwMDdhMDh5dDJxcWk1MXRpNWdrcSJ9.WJ50sc0kycv1demj-0tlMQ",t(4,l=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[-73.967,40.72],zoom:12})),l.on("load",async()=>{s.forEach(e=>{const _=W(o,o.objects[e]);l.addSource(e,{type:"geojson",data:_}),l.addLayer({id:e+"_fill",type:"fill",source:e,paint:{"fill-color":"#0080ff","fill-opacity":.1}}),l.addLayer({id:e+"_outline",type:"line",source:e,layout:{},paint:{"line-color":"#000","line-width":1}}),l.on("click",e+"_fill",j=>{new mapboxgl.Popup().setLngLat(j.lngLat).setHTML(j.features[0].properties[e]).addTo(l)})}),t(0,n=!0)})});let p=s[0];const r=[[]];function i(){p=this.__value,t(1,p)}return c.$$set=e=>{"topoData"in e&&t(3,o=e.topoData)},c.$$.update=()=>{c.$$.dirty&19&&n&&s.forEach(e=>{const _=e===p?"visible":"none";l.setLayoutProperty(`${e}_fill`,"visibility",_),l.setLayoutProperty(`${e}_outline`,"visibility",_),console.log(e,_)})},[n,p,s,o,l,i,r]}class V extends M{constructor(a){super();I(this,a,G,F,w,{topoData:3})}}export{V as default,U as load};

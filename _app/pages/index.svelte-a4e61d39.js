var Jt=Object.defineProperty,Xt=Object.defineProperties;var Zt=Object.getOwnPropertyDescriptors;var jl=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var Il=(l,e,t)=>e in l?Jt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Ml=(l,e)=>{for(var t in e||(e={}))$t.call(e,t)&&Il(l,t,e[t]);if(jl)for(var t of jl(e))xt.call(e,t)&&Il(l,t,e[t]);return l},Ll=(l,e)=>Xt(l,Zt(e));import{S as tl,i as sl,s as nl,e as P,t as z,c as D,a as b,g as R,d as h,b as p,J as he,f as N,H as u,h as ae,l as le,K as Ee,L as Pe,M as Me,N as ce,O as El,P as al,Q as Oe,R as We,T as Le,U as Ye,V as be,x as ee,r as Re,u as ie,w as Ue,W as il,k as C,n as B,X as Nl,Y as es,Z as ls,I as He,D as yl,E as Cl,F as Bl,G as zl,_ as dl,$ as ts,a0 as ss,j as Ke,m as Qe,a1 as Ze,o as Je,a2 as ns,v as Xe,A as as,a3 as is,a4 as os,a5 as rs,a6 as fs,a7 as Pl}from"../chunks/vendor-a95c9b29.js";import{b as Dl}from"../chunks/paths-28a87002.js";import{i as Ae,D as Rl,p as _e,m as $e,c as qe,a as Ul,d as Hl,u as cs,r as ql,b as pl,e as Fl,x as us,g as hs,f as _s,h as gs,j as ds,k as ps}from"../chunks/utils-2dc8ddbc.js";const Vl={black:"#9fd400",hispanic:"#ffaa00",asian:"#ff0000",white:"#73B2FF"},Tl=["44","99","ee"],xe=["asian","black","hispanic","white"],ml=["1990_earlier","1990_1999","2000_2009","2010_later"],vl={hhlang:"Proportion of households that speak an Asian language and are LEP",income:"Median household income",graduates:"Proportion of people who graduated >= high school",families:"Proportion of families who receive gov't benefits",asiaentry:"Dominant entry period for Asian families",workers:"Proportion of workers who take public transportation",cvap:"Citizen voting age population by race",pop:"Population by race"},bl=["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26"],el=["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],ms={assembly_letters:134675,assembly_names:134626,senate_letters:320655,senate_names:321190,congress_letters:776971,congress_names:776971},kl={Brooklyn:[20,670,600,520],"Lower Manhattan":[80,430,500,600],Queens:[200,290,775,600],"All of NYC":[0,0,975,1220]},vs={assembly:"49 47 45 41 51 48".split(" ").map(l=>+l),assembly_letters:"AU AW AS AT AV AY AO".split(" "),assembly_names:"BNSNHRST GRAVESEND MADFLAT CNYSHPSHD BAYDYKER SUNSET BOROUGHPARK".split(" "),senate:"20 17 23 22 19".split(" ").map(l=>+l),senate_letters:"G AA Q AC".split(" "),senate_names:"SNSTPRK BAYGRAVES MADMID STATENCONEY FLATBUSH".split(" ")};function Gl(l,e,t){const s=l.slice();return s[48]=e[t],s}function Wl(l,e,t){const s=l.slice();return s[51]=e[t].properties,s[52]=e[t].geometry.coordinates[0],s[53]=e[t].geometry.coordinates[1],s}function Yl(l,e,t){const s=l.slice();return s[56]=e[t].outline,s}function Kl(l,e,t){const s=l.slice();return s[48]=e[t],s[60]=t,s}function Ql(l){let e,t=l[34].label+"",s;return{c(){e=P("p"),s=z(t),this.h()},l(n){e=D(n,"P",{class:!0,style:!0});var i=b(e);s=R(i,t),i.forEach(h),this.h()},h(){p(e,"class","street-inspector svelte-1ug0a5x"),he(e,"left",l[34].x+"px"),he(e,"top","calc("+l[34].y+"px - 1em)")},m(n,i){N(n,e,i),u(e,s)},p(n,i){i[1]&8&&t!==(t=n[34].label+"")&&ae(s,t),i[1]&8&&he(e,"left",n[34].x+"px"),i[1]&8&&he(e,"top","calc("+n[34].y+"px - 1em)")},d(n){n&&h(e)}}}function Jl(l){let e,t,s,n,i;function a(){return l[38](l[60])}function o(){return l[39](l[48])}function f(){return l[40](l[48])}return{c(){e=Ee("path"),this.h()},l(r){e=Pe(r,"path",{d:!0,fill:!0,class:!0}),b(e).forEach(h),this.h()},h(){p(e,"d",t=l[5](l[48])),p(e,"fill",s=l[6](l[48],l[10],l[11],l[9])),p(e,"class","svelte-1ug0a5x"),Me(e,"head",l[3][0]===Ae(l[48]))},m(r,c){N(r,e,c),n||(i=[ce(e,"click",a),ce(e,"contextmenu",El(o)),ce(e,"mousemove",El(f))],n=!0)},p(r,c){l=r,c[0]&48&&t!==(t=l[5](l[48]))&&p(e,"d",t),c[0]&3664&&s!==(s=l[6](l[48],l[10],l[11],l[9]))&&p(e,"fill",s),c[0]&24&&Me(e,"head",l[3][0]===Ae(l[48]))},d(r){r&&h(e),n=!1,al(i)}}}function Xl(l,e){let t,s,n=e[60]<e[27]&&Jl(e);return{key:l,first:null,c(){t=le(),n&&n.c(),s=le(),this.h()},l(i){t=le(),n&&n.l(i),s=le(),this.h()},h(){this.first=t},m(i,a){N(i,t,a),n&&n.m(i,a),N(i,s,a)},p(i,a){e=i,e[60]<e[27]?n?n.p(e,a):(n=Jl(e),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(i){i&&h(t),n&&n.d(i),i&&h(s)}}}function Zl(l){let e,t;return{c(){e=Ee("path"),this.h()},l(s){e=Pe(s,"path",{class:!0,d:!0}),b(e).forEach(h),this.h()},h(){p(e,"class","mesh-bg svelte-1ug0a5x"),p(e,"d",t=l[12].includes(l[10])?l[17]:l[18])},m(s,n){N(s,e,n)},p(s,n){n[0]&398336&&t!==(t=s[12].includes(s[10])?s[17]:s[18])&&p(e,"d",t)},d(s){s&&h(e)}}}function $l(l){let e,t,s,n,i=l[13],a=[];for(let o=0;o<i.length;o+=1)a[o]=xl(Yl(l,i,o));return{c(){e=Ee("g");for(let o=0;o<a.length;o+=1)a[o].c()},l(o){e=Pe(o,"g",{});var f=b(e);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(h)},m(o,f){N(o,e,f);for(let r=0;r<a.length;r+=1)a[r].m(e,null);n=!0},p(o,f){if(f[0]&8192){i=o[13];let r;for(r=0;r<i.length;r+=1){const c=Yl(o,i,r);a[r]?a[r].p(c,f):(a[r]=xl(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i(o){n||(Oe(()=>{s&&s.end(1),t=We(e,Le,{}),t.start()}),n=!0)},o(o){t&&t.invalidate(),s=Ye(e,Le,{}),n=!1},d(o){o&&h(e),be(a,o),o&&s&&s.end()}}}function xl(l){let e,t;return{c(){e=Ee("path"),this.h()},l(s){e=Pe(s,"path",{class:!0,d:!0}),b(e).forEach(h),this.h()},h(){p(e,"class","mesh-community svelte-1ug0a5x"),p(e,"d",t=l[56])},m(s,n){N(s,e,n)},p(s,n){n[0]&8192&&t!==(t=s[56])&&p(e,"d",t)},d(s){s&&h(e)}}}function et(l){let e,t,s,n,i,a;return{c(){e=Ee("g"),t=Ee("path"),this.h()},l(o){e=Pe(o,"g",{});var f=b(e);t=Pe(f,"path",{class:!0,d:!0}),b(t).forEach(h),f.forEach(h),this.h()},h(){p(t,"class","mesh-district svelte-1ug0a5x"),p(t,"d",s=l[36](l[15],l[23],l[22],l[28])),Me(t,"showPluralities",l[9])},m(o,f){N(o,e,f),u(e,t),a=!0},p(o,f){(!a||f[0]&281051136&&s!==(s=o[36](o[15],o[23],o[22],o[28])))&&p(t,"d",s),f[0]&512&&Me(t,"showPluralities",o[9])},i(o){a||(Oe(()=>{i&&i.end(1),n=We(e,Le,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=Ye(e,Le,{}),a=!1},d(o){o&&h(e),o&&i&&i.end()}}}function lt(l){let e,t,s,n,i,a;return{c(){e=Ee("g"),t=Ee("path"),this.h()},l(o){e=Pe(o,"g",{});var f=b(e);t=Pe(f,"path",{class:!0,d:!0}),b(t).forEach(h),f.forEach(h),this.h()},h(){p(t,"class","mesh-district svelte-1ug0a5x"),p(t,"d",s=l[5](l[19](l[41],l[0])))},m(o,f){N(o,e,f),u(e,t),a=!0},p(o,f){(!a||f[0]&557089&&s!==(s=o[5](o[19](o[41],o[0]))))&&p(t,"d",s)},i(o){a||(Oe(()=>{i&&i.end(1),n=We(e,Le,{}),n.start()}),a=!0)},o(o){n&&n.invalidate(),i=Ye(e,Le,{}),a=!1},d(o){o&&h(e),o&&i&&i.end()}}}function tt(l){let e,t,s,n,i,a=l[16],o=[];for(let c=0;c<a.length;c+=1)o[c]=nt(Wl(l,a,c));const f=c=>ie(o[c],1,1,()=>{o[c]=null});let r=l[33]&&at(l);return{c(){e=Ee("g");for(let c=0;c<o.length;c+=1)o[c].c();t=le(),r&&r.c(),this.h()},l(c){e=Pe(c,"g",{class:!0});var _=b(e);for(let g=0;g<o.length;g+=1)o[g].l(_);t=le(),r&&r.l(_),_.forEach(h),this.h()},h(){p(e,"class","labels svelte-1ug0a5x")},m(c,_){N(c,e,_);for(let g=0;g<o.length;g+=1)o[g].m(e,null);u(e,t),r&&r.m(e,null),i=!0},p(c,_){if(_[0]&3244032|_[1]&22){a=c[16];let g;for(g=0;g<a.length;g+=1){const d=Wl(c,a,g);o[g]?(o[g].p(d,_),ee(o[g],1)):(o[g]=nt(d),o[g].c(),ee(o[g],1),o[g].m(e,t))}for(Re(),g=a.length;g<o.length;g+=1)f(g);Ue()}c[33]?r?r.p(c,_):(r=at(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){if(!i){for(let _=0;_<a.length;_+=1)ee(o[_]);Oe(()=>{n&&n.end(1),s=We(e,Le,{}),s.start()}),i=!0}},o(c){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)ie(o[_]);s&&s.invalidate(),n=Ye(e,Le,{}),i=!1},d(c){c&&h(e),be(o,c),r&&r.d(),c&&n&&n.end()}}}function st(l){let e,t=l[51][l[15]]+"",s,n,i,a,o,f,r,c;function _(){return l[42](l[51])}function g(){return l[43](l[51])}return{c(){e=Ee("text"),s=z(t),this.h()},l(d){e=Pe(d,"text",{x:!0,y:!0,class:!0});var v=b(e);s=R(v,t),v.forEach(h),this.h()},h(){p(e,"x",n=l[52]),p(e,"y",i=l[53]),p(e,"class","svelte-1ug0a5x"),Me(e,"chosen",l[20].includes(`${l[15]},${l[51][l[15]]}`))},m(d,v){N(d,e,v),u(e,s),f=!0,r||(c=[ce(e,"click",_),ce(e,"mousemove",g),ce(e,"mouseout",l[44]),ce(e,"blur",void 0)],r=!0)},p(d,v){l=d,(!f||v[0]&98304)&&t!==(t=l[51][l[15]]+"")&&ae(s,t),(!f||v[0]&65536&&n!==(n=l[52]))&&p(e,"x",n),(!f||v[0]&65536&&i!==(i=l[53]))&&p(e,"y",i),v[0]&1146880&&Me(e,"chosen",l[20].includes(`${l[15]},${l[51][l[15]]}`))},i(d){f||(Oe(()=>{o&&o.end(1),a=We(e,Le,{}),a.start()}),f=!0)},o(d){a&&a.invalidate(),o=Ye(e,Le,{}),f=!1},d(d){d&&h(e),d&&o&&o.end(),r=!1,al(c)}}}function nt(l){let e=l[15]in l[51]&&(!l[35]||l[35]&&l[32].includes(l[51][l[15]])),t,s,n=e&&st(l);return{c(){n&&n.c(),t=le()},l(i){n&&n.l(i),t=le()},m(i,a){n&&n.m(i,a),N(i,t,a),s=!0},p(i,a){a[0]&98304|a[1]&18&&(e=i[15]in i[51]&&(!i[35]||i[35]&&i[32].includes(i[51][i[15]]))),e?n?(n.p(i,a),a[0]&98304|a[1]&18&&ee(n,1)):(n=st(i),n.c(),ee(n,1),n.m(t.parentNode,t)):n&&(Re(),ie(n,1,1,()=>{n=null}),Ue())},i(i){s||(ee(n),s=!0)},o(i){ie(n),s=!1},d(i){n&&n.d(i),i&&h(t)}}}function at(l){let e,t;return{c(){e=Ee("path"),this.h()},l(s){e=Pe(s,"path",{class:!0,d:!0}),b(e).forEach(h),this.h()},h(){p(e,"class","mesh-onhover mesh-district svelte-1ug0a5x"),p(e,"d",t=l[0]&&l[5](il(l[31],{type:l[0].type,geometries:l[0].geometries.filter(l[45])})))},m(s,n){N(s,e,n)},p(s,n){n[0]&32801|n[1]&5&&t!==(t=s[0]&&s[5](il(s[31],{type:s[0].type,geometries:s[0].geometries.filter(s[45])})))&&p(e,"d",t)},d(s){s&&h(e)}}}function it(l){let e,t,s,n=l[30],i=[];for(let a=0;a<n.length;a+=1)i[a]=ot(Gl(l,n,a));return{c(){e=Ee("g");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=Pe(a,"g",{class:!0});var o=b(e);for(let f=0;f<i.length;f+=1)i[f].l(o);o.forEach(h),this.h()},h(){p(e,"class","streets svelte-1ug0a5x"),Me(e,"showStreets",l[29])},m(a,o){N(a,e,o);for(let f=0;f<i.length;f+=1)i[f].m(e,null);t||(s=ce(e,"mousemove",l[47]),t=!0)},p(a,o){if(o[0]&1610612768|o[1]&64){n=a[30];let f;for(f=0;f<n.length;f+=1){const r=Gl(a,n,f);i[f]?i[f].p(r,o):(i[f]=ot(r),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=n.length}o[0]&536870912&&Me(e,"showStreets",a[29])},d(a){a&&h(e),be(i,a),t=!1,s()}}}function ot(l){let e,t,s,n;function i(...a){return l[46](l[48],...a)}return{c(){e=Ee("path"),this.h()},l(a){e=Pe(a,"path",{d:!0,class:!0}),b(e).forEach(h),this.h()},h(){p(e,"d",t=l[5](l[48])),p(e,"class","svelte-1ug0a5x")},m(a,o){N(a,e,o),s||(n=ce(e,"click",El(i)),s=!0)},p(a,o){l=a,o[0]&1073741856&&t!==(t=l[5](l[48]))&&p(e,"d",t)},d(a){a&&h(e),s=!1,n()}}}function bs(l){let e,t,s,n=[],i=new Map,a,o,f=l[14].includes("communities"),r,c=l[14].includes("plans")&&!l[7],_,g,d=l[14].includes("plans")||l[7],v,w,A,T,O,I=l[34]&&Ql(l),W=l[4];const $=y=>Ae(y[48]);for(let y=0;y<W.length;y+=1){let V=Kl(l,W,y),x=$(V);i.set(x,n[y]=Xl(x,V))}let X=l[18]&&Zl(l),K=f&&$l(l),Z=c&&et(l),M=l[7]&&lt(l),L=d&&tt(l),F=l[30]&&it(l);return{c(){I&&I.c(),e=C(),t=Ee("svg"),s=Ee("g");for(let y=0;y<n.length;y+=1)n[y].c();a=Ee("g"),X&&X.c(),o=le(),K&&K.c(),r=le(),Z&&Z.c(),_=le(),M&&M.c(),g=le(),L&&L.c(),v=le(),F&&F.c(),this.h()},l(y){I&&I.l(y),e=B(y),t=Pe(y,"svg",{viewBox:!0,style:!0,class:!0});var V=b(t);s=Pe(V,"g",{class:!0});var x=b(s);for(let Q=0;Q<n.length;Q+=1)n[Q].l(x);x.forEach(h),a=Pe(V,"g",{class:!0});var G=b(a);X&&X.l(G),o=le(),K&&K.l(G),r=le(),Z&&Z.l(G),_=le(),M&&M.l(G),g=le(),L&&L.l(G),v=le(),F&&F.l(G),G.forEach(h),V.forEach(h),this.h()},h(){p(s,"class","block-groups svelte-1ug0a5x"),p(a,"class","meshes svelte-1ug0a5x"),p(t,"viewBox",w=l[1].join(" ")),he(t,"--font-size",(l[2]||.8)+"em"),p(t,"class","svelte-1ug0a5x")},m(y,V){I&&I.m(y,V),N(y,e,V),N(y,t,V),u(t,s);for(let x=0;x<n.length;x+=1)n[x].m(s,null);u(t,a),X&&X.m(a,null),u(a,o),K&&K.m(a,null),u(a,r),Z&&Z.m(a,null),u(a,_),M&&M.m(a,null),u(a,g),L&&L.m(a,null),u(a,v),F&&F.m(a,null),A=!0,T||(O=[ce(t,"mousedown",function(){Nl(l[24])&&l[24].apply(this,arguments)}),ce(t,"mouseup",function(){Nl(l[25])&&l[25].apply(this,arguments)})],T=!0)},p(y,V){l=y,l[34]?I?I.p(l,V):(I=Ql(l),I.c(),I.m(e.parentNode,e)):I&&(I.d(1),I=null),V[0]&201363448&&(W=l[4],n=es(n,V,$,1,l,W,i,s,ls,Xl,null,Kl)),l[18]?X?X.p(l,V):(X=Zl(l),X.c(),X.m(a,o)):X&&(X.d(1),X=null),V[0]&16384&&(f=l[14].includes("communities")),f?K?(K.p(l,V),V[0]&16384&&ee(K,1)):(K=$l(l),K.c(),ee(K,1),K.m(a,r)):K&&(Re(),ie(K,1,1,()=>{K=null}),Ue()),V[0]&16512&&(c=l[14].includes("plans")&&!l[7]),c?Z?(Z.p(l,V),V[0]&16512&&ee(Z,1)):(Z=et(l),Z.c(),ee(Z,1),Z.m(a,_)):Z&&(Re(),ie(Z,1,1,()=>{Z=null}),Ue()),l[7]?M?(M.p(l,V),V[0]&128&&ee(M,1)):(M=lt(l),M.c(),ee(M,1),M.m(a,g)):M&&(Re(),ie(M,1,1,()=>{M=null}),Ue()),V[0]&16512&&(d=l[14].includes("plans")||l[7]),d?L?(L.p(l,V),V[0]&16512&&ee(L,1)):(L=tt(l),L.c(),ee(L,1),L.m(a,v)):L&&(Re(),ie(L,1,1,()=>{L=null}),Ue()),l[30]?F?F.p(l,V):(F=it(l),F.c(),F.m(a,null)):F&&(F.d(1),F=null),(!A||V[0]&2&&w!==(w=l[1].join(" ")))&&p(t,"viewBox",w),(!A||V[0]&4)&&he(t,"--font-size",(l[2]||.8)+"em")},i(y){A||(ee(K),ee(Z),ee(M),ee(L),A=!0)},o(y){ie(K),ie(Z),ie(M),ie(L),A=!1},d(y){I&&I.d(y),y&&h(e),y&&h(t);for(let V=0;V<n.length;V+=1)n[V].d();X&&X.d(),K&&K.d(),Z&&Z.d(),M&&M.d(),L&&L.d(),F&&F.d(),T=!1,al(O)}}}function ks(l,e,t){let s,n,i,{viewBox:a,labelSize:o,draggedBgs:f,data:r,path:c,color:_,changingLines:g,neighbor:d,showPluralities:v,metric:w,period:A,tractVars:T,drawings:O,panels:I,plan:W,points:$=[],tractMesh:X,bgMesh:K,mesh:Z,aggregates:M,obj:L,handleLabelClick:F,congressPlans:y,plans:V,startDrag:x,endDrag:G,handleMouseMove:Q,viewCutoff:m,showOnlyFocusDistricts:S,showStreets:H,streets:re}=e;function ge(){if(!!i)return c(n?il(i,{type:L.type,geometries:L.geometries.filter(k=>s.includes(k.properties[W]))}):il(i,L,(k,ke)=>Rl(k)!==Rl(ke)))}let oe,U;function j({pageX:k,pageY:ke},{properties:{Label:Se}}){t(34,U={x:k,y:ke,label:Se})}const q=k=>g&&W.includes("_")&&d(k),J=k=>console.log(k.properties),te=k=>Q(k),we=(k,ke)=>k.properties[W]!==ke.properties[W],ue=k=>F(`${W},${k[W]}`),pe=k=>t(33,oe=k[W]),me=()=>t(33,oe=null),je=k=>oe===k.properties[W],De=(k,ke)=>H&&j(ke,k),Ve=()=>t(34,U=null);return l.$$set=k=>{"viewBox"in k&&t(1,a=k.viewBox),"labelSize"in k&&t(2,o=k.labelSize),"draggedBgs"in k&&t(3,f=k.draggedBgs),"data"in k&&t(4,r=k.data),"path"in k&&t(5,c=k.path),"color"in k&&t(6,_=k.color),"changingLines"in k&&t(7,g=k.changingLines),"neighbor"in k&&t(8,d=k.neighbor),"showPluralities"in k&&t(9,v=k.showPluralities),"metric"in k&&t(10,w=k.metric),"period"in k&&t(11,A=k.period),"tractVars"in k&&t(12,T=k.tractVars),"drawings"in k&&t(13,O=k.drawings),"panels"in k&&t(14,I=k.panels),"plan"in k&&t(15,W=k.plan),"points"in k&&t(16,$=k.points),"tractMesh"in k&&t(17,X=k.tractMesh),"bgMesh"in k&&t(18,K=k.bgMesh),"mesh"in k&&t(19,Z=k.mesh),"aggregates"in k&&t(20,M=k.aggregates),"obj"in k&&t(0,L=k.obj),"handleLabelClick"in k&&t(21,F=k.handleLabelClick),"congressPlans"in k&&t(22,y=k.congressPlans),"plans"in k&&t(23,V=k.plans),"startDrag"in k&&t(24,x=k.startDrag),"endDrag"in k&&t(25,G=k.endDrag),"handleMouseMove"in k&&t(26,Q=k.handleMouseMove),"viewCutoff"in k&&t(27,m=k.viewCutoff),"showOnlyFocusDistricts"in k&&t(28,S=k.showOnlyFocusDistricts),"showStreets"in k&&t(29,H=k.showStreets),"streets"in k&&t(30,re=k.streets)},l.$$.update=()=>{l.$$.dirty[0]&32768&&t(32,s=vs[W]),l.$$.dirty[0]&268435456|l.$$.dirty[1]&2&&t(35,n=S&&s),l.$$.dirty[0]&12615680&&t(31,i=W.startsWith("congress")?y:V),l.$$.dirty[0]&32768|l.$$.dirty[1]&1&&t(0,L=i?i.objects[W]:void 0)},[L,a,o,f,r,c,_,g,d,v,w,A,T,O,I,W,$,X,K,Z,M,F,y,V,x,G,Q,m,S,H,re,i,s,oe,U,n,ge,j,q,J,te,we,ue,pe,me,je,De,Ve]}class ws extends tl{constructor(e){super();sl(this,e,ks,bs,nl,{viewBox:1,labelSize:2,draggedBgs:3,data:4,path:5,color:6,changingLines:7,neighbor:8,showPluralities:9,metric:10,period:11,tractVars:12,drawings:13,panels:14,plan:15,points:16,tractMesh:17,bgMesh:18,mesh:19,aggregates:20,obj:0,handleLabelClick:21,congressPlans:22,plans:23,startDrag:24,endDrag:25,handleMouseMove:26,viewCutoff:27,showOnlyFocusDistricts:28,showStreets:29,streets:30},null,[-1,-1])}}function rt(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ft(l,e,t){const s=l.slice();return s[21]=e[t],s[20]=t,s}function ct(l,e,t){const s=l.slice();return s[16]=e[t],s}function ut(l,e,t){const s=l.slice();return s[16]=e[t],s[20]=t,s}function ht(l,e,t){const s=l.slice();return s[10]=e[t],s}function _t(l,e,t){const s=l.slice();return s[13]=e[t],s}function Es(l){let e,t,s=l[9],n=[];for(let o=0;o<s.length;o+=1)n[o]=gt(ft(l,s,o));let i=l[9],a=[];for(let o=0;o<i.length;o+=1)a[o]=dt(rt(l,i,o));return{c(){e=P("div");for(let o=0;o<n.length;o+=1)n[o].c();t=C();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0});var f=b(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=B(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(h),this.h()},h(){p(e,"class","color-legend svelte-lnhifj"),he(e,"grid-template-columns","repeat("+(l[3].includes(l[4])?5:6)+", 2.5em)"),Me(e,"pctasian",l[3].includes(l[4]))},m(o,f){N(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);u(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&536){s=o[9];let r;for(r=0;r<s.length;r+=1){const c=ft(o,s,r);n[r]?n[r].p(c,f):(n[r]=gt(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&536){i=o[9];let r;for(r=0;r<i.length;r+=1){const c=rt(o,i,r);a[r]?a[r].p(c,f):(a[r]=dt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&24&&he(e,"grid-template-columns","repeat("+(o[3].includes(o[4])?5:6)+", 2.5em)"),f&24&&Me(e,"pctasian",o[3].includes(o[4]))},d(o){o&&h(e),be(n,o),be(a,o)}}}function Ps(l){let e,t,s=l[8],n=[];for(let o=0;o<s.length;o+=1)n[o]=pt(ut(l,s,o));let i=l[8],a=[];for(let o=0;o<i.length;o+=1)a[o]=mt(ct(l,i,o));return{c(){e=P("div");for(let o=0;o<n.length;o+=1)n[o].c();t=C();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0});var f=b(e);for(let r=0;r<n.length;r+=1)n[r].l(f);t=B(f);for(let r=0;r<a.length;r+=1)a[r].l(f);f.forEach(h),this.h()},h(){p(e,"class","color-legend plurality-legend svelte-lnhifj")},m(o,f){N(o,e,f);for(let r=0;r<n.length;r+=1)n[r].m(e,null);u(e,t);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(o,f){if(f&256){s=o[8];let r;for(r=0;r<s.length;r+=1){const c=ut(o,s,r);n[r]?n[r].p(c,f):(n[r]=pt(c),n[r].c(),n[r].m(e,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}if(f&256){i=o[8];let r;for(r=0;r<i.length;r+=1){const c=ct(o,i,r);a[r]?a[r].p(c,f):(a[r]=mt(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},d(o){o&&h(e),be(n,o),be(a,o)}}}function Ds(l){let e,t,s,n,i,a,o,f,r,c,_,g,d=l[0],v=[];for(let w=0;w<d.length;w+=1)v[w]=bt(ht(l,d,w));return{c(){e=P("div");for(let w=0;w<v.length;w+=1)v[w].c();t=C(),s=P("p"),n=P("span"),i=z("Weak plurality"),a=C(),o=P("p"),f=C(),r=P("p"),c=z("Majority"),_=C(),g=P("p"),this.h()},l(w){e=D(w,"DIV",{class:!0});var A=b(e);for(let W=0;W<v.length;W+=1)v[W].l(A);t=B(A),s=D(A,"P",{class:!0});var T=b(s);n=D(T,"SPAN",{});var O=b(n);i=R(O,"Weak plurality"),O.forEach(h),T.forEach(h),a=B(A),o=D(A,"P",{class:!0}),b(o).forEach(h),f=B(A),r=D(A,"P",{class:!0});var I=b(r);c=R(I,"Majority"),I.forEach(h),_=B(A),g=D(A,"P",{class:!0}),b(g).forEach(h),A.forEach(h),this.h()},h(){p(s,"class","col-head svelte-lnhifj"),p(o,"class","col-head svelte-lnhifj"),p(r,"class","col-head svelte-lnhifj"),p(g,"class","col-head svelte-lnhifj"),p(e,"class","legend svelte-lnhifj")},m(w,A){N(w,e,A);for(let T=0;T<v.length;T+=1)v[T].m(e,null);u(e,t),u(e,s),u(s,n),u(n,i),u(e,a),u(e,o),u(e,f),u(e,r),u(r,c),u(e,_),u(e,g)},p(w,A){if(A&7){d=w[0];let T;for(T=0;T<d.length;T+=1){const O=ht(w,d,T);v[T]?v[T].p(O,A):(v[T]=bt(O),v[T].c(),v[T].m(e,t))}for(;T<v.length;T+=1)v[T].d(1);v.length=d.length}},d(w){w&&h(e),be(v,w)}}}function gt(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(h),this.h()},h(){he(e,"background-color",l[3].includes(l[4])?bl[l[20]]:el[l[20]])},m(t,s){N(t,e,s)},p(t,s){s&24&&he(e,"background-color",t[3].includes(t[4])?bl[t[20]]:el[t[20]])},d(t){t&&h(e)}}}function dt(l){let e,t=(l[9][l[9].length-1]<1?_e(l[21],0):l[9][l[9].length-1]>1e3?$e(l[21]):l[21])+(l[3].includes(l[4])&&l[20]===l[9].length-1?"+ Asian":"")+"",s,n;return{c(){e=P("p"),s=z(t),n=C(),this.h()},l(i){e=D(i,"P",{class:!0});var a=b(e);s=R(a,t),n=B(a),a.forEach(h),this.h()},h(){p(e,"class","svelte-lnhifj")},m(i,a){N(i,e,a),u(e,s),u(e,n)},p(i,a){a&536&&t!==(t=(i[9][i[9].length-1]<1?_e(i[21],0):i[9][i[9].length-1]>1e3?$e(i[21]):i[21])+(i[3].includes(i[4])&&i[20]===i[9].length-1?"+ Asian":"")+"")&&ae(s,t)},d(i){i&&h(e)}}}function pt(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(h),this.h()},h(){he(e,"background-color",el[l[20]])},m(t,s){N(t,e,s)},p:He,d(t){t&&h(e)}}}function mt(l){let e,t=l[16].replace("_","-")+"",s;return{c(){e=P("p"),s=z(t),this.h()},l(n){e=D(n,"P",{class:!0});var i=b(e);s=R(i,t),i.forEach(h),this.h()},h(){p(e,"class","svelte-lnhifj")},m(n,i){N(n,e,i),u(e,s)},p(n,i){i&256&&t!==(t=n[16].replace("_","-")+"")&&ae(s,t)},d(n){n&&h(e)}}}function vt(l){let e;return{c(){e=P("div"),this.h()},l(t){e=D(t,"DIV",{style:!0}),b(e).forEach(h),this.h()},h(){he(e,"background-color",l[2][l[10]]+l[13])},m(t,s){N(t,e,s)},p(t,s){s&7&&he(e,"background-color",t[2][t[10]]+t[13])},d(t){t&&h(e)}}}function bt(l){let e,t,s=qe(l[10])+"",n,i=l[1],a=[];for(let o=0;o<i.length;o+=1)a[o]=vt(_t(l,i,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=C(),t=P("p"),n=z(s),this.h()},l(o){for(let r=0;r<a.length;r+=1)a[r].l(o);e=B(o),t=D(o,"P",{class:!0});var f=b(t);n=R(f,s),f.forEach(h),this.h()},h(){p(t,"class","row-label svelte-lnhifj")},m(o,f){for(let r=0;r<a.length;r+=1)a[r].m(o,f);N(o,e,f),N(o,t,f),u(t,n)},p(o,f){if(f&7){i=o[1];let r;for(r=0;r<i.length;r+=1){const c=_t(o,i,r);a[r]?a[r].p(c,f):(a[r]=vt(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}f&1&&s!==(s=qe(o[10])+"")&&ae(n,s)},d(o){be(a,o),o&&h(e),o&&h(t)}}}function Vs(l){let e,t,s;function n(o,f){return(e==null||f&88)&&(e=!!(o[3].includes(o[4])&&o[6])),e?Ds:((t==null||f&160)&&(t=!!o[7].includes(o[5])),t?Ps:Es)}let i=n(l,-1),a=i(l);return{c(){a.c(),s=le()},l(o){a.l(o),s=le()},m(o,f){a.m(o,f),N(o,s,f)},p(o,[f]){i===(i=n(o,f))&&a?a.p(o,f):(a.d(1),a=i(o),a&&(a.c(),a.m(s.parentNode,s)))},i:He,o:He,d(o){a.d(o),o&&h(s)}}}function Ts(l,e,t){let{groups:s,levels:n,colors:i,dynamicVars:a,variable:o,metric:f,showPluralities:r,pluralityVars:c,periods:_,breaks:g}=e;return l.$$set=d=>{"groups"in d&&t(0,s=d.groups),"levels"in d&&t(1,n=d.levels),"colors"in d&&t(2,i=d.colors),"dynamicVars"in d&&t(3,a=d.dynamicVars),"variable"in d&&t(4,o=d.variable),"metric"in d&&t(5,f=d.metric),"showPluralities"in d&&t(6,r=d.showPluralities),"pluralityVars"in d&&t(7,c=d.pluralityVars),"periods"in d&&t(8,_=d.periods),"breaks"in d&&t(9,g=d.breaks)},[s,n,i,a,o,f,r,c,_,g]}class Ss extends tl{constructor(e){super();sl(this,e,Ts,Vs,nl,{groups:0,levels:1,colors:2,dynamicVars:3,variable:4,metric:5,showPluralities:6,pluralityVars:7,periods:8,breaks:9})}}function kt(l,e,t){const s=l.slice();return s[15]=e[t].name,s[9]=e[t].stats,s[17]=t,s}function wt(l,e,t){const s=l.slice();return s[18]=e[t],s}function Et(l,e,t){const s=l.slice();return s[12]=e[t],s}function As(l){let e,t=l[6],s=[];for(let n=0;n<t.length;n+=1)s[n]=Dt(kt(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=le()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=le()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);N(n,e,i)},p(n,i){if(i&200){t=n[6];let a;for(a=0;a<t.length;a+=1){const o=kt(n,t,a);s[a]?s[a].p(o,i):(s[a]=Dt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){be(s,n),n&&h(e)}}}function Os(l){let e,t=l[0],s=[];for(let n=0;n<t.length;n+=1)s[n]=St(Et(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=le()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=le()},m(n,i){for(let a=0;a<s.length;a+=1)s[a].m(n,i);N(n,e,i)},p(n,i){if(i&567){t=n[0];let a;for(a=0;a<t.length;a+=1){const o=Et(n,t,a);s[a]?s[a].p(o,i):(s[a]=St(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){be(s,n),n&&h(e)}}}function Pt(l){let e,t,s=qe(l[18])+"",n,i,a,o=_e(l[9]["cvap19"+l[18]])+"",f,r,c,_=_e(l[9]["pop20"+l[18]])+"",g,d;return{c(){e=P("tr"),t=P("td"),n=z(s),i=C(),a=P("td"),f=z(o),r=C(),c=P("td"),g=z(_),d=C(),this.h()},l(v){e=D(v,"TR",{class:!0});var w=b(e);t=D(w,"TD",{class:!0});var A=b(t);n=R(A,s),A.forEach(h),i=B(w),a=D(w,"TD",{class:!0});var T=b(a);f=R(T,o),T.forEach(h),r=B(w),c=D(w,"TD",{class:!0});var O=b(c);g=R(O,_),O.forEach(h),d=B(w),w.forEach(h),this.h()},h(){p(t,"class","svelte-1avkicx"),p(a,"class","svelte-1avkicx"),p(c,"class","svelte-1avkicx"),p(e,"class","svelte-1avkicx")},m(v,w){N(v,e,w),u(e,t),u(t,n),u(e,i),u(e,a),u(a,f),u(e,r),u(e,c),u(c,g),u(e,d)},p(v,w){w&8&&s!==(s=qe(v[18])+"")&&ae(n,s),w&72&&o!==(o=_e(v[9]["cvap19"+v[18]])+"")&&ae(f,o),w&72&&_!==(_=_e(v[9]["pop20"+v[18]])+"")&&ae(g,_)},d(v){v&&h(e)}}}function Dt(l){let e,t,s,n=(l[15]||"COI"+(l[17]+1))+"",i,a,o,f,r,c,_,g,d,v,w,A,T,O,I,W,$,X,K=$e(l[9].income)+"",Z,M,L,F,y=_e(l[9].hhlang)+"",V,x,G,Q,m=_e(l[9].benefits)+"",S,H,re,ge;function oe(){return l[11](l[17])}let U=l[3],j=[];for(let q=0;q<U.length;q+=1)j[q]=Pt(wt(l,U,q));return{c(){e=P("div"),t=P("p"),s=P("i"),i=z(n),a=C(),o=P("button"),f=z("\u{1F5D1}"),r=C(),c=P("table"),_=P("tr"),g=P("th"),d=C(),v=P("th"),w=z("CVAP"),A=C(),T=P("th"),O=z("Pop."),I=C();for(let q=0;q<j.length;q+=1)j[q].c();W=C(),$=P("p"),X=z("Income: "),Z=z(K),M=C(),L=P("p"),F=z("Asian and LEP: "),V=z(y),x=C(),G=P("p"),Q=z("Pct. gov't benefits: "),S=z(m),H=C(),this.h()},l(q){e=D(q,"DIV",{});var J=b(e);t=D(J,"P",{class:!0});var te=b(t);s=D(te,"I",{});var we=b(s);i=R(we,n),we.forEach(h),a=B(te),o=D(te,"BUTTON",{});var ue=b(o);f=R(ue,"\u{1F5D1}"),ue.forEach(h),te.forEach(h),r=B(J),c=D(J,"TABLE",{class:!0});var pe=b(c);_=D(pe,"TR",{class:!0});var me=b(_);g=D(me,"TH",{class:!0}),b(g).forEach(h),d=B(me),v=D(me,"TH",{class:!0});var je=b(v);w=R(je,"CVAP"),je.forEach(h),A=B(me),T=D(me,"TH",{class:!0});var De=b(T);O=R(De,"Pop."),De.forEach(h),me.forEach(h),I=B(pe);for(let Se=0;Se<j.length;Se+=1)j[Se].l(pe);pe.forEach(h),W=B(J),$=D(J,"P",{class:!0});var Ve=b($);X=R(Ve,"Income: "),Z=R(Ve,K),Ve.forEach(h),M=B(J),L=D(J,"P",{class:!0});var k=b(L);F=R(k,"Asian and LEP: "),V=R(k,y),k.forEach(h),x=B(J),G=D(J,"P",{class:!0});var ke=b(G);Q=R(ke,"Pct. gov't benefits: "),S=R(ke,m),ke.forEach(h),H=B(J),J.forEach(h),this.h()},h(){p(t,"class","svelte-1avkicx"),p(g,"class","svelte-1avkicx"),p(v,"class","svelte-1avkicx"),p(T,"class","svelte-1avkicx"),p(_,"class","svelte-1avkicx"),p(c,"class","svelte-1avkicx"),p($,"class","table-footer svelte-1avkicx"),p(L,"class","table-footer svelte-1avkicx"),p(G,"class","table-footer svelte-1avkicx")},m(q,J){N(q,e,J),u(e,t),u(t,s),u(s,i),u(t,a),u(t,o),u(o,f),u(e,r),u(e,c),u(c,_),u(_,g),u(_,d),u(_,v),u(v,w),u(_,A),u(_,T),u(T,O),u(c,I);for(let te=0;te<j.length;te+=1)j[te].m(c,null);u(e,W),u(e,$),u($,X),u($,Z),u(e,M),u(e,L),u(L,F),u(L,V),u(e,x),u(e,G),u(G,Q),u(G,S),u(e,H),re||(ge=ce(o,"click",oe),re=!0)},p(q,J){if(l=q,J&64&&n!==(n=(l[15]||"COI"+(l[17]+1))+"")&&ae(i,n),J&72){U=l[3];let te;for(te=0;te<U.length;te+=1){const we=wt(l,U,te);j[te]?j[te].p(we,J):(j[te]=Pt(we),j[te].c(),j[te].m(c,null))}for(;te<j.length;te+=1)j[te].d(1);j.length=U.length}J&64&&K!==(K=$e(l[9].income)+"")&&ae(Z,K),J&64&&y!==(y=_e(l[9].hhlang)+"")&&ae(V,y),J&64&&m!==(m=_e(l[9].benefits)+"")&&ae(S,m)},d(q){q&&h(e),be(j,q),re=!1,ge()}}}function Vt(l){let e,t,s,n=Ul(l[12])+"",i,a,o,f,r,c,_,g,d,v,w,A,T,O,I,W,$,X=_e(l[9][l[12]].cvap10asian)+"",K,Z,M,L=_e(l[9][l[12]].pop10asian)+"",F,y,V,x,G,Q,m,S=_e(l[9][l[12]].cvap19asian)+"",H,re,ge,oe=_e(l[9][l[12]].pop20asian)+"",U,j,q,J,te,we,ue,pe=_e(l[9][l[12]].pct_increase)+"",me,je,De,Ve=_e(l[9][l[12]].pct_increase_cvap)+"",k,ke,Se,ll,ol;function wl(){return l[10](l[12])}let ve=l[4]&&l[2]in l[5]&&Tt(l);return{c(){e=P("div"),t=P("p"),s=P("i"),i=z(n),a=C(),o=P("table"),f=P("tr"),r=P("th"),c=C(),_=P("th"),g=z("CVAP"),d=C(),v=P("th"),w=z("Pop."),A=C(),T=P("tr"),O=P("td"),I=z("Asians in 2010"),W=C(),$=P("td"),K=z(X),Z=C(),M=P("td"),F=z(L),y=C(),V=P("tr"),x=P("td"),G=z("Asians now"),Q=C(),m=P("td"),H=z(S),re=C(),ge=P("td"),U=z(oe),j=C(),q=P("tr"),J=P("td"),te=z("Asian increase"),we=C(),ue=P("td"),me=z(pe),je=C(),De=P("td"),k=z(Ve),ke=C(),ve&&ve.c(),Se=C(),this.h()},l(Ne){e=D(Ne,"DIV",{class:!0});var de=b(e);t=D(de,"P",{class:!0});var rl=b(t);s=D(rl,"I",{});var fl=b(s);i=R(fl,n),fl.forEach(h),rl.forEach(h),a=B(de),o=D(de,"TABLE",{class:!0});var Ie=b(o);f=D(Ie,"TR",{class:!0});var Ce=b(f);r=D(Ce,"TH",{class:!0}),b(r).forEach(h),c=B(Ce),_=D(Ce,"TH",{class:!0});var cl=b(_);g=R(cl,"CVAP"),cl.forEach(h),d=B(Ce),v=D(Ce,"TH",{class:!0});var ul=b(v);w=R(ul,"Pop."),ul.forEach(h),Ce.forEach(h),A=B(Ie),T=D(Ie,"TR",{class:!0});var Be=b(T);O=D(Be,"TD",{class:!0});var hl=b(O);I=R(hl,"Asians in 2010"),hl.forEach(h),W=B(Be),$=D(Be,"TD",{class:!0});var _l=b($);K=R(_l,X),_l.forEach(h),Z=B(Be),M=D(Be,"TD",{class:!0});var gl=b(M);F=R(gl,L),gl.forEach(h),Be.forEach(h),y=B(Ie),V=D(Ie,"TR",{class:!0});var E=b(V);x=D(E,"TD",{class:!0});var se=b(x);G=R(se,"Asians now"),se.forEach(h),Q=B(E),m=D(E,"TD",{class:!0});var Y=b(m);H=R(Y,S),Y.forEach(h),re=B(E),ge=D(E,"TD",{class:!0});var fe=b(ge);U=R(fe,oe),fe.forEach(h),E.forEach(h),j=B(Ie),q=D(Ie,"TR",{class:!0});var ne=b(q);J=D(ne,"TD",{class:!0});var ye=b(J);te=R(ye,"Asian increase"),ye.forEach(h),we=B(ne),ue=D(ne,"TD",{class:!0});var ze=b(ue);me=R(ze,pe),ze.forEach(h),je=B(ne),De=D(ne,"TD",{class:!0});var Fe=b(De);k=R(Fe,Ve),Fe.forEach(h),ne.forEach(h),Ie.forEach(h),ke=B(de),ve&&ve.l(de),Se=B(de),de.forEach(h),this.h()},h(){p(t,"class","svelte-1avkicx"),p(r,"class","svelte-1avkicx"),p(_,"class","svelte-1avkicx"),p(v,"class","svelte-1avkicx"),p(f,"class","svelte-1avkicx"),p(O,"class","svelte-1avkicx"),p($,"class","svelte-1avkicx"),p(M,"class","svelte-1avkicx"),p(T,"class","svelte-1avkicx"),p(x,"class","svelte-1avkicx"),p(m,"class","svelte-1avkicx"),p(ge,"class","svelte-1avkicx"),p(V,"class","svelte-1avkicx"),p(J,"class","svelte-1avkicx"),p(ue,"class","svelte-1avkicx"),p(De,"class","svelte-1avkicx"),p(q,"class","svelte-1avkicx"),p(o,"class","svelte-1avkicx"),p(e,"class","district-aggregate svelte-1avkicx")},m(Ne,de){N(Ne,e,de),u(e,t),u(t,s),u(s,i),u(e,a),u(e,o),u(o,f),u(f,r),u(f,c),u(f,_),u(_,g),u(f,d),u(f,v),u(v,w),u(o,A),u(o,T),u(T,O),u(O,I),u(T,W),u(T,$),u($,K),u(T,Z),u(T,M),u(M,F),u(o,y),u(o,V),u(V,x),u(x,G),u(V,Q),u(V,m),u(m,H),u(V,re),u(V,ge),u(ge,U),u(o,j),u(o,q),u(q,J),u(J,te),u(q,we),u(q,ue),u(ue,me),u(q,je),u(q,De),u(De,k),u(e,ke),ve&&ve.m(e,null),u(e,Se),ll||(ol=ce(t,"click",wl),ll=!0)},p(Ne,de){l=Ne,de&1&&n!==(n=Ul(l[12])+"")&&ae(i,n),de&513&&X!==(X=_e(l[9][l[12]].cvap10asian)+"")&&ae(K,X),de&513&&L!==(L=_e(l[9][l[12]].pop10asian)+"")&&ae(F,L),de&513&&S!==(S=_e(l[9][l[12]].cvap19asian)+"")&&ae(H,S),de&513&&oe!==(oe=_e(l[9][l[12]].pop20asian)+"")&&ae(U,oe),de&513&&pe!==(pe=_e(l[9][l[12]].pct_increase)+"")&&ae(me,pe),de&513&&Ve!==(Ve=_e(l[9][l[12]].pct_increase_cvap)+"")&&ae(k,Ve),l[4]&&l[2]in l[5]?ve?ve.p(l,de):(ve=Tt(l),ve.c(),ve.m(e,Se)):ve&&(ve.d(1),ve=null)},d(Ne){Ne&&h(e),ve&&ve.d(),ll=!1,ol()}}}function Tt(l){let e,t,s=$e(l[9][l[12]].income)+(l[4]&&l[2]in l[5]?"; "+Hl(l[9][l[12]].pop20_total-l[5][l[2]]):"")+"",n;return{c(){e=P("p"),t=z("Income: "),n=z(s),this.h()},l(i){e=D(i,"P",{class:!0});var a=b(e);t=R(a,"Income: "),n=R(a,s),a.forEach(h),this.h()},h(){p(e,"class","table-footer svelte-1avkicx")},m(i,a){N(i,e,a),u(e,t),u(e,n)},p(i,a){a&565&&s!==(s=$e(i[9][i[12]].income)+(i[4]&&i[2]in i[5]?"; "+Hl(i[9][i[12]].pop20_total-i[5][i[2]]):"")+"")&&ae(n,s)},d(i){i&&h(e)}}}function St(l){let e=l[12].split(",")[0].split("_")[0]===l[2].split("_")[0],t,s=e&&Vt(l);return{c(){s&&s.c(),t=le()},l(n){s&&s.l(n),t=le()},m(n,i){s&&s.m(n,i),N(n,t,i)},p(n,i){i&5&&(e=n[12].split(",")[0].split("_")[0]===n[2].split("_")[0]),e?s?s.p(n,i):(s=Vt(n),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&h(t)}}}function js(l){let e;function t(i,a){if(i[8]==="districts")return Os;if(i[8]==="community")return As}let s=t(l),n=s&&s(l);return{c(){n&&n.c(),e=le()},l(i){n&&n.l(i),e=le()},m(i,a){n&&n.m(i,a),N(i,e,a)},p(i,[a]){s===(s=t(i))&&n?n.p(i,a):(n&&n.d(1),n=s&&s(i),n&&(n.c(),n.m(e.parentNode,e)))},i:He,o:He,d(i){n&&n.d(i),i&&h(e)}}}function Is(l,e,t){let{aggregates:s,handleLabelClick:n,plan:i,stats:a,groups:o,changingLines:f,idealValues:r}=e,{drawings:c=[]}=e,{delDrawing:_=void 0}=e,{type:g="districts"}=e;const d=w=>n(w),v=w=>_(w);return l.$$set=w=>{"aggregates"in w&&t(0,s=w.aggregates),"handleLabelClick"in w&&t(1,n=w.handleLabelClick),"plan"in w&&t(2,i=w.plan),"stats"in w&&t(9,a=w.stats),"groups"in w&&t(3,o=w.groups),"changingLines"in w&&t(4,f=w.changingLines),"idealValues"in w&&t(5,r=w.idealValues),"drawings"in w&&t(6,c=w.drawings),"delDrawing"in w&&t(7,_=w.delDrawing),"type"in w&&t(8,g=w.type)},[s,n,i,o,f,r,c,_,g,a,d,v]}class At extends tl{constructor(e){super();sl(this,e,Is,js,nl,{aggregates:0,handleLabelClick:1,plan:2,stats:9,groups:3,changingLines:4,idealValues:5,drawings:6,delDrawing:7,type:8})}}const Ms=l=>({}),Ot=l=>({}),Ls=l=>({}),jt=l=>({});function It(l){let e,t,s,n;const i=l[4].body,a=yl(i,l,l[3],Ot);return{c(){e=P("div"),a&&a.c(),this.h()},l(o){e=D(o,"DIV",{class:!0});var f=b(e);a&&a.l(f),f.forEach(h),this.h()},h(){p(e,"class","svelte-a3zm9u")},m(o,f){N(o,e,f),a&&a.m(e,null),n=!0},p(o,f){a&&a.p&&(!n||f&8)&&Cl(a,i,o,o[3],n?zl(i,o[3],f,Ms):Bl(o[3]),Ot)},i(o){n||(ee(a,o),Oe(()=>{s&&s.end(1),t=We(e,dl,{}),t.start()}),n=!0)},o(o){ie(a,o),t&&t.invalidate(),s=Ye(e,dl,{}),n=!1},d(o){o&&h(e),a&&a.d(o),o&&s&&s.end()}}}function Ns(l){let e,t,s,n=(l[2]==="plans"?"Districts and plans":qe(l[2]))+"",i,a,o=(l[0].includes(l[2])?"\u2191":"\u2193")+"",f,r,c,_=l[0].includes(l[2]),g,d,v;const w=l[4].title,A=yl(w,l,l[3],jt);let T=_&&It(l);return{c(){e=P("div"),t=P("h3"),s=P("button"),i=z(n),a=C(),f=z(o),r=C(),A&&A.c(),c=C(),T&&T.c(),this.h()},l(O){e=D(O,"DIV",{class:!0});var I=b(e);t=D(I,"H3",{class:!0});var W=b(t);s=D(W,"BUTTON",{});var $=b(s);i=R($,n),a=B($),f=R($,o),$.forEach(h),r=B(W),A&&A.l(W),W.forEach(h),c=B(I),T&&T.l(I),I.forEach(h),this.h()},h(){p(t,"class","svelte-a3zm9u"),p(e,"class","panel svelte-a3zm9u")},m(O,I){N(O,e,I),u(e,t),u(t,s),u(s,i),u(s,a),u(s,f),u(t,r),A&&A.m(t,null),u(e,c),T&&T.m(e,null),g=!0,d||(v=ce(s,"click",l[5]),d=!0)},p(O,[I]){(!g||I&4)&&n!==(n=(O[2]==="plans"?"Districts and plans":qe(O[2]))+"")&&ae(i,n),(!g||I&5)&&o!==(o=(O[0].includes(O[2])?"\u2191":"\u2193")+"")&&ae(f,o),A&&A.p&&(!g||I&8)&&Cl(A,w,O,O[3],g?zl(w,O[3],I,Ls):Bl(O[3]),jt),I&5&&(_=O[0].includes(O[2])),_?T?(T.p(O,I),I&5&&ee(T,1)):(T=It(O),T.c(),ee(T,1),T.m(e,null)):T&&(Re(),ie(T,1,1,()=>{T=null}),Ue())},i(O){g||(ee(A,O),ee(T),g=!0)},o(O){ie(A,O),ie(T),g=!1},d(O){O&&h(e),A&&A.d(O),T&&T.d(),d=!1,v()}}}function ys(l,e,t){let{$$slots:s={},$$scope:n}=e,{panels:i,togglePanel:a,panelName:o}=e;const f=()=>a(o);return l.$$set=r=>{"panels"in r&&t(0,i=r.panels),"togglePanel"in r&&t(1,a=r.togglePanel),"panelName"in r&&t(2,o=r.panelName),"$$scope"in r&&t(3,n=r.$$scope)},[i,a,o,n,s,f]}class Sl extends tl{constructor(e){super();sl(this,e,ys,Ns,nl,{panels:0,togglePanel:1,panelName:2})}}function Mt(l,e,t){const s=l.slice();return s[67]=e[t],s}function Lt(l,e,t){const s=l.slice();return s[70]=e[t],s}function Nt(l,e,t){const s=l.slice();return s[73]=e[t],s}function yt(l,e,t){const s=l.slice();return s[76]=e[t],s}function Ct(l,e,t){const s=l.slice();return s[67]=e[t],s}function Bt(l,e,t){const s=l.slice();return s[67]=e[t],s}function zt(l){let e,t=(vl[l[67]]||l[67])+"",s,n;return{c(){e=P("option"),s=z(t),this.h()},l(i){e=D(i,"OPTION",{});var a=b(e);s=R(a,t),a.forEach(h),this.h()},h(){e.__value=n=l[67],e.value=e.__value},m(i,a){N(i,e,a),u(e,s)},p(i,a){a[0]&4&&t!==(t=(vl[i[67]]||i[67])+"")&&ae(s,t),a[0]&4&&n!==(n=i[67])&&(e.__value=n,e.value=e.__value)},d(i){i&&h(e)}}}function Rt(l){let e,t=(vl[l[67]]||l[67])+"",s,n;return{c(){e=P("option"),s=z(t),this.h()},l(i){e=D(i,"OPTION",{});var a=b(e);s=R(a,t),a.forEach(h),this.h()},h(){e.__value=n=l[67],e.value=e.__value},m(i,a){N(i,e,a),u(e,s)},p(i,a){a[0]&8&&t!==(t=(vl[i[67]]||i[67])+"")&&ae(s,t),a[0]&8&&n!==(n=i[67])&&(e.__value=n,e.value=e.__value)},d(i){i&&h(e)}}}function Ut(l){let e,t=l[2].includes(l[17]),s,n=l[2].includes(l[17]),i,a,o,f=t&&Ht(l),r=n&&Ft(l);return{c(){e=P("div"),f&&f.c(),s=C(),r&&r.c()},l(c){e=D(c,"DIV",{});var _=b(e);f&&f.l(_),s=B(_),r&&r.l(_),_.forEach(h)},m(c,_){N(c,e,_),f&&f.m(e,null),u(e,s),r&&r.m(e,null),o=!0},p(c,_){_[0]&131076&&(t=c[2].includes(c[17])),t?f?f.p(c,_):(f=Ht(c),f.c(),f.m(e,s)):f&&(f.d(1),f=null),_[0]&131076&&(n=c[2].includes(c[17])),n?r?r.p(c,_):(r=Ft(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(c){o||(Oe(()=>{a&&a.end(1),i=We(e,dl,{}),i.start()}),o=!0)},o(c){i&&i.invalidate(),a=Ye(e,dl,{}),o=!1},d(c){c&&h(e),f&&f.d(),r&&r.d(),c&&a&&a.end()}}}function Ht(l){let e,t=["past","present"],s=[];for(let n=0;n<2;n+=1)s[n]=qt(yt(l,t,n));return{c(){for(let n=0;n<2;n+=1)s[n].c();e=le()},l(n){for(let i=0;i<2;i+=1)s[i].l(n);e=le()},m(n,i){for(let a=0;a<2;a+=1)s[a].m(n,i);N(n,e,i)},p(n,i){if(i[0]&65536){t=["past","present"];let a;for(a=0;a<2;a+=1){const o=yt(n,t,a);s[a]?s[a].p(o,i):(s[a]=qt(o),s[a].c(),s[a].m(e.parentNode,e))}for(;a<2;a+=1)s[a].d(1)}},d(n){be(s,n),n&&h(e)}}}function qt(l){let e,t,s,n=qe(l[76])+"",i,a,o,f;return{c(){e=P("label"),t=P("input"),s=C(),i=z(n),a=C(),this.h()},l(r){e=D(r,"LABEL",{});var c=b(e);t=D(c,"INPUT",{type:!0,name:!0}),s=B(c),i=R(c,n),a=B(c),c.forEach(h),this.h()},h(){p(t,"type","radio"),p(t,"name","period"),t.__value=l[76],t.value=t.__value,l[54][0].push(t)},m(r,c){N(r,e,c),u(e,t),t.checked=t.__value===l[16],u(e,s),u(e,i),u(e,a),o||(f=ce(t,"change",l[53]),o=!0)},p(r,c){c[0]&65536&&(t.checked=t.__value===r[16])},d(r){r&&h(e),l[54][0].splice(l[54][0].indexOf(t),1),o=!1,f()}}}function Ft(l){let e,t,s=(l[18]?"pct. asian":"pluralities")+"",n,i,a;return{c(){e=P("button"),t=z("Show "),n=z(s),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var f=b(e);t=R(f,"Show "),n=R(f,s),f.forEach(h),this.h()},h(){p(e,"class","plurality-toggle svelte-1fv06xq")},m(o,f){N(o,e,f),u(e,t),u(e,n),i||(a=ce(e,"click",l[55]),i=!0)},p(o,f){f[0]&262144&&s!==(s=(o[18]?"pct. asian":"pluralities")+"")&&ae(n,s)},d(o){o&&h(e),i=!1,a()}}}function Gt(l){let e,t=ds(l[70]+l[73])+"",s,n;return{c(){e=P("option"),s=z(t),this.h()},l(i){e=D(i,"OPTION",{});var a=b(e);s=R(a,t),a.forEach(h),this.h()},h(){e.__value=n=l[70]+l[73],e.value=e.__value},m(i,a){N(i,e,a),u(e,s)},p:He,d(i){i&&h(e)}}}function Wt(l){let e,t,s,n,i=["","_letters","_names"],a=[];for(let o=0;o<3;o+=1)a[o]=Gt(Nt(l,i,o));return{c(){e=P("optgroup");for(let o=0;o<3;o+=1)a[o].c();t=P("option"),s=z("Unity Map (soon)"),this.h()},l(o){e=D(o,"OPTGROUP",{label:!0});var f=b(e);for(let c=0;c<3;c+=1)a[c].l(f);t=D(f,"OPTION",{});var r=b(t);s=R(r,"Unity Map (soon)"),r.forEach(h),f.forEach(h),this.h()},h(){t.disabled=!0,t.__value="Unity Map (soon)",t.value=t.__value,p(e,"label",n=qe(l[70]))},m(o,f){N(o,e,f);for(let r=0;r<3;r+=1)a[r].m(e,null);u(e,t),u(t,s)},p(o,f){if(f&0){i=["","_letters","_names"];let r;for(r=0;r<3;r+=1){const c=Nt(o,i,r);a[r]?a[r].p(c,f):(a[r]=Gt(c),a[r].c(),a[r].m(e,t))}for(;r<3;r+=1)a[r].d(1)}},d(o){o&&h(e),be(a,o)}}}function Cs(l){let e,t,s,n,i,a,o,f,r=["assembly","senate","congress"],c=[];for(let _=0;_<3;_+=1)c[_]=Wt(Lt(l,r,_));return i=new At({props:{aggregates:l[10],handleLabelClick:l[40],plan:l[11],stats:l[24],groups:xe,changingLines:l[32],idealValues:ms}}),{c(){e=P("div"),t=P("div"),s=P("select");for(let _=0;_<3;_+=1)c[_].c();n=C(),Ke(i.$$.fragment),this.h()},l(_){e=D(_,"DIV",{slot:!0});var g=b(e);t=D(g,"DIV",{class:!0});var d=b(t);s=D(d,"SELECT",{class:!0});var v=b(s);for(let w=0;w<3;w+=1)c[w].l(v);v.forEach(h),d.forEach(h),n=B(g),Qe(i.$$.fragment,g),g.forEach(h),this.h()},h(){p(s,"class","svelte-1fv06xq"),l[11]===void 0&&Oe(()=>l[56].call(s)),p(t,"class","plan-selector svelte-1fv06xq"),p(e,"slot","body")},m(_,g){N(_,e,g),u(e,t),u(t,s);for(let d=0;d<3;d+=1)c[d].m(s,null);Ze(s,l[11]),u(e,n),Je(i,e,null),a=!0,o||(f=ce(s,"change",l[56]),o=!0)},p(_,g){if(g&0){r=["assembly","senate","congress"];let v;for(v=0;v<3;v+=1){const w=Lt(_,r,v);c[v]?c[v].p(w,g):(c[v]=Wt(w),c[v].c(),c[v].m(s,null))}for(;v<3;v+=1)c[v].d(1)}g[0]&2048&&Ze(s,_[11]);const d={};g[0]&1024&&(d.aggregates=_[10]),g[0]&2048&&(d.plan=_[11]),g[0]&16777216&&(d.stats=_[24]),i.$set(d)},i(_){a||(ee(i.$$.fragment,_),a=!0)},o(_){ie(i.$$.fragment,_),a=!1},d(_){_&&h(e),be(c,_),Xe(i),o=!1,f()}}}function Yt(l){let e,t=l[67]+"",s,n;return{c(){e=P("option"),s=z(t),this.h()},l(i){e=D(i,"OPTION",{});var a=b(e);s=R(a,t),a.forEach(h),this.h()},h(){e.__value=n=l[67],e.value=e.__value},m(i,a){N(i,e,a),u(e,s)},p:He,d(i){i&&h(e)}}}function Bs(l){let e,t,s,n,i,a,o,f,r=Object.keys(kl),c=[];for(let _=0;_<r.length;_+=1)c[_]=Yt(Mt(l,r,_));return{c(){e=P("div"),t=P("select");for(let _=0;_<c.length;_+=1)c[_].c();s=C(),n=P("label"),i=P("input"),a=z(`
					Inspect streets`),this.h()},l(_){e=D(_,"DIV",{slot:!0,class:!0});var g=b(e);t=D(g,"SELECT",{class:!0});var d=b(t);for(let w=0;w<c.length;w+=1)c[w].l(d);d.forEach(h),s=B(g),n=D(g,"LABEL",{class:!0});var v=b(n);i=D(v,"INPUT",{type:!0}),a=R(v,`
					Inspect streets`),v.forEach(h),g.forEach(h),this.h()},h(){p(t,"class","svelte-1fv06xq"),l[15]===void 0&&Oe(()=>l[57].call(t)),p(i,"type","checkbox"),p(n,"class","svelte-1fv06xq"),p(e,"slot","body"),p(e,"class","views svelte-1fv06xq")},m(_,g){N(_,e,g),u(e,t);for(let d=0;d<c.length;d+=1)c[d].m(t,null);Ze(t,l[15]),u(e,s),u(e,n),u(n,i),i.checked=l[7],u(n,a),o||(f=[ce(t,"change",l[57]),ce(i,"change",l[58])],o=!0)},p(_,g){if(g&0){r=Object.keys(kl);let d;for(d=0;d<r.length;d+=1){const v=Mt(_,r,d);c[d]?c[d].p(v,g):(c[d]=Yt(v),c[d].c(),c[d].m(t,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=r.length}g[0]&32768&&Ze(t,_[15]),g[0]&128&&(i.checked=_[7])},d(_){_&&h(e),be(c,_),o=!1,al(f)}}}function zs(l){let e,t,s,n;return{c(){e=P("button"),t=z("+"),this.h()},l(i){e=D(i,"BUTTON",{slot:!0});var a=b(e);t=R(a,"+"),a.forEach(h),this.h()},h(){p(e,"slot","title")},m(i,a){N(i,e,a),u(e,t),s||(n=ce(e,"click",l[59]),s=!0)},p:He,d(i){i&&h(e),s=!1,n()}}}function Rs(l){let e,t,s,n,i,a,o,f,r;return t=new At({props:{type:"community",drawings:l[9],delDrawing:l[37],groups:xe,stats:l[24]}}),{c(){e=P("div"),Ke(t.$$.fragment),s=C(),n=P("button"),i=P("b"),a=z("[SAVE]"),this.h()},l(c){e=D(c,"DIV",{slot:!0,class:!0});var _=b(e);Qe(t.$$.fragment,_),s=B(_),n=D(_,"BUTTON",{style:!0});var g=b(n);i=D(g,"B",{});var d=b(i);a=R(d,"[SAVE]"),d.forEach(h),g.forEach(h),_.forEach(h),this.h()},h(){he(n,"font-size","13px"),p(e,"slot","body"),p(e,"class","community svelte-1fv06xq")},m(c,_){N(c,e,_),Je(t,e,null),u(e,s),u(e,n),u(n,i),u(i,a),o=!0,f||(r=ce(n,"click",l[38]),f=!0)},p(c,_){const g={};_[0]&512&&(g.drawings=c[9]),_[0]&16777216&&(g.stats=c[24]),t.$set(g)},i(c){o||(ee(t.$$.fragment,c),o=!0)},o(c){ie(t.$$.fragment,c),o=!1},d(c){c&&h(e),Xe(t),f=!1,r()}}}function Us(l){let e,t,s,n,i,a,o,f,r,c,_,g,d,v,w,A,T,O,I,W,$,X,K,Z,M,L,F,y=l[2],V=[];for(let m=0;m<y.length;m+=1)V[m]=zt(Bt(l,y,m));let x=l[3],G=[];for(let m=0;m<x.length;m+=1)G[m]=Rt(Ct(l,x,m));let Q=l[21]&&Ut(l);return f=new Ss({props:{groups:xe,levels:Tl,colors:Vl,dynamicVars:l[2],variable:l[17],metric:l[20],showPluralities:l[18],pluralityVars:l[5],periods:ml,breaks:l[31]}}),c=new Sl({props:{panelName:"plans",panels:l[6],togglePanel:l[39],$$slots:{body:[Cs]},$$scope:{ctx:l}}}),g=new Sl({props:{panelName:"views",panels:l[6],togglePanel:l[39],$$slots:{body:[Bs]},$$scope:{ctx:l}}}),v=new Sl({props:{panelName:"communities",panels:l[6],togglePanel:l[39],$$slots:{body:[Rs],title:[zs]},$$scope:{ctx:l}}}),A=new ws({props:{viewBox:l[19],labelSize:l[30],draggedBgs:l[8],data:l[1],path:pl,color:l[36],changingLines:l[32],neighbor:l[35],showPluralities:l[18],metric:l[20],period:l[16],tractVars:l[4],panels:l[6],drawings:l[9],plan:l[11],points:l[27],tractMesh:l[34],bgMesh:l[25],mesh:l[33],aggregates:l[10],obj:l[0],handleLabelClick:l[40],congressPlans:l[12],plans:l[26],startDrag:l[41],endDrag:l[42],handleMouseMove:l[43],viewCutoff:l[29],showOnlyFocusDistricts:l[22],showStreets:l[7],streets:l[13]}}),{c(){e=P("div"),t=P("div"),s=P("select"),n=P("optgroup");for(let m=0;m<V.length;m+=1)V[m].c();i=P("optgroup");for(let m=0;m<G.length;m+=1)G[m].c();a=C(),Q&&Q.c(),o=C(),Ke(f.$$.fragment),r=C(),Ke(c.$$.fragment),_=C(),Ke(g.$$.fragment),d=C(),Ke(v.$$.fragment),w=C(),Ke(A.$$.fragment),T=C(),O=P("div"),I=P("p"),W=z("Questions, suggestions, concerns --> "),$=P("a"),X=z("jason.kao@columbia.edu"),K=z("."),this.h()},l(m){e=D(m,"DIV",{class:!0,style:!0});var S=b(e);t=D(S,"DIV",{class:!0});var H=b(t);s=D(H,"SELECT",{style:!0,class:!0});var re=b(s);n=D(re,"OPTGROUP",{label:!0});var ge=b(n);for(let J=0;J<V.length;J+=1)V[J].l(ge);ge.forEach(h),i=D(re,"OPTGROUP",{label:!0});var oe=b(i);for(let J=0;J<G.length;J+=1)G[J].l(oe);oe.forEach(h),re.forEach(h),a=B(H),Q&&Q.l(H),o=B(H),Qe(f.$$.fragment,H),r=B(H),Qe(c.$$.fragment,H),_=B(H),Qe(g.$$.fragment,H),d=B(H),Qe(v.$$.fragment,H),H.forEach(h),w=B(S),Qe(A.$$.fragment,S),T=B(S),O=D(S,"DIV",{class:!0});var U=b(O);I=D(U,"P",{});var j=b(I);W=R(j,"Questions, suggestions, concerns --> "),$=D(j,"A",{href:!0});var q=b($);X=R(q,"jason.kao@columbia.edu"),q.forEach(h),K=R(j,"."),j.forEach(h),U.forEach(h),S.forEach(h),this.h()},h(){p(n,"label","Redistricting data"),p(i,"label","American Community Survey data"),he(s,"width",l[3].includes(l[17])?"auto":"calc(var(--control-width) - 20px)"),p(s,"class","svelte-1fv06xq"),l[17]===void 0&&Oe(()=>l[52].call(s)),p(t,"class","controls svelte-1fv06xq"),p($,"href","mailto:jason.kao@console.edu"),p(O,"class","footer svelte-1fv06xq"),p(e,"class","container svelte-1fv06xq"),he(e,"cursor",l[23]?"crosshair":"auto"),he(e,"--container-font",l[28]+"px"),he(e,"--control-width",270+(l[28]-16)*10+"px"),Oe(()=>l[60].call(e))},m(m,S){N(m,e,S),u(e,t),u(t,s),u(s,n);for(let H=0;H<V.length;H+=1)V[H].m(n,null);u(s,i);for(let H=0;H<G.length;H+=1)G[H].m(i,null);Ze(s,l[17]),u(t,a),Q&&Q.m(t,null),u(t,o),Je(f,t,null),u(t,r),Je(c,t,null),u(t,_),Je(g,t,null),u(t,d),Je(v,t,null),u(e,w),Je(A,e,null),u(e,T),u(e,O),u(O,I),u(I,W),u(I,$),u($,X),u(I,K),Z=ns(e,l[60].bind(e)),M=!0,L||(F=[ce(window,"keydown",l[44]),ce(s,"change",l[52])],L=!0)},p(m,S){if(S[0]&4){y=m[2];let j;for(j=0;j<y.length;j+=1){const q=Bt(m,y,j);V[j]?V[j].p(q,S):(V[j]=zt(q),V[j].c(),V[j].m(n,null))}for(;j<V.length;j+=1)V[j].d(1);V.length=y.length}if(S[0]&8){x=m[3];let j;for(j=0;j<x.length;j+=1){const q=Ct(m,x,j);G[j]?G[j].p(q,S):(G[j]=Rt(q),G[j].c(),G[j].m(i,null))}for(;j<G.length;j+=1)G[j].d(1);G.length=x.length}(!M||S[0]&131080)&&he(s,"width",m[3].includes(m[17])?"auto":"calc(var(--control-width) - 20px)"),S[0]&131084&&Ze(s,m[17]),m[21]?Q?(Q.p(m,S),S[0]&2097152&&ee(Q,1)):(Q=Ut(m),Q.c(),ee(Q,1),Q.m(t,o)):Q&&(Re(),ie(Q,1,1,()=>{Q=null}),Ue());const H={};S[0]&4&&(H.dynamicVars=m[2]),S[0]&131072&&(H.variable=m[17]),S[0]&1048576&&(H.metric=m[20]),S[0]&262144&&(H.showPluralities=m[18]),S[0]&32&&(H.pluralityVars=m[5]),S[1]&1&&(H.breaks=m[31]),f.$set(H);const re={};S[0]&64&&(re.panels=m[6]),S[0]&16780288|S[2]&2097152&&(re.$$scope={dirty:S,ctx:m}),c.$set(re);const ge={};S[0]&64&&(ge.panels=m[6]),S[0]&32896|S[2]&2097152&&(ge.$$scope={dirty:S,ctx:m}),g.$set(ge);const oe={};S[0]&64&&(oe.panels=m[6]),S[0]&25166336|S[2]&2097152&&(oe.$$scope={dirty:S,ctx:m}),v.$set(oe);const U={};S[0]&524288&&(U.viewBox=m[19]),S[0]&1073741824&&(U.labelSize=m[30]),S[0]&256&&(U.draggedBgs=m[8]),S[0]&2&&(U.data=m[1]),S[0]&262144&&(U.showPluralities=m[18]),S[0]&1048576&&(U.metric=m[20]),S[0]&65536&&(U.period=m[16]),S[0]&16&&(U.tractVars=m[4]),S[0]&64&&(U.panels=m[6]),S[0]&512&&(U.drawings=m[9]),S[0]&2048&&(U.plan=m[11]),S[0]&134217728&&(U.points=m[27]),S[0]&33554432&&(U.bgMesh=m[25]),S[0]&1024&&(U.aggregates=m[10]),S[0]&1&&(U.obj=m[0]),S[0]&4096&&(U.congressPlans=m[12]),S[0]&67108864&&(U.plans=m[26]),S[0]&536870912&&(U.viewCutoff=m[29]),S[0]&4194304&&(U.showOnlyFocusDistricts=m[22]),S[0]&128&&(U.showStreets=m[7]),S[0]&8192&&(U.streets=m[13]),A.$set(U),(!M||S[0]&8388608)&&he(e,"cursor",m[23]?"crosshair":"auto"),(!M||S[0]&268435456)&&he(e,"--container-font",m[28]+"px"),(!M||S[0]&268435456)&&he(e,"--control-width",270+(m[28]-16)*10+"px")},i(m){M||(ee(Q),ee(f.$$.fragment,m),ee(c.$$.fragment,m),ee(g.$$.fragment,m),ee(v.$$.fragment,m),ee(A.$$.fragment,m),M=!0)},o(m){ie(Q),ie(f.$$.fragment,m),ie(c.$$.fragment,m),ie(g.$$.fragment,m),ie(v.$$.fragment,m),ie(A.$$.fragment,m),M=!1},d(m){m&&h(e),be(V,m),be(G,m),Q&&Q.d(),Xe(f),Xe(c),Xe(g),Xe(v),Xe(A),Z(),L=!1,al(F)}}}async function Ys({fetch:l}){const e=await(await l(`${Dl}/output_census.topojson`)).json(),t=cs(e.objects.census),s=ts(e,t).features.map(ql),n=["pop","cvap"],i=[...s.reduce((o,f)=>{const r=Object.keys(f.properties).filter(c=>[...n,"GEOID","senate","assembly","congress"].every(_=>!c.includes(_))&&c===c.toLowerCase()).map(c=>c.split("_")[0]);return new Set([...o,...r])},[])],a=s.reduce((o,f,r)=>(o[f.properties.GEOID]=r,o),{});return{props:{topoData:e,obj:t,data:s,neighbors:ss(t.geometries),dynamicVars:n,staticVars:i,idToIndex:a,tractVars:["asiaentry","workers"],pluralityVars:["asiaentry"]}}}function Hs(l,e,t){let s,n,i,a,o,{topoData:f,obj:r,neighbors:c,data:_,dynamicVars:g,staticVars:d,tractVars:v,pluralityVars:w,idToIndex:A}=e,T=[],O,I=!0,W=!1,$,X,K,Z,M=[],L=[],F=[],y={},V="assembly",x,G,Q,m,S,H=18,re,ge=2183,oe=Object.keys(kl)[0];const U=E=>il(f,r,E),j=pl(U((E,se)=>Ae(E).substring(0,11)!==Ae(se).substring(0,11)));as(async()=>{t(25,x=pl(ql(U((se,Y)=>Ae(se)!==Ae(Y)))));const E=await Promise.all([hs(),_s()]);t(26,G=E[0]),t(27,m=E[1]),t(29,ge=_.length)});let q;const J=E=>_[E].properties[V];function te(E){const se=J(E),Y=new Set(c[E].map(J).filter(fe=>fe!==se));if(Y.size===1)t(0,r.geometries[E].properties[V]=q=Y.values().next().value,r);else if(Y.has(q))t(0,r.geometries[E].properties[V]=q,r);else return;t(0,r)}let we="present",ue="pop";const pe={pop:[0,.1,.2,.4,.6],cvap:[0,.1,.2,.4,.6]};let me=!1;function je({properties:E}){if(!E.ALAND)return"#fff";const se=E[`${n}_total`];if(w.includes(n)){const Y=ne=>E[`${n}_${ne}`];if(Y(ml[0])===null)return"#eee";const fe=[...ml].sort((ne,ye)=>Y(ye)-Y(ne));return el[ml.indexOf(fe[0])]}else if(d.includes(n)){if(!Fl(i(E)))return"#eee";if(se<=10)return"#fff";for(let Y=1;Y<a.length;Y++)if(i(E)<a[Y])return el[Y];return el[a.length-1]}else{if(se<=10)return"#fff";const Y=fe=>E[`${n}_${fe}`]/E[`${n}_total`];if(me){const fe=xe.filter(ze=>Y(ze)>.5)[0];if(fe!==void 0)return Vl[fe]+Tl[se<130?0:se<200?1:2];const ne=[...xe].sort((ze,Fe)=>Y(Fe)-Y(ze)),ye=Y(ne[0])-Y(ne[1]);return Vl[ne[0]]+Tl[ye<.093?0:1]}else{const fe=pe[ue];for(let ne=1;ne<fe.length;ne++)if(Y("asian")<fe[ne])return bl[ne-1];return bl[fe.length-1]}}}const De=async()=>t(12,Q=await gs()),Ve=async()=>t(13,S=await ps());function k(E){const se=typeof E[0]=="string"?E.map(Te=>_[A[Te]].properties):E.map(Te=>Te.properties),Y=(Te,Ge)=>se.reduce((Qt,Ol)=>Qt+(Ol[Te]||0)*(Ge&&Ol[Ge]||1),0),fe=Te=>Y(Te,"pop20_total")/Y("pop20_total"),ne=(Te,Ge)=>Y(`${Te}_${Ge}`)/Y(`${Te}_total`);let ye=Y("pop10_asian"),ze=Y("pop20_asian"),Fe=Y("cvap10_asian"),Kt=Y("cvap19_asian");const Al={income:fe("income"),hhlang:ne("hhlang","asian"),benefits:ne("families","benefits"),pop20_total:Y("pop20_total"),pct_increase:(ze-ye)/ye,pct_increase_cvap:(Kt-Fe)/Fe};return["pop20","cvap19","pop10","cvap10"].forEach(Te=>xe.forEach(Ge=>Al[Te+Ge]=ne(Te,Ge))),Al}const ke=E=>t(9,L=L.filter((se,Y)=>Y!==E));async function Se(){try{await fetch(`${Dl}/data.json`,{method:"POST",body:JSON.stringify(L)})}catch(E){console.error(E)}}async function ll(){try{const E=await fetch(`${Dl}/data.json`);t(9,L=(await E.json()).map(se=>Ll(Ml({},se),{stats:k(se.ids)})))}catch(E){console.error(E)}}const ol=E=>t(6,T=T.includes(E)?T.filter(se=>se!==E):[...T,E]);function wl(E){F.includes(E)?t(10,F=F.filter(se=>se!==E)):t(10,F=[...F,E])}const ve=()=>t(48,X=!0),Ne=()=>t(48,X=t(23,$=!1)),de=E=>$&&X&&(M.length===0?t(8,M=[Ae(E)]):M.push(Ae(E)));function rl({key:E}){}const fl=[[]];function Ie(){ue=Pl(this),t(17,ue),t(3,d),t(2,g)}function Ce(){we=this.__value,t(16,we)}const cl=()=>t(18,me=!me);function ul(){V=Pl(this),t(11,V)}function Be(){oe=Pl(this),t(15,oe)}function hl(){O=this.checked,t(7,O)}const _l=()=>t(23,$=!0);function gl(){re=this.clientWidth,t(14,re)}return l.$$set=E=>{"topoData"in E&&t(45,f=E.topoData),"obj"in E&&t(0,r=E.obj),"neighbors"in E&&t(46,c=E.neighbors),"data"in E&&t(1,_=E.data),"dynamicVars"in E&&t(2,g=E.dynamicVars),"staticVars"in E&&t(3,d=E.staticVars),"tractVars"in E&&t(4,v=E.tractVars),"pluralityVars"in E&&t(5,w=E.pluralityVars),"idToIndex"in E&&t(47,A=E.idToIndex)},l.$$.update=()=>{if(l.$$.dirty[0]&32768&&t(19,s=kl[oe]),l.$$.dirty[0]&196616&&t(20,n=d.includes(ue)?ue:ue+(we==="past"?10:ue==="cvap"?19:20)),l.$$.dirty[0]&1048576&&t(51,i={income:E=>E[n],hhlang:E=>E[`${n}_asian`]/E[`${n}_total`],graduates:E=>(E[`${n}_hs_grad`]+E[`${n}_ba_above`])/E[`${n}_total`],families:E=>E[`${n}_benefits`]/E[`${n}_total`],workers:E=>E[`${n}_publictransport`]/E[`${n}_total`]}[n]),l.$$.dirty[0]&1441806|l.$$.dirty[1]&1572864&&t(31,a=g.includes(ue)&&!me?pe[ue]:pe[n]||!d.includes(n)||n==="asiaentry"||t(50,pe[n]=is(_.map(E=>i(E.properties)).filter(Fl),6),pe)),l.$$.dirty[0]&770|l.$$.dirty[1]&131072&&!X&&M.length>0){if(M[0]===M[M.length-1]){const E=new Set(M),se=os(U((fe,ne)=>us(E.has(Ae(fe)),E.has(Ae(ne)))).coordinates.flat()),Y=_.filter(fe=>rs(fs(fe.geometry.coordinates[0]),se)).map(Ae);t(9,L=[...L,{outline:pl({type:"LineString",coordinates:se}),ids:Y,stats:k(Y)}])}t(8,M=[])}if(l.$$.dirty[0]&6144&&V.startsWith("congress")&&Q===void 0&&De(),l.$$.dirty[0]&8320&&O&&S===void 0&&Ve(),l.$$.dirty[0]&64|l.$$.dirty[1]&262144&&T.includes("communities")&&!Z&&(ll(),t(49,Z=!0)),l.$$.dirty[0]&542720&&t(30,o=(V.endsWith("_names")?.9:1.1)/((re-410)/s[2])),l.$$.dirty[0]&3073)for(let E=0;E<F.length;E++){const[se,Y]=F[E].split(",");se===V&&t(24,y[F[E]]=k(r.geometries.filter(({properties:fe})=>Y===""+fe[V])),y)}},[r,_,g,d,v,w,T,O,M,L,F,V,Q,S,re,oe,we,ue,me,s,n,I,W,$,y,x,G,m,H,ge,o,a,K,U,j,te,je,ke,Se,ol,wl,ve,Ne,de,rl,f,c,A,X,Z,pe,i,Ie,Ce,fl,cl,ul,Be,hl,_l,gl]}class Ks extends tl{constructor(e){super();sl(this,e,Hs,Us,nl,{topoData:45,obj:0,neighbors:46,data:1,dynamicVars:2,staticVars:3,tractVars:4,pluralityVars:5,idToIndex:47},null,[-1,-1,-1])}}export{Ks as default,Ys as load};
